let $b796f8545f443add$var$minSol,$dee51d581a1bcde1$var$big_cum_x,$dee51d581a1bcde1$var$big_cum_y,$dee51d581a1bcde1$var$stepTimeoutID,$573019d054676ac0$var$rollOverMesh,$573019d054676ac0$var$CamPos3D,$573019d054676ac0$var$root_spec,$573019d054676ac0$var$globalBest,$573019d054676ac0$var$queue,$573019d054676ac0$var$workers;function $parcel$export(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var $72efb86545d0c3db$export$457c04524e13d553,$c885ef874cf44bbc$var$MiniSat,$f2e274ef11f87062$var$Logic,$parcel$global=globalThis;function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}function $parcel$defineInteropFlag(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}var $parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequirea401;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequirea401=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("cmoHh",function(e,t){!function(e,t,n){function i(e){var t=this,n=a();t.next=function(){var e=2091639*t.s0+23283064365386963e-26*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1)}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new i(e),s=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+(2097152*a()|0)*11102230246251565e-32},a.quick=a,s&&("object"==typeof s&&r(s,n),a.state=function(){return r(n,{})}),a}function a(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var i=.02519603282416938*(e+=t.charCodeAt(n));e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=4294967296*i}return(e>>>0)*23283064365386963e-26}}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.alea=s}(0,e,"function"==typeof define&&define)}),parcelRegister("euRi5",function(e,t){!function(e,t,n){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new i(e),s=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,i=(e+t)/2097152;while(0===i)return i},a.int32=n.next,a.quick=a,s&&("object"==typeof s&&r(s,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s}(0,e,"function"==typeof define&&define)}),parcelRegister("hDsEw",function(e,t){!function(e,t,n){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var i=0;i<n.length+64;i++)t.x^=0|n.charCodeAt(i),i==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new i(e),s=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,i=(e+t)/2097152;while(0===i)return i},a.int32=n.next,a.quick=a,s&&("object"==typeof s&&r(s,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s}(0,e,"function"==typeof define&&define)}),parcelRegister("3J2Zm",function(e,t){!function(e,t,n){function i(e){var t=this;t.next=function(){var e,n,i=t.x,r=t.i;return e=i[r],e^=e>>>7,n=e^e<<24^((e=i[r+1&7])^e>>>10)^((e=i[r+3&7])^e>>>3)^((e=i[r+4&7])^e<<7),e=i[r+7&7],e^=e<<13,n^=e^e<<9,i[r]=n,t.i=r+1&7,n},function(e,t){var n,i,r=[];if(t===(0|t))i=r[0]=t;else for(n=0,t=""+t;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(i=8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new i(e),s=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,i=(e+t)/2097152;while(0===i)return i},a.int32=n.next,a.quick=a,s&&(s.x&&r(s,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s}(0,e,"function"==typeof define&&define)}),parcelRegister("6Px8M",function(e,t){!function(e,t,n){function i(e){var t=this;t.next=function(){var e,n,i=t.w,r=t.X,s=t.i;return t.w=i=i+1640531527|0,n=r[s+34&127],e=r[s=s+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[s]=n^e,t.i=s,n+(i^i>>>16)|0},function(e,t){var n,i,r,s,a,o=[],l=128;for(t===(0|t)?(i=t,t=null):(t+="\0",i=0,l=Math.max(l,t.length)),r=0,s=-32;s<l;++s)t&&(i^=t.charCodeAt((s+32)%t.length)),0===s&&(a=i),i^=i<<10,i^=i>>>15,i^=i<<4,i^=i>>>13,s>=0&&(a=a+1640531527|0,r=0==(n=o[127&s]^=i+a)?r+1:0);for(r>=128&&(o[127&(t&&t.length||0)]=-1),r=127,s=512;s>0;--s)i=o[r+34&127],n=o[r=r+1&127],i^=i<<13,n^=n<<17,i^=i>>>15,n^=n>>>12,o[r]=i^n;e.w=a,e.X=o,e.i=r}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new i(e),s=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,i=(e+t)/2097152;while(0===i)return i},a.int32=n.next,a.quick=a,s&&(s.X&&r(s,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s}(0,e,"function"==typeof define&&define)}),parcelRegister("lDm0S",function(e,t){!function(e,t,n){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,i=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-i|0,i=i<<24^i>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-i|0,t.d=i<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var i=0;i<n.length+20;i++)t.b^=0|n.charCodeAt(i),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new i(e),s=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,i=(e+t)/2097152;while(0===i)return i},a.int32=n.next,a.quick=a,s&&("object"==typeof s&&r(s,n),a.state=function(){return r(n,{})}),a}t&&t.exports?t.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s}(0,e,"function"==typeof define&&define)}),parcelRegister("kjyEk",function(e,t){}),parcelRegister("7UxrJ",function(module,exports){$parcel$export(module.exports,"FACE_NAMES",()=>FACE_NAMES),$parcel$export(module.exports,"cubeTypeColor",()=>cubeTypeColor),$parcel$export(module.exports,"patchColor",()=>patchColor),$parcel$export(module.exports,"DynamicPolycubeCubeType",()=>DynamicPolycubeCubeType),$parcel$export(module.exports,"ruleToDec",()=>ruleToDec),$parcel$export(module.exports,"parseDecRule",()=>parseDecRule),$parcel$export(module.exports,"cubeTypeFromJSON",()=>cubeTypeFromJSON);var $kUBvx=parcelRequire("kUBvx"),$ilwiq=parcelRequire("ilwiq"),$cqQJN=parcelRequire("cqQJN");let FACE_NAMES=["left","right","bottom","top","back","front"];function cubeTypeColor(e){return(0,$kUBvx.selectColor)(e)}function patchColor(e){return(0,$kUBvx.selectColor)(Math.abs(e)-1)}class PolycubeCubeType{typeName;type_id;patches;_state_size;constructor(e,t,n,i=0){console.assert("number"==typeof e),console.assert(6==t.length),this.type_id=e,void 0===n&&(n=`CT${e}`),this.typeName=n,this.patches=t,this._state_size=i}clone(e){return new PolycubeCubeType(e,this.patches.map(e=>new $cqQJN.PolycubePatch(e.color,e.direction,e.alignDir,e.state_var,e.activation_var)),`CT${e}`,this.state_size())}state_size(){return this._state_size}rotate(e){console.assert(void 0!==e);let t=[];this.patches.forEach((n,i)=>{console.assert(i==n.direction),n.direction;let r=(0,$kUBvx.RULE_ORDER)[n.direction].clone().applyQuaternion(e).round();t[(0,$kUBvx.RULE_ORDER).indexOf(r)]=n.rotate(e)});let n=this.clone(this.type_id);return n.patches=t,n}hasAllostery(){return!1}patch_color(e){return this.patches[e].color}face(e){return this.patches[e]}toDec(){return this.patches.map((e,t)=>{if(0===e.color)return"";{let n=Math.round(2/Math.PI*(0,$kUBvx.getSignedAngle)($kUBvx.FACE_ROTATIONS[t],e.alignDir,$kUBvx.RULE_ORDER[t])+4)%4;return 0==n&&0==e.state_var&&0==e.activation_var?`${e.color}`:0==e.state_var&&0==e.activation_var?`${e.color}:${n}`:`${e.color}:${n}:${e.state_var}:${e.activation_var}`}}).join("|")}num_colored_faces(){return this.patches.map(e=>e.color).reduce((e,t)=>e+Math.min(Math.abs(t),1))}colored_faces_idxs(){return this.patches.filter(e=>e.color).map(e=>e.direction)}patch_colors(){return new Set(this.patches.filter(e=>0!=e.color).map(e=>e.color))}getPatchCoords(){return this.patches.filter(e=>0!==e.color).map(e=>$kUBvx.RULE_ORDER[e.direction])}patch_allosterically_controlled(e){throw Error()}reeval_conditionals(e){return[[],[]]}equals(e){return this.type_id==e.type_id&&this.typeName==e.typeName&&this.state_size()==e.state_size()&&this.patches.map((t,n)=>{let i=e.patches[n];return t.color==i.color&&1e-5>(0,$kUBvx.RULE_ORDER)[t.direction].distanceTo($kUBvx.RULE_ORDER[i.direction])&&1e-5>t.alignDir.distanceTo(i.alignDir)&&t.state_var==i.state_var&&t.activation_var==i.activation_var}).reduce((e,t)=>e&&t)}}class DynamicPolycubeCubeType extends PolycubeCubeType{effects;constructor(e,t,n,i=0,r=[]){super(e,t,n,i),this.effects=r}hasAllostery(){return this.patches.some((e,t)=>this.patch_allosterically_controlled(t))}patch_allosterically_controlled(e){return 0!=this.patches[e].activation_var}reeval_conditionals(e){let t;let n=[...e];do t=!1,this.effects.forEach(e=>{e.sources.every(e=>n[e])&&!n[e.target]&&(t=!0,n[e.target]=!0)});while(t)return[e.map((e,t)=>e!==n[t]),e=n]}clone(e){let t=toDynamic(super.clone(e));return t.effects=this.effects.map(e=>JSON.parse(JSON.stringify(e))),t}update_state_size(){let e=this.state_size();this.patches.forEach(t=>{e=Math.max(e=Math.max(e,t.state_var),Math.abs(t.activation_var))}),this._state_size=Math.max(e,...this.effects.map(e=>e.target))}toDec(){let e=super.toDec();return this.effects.length>0&&(e+="@"+this.effects.map(e=>`[${e.sources.join(",")}]>${e.target}`).join(";")),e}}function toDynamic(e){let t=new DynamicPolycubeCubeType(e.type_id,e.patches,e.typeName,e.state_size());return Object.assign(t,e),t}function ruleToDec(e){return e.length>0?e.map(e=>e.toDec()).join("_"):""}function parseDecRule(rulesStr){return rulesStr.split("_").map((s,j)=>{let delimeter,effects,patch_conditionals=(0,$kUBvx.RULE_ORDER).map(e=>"");var face_props,state_size=1;delimeter=s.match(/^([^|]*\|){5}[^|]*@?.*?$/)?"|":"#";let patches=s.split("@")[0].split(delimeter).map((face,i)=>{let state_var="0",activation_var="0",i_color=0,r=(0,$kUBvx.FACE_ROTATIONS)[i].clone(),i_orientation=0,logic="";if(""!=face.trim()){face_props=face.split(":");let color=face_props[0];if(face_props.length>1){let patchOriIdx=face_props[1];if(4==face_props.length){[color,patchOriIdx,state_var,activation_var]=face_props;var i_state_var=parseInt(state_var),i_activation_var=parseInt(activation_var);state_size=Math.max(state_size,Math.abs(i_state_var),Math.abs(i_activation_var))}if(3==face_props.length){[color,patchOriIdx,logic]=face_props;let b=Array($kUBvx.RULE_ORDER.length).fill(!1);if(logic.trim().length>0)try{eval(logic)}catch(e){throw`Malformed rule - malformed logical statement ${logic[i]}`}}if(i_orientation=parseInt(patchOriIdx),isNaN(i_orientation))throw"Malformed rule";3==face_props.length&&(patch_conditionals[i]=logic)}if(i_color=parseInt(color),isNaN(i_color))throw"Malformed rule";r.applyAxisAngle($kUBvx.RULE_ORDER[i],i_orientation*Math.PI/2).round()}return new $cqQJN.PolycubePatch(i_color,i,r,i_state_var,i_activation_var)});console.assert(patches.length==$kUBvx.RULE_ORDER.length),s.search("@")>-1?effects=s.split("@")[1].split(";").map(e=>{let[t,n]=e.split(">"),i=/-?\d+/g,r=t.match(i);return{target:Number(n),sources:r.map(Number)}}):(effects=[],state_size=1);let ct=new DynamicPolycubeCubeType(j,patches,`CT${j}`,state_size,effects);return ct.update_state_size(),ct})}function parseHexRule(e){let t=$kUBvx.RULE_ORDER.length,n=[];for(let i=0;i<e.length;i+=2*t){let r=[];for(let n=0;n<t;n++){let t=parseInt(e.substring(i+2*n,i+2*n+2),16).toString(2).padStart(8,"0"),s=parseInt(t[0],2),a=parseInt(t.substring(1,6),2),o=parseInt(t.substring(6,8),2),l=(0,$kUBvx.FACE_ROTATIONS)[n].clone();l.applyAxisAngle($kUBvx.RULE_ORDER[n],o*Math.PI/2),l.round(),r.push({color:a*(s?-1:1),alignDir:l})}n.push(r)}return n.map((e,t)=>new DynamicPolycubeCubeType(t,e.map((e,t)=>new $cqQJN.PolycubePatch(e.color,t,e.alignDir,0,0)),`CT${t}`))}function ruleToHex(e){let t=6,n="";for(let i=0;i<e.length;i++)for(let r=0;r<t;r++){let t=e[i].face(r);n+=parseInt((t.color<0?"1":"0")+Math.abs(t.color).toString(2).padStart(5,"0")+(((0,$kUBvx.getSignedAngle)($kUBvx.FACE_ROTATIONS[r],t.alignDir,$kUBvx.RULE_ORDER[r])*(2/Math.PI)+4)%4).toString(2).padStart(2,"0"),2).toString(16).padStart(2,"0")}return n}function cubeTypeFromJSON(e,t){let n=(0,$kUBvx.RULE_ORDER).map((e,t)=>new $cqQJN.PolycubePatch(0,e.clone(),(0,$kUBvx.FACE_ROTATIONS)[t].clone()));return(e.patches.forEach((e,t)=>{let i;if("dir"in e){let t=new $ilwiq.Vector3(e.dir.x,e.dir.y,e.dir.z);i=(0,$kUBvx.RULE_ORDER).indexOf(t)}else i=t;console.assert(0==n[i].color),"alignDir"in e?n[i]=new $cqQJN.PolycubePatch(e.color,(0,$kUBvx.RULE_ORDER)[i].clone(),new $ilwiq.Vector3(e.alignDir.x,e.alignDir.y,e.alignDir.z)):n[i]=new $cqQJN.PolycubePatch(e.color,void 0,(0,$kUBvx.strToVec)(e.orientation)),n[i].state_var=e.state_var,n[i].activation_var=e.activation_var}),"effects"in e&&"state_size"in e)?new DynamicPolycubeCubeType(e.type_id,n,t,e.state_size,e.effects):new DynamicPolycubeCubeType(e.type_id,n,t,1,[])}}),parcelRegister("kUBvx",function(e,t){$parcel$export(e.exports,"range",()=>r),$parcel$export(e.exports,"selectColor",()=>s),$parcel$export(e.exports,"getNc",()=>a),$parcel$export(e.exports,"getNt",()=>o),$parcel$export(e.exports,"vectorAbs",()=>l),$parcel$export(e.exports,"saveString",()=>u),$parcel$export(e.exports,"vecToStr",()=>c),$parcel$export(e.exports,"strToVec",()=>h),$parcel$export(e.exports,"getSignedAngle",()=>f),$parcel$export(e.exports,"allRotations",()=>x),$parcel$export(e.exports,"randstr",()=>d),$parcel$export(e.exports,"shuffleArray",()=>p),$parcel$export(e.exports,"randOrdering",()=>m),$parcel$export(e.exports,"rotCoords",()=>v),$parcel$export(e.exports,"coordEqual",()=>_),$parcel$export(e.exports,"compCols",()=>y),$parcel$export(e.exports,"signed_axis_angle",()=>b),$parcel$export(e.exports,"RULE_ORDER",()=>M),$parcel$export(e.exports,"saveArrayBuffer",()=>w),$parcel$export(e.exports,"FACE_ROTATIONS",()=>S),$parcel$export(e.exports,"getUrlVars",()=>T),$parcel$export(e.exports,"combinations",()=>C),parcelRequire("3mnBW");var n=parcelRequire("ilwiq"),i=parcelRequire("crxWL");function*r(e,t,n){void 0===t&&(t=e,e=0),void 0===n&&(n=1);let i=0;if(!(n>0&&e>=t||n<0&&e<=t))for(let r=e;n>0?r<t:r>t;r+=n)i++,yield r;return i}function s(e,t=50,n=65){let i=137.508*e;return`hsl(${i%360},${t}%,${n}%)`}function a(e){return new Set([].concat.apply([],e.map(e=>e.map(e=>Math.abs(e.color))))).size-1}function o(e){return e.length}function l(e){return new n.Vector3(Math.abs(e.x),Math.abs(e.y),Math.abs(e.z))}function u(e,t){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function c(e){return`(${e.x},${e.y},${e.z})`}function h(e){let t=e.slice(1,-1).split(",").map(e=>parseInt(e));return new n.Vector3(t[0],t[1],t[2])}function f(e,t,i){console.assert(e instanceof n.Vector3),console.assert(t instanceof n.Vector3),console.assert(i instanceof n.Vector3);let r=e.clone().cross(t),s=e.clone().dot(t),a=Math.atan2(r.length(),s);return r.equals(i)||(a*=-1),a}function d(e=8,t){let n="abcdefghijklmnopqrstuvwxyz",i=n.length,r="";for(let s=0;s<e;s++)t?r+=n.charAt(Math.floor(t()*i)):r+=n.charAt(Math.floor(Math.random()*i));return r}function p(e,t){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}}function m(e,t){let n=Array(e);for(let t=0;t<e;t++)n[t]=t;return p(n,t),n}function g(e){let t=new n.Vector3;return e.forEach(e=>t.add(e)),t.divideScalar(e.length),t}function v(e,t){return e.map(e=>e.clone().applyMatrix3(t))}function _(e,t){let n=e.map(e=>e.clone()),i=t.map(e=>e.clone());if(n.length!=i.length)return console.log("Coords not equal (different lengths)"),!1;let r=g(n).round(),s=g(i).round();for(let e of(n.forEach(e=>e.sub(r)),i.forEach(e=>e.sub(s)),x()))if(y(n,v(i,e)))return!0;return console.log("Coords not equal (Could not find fitting rotation)"),!1}function y(e,t){console.assert(e.length==t.length);let n=new Set(e.map(e=>e.toArray().toString())),i=new Set(t.map(e=>e.toArray().toString()));if(n.size!==i.size)return!1;for(let e of n)if(!i.has(e))return!1;return!0}function x(){return[new n.Matrix3().set(1,0,0,0,1,0,0,0,1),new n.Matrix3().set(0,-1,0,1,0,0,0,0,1),new n.Matrix3().set(-1,0,0,0,-1,0,0,0,1),new n.Matrix3().set(0,1,0,-1,0,0,0,0,1),new n.Matrix3().set(0,0,1,0,1,0,-1,0,0),new n.Matrix3().set(-1,0,0,0,1,0,0,0,-1),new n.Matrix3().set(0,0,-1,0,1,0,1,0,0),new n.Matrix3().set(1,0,0,0,0,-1,0,1,0),new n.Matrix3().set(1,0,0,0,-1,0,0,0,-1),new n.Matrix3().set(1,0,0,0,0,1,0,-1,0),new n.Matrix3().set(0,-1,0,0,0,1,-1,0,0),new n.Matrix3().set(0,-1,0,-1,0,0,0,0,-1),new n.Matrix3().set(0,-1,0,0,0,-1,1,0,0),new n.Matrix3().set(0,0,1,1,0,0,0,1,0),new n.Matrix3().set(0,1,0,1,0,0,0,0,-1),new n.Matrix3().set(0,0,-1,1,0,0,0,-1,0),new n.Matrix3().set(0,0,-1,0,-1,0,-1,0,0),new n.Matrix3().set(0,0,1,0,-1,0,1,0,0),new n.Matrix3().set(-1,0,0,0,0,1,0,1,0),new n.Matrix3().set(-1,0,0,0,0,-1,0,-1,0),new n.Matrix3().set(0,1,0,0,0,-1,-1,0,0),new n.Matrix3().set(0,1,0,0,0,1,1,0,0),new n.Matrix3().set(0,0,-1,-1,0,0,0,1,0),new n.Matrix3().set(0,0,1,-1,0,0,0,-1,0)]}function b(e,t,n){var i=e.clone().angleTo(t),r=e.clone().cross(t);return 0>n.clone().dot(r)&&(i=-i),i}function w(e,t){(0,i.saveAs)(new Blob([e],{type:"application/octet-stream"}),t)}Map.prototype.setdefault=function(e,t){return this.has(e)||this.set(e,t),this.get(e)},Object.defineProperty(Array.prototype,"aeq",{value:function(e,t){return e instanceof Array&&this.every((n,i)=>n instanceof Array?n.aeq(e[i],t):void 0==t?n==e[i]:t(n,e[i]))}}),Object.defineProperty(Array.prototype,"nPr",{value:function(e){if(!e)return[];let t=this;return this.reduce(function(n,i,r){var s=t.slice(0,r).concat(t.slice(r+1)).nPr(e-1),a=s.length?s.map(function(e){return[i].concat(e)}):[[i]];return n.concat(a)},[])}}),String.prototype.escapeHTML=function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")};let M=[new n.Vector3(-1,0,0),new n.Vector3(1,0,0),new n.Vector3(0,-1,0),new n.Vector3(0,1,0),new n.Vector3(0,0,-1),new n.Vector3(0,0,1)];M.indexOf=function(e,t){return this.findIndex(t=>e.equals(t),t)};let S=[new n.Vector3(0,-1,0),new n.Vector3(0,1,0),new n.Vector3(0,0,-1),new n.Vector3(0,0,1),new n.Vector3(-1,0,0),new n.Vector3(1,0,0)];function T(){let e={};return new URLSearchParams(window.location.search).forEach((t,n)=>{e[n]=t}),e}function E(e){return e[e.length-1]}function*A(e,t,n=[]){let i=n.length;if(i===t){yield n;return}for(let s of r(i?E(n)+1:0,e-t+i))yield*A(e,t,n.concat(s))}function*C(e,t){for(let n of A(e.length,t))yield n.map(t=>e[t])}}),parcelRegister("3mnBW",function(e,t){var n=parcelRequire("cmoHh"),i=parcelRequire("euRi5"),r=parcelRequire("hDsEw"),s=parcelRequire("3J2Zm"),a=parcelRequire("6Px8M"),o=parcelRequire("lDm0S"),l=parcelRequire("ixfky");l.alea=n,l.xor128=i,l.xorwow=r,l.xorshift7=s,l.xor4096=a,l.tychei=o,e.exports=l}),parcelRegister("ixfky",function(e,t){!function(t,n,i){var r,s=256,a=6,o=52,l="random",u=i.pow(s,a),c=i.pow(2,o),h=2*c,f=s-1;function d(e,t,r){var o=[],f=v(g((t=!0==t?{entropy:!0}:t||{}).entropy?[e,y(n)]:null==e?_():e,3),o),d=new p(o),x=function(){for(var e=d.g(a),t=u,n=0;e<c;)e=(e+n)*s,t*=s,n=d.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|d.g(4)},x.quick=function(){return d.g(4)/4294967296},x.double=x,v(y(d.S),n),(t.pass||r||function(e,t,n,r){return(r&&(r.S&&m(r,d),e.state=function(){return m(d,{})}),n)?(i[l]=e,t):e})(x,f,"global"in t?t.global:this==i,t.state)}function p(e){var t,n=e.length,i=this,r=0,a=i.i=i.j=0,o=i.S=[];for(n||(e=[n++]);r<s;)o[r]=r++;for(r=0;r<s;r++)o[r]=o[a=f&a+e[r%n]+(t=o[r])],o[a]=t;(i.g=function(e){for(var t,n=0,r=i.i,a=i.j,o=i.S;e--;)t=o[r=f&r+1],n=n*s+o[f&(o[r]=o[a=f&a+t])+(o[a]=t)];return i.i=r,i.j=a,n})(s)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,i=[],r=typeof e;if(t&&"object"==r)for(n in e)try{i.push(g(e[n],t-1))}catch(e){}return i.length?i:"string"==r?e:e+"\0"}function v(e,t){for(var n,i=e+"",r=0;r<i.length;)t[f&r]=f&(n^=19*t[f&r])+i.charCodeAt(r++);return y(t)}function _(){try{var e;return r&&(e=r.randomBytes)?e=e(s):(e=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(e)),y(e)}catch(e){var i=t.navigator,a=i&&i.plugins;return[+new Date,t,a,t.screen,y(n)]}}function y(e){return String.fromCharCode.apply(0,e)}if(v(i.random(),n),e.exports){e.exports=d;try{r=parcelRequire("kjyEk")}catch(e){}}else"function"==typeof define&&define.amd?define(function(){return d}):i["seed"+l]=d}("undefined"!=typeof self?self:e.exports,[],Math)}),parcelRegister("ilwiq",function(e,t){let n;$parcel$export(e.exports,"MOUSE",()=>r),$parcel$export(e.exports,"TOUCH",()=>s),$parcel$export(e.exports,"DoubleSide",()=>p),$parcel$export(e.exports,"RepeatWrapping",()=>ea),$parcel$export(e.exports,"ClampToEdgeWrapping",()=>eo),$parcel$export(e.exports,"MirroredRepeatWrapping",()=>el),$parcel$export(e.exports,"NearestFilter",()=>eu),$parcel$export(e.exports,"NearestMipmapNearestFilter",()=>ec),$parcel$export(e.exports,"NearestMipmapLinearFilter",()=>eh),$parcel$export(e.exports,"LinearFilter",()=>ef),$parcel$export(e.exports,"LinearMipmapNearestFilter",()=>ed),$parcel$export(e.exports,"LinearMipmapLinearFilter",()=>ep),$parcel$export(e.exports,"RGBAFormat",()=>eC),$parcel$export(e.exports,"InterpolateDiscrete",()=>te),$parcel$export(e.exports,"InterpolateLinear",()=>tt),$parcel$export(e.exports,"LinearEncoding",()=>ta),$parcel$export(e.exports,"sRGBEncoding",()=>to),$parcel$export(e.exports,"EventDispatcher",()=>ty),$parcel$export(e.exports,"MathUtils",()=>tk),$parcel$export(e.exports,"Vector2",()=>tU),$parcel$export(e.exports,"Matrix3",()=>tF),$parcel$export(e.exports,"Color",()=>tK),$parcel$export(e.exports,"Source",()=>t0),$parcel$export(e.exports,"Quaternion",()=>t9),$parcel$export(e.exports,"Vector3",()=>t7),$parcel$export(e.exports,"Box3",()=>nn),$parcel$export(e.exports,"Matrix4",()=>nL),$parcel$export(e.exports,"BufferAttribute",()=>il),$parcel$export(e.exports,"BufferGeometry",()=>ix),$parcel$export(e.exports,"Mesh",()=>iF),$parcel$export(e.exports,"BoxGeometry",()=>iV),$parcel$export(e.exports,"PerspectiveCamera",()=>iZ),$parcel$export(e.exports,"OrthographicCamera",()=>rd),$parcel$export(e.exports,"Group",()=>aM),$parcel$export(e.exports,"WebGLRenderer",()=>aD),$parcel$export(e.exports,"Scene",()=>aN),$parcel$export(e.exports,"LineBasicMaterial",()=>aO),$parcel$export(e.exports,"Line",()=>aB),$parcel$export(e.exports,"SphereGeometry",()=>o3),$parcel$export(e.exports,"MeshLambertMaterial",()=>o9),$parcel$export(e.exports,"PointLight",()=>lM),$parcel$export(e.exports,"AmbientLight",()=>lS),$parcel$export(e.exports,"PropertyBinding",()=>lN),$parcel$export(e.exports,"Raycaster",()=>lO),$parcel$export(e.exports,"Spherical",()=>lU);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */let i="147",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,o=1,l=2,u=1,c=2,h=3,f=0,d=1,p=2,m=0,g=1,v=2,_=3,y=4,x=5,b=100,w=101,M=102,S=103,T=104,E=200,A=201,C=202,L=203,R=204,D=205,P=206,N=207,O=208,I=209,k=210,U=0,F=1,z=2,B=3,V=4,H=5,G=6,W=7,j=0,q=1,X=2,$=0,Y=1,J=2,Z=3,K=4,Q=5,ee=300,et=301,en=302,ei=303,er=304,es=306,ea=1e3,eo=1001,el=1002,eu=1003,ec=1004,eh=1005,ef=1006,ed=1007,ep=1008,em=1009,eg=1010,ev=1011,e_=1012,ey=1013,ex=1014,eb=1015,ew=1016,eM=1017,eS=1018,eT=1020,eE=1021,eA=1022,eC=1023,eL=1024,eR=1025,eD=1026,eP=1027,eN=1028,eO=1029,eI=1030,ek=1031,eU=1033,eF=33776,ez=33777,eB=33778,eV=33779,eH=35840,eG=35841,eW=35842,ej=35843,eq=36196,eX=37492,e$=37496,eY=37808,eJ=37809,eZ=37810,eK=37811,eQ=37812,e0=37813,e1=37814,e2=37815,e3=37816,e4=37817,e5=37818,e6=37819,e8=37820,e9=37821,e7=36492,te=2300,tt=2301,tn=2302,ti=2400,tr=2401,ts=2402,ta=3e3,to=3001,tl=3200,tu=3201,tc=0,th=1,tf="srgb",td="srgb-linear",tp=7680,tm=519,tg=35044,tv="300 es",t_=1035;class ty{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}let tx=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],tb=1234567,tw=Math.PI/180,tM=180/Math.PI;function tS(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(tx[255&e]+tx[e>>8&255]+tx[e>>16&255]+tx[e>>24&255]+"-"+tx[255&t]+tx[t>>8&255]+"-"+tx[t>>16&15|64]+tx[t>>24&255]+"-"+tx[63&n|128]+tx[n>>8&255]+"-"+tx[n>>16&255]+tx[n>>24&255]+tx[255&i]+tx[i>>8&255]+tx[i>>16&255]+tx[i>>24&255]).toLowerCase()}function tT(e,t,n){return Math.max(t,Math.min(n,e))}function tE(e,t){return(e%t+t)%t}function tA(e,t,n){return(1-n)*e+n*t}function tC(e,t,n,i){return tA(e,t,1-Math.exp(-n*i))}function tL(e,t=1){return t-Math.abs(tE(e,2*t)-t)}function tR(e){return e*tw}function tD(e){return e*tM}function tP(e){return(e&e-1)==0&&0!==e}function tN(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function tO(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function tI(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}var tk=Object.freeze({__proto__:null,DEG2RAD:tw,RAD2DEG:tM,generateUUID:tS,clamp:tT,euclideanModulo:tE,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:tA,damp:tC,pingpong:tL,smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(tb=e);let t=tb+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:tR,radToDeg:tD,isPowerOfTwo:tP,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:tN,setQuaternionFromProperEuler:function(e,t,n,i,r){let s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),u=s((t+i)/2),c=a((t+i)/2),h=s((t-i)/2),f=a((t-i)/2),d=s((i-t)/2),p=a((i-t)/2);switch(r){case"XYX":e.set(o*c,l*h,l*f,o*u);break;case"YZY":e.set(l*f,o*c,l*h,o*u);break;case"ZXZ":e.set(l*h,l*f,o*c,o*u);break;case"XZX":e.set(o*c,l*p,l*d,o*u);break;case"YXY":e.set(l*d,o*c,l*p,o*u);break;case"ZYZ":e.set(l*p,l*d,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:tI,denormalize:tO});class tU{constructor(e=0,t=0){tU.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tF{constructor(){tF.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,s,a,o,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=r,u[5]=o,u[6]=n,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],g=i[6],v=i[1],_=i[4],y=i[7],x=i[2],b=i[5],w=i[8];return r[0]=s*p+a*v+o*x,r[3]=s*m+a*_+o*b,r[6]=s*g+a*y+o*w,r[1]=l*p+u*v+c*x,r[4]=l*m+u*_+c*b,r[7]=l*g+u*y+c*w,r[2]=h*p+f*v+d*x,r[5]=h*m+f*_+d*b,r[8]=h*g+f*y+d*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-n*r*u+n*a*o+i*r*l-i*s*o}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=u*s-a*l,h=a*o-u*r,f=l*r-s*o,d=t*c+n*h+i*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);let p=1/d;return e[0]=c*p,e[1]=(i*l-u*n)*p,e[2]=(a*n-i*s)*p,e[3]=h*p,e[4]=(u*t-i*o)*p,e[5]=(i*r-a*t)*p,e[6]=f*p,e[7]=(n*o-l*t)*p,e[8]=(s*t-n*r)*p,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){let o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(tz.makeScale(e,t)),this}rotate(e){return this.premultiply(tz.makeRotation(-e)),this}translate(e,t){return this.premultiply(tz.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let tz=new tF;function tB(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function tV(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function tH(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function tG(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let tW={[tf]:{[td]:tH},[td]:{[tf]:tG}},tj={legacyMode:!0,get workingColorSpace(){return td},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(tW[t]&&void 0!==tW[t][n]){let i=tW[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},tq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tX={r:0,g:0,b:0},t$={h:0,s:0,l:0},tY={h:0,s:0,l:0};function tJ(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}function tZ(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class tK{constructor(e,t,n){if(this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n)return this.set(e);return this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tf){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,tj.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=tj.workingColorSpace){return this.r=e,this.g=t,this.b=n,tj.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=tj.workingColorSpace){if(e=tE(e,1),t=tT(t,0,1),n=tT(n,0,1),0===t)this.r=this.g=this.b=n;else{let i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=tJ(r,i,e+1/3),this.g=tJ(r,i,e),this.b=tJ(r,i,e-1/3)}return tj.toWorkingColorSpace(this,i),this}setStyle(e,t=tf){let n;function i(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;let r=n[1],s=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,tj.toWorkingColorSpace(this,t),i(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,tj.toWorkingColorSpace(this,t),i(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let n=parseFloat(e[1])/360,r=parseFloat(e[2])/100,s=parseFloat(e[3])/100;return i(e[4]),this.setHSL(n,r,s,t)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=n[1],i=e.length;if(3===i)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,tj.toWorkingColorSpace(this,t),this;if(6===i)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,tj.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=tf){let n=tq[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=tH(e.r),this.g=tH(e.g),this.b=tH(e.b),this}copyLinearToSRGB(e){return this.r=tG(e.r),this.g=tG(e.g),this.b=tG(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tf){return tj.fromWorkingColorSpace(tZ(this,tX),e),tT(255*tX.r,0,255)<<16^tT(255*tX.g,0,255)<<8^tT(255*tX.b,0,255)<<0}getHexString(e=tf){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=tj.workingColorSpace){let n,i;tj.fromWorkingColorSpace(tZ(this,tX),t);let r=tX.r,s=tX.g,a=tX.b,o=Math.max(r,s,a),l=Math.min(r,s,a),u=(l+o)/2;if(l===o)n=0,i=0;else{let e=o-l;switch(i=u<=.5?e/(o+l):e/(2-o-l),o){case r:n=(s-a)/e+(s<a?6:0);break;case s:n=(a-r)/e+2;break;case a:n=(r-s)/e+4}n/=6}return e.h=n,e.s=i,e.l=u,e}getRGB(e,t=tj.workingColorSpace){return tj.fromWorkingColorSpace(tZ(this,tX),t),e.r=tX.r,e.g=tX.g,e.b=tX.b,e}getStyle(e=tf){return(tj.fromWorkingColorSpace(tZ(this,tX),e),e!==tf)?`color(${e} ${tX.r} ${tX.g} ${tX.b})`:`rgb(${255*tX.r|0},${255*tX.g|0},${255*tX.b|0})`}offsetHSL(e,t,n){return this.getHSL(t$),t$.h+=e,t$.s+=t,t$.l+=n,this.setHSL(t$.h,t$.s,t$.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(t$),e.getHSL(tY);let n=tA(t$.h,tY.h,t),i=tA(t$.s,tY.s,t),r=tA(t$.l,tY.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}tK.NAMES=tq;class tQ{static getDataURL(e){let t;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===n&&(n=tV("canvas")),n.width=e.width,n.height=e.height;let i=n.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=n}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=tV("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*tH(r[e]/255);return n.putImageData(i,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*tH(t[e]/255)):t[e]=tH(t[e]);return{data:t,width:e.width,height:e.height}}}}class t0{constructor(e=null){this.isSource=!0,this.uuid=tS(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(t1(i[t].image)):e.push(t1(i[t]))}else e=t1(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function t1(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?tQ.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let t2=0;class t3 extends ty{constructor(e=t3.DEFAULT_IMAGE,t=t3.DEFAULT_MAPPING,n=eo,i=eo,r=ef,s=ep,a=eC,o=em,l=t3.DEFAULT_ANISOTROPY,u=ta){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:t2++}),this.uuid=tS(),this.name="",this.source=new t0(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new tU(0,0),this.repeat=new tU(1,1),this.center=new tU(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tF,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ee)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ea:e.x=e.x-Math.floor(e.x);break;case eo:e.x=e.x<0?0:1;break;case el:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ea:e.y=e.y-Math.floor(e.y);break;case eo:e.y=e.y<0?0:1;break;case el:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}t3.DEFAULT_IMAGE=null,t3.DEFAULT_MAPPING=ee,t3.DEFAULT_ANISOTROPY=1;class t4{constructor(e=0,t=0,n=0,i=1){t4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;let s=.01,a=.1,o=e.elements,l=o[0],u=o[4],c=o[8],h=o[1],f=o[5],d=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(u-h)<s&&Math.abs(c-p)<s&&Math.abs(d-m)<s){if(Math.abs(u+h)<a&&Math.abs(c+p)<a&&Math.abs(d+m)<a&&Math.abs(l+f+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;let e=(l+1)/2,o=(f+1)/2,v=(g+1)/2,_=(u+h)/4,y=(c+p)/4,x=(d+m)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(i=_/(n=Math.sqrt(e)),r=y/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(n=_/(i=Math.sqrt(o)),r=x/i):v<s?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(v)),i=x/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-d)*(m-d)+(c-p)*(c-p)+(h-u)*(h-u));return .001>Math.abs(v)&&(v=1),this.x=(m-d)/v,this.y=(c-p)/v,this.z=(h-u)/v,this.w=Math.acos((l+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class t5 extends ty{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new t4(0,0,e,t),this.scissorTest=!1,this.viewport=new t4(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new t3(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ef,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new t0(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class t6 extends t3{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=eu,this.minFilter=eu,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class t8 extends t3{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=eu,this.minFilter=eu,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class t9{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[s+0],f=r[s+1],d=r[s+2],p=r[s+3];if(0===a){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===a){e[t+0]=h,e[t+1]=f,e[t+2]=d,e[t+3]=p;return}if(c!==p||o!==h||l!==f||u!==d){let e=1-a,t=o*h+l*f+u*d+c*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){let r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}let r=a*n;if(o=o*e+h*r,l=l*e+f*r,u=u*e+d*r,c=c*e+p*r,e===1-a){let e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,i,r,s){let a=n[i],o=n[i+1],l=n[i+2],u=n[i+3],c=r[s],h=r[s+1],f=r[s+2],d=r[s+3];return e[t]=a*d+u*c+o*f-l*h,e[t+1]=o*d+u*h+l*c-a*f,e[t+2]=l*d+u*f+a*h-o*c,e[t+3]=u*d-a*c-o*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),u=a(i/2),c=a(r/2),h=o(n/2),f=o(i/2),d=o(r/2);switch(s){case"XYZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"YXZ":this._x=h*u*c+l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"ZXY":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c-h*f*d;break;case"ZYX":this._x=h*u*c-l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c+h*f*d;break;case"YZX":this._x=h*u*c+l*f*d,this._y=l*f*c+h*u*d,this._z=l*u*d-h*f*c,this._w=l*u*c-h*f*d;break;case"XZY":this._x=h*u*c-l*f*d,this._y=l*f*c-h*u*d,this._z=l*u*d+h*f*c,this._w=l*u*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=n+a+c;if(h>0){let e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>c){let e=2*Math.sqrt(1+n-a-c);this._w=(u-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>c){let e=2*Math.sqrt(1+a-n-c);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+u)/e}else{let e=2*Math.sqrt(1+c-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tT(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+s*a+i*l-r*o,this._y=i*u+s*o+r*a-n*l,this._z=r*u+s*l+n*o-i*a,this._w=s*u-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,i=this._y,r=this._z,s=this._w,a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;let o=1-a*a;if(o<=Number.EPSILON){let e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),u=Math.atan2(l,a),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=s*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=r*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class t7{constructor(e=0,t=0,n=0){t7.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(nt.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(nt.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){let t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,u=o*n+a*t-r*i,c=o*i+r*n-s*t,h=-r*t-s*n-a*i;return this.x=l*o+-(h*r)+-(u*a)- -(c*s),this.y=u*o+-(h*s)+-(c*r)- -(l*a),this.z=c*o+-(h*a)+-(l*s)- -(u*r),this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ne.copy(this).projectOnVector(e),this.sub(ne)}reflect(e){return this.sub(ne.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(tT(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let ne=new t7,nt=new t9;class nn{constructor(e=new t7(1/0,1/0,1/0),t=new t7(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let l=e[o],u=e[o+1],c=e[o+2];l<t&&(t=l),u<n&&(n=u),c<i&&(i=c),l>r&&(r=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let l=e.getX(o),u=e.getY(o),c=e.getZ(o);l<t&&(t=l),u<n&&(n=u),c<i&&(i=c),l>r&&(r=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=nr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){if(t&&void 0!=n.attributes&&void 0!==n.attributes.position){let t=n.attributes.position;for(let n=0,i=t.count;n<i;n++)nr.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(nr)}else null===n.boundingBox&&n.computeBoundingBox(),ns.copy(n.boundingBox),ns.applyMatrix4(e.matrixWorld),this.union(ns)}let i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)&&!(e.z<this.min.z)&&!(e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)&&!(e.max.z<this.min.z)&&!(e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,nr),nr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(nf),nd.subVectors(this.max,nf),na.subVectors(e.a,nf),no.subVectors(e.b,nf),nl.subVectors(e.c,nf),nu.subVectors(no,na),nc.subVectors(nl,no),nh.subVectors(na,nl);let t=[0,-nu.z,nu.y,0,-nc.z,nc.y,0,-nh.z,nh.y,nu.z,0,-nu.x,nc.z,0,-nc.x,nh.z,0,-nh.x,-nu.y,nu.x,0,-nc.y,nc.x,0,-nh.y,nh.x,0];return!!(ng(t,na,no,nl,nd)&&ng(t=[1,0,0,0,1,0,0,0,1],na,no,nl,nd))&&(np.crossVectors(nu,nc),ng(t=[np.x,np.y,np.z],na,no,nl,nd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(nr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ni[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ni[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ni[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ni[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ni[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ni[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ni[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ni[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ni)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let ni=[new t7,new t7,new t7,new t7,new t7,new t7,new t7,new t7],nr=new t7,ns=new nn,na=new t7,no=new t7,nl=new t7,nu=new t7,nc=new t7,nh=new t7,nf=new t7,nd=new t7,np=new t7,nm=new t7;function ng(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){nm.fromArray(e,s);let a=r.x*Math.abs(nm.x)+r.y*Math.abs(nm.y)+r.z*Math.abs(nm.z),o=t.dot(nm),l=n.dot(nm),u=i.dot(nm);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>a)return!1}return!0}let nv=new nn,n_=new t7,ny=new t7;class nx{constructor(e=new t7,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):nv.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;n_.subVectors(e,this.center);let t=n_.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(n_,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ny.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(n_.copy(e.center).add(ny)),this.expandByPoint(n_.copy(e.center).sub(ny)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let nb=new t7,nw=new t7,nM=new t7,nS=new t7,nT=new t7,nE=new t7,nA=new t7;class nC{constructor(e=new t7,t=new t7(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nb)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=nb.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(nb.copy(this.direction).multiplyScalar(t).add(this.origin),nb.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){let r,s,a,o;nw.copy(e).add(t).multiplyScalar(.5),nM.copy(t).sub(e).normalize(),nS.copy(this.origin).sub(nw);let l=.5*e.distanceTo(t),u=-this.direction.dot(nM),c=nS.dot(this.direction),h=-nS.dot(nM),f=nS.lengthSq(),d=Math.abs(1-u*u);if(d>0){if(r=u*h-c,s=u*c-h,o=l*d,r>=0){if(s>=-o){if(s<=o){let e=1/d;r*=e,s*=e,a=r*(r+u*s+2*c)+s*(u*r+s+2*h)+f}else a=-(r=Math.max(0,-(u*(s=l)+c)))*r+s*(s+2*h)+f}else a=-(r=Math.max(0,-(u*(s=-l)+c)))*r+s*(s+2*h)+f}else s<=-o?(s=(r=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-h),l),a=-r*r+s*(s+2*h)+f):s<=o?(r=0,a=(s=Math.min(Math.max(-l,-h),l))*(s+2*h)+f):(s=(r=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-h),l),a=-r*r+s*(s+2*h)+f)}else s=u>0?-l:l,a=-(r=Math.max(0,-(u*s+c)))*r+s*(s+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(nM).multiplyScalar(s).add(nw),a}intersectSphere(e,t){nb.subVectors(e.center,this.origin);let n=nb.dot(this.direction),i=nb.dot(nb)-n*n,r=e.radius*e.radius;if(i>r)return null;let s=Math.sqrt(r-i),a=n-s,o=n+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let n,i,r,s,a,o;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return(l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),n>s||r>i)?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),c>=0?(a=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||a>i)?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return null!==this.intersectBox(e,nb)}intersectTriangle(e,t,n,i,r){let s;nT.subVectors(t,e),nE.subVectors(n,e),nA.crossVectors(nT,nE);let a=this.direction.dot(nA);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}nS.subVectors(this.origin,e);let o=s*this.direction.dot(nE.crossVectors(nS,nE));if(o<0)return null;let l=s*this.direction.dot(nT.cross(nS));if(l<0||o+l>a)return null;let u=-s*nS.dot(nA);return u<0?null:this.at(u/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nL{constructor(){nL.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,s,a,o,l,u,c,h,f,d,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nL().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,i=1/nR.setFromMatrixColumn(e,0).length(),r=1/nR.setFromMatrixColumn(e,1).length(),s=1/nR.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){let e=s*u,n=s*c,i=a*u,r=a*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){let e=o*u,n=o*c,i=l*u,r=l*c;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*c,t[5]=s*u,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){let e=o*u,n=o*c,i=l*u,r=l*c;t[0]=e-r*a,t[4]=-s*c,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*u,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){let e=s*u,n=s*c,i=a*u,r=a*c;t[0]=o*u,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*c,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){let e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*u,t[4]=r-e*c,t[8]=i*c+n,t[1]=c,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=n*c+i,t[10]=e-r*c}else if("XZY"===e.order){let e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+r,t[5]=s*u,t[9]=n*c-i,t[2]=i*c-n,t[6]=a*u,t[10]=r*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nP,e,nN)}lookAt(e,t,n){let i=this.elements;return nk.subVectors(e,t),0===nk.lengthSq()&&(nk.z=1),nk.normalize(),nO.crossVectors(n,nk),0===nO.lengthSq()&&(1===Math.abs(n.z)?nk.x+=1e-4:nk.z+=1e-4,nk.normalize(),nO.crossVectors(n,nk)),nO.normalize(),nI.crossVectors(nk,nO),i[0]=nO.x,i[4]=nI.x,i[8]=nk.x,i[1]=nO.y,i[5]=nI.y,i[9]=nk.y,i[2]=nO.z,i[6]=nI.z,i[10]=nk.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],x=n[15],b=i[0],w=i[4],M=i[8],S=i[12],T=i[1],E=i[5],A=i[9],C=i[13],L=i[2],R=i[6],D=i[10],P=i[14],N=i[3],O=i[7],I=i[11],k=i[15];return r[0]=s*b+a*T+o*L+l*N,r[4]=s*w+a*E+o*R+l*O,r[8]=s*M+a*A+o*D+l*I,r[12]=s*S+a*C+o*P+l*k,r[1]=u*b+c*T+h*L+f*N,r[5]=u*w+c*E+h*R+f*O,r[9]=u*M+c*A+h*D+f*I,r[13]=u*S+c*C+h*P+f*k,r[2]=d*b+p*T+m*L+g*N,r[6]=d*w+p*E+m*R+g*O,r[10]=d*M+p*A+m*D+g*I,r[14]=d*S+p*C+m*P+g*k,r[3]=v*b+_*T+y*L+x*N,r[7]=v*w+_*E+y*R+x*O,r[11]=v*M+_*A+y*D+x*I,r[15]=v*S+_*C+y*P+x*k,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],f=e[14],d=e[3];return d*(+r*o*c-i*l*c-r*a*h+n*l*h+i*a*f-n*o*f)+e[7]*(+t*o*f-t*l*h+r*s*h-i*s*f+i*l*u-r*o*u)+e[11]*(+t*l*c-t*a*f-r*s*c+n*s*f+r*a*u-n*l*u)+e[15]*(-i*a*u-t*o*c+t*a*h+i*s*c-n*s*h+n*o*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*h*l+p*o*f-a*m*f-c*o*g+a*h*g,_=d*h*l-u*m*l-d*o*f+s*m*f+u*o*g-s*h*g,y=u*p*l-d*c*l+d*a*f-s*p*f-u*a*g+s*c*g,x=d*c*o-u*p*o-d*a*h+s*p*h+u*a*m-s*c*m,b=t*v+n*_+i*y+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/b;return e[0]=v*w,e[1]=(p*h*r-c*m*r-p*i*f+n*m*f+c*i*g-n*h*g)*w,e[2]=(a*m*r-p*o*r+p*i*l-n*m*l-a*i*g+n*o*g)*w,e[3]=(c*o*r-a*h*r-c*i*l+n*h*l+a*i*f-n*o*f)*w,e[4]=_*w,e[5]=(u*m*r-d*h*r+d*i*f-t*m*f-u*i*g+t*h*g)*w,e[6]=(d*o*r-s*m*r-d*i*l+t*m*l+s*i*g-t*o*g)*w,e[7]=(s*h*r-u*o*r+u*i*l-t*h*l-s*i*f+t*o*f)*w,e[8]=y*w,e[9]=(d*c*r-u*p*r-d*n*f+t*p*f+u*n*g-t*c*g)*w,e[10]=(s*p*r-d*a*r+d*n*l-t*p*l-s*n*g+t*a*g)*w,e[11]=(u*a*r-s*c*r-u*n*l+t*c*l+s*n*f-t*a*f)*w,e[12]=x*w,e[13]=(u*p*i-d*c*i+d*n*h-t*p*h-u*n*m+t*c*m)*w,e[14]=(d*a*i-s*p*i-d*n*o+t*p*o+s*n*m-t*a*m)*w,e[15]=(s*c*i-u*a*i+u*n*o-t*c*o-s*n*h+t*a*h)*w,this}scale(e){let t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,u=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,u*a+n,u*o-i*s,0,l*o-i*a,u*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){let i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,u=s+s,c=a+a,h=r*l,f=r*u,d=r*c,p=s*u,m=s*c,g=a*c,v=o*l,_=o*u,y=o*c,x=n.x,b=n.y,w=n.z;return i[0]=(1-(p+g))*x,i[1]=(f+y)*x,i[2]=(d-_)*x,i[3]=0,i[4]=(f-y)*b,i[5]=(1-(h+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(d+_)*w,i[9]=(m-v)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){let i=this.elements,r=nR.set(i[0],i[1],i[2]).length(),s=nR.set(i[4],i[5],i[6]).length(),a=nR.set(i[8],i[9],i[10]).length();0>this.determinant()&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],nD.copy(this);let o=1/r,l=1/s,u=1/a;return nD.elements[0]*=o,nD.elements[1]*=o,nD.elements[2]*=o,nD.elements[4]*=l,nD.elements[5]*=l,nD.elements[6]*=l,nD.elements[8]*=u,nD.elements[9]*=u,nD.elements[10]*=u,t.setFromRotationMatrix(nD),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){let a=this.elements,o=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(s+r)/(s-r),f=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,s){let a=this.elements,o=1/(t-e),l=1/(n-i),u=1/(s-r),c=(t+e)*o,h=(n+i)*l,f=(s+r)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let nR=new t7,nD=new nL,nP=new t7(0,0,0),nN=new t7(1,1,1),nO=new t7,nI=new t7,nk=new t7,nU=new nL,nF=new t9;class nz{constructor(e=0,t=0,n=0,i=nz.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],u=i[9],c=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(tT(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-tT(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(a,f),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(tT(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-tT(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(h,f),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(tT(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-tT(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return nU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nU,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nF.setFromEuler(this),this.setFromQuaternion(nF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}nz.DefaultOrder="XYZ",nz.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class nB{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let nV=0,nH=new t7,nG=new t9,nW=new nL,nj=new t7,nq=new t7,nX=new t7,n$=new t9,nY=new t7(1,0,0),nJ=new t7(0,1,0),nZ=new t7(0,0,1),nK={type:"added"},nQ={type:"removed"};class n0 extends ty{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nV++}),this.uuid=tS(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n0.DefaultUp.clone();let e=new t7,t=new nz,n=new t9,i=new t7(1,1,1);function r(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nL},normalMatrix:{value:new tF}}),this.matrix=new nL,this.matrixWorld=new nL,this.matrixAutoUpdate=n0.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n0.DefaultMatrixWorldAutoUpdate,this.layers=new nB,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return nG.setFromAxisAngle(e,t),this.quaternion.multiply(nG),this}rotateOnWorldAxis(e,t){return nG.setFromAxisAngle(e,t),this.quaternion.premultiply(nG),this}rotateX(e){return this.rotateOnAxis(nY,e)}rotateY(e){return this.rotateOnAxis(nJ,e)}rotateZ(e){return this.rotateOnAxis(nZ,e)}translateOnAxis(e,t){return nH.copy(e).applyQuaternion(this.quaternion),this.position.add(nH.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nY,e)}translateY(e){return this.translateOnAxis(nJ,e)}translateZ(e){return this.translateOnAxis(nZ,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(nW.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?nj.copy(e):nj.set(e,t,n);let i=this.parent;this.updateWorldMatrix(!0,!1),nq.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nW.lookAt(nq,nj,this.up):nW.lookAt(nj,nq,this.up),this.quaternion.setFromRotationMatrix(nW),i&&(nW.extractRotation(i.matrixWorld),nG.setFromRotationMatrix(nW),this.quaternion.premultiply(nG.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(nK)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nQ)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(nQ)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),nW.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),nW.multiply(e.parent.matrixWorld)),e.applyMatrix4(nW),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){let i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nq,e,nX),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nq,n$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,i=t.length;n<i;n++){let i=t[n];(!0===i.matrixWorldAutoUpdate||!0===e)&&i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++){let n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){let i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material)}if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){let t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),u=s(e.animations),c=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=i,n;function s(e){let t=[];for(let n in e){let i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}n0.DefaultUp=new t7(0,1,0),n0.DefaultMatrixAutoUpdate=!0,n0.DefaultMatrixWorldAutoUpdate=!0;let n1=new t7,n2=new t7,n3=new t7,n4=new t7,n5=new t7,n6=new t7,n8=new t7,n9=new t7,n7=new t7,ie=new t7;class it{constructor(e=new t7,t=new t7,n=new t7){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),n1.subVectors(e,t),i.cross(n1);let r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){n1.subVectors(i,t),n2.subVectors(n,t),n3.subVectors(e,t);let s=n1.dot(n1),a=n1.dot(n2),o=n1.dot(n3),l=n2.dot(n2),u=n2.dot(n3),c=s*l-a*a;if(0===c)return r.set(-2,-1,-1);let h=1/c,f=(l*o-a*u)*h,d=(s*u-a*o)*h;return r.set(1-f-d,d,f)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,n4),n4.x>=0&&n4.y>=0&&n4.x+n4.y<=1}static getUV(e,t,n,i,r,s,a,o){return this.getBarycoord(e,t,n,i,n4),o.set(0,0),o.addScaledVector(r,n4.x),o.addScaledVector(s,n4.y),o.addScaledVector(a,n4.z),o}static isFrontFacing(e,t,n,i){return n1.subVectors(n,t),n2.subVectors(e,t),0>n1.cross(n2).dot(i)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return n1.subVectors(this.c,this.b),n2.subVectors(this.a,this.b),.5*n1.cross(n2).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return it.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return it.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return it.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return it.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return it.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,i;let r=this.a,s=this.b,a=this.c;n5.subVectors(s,r),n6.subVectors(a,r),n9.subVectors(e,r);let o=n5.dot(n9),l=n6.dot(n9);if(o<=0&&l<=0)return t.copy(r);n7.subVectors(e,s);let u=n5.dot(n7),c=n6.dot(n7);if(u>=0&&c<=u)return t.copy(s);let h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return n=o/(o-u),t.copy(r).addScaledVector(n5,n);ie.subVectors(e,a);let f=n5.dot(ie),d=n6.dot(ie);if(d>=0&&f<=d)return t.copy(a);let p=f*l-o*d;if(p<=0&&l>=0&&d<=0)return i=l/(l-d),t.copy(r).addScaledVector(n6,i);let m=u*d-f*c;if(m<=0&&c-u>=0&&f-d>=0)return n8.subVectors(a,s),i=(c-u)/(c-u+(f-d)),t.copy(s).addScaledVector(n8,i);let g=1/(m+p+h);return n=p*g,i=h*g,t.copy(r).addScaledVector(n5,n).addScaledVector(n6,i)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ii=0;class ir extends ty{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ii++}),this.uuid=tS(),this.name="",this.type="Material",this.blending=g,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=R,this.blendDst=D,this.blendEquation=b,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=B,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=tm,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tp,this.stencilZFail=tp,this.stencilZPass=tp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(void 0===i){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){let t=[];for(let n in e){let i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){let t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class is extends ir{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tK(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=j,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let ia=new t7,io=new tU;class il{constructor(e,t,n){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=tg,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)io.fromBufferAttribute(this,t),io.applyMatrix3(e),this.setXY(t,io.x,io.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix3(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix4(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyNormalMatrix(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.transformDirection(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=tO(t,this.array)),t}setX(e,t){return this.normalized&&(t=tI(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=tO(t,this.array)),t}setY(e,t){return this.normalized&&(t=tI(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=tO(t,this.array)),t}setZ(e,t){return this.normalized&&(t=tI(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=tO(t,this.array)),t}setW(e,t){return this.normalized&&(t=tI(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=tI(t,this.array),n=tI(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=tI(t,this.array),n=tI(n,this.array),i=tI(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=tI(t,this.array),n=tI(n,this.array),i=tI(i,this.array),r=tI(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==tg&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class iu extends il{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ic extends il{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ih extends il{constructor(e,t,n){super(new Float32Array(e),t,n)}}let id=0,ip=new nL,im=new n0,ig=new t7,iv=new nn,i_=new nn,iy=new t7;class ix extends ty{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:id++}),this.uuid=tS(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tB(e)?ic:iu)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new tF().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ip.makeRotationFromQuaternion(e),this.applyMatrix4(ip),this}rotateX(e){return ip.makeRotationX(e),this.applyMatrix4(ip),this}rotateY(e){return ip.makeRotationY(e),this.applyMatrix4(ip),this}rotateZ(e){return ip.makeRotationZ(e),this.applyMatrix4(ip),this}translate(e,t,n){return ip.makeTranslation(e,t,n),this.applyMatrix4(ip),this}scale(e,t,n){return ip.makeScale(e,t,n),this.applyMatrix4(ip),this}lookAt(e){return im.lookAt(e),im.updateMatrix(),this.applyMatrix4(im.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ig).negate(),this.translate(ig.x,ig.y,ig.z),this}setFromPoints(e){let t=[];for(let n=0,i=e.length;n<i;n++){let i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new ih(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new nn);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new t7(-1/0,-1/0,-1/0),new t7(1/0,1/0,1/0));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iv.setFromBufferAttribute(n),this.morphTargetsRelative?(iy.addVectors(this.boundingBox.min,iv.min),this.boundingBox.expandByPoint(iy),iy.addVectors(this.boundingBox.max,iv.max),this.boundingBox.expandByPoint(iy)):(this.boundingBox.expandByPoint(iv.min),this.boundingBox.expandByPoint(iv.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new nx);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new t7,1/0);return}if(e){let n=this.boundingSphere.center;if(iv.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];i_.setFromBufferAttribute(n),this.morphTargetsRelative?(iy.addVectors(iv.min,i_.min),iv.expandByPoint(iy),iy.addVectors(iv.max,i_.max),iv.expandByPoint(iy)):(iv.expandByPoint(i_.min),iv.expandByPoint(i_.max))}iv.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)iy.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(iy));if(t)for(let r=0,s=t.length;r<s;r++){let s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)iy.fromBufferAttribute(s,t),a&&(ig.fromBufferAttribute(e,t),iy.add(ig)),i=Math.max(i,n.distanceToSquared(iy))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new il(new Float32Array(4*a),4));let o=this.getAttribute("tangent").array,l=[],u=[];for(let e=0;e<a;e++)l[e]=new t7,u[e]=new t7;let c=new t7,h=new t7,f=new t7,d=new tU,p=new tU,m=new tU,g=new t7,v=new t7;function _(e,t,n){c.fromArray(i,3*e),h.fromArray(i,3*t),f.fromArray(i,3*n),d.fromArray(s,2*e),p.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(c),f.sub(c),p.sub(d),m.sub(d);let r=1/(p.x*m.y-m.x*p.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(r),v.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let e=0,t=y.length;e<t;++e){let t=y[e],i=t.start,r=t.count;for(let e=i,t=i+r;e<t;e+=3)_(n[e+0],n[e+1],n[e+2])}let x=new t7,b=new t7,w=new t7,M=new t7;function S(e){w.fromArray(r,3*e),M.copy(w);let t=l[e];x.copy(t),x.sub(w.multiplyScalar(w.dot(t))).normalize(),b.crossVectors(M,t);let n=0>b.dot(u[e])?-1:1;o[4*e]=x.x,o[4*e+1]=x.y,o[4*e+2]=x.z,o[4*e+3]=n}for(let e=0,t=y.length;e<t;++e){let t=y[e],i=t.start,r=t.count;for(let e=i,t=i+r;e<t;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new il(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let i=new t7,r=new t7,s=new t7,a=new t7,o=new t7,l=new t7,u=new t7,c=new t7;if(e)for(let h=0,f=e.count;h<f;h+=3){let f=e.getX(h+0),d=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,f),r.fromBufferAttribute(t,d),s.fromBufferAttribute(t,p),u.subVectors(s,r),c.subVectors(i,r),u.cross(c),a.fromBufferAttribute(n,f),o.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),a.add(u),o.add(u),l.add(u),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),u.subVectors(s,r),c.subVectors(i,r),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)iy.fromBufferAttribute(e,t),iy.normalize(),e.setXYZ(t,iy.x,iy.y,iy.z)}toNonIndexed(){function e(e,t){let n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i),a=0,o=0;for(let r=0,l=t.length;r<l;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new il(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new ix,n=this.index.array,i=this.attributes;for(let r in i){let s=e(i[r],n);t.setAttribute(r,s)}let r=this.morphAttributes;for(let i in r){let s=[],a=r[i];for(let t=0,i=a.length;t<i;t++){let i=e(a[t],n);s.push(i)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let e=0,n=s.length;e<n;e++){let n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let i=n[t];e.data.attributes[t]=i.toJSON(e.data)}let i={},r=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],s=[];for(let t=0,i=n.length;t<i;t++){let i=n[t];s.push(i.toJSON(e.data))}s.length>0&&(i[t]=s,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let i=e.attributes;for(let e in i){let n=i[e];this.setAttribute(e,n.clone(t))}let r=e.morphAttributes;for(let e in r){let n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let e=0,t=s.length;e<t;e++){let t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}let a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}let ib=new nL,iw=new nC,iM=new nx,iS=new t7,iT=new t7,iE=new t7,iA=new t7,iC=new t7,iL=new t7,iR=new t7,iD=new t7,iP=new t7,iN=new tU,iO=new tU,iI=new tU,ik=new t7,iU=new t7;class iF extends n0{constructor(e=new ix,t=new is){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){let n;let i=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),iM.copy(i.boundingSphere),iM.applyMatrix4(s),!1===e.ray.intersectsSphere(iM))||(ib.copy(s).invert(),iw.copy(e.ray).applyMatrix4(ib),null!==i.boundingBox&&!1===iw.intersectsBox(i.boundingBox)))return;let a=i.index,o=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,c=i.attributes.uv,h=i.attributes.uv2,f=i.groups,d=i.drawRange;if(null!==a){if(Array.isArray(r))for(let i=0,s=f.length;i<s;i++){let s=f[i],p=r[s.materialIndex],m=Math.max(s.start,d.start),g=Math.min(a.count,Math.min(s.start+s.count,d.start+d.count));for(let i=m,r=g;i<r;i+=3)(n=iB(this,p,e,iw,o,l,u,c,h,a.getX(i),a.getX(i+1),a.getX(i+2)))&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=s.materialIndex,t.push(n))}else{let i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);for(let f=i,d=s;f<d;f+=3)(n=iB(this,r,e,iw,o,l,u,c,h,a.getX(f),a.getX(f+1),a.getX(f+2)))&&(n.faceIndex=Math.floor(f/3),t.push(n))}}else if(void 0!==o){if(Array.isArray(r))for(let i=0,s=f.length;i<s;i++){let s=f[i],a=r[s.materialIndex],p=Math.max(s.start,d.start),m=Math.min(o.count,Math.min(s.start+s.count,d.start+d.count));for(let i=p,r=m;i<r;i+=3)(n=iB(this,a,e,iw,o,l,u,c,h,i,i+1,i+2))&&(n.faceIndex=Math.floor(i/3),n.face.materialIndex=s.materialIndex,t.push(n))}else{let i=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);for(let a=i,f=s;a<f;a+=3)(n=iB(this,r,e,iw,o,l,u,c,h,a,a+1,a+2))&&(n.faceIndex=Math.floor(a/3),t.push(n))}}}}function iz(e,t,n,i,r,s,a,o){let l;if(null===(l=t.side===d?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side!==p,o)))return null;iU.copy(o),iU.applyMatrix4(e.matrixWorld);let u=n.ray.origin.distanceTo(iU);return u<n.near||u>n.far?null:{distance:u,point:iU.clone(),object:e}}function iB(e,t,n,i,r,s,a,o,l,u,c,h){iS.fromBufferAttribute(r,u),iT.fromBufferAttribute(r,c),iE.fromBufferAttribute(r,h);let f=e.morphTargetInfluences;if(s&&f){iR.set(0,0,0),iD.set(0,0,0),iP.set(0,0,0);for(let e=0,t=s.length;e<t;e++){let t=f[e],n=s[e];0!==t&&(iA.fromBufferAttribute(n,u),iC.fromBufferAttribute(n,c),iL.fromBufferAttribute(n,h),a?(iR.addScaledVector(iA,t),iD.addScaledVector(iC,t),iP.addScaledVector(iL,t)):(iR.addScaledVector(iA.sub(iS),t),iD.addScaledVector(iC.sub(iT),t),iP.addScaledVector(iL.sub(iE),t)))}iS.add(iR),iT.add(iD),iE.add(iP)}e.isSkinnedMesh&&(e.boneTransform(u,iS),e.boneTransform(c,iT),e.boneTransform(h,iE));let d=iz(e,t,n,i,iS,iT,iE,ik);if(d){o&&(iN.fromBufferAttribute(o,u),iO.fromBufferAttribute(o,c),iI.fromBufferAttribute(o,h),d.uv=it.getUV(ik,iS,iT,iE,iN,iO,iI,new tU)),l&&(iN.fromBufferAttribute(l,u),iO.fromBufferAttribute(l,c),iI.fromBufferAttribute(l,h),d.uv2=it.getUV(ik,iS,iT,iE,iN,iO,iI,new tU));let e={a:u,b:c,c:h,normal:new t7,materialIndex:0};it.getNormal(iS,iT,iE,e.normal),d.face=e}return d}class iV extends ix{constructor(e=1,t=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};let a=this;i=Math.floor(i),r=Math.floor(r);let o=[],l=[],u=[],c=[],h=0,f=0;function d(e,t,n,i,r,s,d,p,m,g,v){let _=s/m,y=d/g,x=s/2,b=d/2,w=p/2,M=m+1,S=g+1,T=0,E=0,A=new t7;for(let s=0;s<S;s++){let a=s*y-b;for(let o=0;o<M;o++){let h=o*_-x;A[e]=h*i,A[t]=a*r,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=p>0?1:-1,u.push(A.x,A.y,A.z),c.push(o/m),c.push(1-s/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=h+t+M*e,i=h+t+M*(e+1),r=h+(t+1)+M*(e+1),s=h+(t+1)+M*e;o.push(n,i,s),o.push(i,r,s),E+=6}a.addGroup(f,E,v),f+=E,h+=T}d("z","y","x",-1,-1,n,t,e,s=Math.floor(s),r,0),d("z","y","x",1,-1,n,t,-e,s,r,1),d("x","z","y",1,1,e,n,t,i,s,2),d("x","z","y",1,-1,e,n,-t,i,s,3),d("x","y","z",1,-1,e,t,n,i,r,4),d("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new ih(l,3)),this.setAttribute("normal",new ih(u,3)),this.setAttribute("uv",new ih(c,2))}static fromJSON(e){return new iV(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function iH(e){let t={};for(let n in e)for(let i in t[n]={},e[n]){let r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function iG(e){let t={};for(let n=0;n<e.length;n++){let i=iH(e[n]);for(let e in i)t[e]=i[e]}return t}function iW(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function ij(e){return null===e.getRenderTarget()&&e.outputEncoding===to?tf:td}let iq={clone:iH,merge:iG};var iX="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i$="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class iY extends ir{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=iX,this.fragmentShader=i$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=iH(e.uniforms),this.uniformsGroups=iW(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class iJ extends n0{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nL,this.projectionMatrix=new nL,this.projectionMatrixInverse=new nL}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class iZ extends iJ{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*tM*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*tw*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*tM*Math.atan(Math.tan(.5*tw*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*tw*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){let e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}let a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}let iK=-90,iQ=1;class i0 extends n0{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;let i=new iZ(iK,iQ,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let r=new iZ(iK,iQ,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let s=new iZ(iK,iQ,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let a=new iZ(iK,iQ,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let o=new iZ(iK,iQ,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new iZ(iK,iQ,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[i,r,s,a,o,l]=this.children,u=e.getRenderTarget(),c=e.toneMapping,h=e.xr.enabled;e.toneMapping=$,e.xr.enabled=!1;let f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=c,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class i1 extends t3{constructor(e,t,n,i,r,s,a,o,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:et,n,i,r,s,a,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class i2 extends t5{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new i1(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ef}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new iV(5,5,5),r=new iY({name:"CubemapFromEquirect",uniforms:iH(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:d,blending:m});r.uniforms.tEquirect.value=t;let s=new iF(i,r),a=t.minFilter;return t.minFilter===ep&&(t.minFilter=ef),new i0(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,i){let r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}let i3=new t7,i4=new t7,i5=new tF;class i6{constructor(e=new t7(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let i=i3.subVectors(n,t).cross(i4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(i3),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||i5.getNormalMatrix(e),i=this.coplanarPoint(i3).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let i8=new nx,i9=new t7;class i7{constructor(e=new i6,t=new i6,n=new i6,i=new i6,r=new i6,s=new i6){this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],v=n[14],_=n[15];return t[0].setComponents(a-i,c-o,p-h,_-m).normalize(),t[1].setComponents(a+i,c+o,p+h,_+m).normalize(),t[2].setComponents(a+r,c+l,p+f,_+g).normalize(),t[3].setComponents(a-r,c-l,p-f,_-g).normalize(),t[4].setComponents(a-s,c-u,p-d,_-v).normalize(),t[5].setComponents(a+s,c+u,p+d,_+v).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),i8.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(i8)}intersectsSprite(e){return i8.center.set(0,0,0),i8.radius=.7071067811865476,i8.applyMatrix4(e.matrixWorld),this.intersectsSphere(i8)}intersectsSphere(e){let t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let i=t[n];if(i9.x=i.normal.x>0?e.max.x:e.min.x,i9.y=i.normal.y>0?e.max.y:e.min.y,i9.z=i.normal.z>0?e.max.z:e.min.z,0>i.distanceToPoint(i9))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function re(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function rt(e,t){let n=t.isWebGL2,i=new WeakMap;function r(t,i){let r;let s=t.array,a=t.usage,o=e.createBuffer();if(e.bindBuffer(i,o),e.bufferData(i,s,a),t.onUploadCallback(),s instanceof Float32Array)r=5126;else if(s instanceof Uint16Array){if(t.isFloat16BufferAttribute){if(n)r=5131;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.")}else r=5123}else if(s instanceof Int16Array)r=5122;else if(s instanceof Uint32Array)r=5125;else if(s instanceof Int32Array)r=5124;else if(s instanceof Int8Array)r=5120;else if(s instanceof Uint8Array)r=5121;else if(s instanceof Uint8ClampedArray)r=5121;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+s);return{buffer:o,type:r,bytesPerElement:s.BYTES_PER_ELEMENT,version:t.version}}function s(t,i,r){let s=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,s):(n?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(e,t){if(e.isGLBufferAttribute){let t=i.get(e);(!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version});return}e.isInterleavedBufferAttribute&&(e=e.data);let n=i.get(e);void 0===n?i.set(e,r(e,t)):n.version<e.version&&(s(n.buffer,e,t),n.version=e.version)}}}class rn extends ix{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};let r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,u=o+1,c=e/a,h=t/o,f=[],d=[],p=[],m=[];for(let e=0;e<u;e++){let t=e*h-s;for(let n=0;n<l;n++){let i=n*c-r;d.push(i,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){let n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),s=t+1+l*e;f.push(n,i,s),f.push(i,r,s)}this.setIndex(f),this.setAttribute("position",new ih(d,3)),this.setAttribute("normal",new ih(p,3)),this.setAttribute("uv",new ih(m,2))}static fromJSON(e){return new rn(e.width,e.height,e.widthSegments,e.heightSegments)}}let ri={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	if ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			 return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float R21 = R12;\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = dFdx( surf_pos.xyz );\n		vec3 vSigmaY = dFdy( surf_pos.xyz );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#pragma unroll_loop_end\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop_start\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		#pragma unroll_loop_end\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n	return dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_v0 0.339\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_v1 0.276\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_v4 0.046\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_v5 0.016\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_v6 0.0038\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n	mat3 m = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n	transformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#if defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#if defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n	reflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		if ( cutoffDistance > 0.0 ) {\n			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		}\n		return distanceFalloff;\n	#else\n		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n		}\n		return 1.0;\n	#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULARINTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n		#endif\n		#ifdef USE_SPECULARCOLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEENCOLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEENROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n	#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n	#endif\n	#ifdef USE_IRIDESCENCE\n		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n	#else\n		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n	geometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometry.viewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometry, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometry.normal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n		varying float vIsPerspective;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n	#else\n		if ( isPerspectiveMatrix( projectionMatrix ) ) {\n			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n			gl_Position.z *= gl_Position.w;\n		}\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	uniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n	#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	uniform float morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n		uniform sampler2DArray morphTargetsTexture;\n		uniform ivec2 morphTargetsTextureSize;\n		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n			int y = texelIndex / morphTargetsTextureSize.x;\n			int x = texelIndex - y * morphTargetsTextureSize.x;\n			ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n			return texelFetch( morphTargetsTexture, morphUV, 0 );\n		}\n	#else\n		#ifndef USE_MORPHNORMALS\n			uniform float morphTargetInfluences[ 8 ];\n		#else\n			uniform float morphTargetInfluences[ 4 ];\n		#endif\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n		transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n		transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n		transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n		#ifndef USE_MORPHNORMALS\n			transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n			transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n			transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n			transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n		#endif\n	#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	#ifdef USE_TANGENT\n		vec3 tangent = normalize( vTangent );\n		vec3 bitangent = normalize( vBitangent );\n		#ifdef DOUBLE_SIDED\n			tangent = tangent * faceDirection;\n			bitangent = bitangent * faceDirection;\n		#endif\n		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n			mat3 vTBN = mat3( tangent, bitangent, normal );\n		#endif\n	#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	#ifdef USE_TANGENT\n		normal = normalize( vTBN * mapN );\n	#else\n		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n	#endif\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	#ifdef USE_TANGENT\n		clearcoatNormal = normalize( vTBN * clearcoatMapN );\n	#else\n		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n	#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n	return packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		vec4 shadowWorldPosition;\n	#endif\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n	#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	uniform int boneTextureSize;\n	mat4 getBoneMatrix( const in float i ) {\n		float j = i * 4.0;\n		float x = mod( j, float( boneTextureSize ) );\n		float y = floor( j / float( boneTextureSize ) );\n		float dx = 1.0 / float( boneTextureSize );\n		float dy = 1.0 / float( boneTextureSize );\n		y = dy * ( y + 0.5 );\n		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n		mat4 bone = mat4( v1, v2, v3, v4 );\n		return bone;\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmission = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		#ifdef texture2DLodEXT\n			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n		#else\n			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n		#endif\n	}\n	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return radiance;\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n		vec3 refractedRayExit = position + transmissionRay;\n		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n		vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n		refractionCoords += 1.0;\n		refractionCoords /= 2.0;\n		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n	}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n	#ifdef UVS_VERTEX_ONLY\n		vec2 vUv;\n	#else\n		varying vec2 vUv;\n	#endif\n	uniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n	uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULARINTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n	#ifdef USE_SPECULARCOLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEENCOLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEENROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n	#endif\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <output_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}"},rr={common:{diffuse:{value:new tK(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new tF},uv2Transform:{value:new tF},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tU(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tK(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tK(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tF}},sprite:{diffuse:{value:new tK(16777215)},opacity:{value:1},center:{value:new tU(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tF}}},rs={basic:{uniforms:iG([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.fog]),vertexShader:ri.meshbasic_vert,fragmentShader:ri.meshbasic_frag},lambert:{uniforms:iG([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new tK(0)}}]),vertexShader:ri.meshlambert_vert,fragmentShader:ri.meshlambert_frag},phong:{uniforms:iG([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new tK(0)},specular:{value:new tK(1118481)},shininess:{value:30}}]),vertexShader:ri.meshphong_vert,fragmentShader:ri.meshphong_frag},standard:{uniforms:iG([rr.common,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.roughnessmap,rr.metalnessmap,rr.fog,rr.lights,{emissive:{value:new tK(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag},toon:{uniforms:iG([rr.common,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.gradientmap,rr.fog,rr.lights,{emissive:{value:new tK(0)}}]),vertexShader:ri.meshtoon_vert,fragmentShader:ri.meshtoon_frag},matcap:{uniforms:iG([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,{matcap:{value:null}}]),vertexShader:ri.meshmatcap_vert,fragmentShader:ri.meshmatcap_frag},points:{uniforms:iG([rr.points,rr.fog]),vertexShader:ri.points_vert,fragmentShader:ri.points_frag},dashed:{uniforms:iG([rr.common,rr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ri.linedashed_vert,fragmentShader:ri.linedashed_frag},depth:{uniforms:iG([rr.common,rr.displacementmap]),vertexShader:ri.depth_vert,fragmentShader:ri.depth_frag},normal:{uniforms:iG([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,{opacity:{value:1}}]),vertexShader:ri.meshnormal_vert,fragmentShader:ri.meshnormal_frag},sprite:{uniforms:iG([rr.sprite,rr.fog]),vertexShader:ri.sprite_vert,fragmentShader:ri.sprite_frag},background:{uniforms:{uvTransform:{value:new tF},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ri.background_vert,fragmentShader:ri.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ri.backgroundCube_vert,fragmentShader:ri.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ri.cube_vert,fragmentShader:ri.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ri.equirect_vert,fragmentShader:ri.equirect_frag},distanceRGBA:{uniforms:iG([rr.common,rr.displacementmap,{referencePosition:{value:new t7},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ri.distanceRGBA_vert,fragmentShader:ri.distanceRGBA_frag},shadow:{uniforms:iG([rr.lights,rr.fog,{color:{value:new tK(0)},opacity:{value:1}}]),vertexShader:ri.shadow_vert,fragmentShader:ri.shadow_frag}};rs.physical={uniforms:iG([rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tU(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new tK(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tU},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new tK(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new tK(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag};let ra={r:0,b:0,g:0};function ro(e,t,n,i,r,s,a){let o,l;let u=new tK(0),c=!0===s?0:1,h=null,p=0,m=null;function g(t,n){t.getRGB(ra,ij(e)),i.buffers.color.setClear(ra.r,ra.g,ra.b,n,a)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),g(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){g(u,c=e)},render:function(i,s){let a=!1,v=!0===s.isScene?s.background:null;v&&v.isTexture&&(v=(s.backgroundBlurriness>0?n:t).get(v));let _=e.xr,y=_.getSession&&_.getSession();y&&"additive"===y.environmentBlendMode&&(v=null),null===v?g(u,c):v&&v.isColor&&(g(v,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===es)?(void 0===l&&((l=new iF(new iV(1,1,1),new iY({name:"BackgroundCubeMaterial",uniforms:iH(rs.backgroundCube.uniforms),vertexShader:rs.backgroundCube.vertexShader,fragmentShader:rs.backgroundCube.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,(h!==v||p!==v.version||m!==e.toneMapping)&&(l.material.needsUpdate=!0,h=v,p=v.version,m=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===o&&((o=new iF(new rn(2,2),new iY({name:"BackgroundMaterial",uniforms:iH(rs.background.uniforms),vertexShader:rs.background.vertexShader,fragmentShader:rs.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=v,o.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,!0===v.matrixAutoUpdate&&v.updateMatrix(),o.material.uniforms.uvTransform.value.copy(v.matrix),(h!==v||p!==v.version||m!==e.toneMapping)&&(o.material.needsUpdate=!0,h=v,p=v.version,m=e.toneMapping),o.layers.enableAll(),i.unshift(o,o.geometry,o.material,0,0,null))}}}function rl(e,t,n,i){let r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=m(null),u=l,c=!1;function h(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function f(t){return i.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e,t,n){let i=!0===n.wireframe,r=o[e.id];void 0===r&&(r={},o[e.id]=r);let s=r[t.id];void 0===s&&(s={},r[t.id]=s);let a=s[i];return void 0===a&&(a=m(h()),s[i]=a),a}function m(e){let t=[],n=[],i=[];for(let e=0;e<r;e++)t[e]=0,n[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function g(e,t,n,i){let r=u.attributes,s=t.attributes,a=0,o=n.getAttributes();for(let t in o)if(o[t].location>=0){let n=r[t],i=s[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n||n.attribute!==i||i&&n.data!==i.data)return!0;a++}return u.attributesNum!==a||u.index!==i}function v(e,t,n,i){let r={},s=t.attributes,a=0,o=n.getAttributes();for(let t in o)if(o[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,a++}u.attributes=r,u.attributesNum=a,u.index=i}function _(){let e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function y(e){x(e,0)}function x(n,r){let s=u.newAttributes,a=u.enabledAttributes,o=u.attributeDivisors;s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==r&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r)}function b(){let t=u.newAttributes,n=u.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function w(t,n,r,s,a,o){!0===i.isWebGL2&&(5124===r||5125===r)?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,s,a,o)}function M(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;_();let l=o.attributes,u=a.getAttributes(),c=s.defaultAttributeValues;for(let t in u){let i=u[t];if(i.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){let t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;let u=l.buffer,c=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){let n=s.data,l=n.stride,f=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)x(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)y(i.location+e);e.bindBuffer(34962,u);for(let e=0;e<i.locationSize;e++)w(i.location+e,a/i.locationSize,c,t,l*h,(f+a/i.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)x(i.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)y(i.location+e);e.bindBuffer(34962,u);for(let e=0;e<i.locationSize;e++)w(i.location+e,a/i.locationSize,c,t,a*h,a/i.locationSize*e*h)}}else if(void 0!==c){let n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}b()}function S(){for(let e in T(),o){let t=o[e];for(let e in t){let n=t[e];for(let e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}}function T(){E(),c=!0,u!==l&&f((u=l).object)}function E(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(t,i,r,s,o){let l=!1;if(a){let e=p(s,r,i);u!==e&&f((u=e).object),(l=g(t,s,r,o))&&v(t,s,r,o)}else{let e=!0===i.wireframe;(u.geometry!==s.id||u.program!==r.id||u.wireframe!==e)&&(u.geometry=s.id,u.program=r.id,u.wireframe=e,l=!0)}null!==o&&n.update(o,34963),(l||c)&&(c=!1,M(t,i,r,s),null!==o&&e.bindBuffer(34963,n.get(o).buffer))},reset:T,resetDefaultState:E,dispose:S,releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;let t=o[e.id];for(let e in t){let n=t[e];for(let e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(let t in o){let n=o[t];if(void 0===n[e.id])continue;let i=n[e.id];for(let e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:_,enableAttribute:y,disableUnusedAttributes:b}}function ru(e,t,n,i){let r;let s=i.isWebGL2;function a(e){r=e}function o(t,i){e.drawArrays(r,t,i),n.update(i,r,1)}function l(i,a,o){let l,u;if(0!==o){if(s)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[u](r,i,a,o),n.update(a,r,o)}}this.setMode=a,this.render=o,this.renderInstances=l}function rc(e,t,n){let i;function r(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let u=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,h=e.getParameter(34930),f=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),_=e.getParameter(36349),y=f>0,x=a||t.has("OES_texture_float"),b=y&&x,w=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:b,maxSamples:w}}function rh(e){let t=this,n=null,i=0,r=!1,s=!1,a=new i6,o=new tF,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(e,n,i,r){let s=null!==e?e.length:0,u=null;if(0!==s){if(u=l.value,!0!==r||null===u){let t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,n=i;t!==s;++t,n+=4)a.copy(e[t]).applyMatrix4(r,o),a.normal.toArray(u,n),u[n+3]=a.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){let a=0!==e.length||t||0!==i||r;return r=t,n=c(e,s,0),i=e.length,a},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(t,a,o){let h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(r&&null!==h&&0!==h.length&&(!s||d)){let e=s?0:i,t=4*e,r=p.clippingState||null;l.value=r,r=c(h,a,t,o);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=e}else s?c(null):u()}}function rf(e){let t=new WeakMap;function n(e,t){return t===ei?e.mapping=et:t===er&&(e.mapping=en),e}function i(e){let n=e.target;n.removeEventListener("dispose",i);let r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){let s=r.mapping;if(s===ei||s===er){if(t.has(r))return n(t.get(r).texture,r.mapping);{let s=r.image;if(!s||!(s.height>0))return null;{let a=new i2(s.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}}}}return r},dispose:function(){t=new WeakMap}}}class rd extends iJ{constructor(e=-1,t=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}let rp=4,rm=[.125,.215,.35,.446,.526,.582],rg=20,rv=new rd,r_=new tK,ry=null,rx=(1+Math.sqrt(5))/2,rb=1/rx,rw=[new t7(1,1,1),new t7(-1,1,1),new t7(1,1,-1),new t7(-1,1,-1),new t7(0,rx,rb),new t7(0,rx,-rb),new t7(rb,0,rx),new t7(-rb,0,rx),new t7(rx,rb,0),new t7(-rx,rb,0)];class rM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){ry=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=rL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=rC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ry),e.scissorTest=!1,rE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===et||e.mapping===en?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ry=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ef,minFilter:ef,generateMipmaps:!1,type:ew,format:eC,encoding:ta,depthBuffer:!1},i=rT(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=rT(e,t,n);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=rS(i)),this._blurMaterial=rA(i,e,t)}return i}_compileMaterial(e){let t=new iF(this._lodPlanes[0],e);this._renderer.compile(t,rv)}_sceneToCubeUV(e,t,n,i){let r=new iZ(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(r_),o.toneMapping=$,o.autoClear=!1;let c=new is({name:"PMREM.Background",side:d,depthWrite:!1,depthTest:!1}),h=new iF(new iV,c),f=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,f=!0):(c.color.copy(r_),f=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1===n?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t]));let l=this._cubeSize;rE(i,n*l,t>2?l:0,l,l),o.setRenderTarget(i),f&&o.render(h,r),o.render(e,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let n=this._renderer,i=e.mapping===et||e.mapping===en;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=rL()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=rC());let r=i?this._cubemapMaterial:this._equirectMaterial,s=new iF(this._lodPlanes[0],r);r.uniforms.envMap.value=e;let a=this._cubeSize;rE(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,rv)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=rw[(t-1)%rw.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,i,r){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,c=new iF(this._lodPlanes[i],l),h=l.uniforms,f=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*f):2*Math.PI/(2*rg-1),p=r/d,m=isFinite(r)?1+Math.floor(u*p):rg;m>rg&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${rg}`);let g=[],v=0;for(let e=0;e<rg;++e){let t=e/p,n=Math.exp(-t*t/2);g.push(n),0===e?v+=n:e<m&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);let{_lodMax:_}=this;h.dTheta.value=d,h.mipInt.value=_-n;let y=this._sizeLods[i];rE(t,3*y*(i>_-rp?i-_+rp:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,rv)}}function rS(e){let t=[],n=[],i=[],r=e,s=e-rp+1+rm.length;for(let a=0;a<s;a++){let s=Math.pow(2,r);n.push(s);let o=1/s;a>e-rp?o=rm[a-e+rp-1]:0===a&&(o=0),i.push(o);let l=1/(s-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,d=6,p=3,m=2,g=1,v=new Float32Array(p*d*f),_=new Float32Array(m*d*f),y=new Float32Array(g*d*f);for(let e=0;e<f;e++){let t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,p*d*e),_.set(h,m*d*e);let r=[e,e,e,e,e,e];y.set(r,g*d*e)}let x=new ix;x.setAttribute("position",new il(v,p)),x.setAttribute("uv",new il(_,m)),x.setAttribute("faceIndex",new il(y,g)),t.push(x),r>rp&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}function rT(e,t,n){let i=new t5(e,t,n);return i.texture.mapping=es,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function rE(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function rA(e,t,n){let i=new Float32Array(rg);return new iY({name:"SphericalGaussianBlur",defines:{n:rg,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new t7(0,1,0)}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:m,depthTest:!1,depthWrite:!1})}function rC(){return new iY({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:m,depthTest:!1,depthWrite:!1})}function rL(){return new iY({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:m,depthTest:!1,depthWrite:!1})}function rR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function rD(e){let t=new WeakMap,n=null;function i(e){let t=0,n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(s){if(s&&s.isTexture){let a=s.mapping,o=a===ei||a===er,l=a===et||a===en;if(o||l){if(s.isRenderTargetTexture&&!0===s.needsPMREMUpdate){s.needsPMREMUpdate=!1;let i=t.get(s);return null===n&&(n=new rM(e)),i=o?n.fromEquirectangular(s,i):n.fromCubemap(s,i),t.set(s,i),i.texture}if(t.has(s))return t.get(s).texture;{let a=s.image;if(!(o&&a&&a.height>0||l&&a&&i(a)))return null;{null===n&&(n=new rM(e));let i=o?n.fromEquirectangular(s):n.fromCubemap(s);return t.set(s,i),s.addEventListener("dispose",r),i.texture}}}}return s},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function rP(e){let t={};function n(n){let i;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function rN(e,t,n,i){let r={},s=new WeakMap;function a(e){let o=e.target;for(let e in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",a),delete r[o.id];let l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){let n=[],i=e.index,r=e.attributes.position,a=0;if(null!==i){let e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){let i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{let e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){let e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}let o=new(tB(n)?ic:iu)(n,1);o.version=a;let l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(e){let n=e.attributes;for(let e in n)t.update(n[e],34962);let i=e.morphAttributes;for(let e in i){let n=i[e];for(let e=0,i=n.length;e<i;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){let t=s.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function rO(e,t,n,i){let r,s,a;let o=i.isWebGL2;function l(e){r=e}function u(e){s=e.type,a=e.bytesPerElement}function c(t,i){e.drawElements(r,i,s,t*a),n.update(i,r,1)}function h(i,l,u){let c,h;if(0!==u){if(o)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[h](r,l,s,i*a,u),n.update(l,r,u)}}this.setMode=l,this.setIndex=u,this.render=c,this.renderInstances=h}function rI(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(e,n,i){switch(t.calls++,n){case 4:t.triangles+=e/3*i;break;case 1:t.lines+=e/2*i;break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:i,update:n}}function rk(e,t){return e[0]-t[0]}function rU(e,t){return Math.abs(t[1])-Math.abs(e[1])}function rF(e,t,n){let i={},r=new Float32Array(8),s=new WeakMap,a=new t4,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,u,c,h){let f=l.morphTargetInfluences;if(!0===t.isWebGL2){let i=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,r=void 0!==i?i.length:0,o=s.get(u);if(void 0===o||o.count!==r){void 0!==o&&o.texture.dispose();let e=void 0!==u.morphAttributes.position,n=void 0!==u.morphAttributes.normal,i=void 0!==u.morphAttributes.color,l=u.morphAttributes.position||[],c=u.morphAttributes.normal||[],h=u.morphAttributes.color||[],f=0;!0===e&&(f=1),!0===n&&(f=2),!0===i&&(f=3);let p=u.attributes.position.count*f,m=1;p>t.maxTextureSize&&(m=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let g=new Float32Array(p*m*4*r),v=new t6(g,p,m,r);v.type=eb,v.needsUpdate=!0;let _=4*f;for(let t=0;t<r;t++){let r=l[t],s=c[t],o=h[t],u=p*m*4*t;for(let t=0;t<r.count;t++){let l=t*_;!0===e&&(a.fromBufferAttribute(r,t),g[u+l+0]=a.x,g[u+l+1]=a.y,g[u+l+2]=a.z,g[u+l+3]=0),!0===n&&(a.fromBufferAttribute(s,t),g[u+l+4]=a.x,g[u+l+5]=a.y,g[u+l+6]=a.z,g[u+l+7]=0),!0===i&&(a.fromBufferAttribute(o,t),g[u+l+8]=a.x,g[u+l+9]=a.y,g[u+l+10]=a.z,g[u+l+11]=4===o.itemSize?a.w:1)}}function d(){v.dispose(),s.delete(u),u.removeEventListener("dispose",d)}o={count:r,texture:v,size:new tU(p,m)},s.set(u,o),u.addEventListener("dispose",d)}let l=0;for(let e=0;e<f.length;e++)l+=f[e];let c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{let t=void 0===f?0:f.length,n=i[u.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];i[u.id]=n}for(let e=0;e<t;e++){let t=n[e];t[0]=e,t[1]=f[e]}n.sort(rU);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(rk);let s=u.morphAttributes.position,a=u.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=o[e],n=t[0],i=t[1];n!==Number.MAX_SAFE_INTEGER&&i?(s&&u.getAttribute("morphTarget"+e)!==s[n]&&u.setAttribute("morphTarget"+e,s[n]),a&&u.getAttribute("morphNormal"+e)!==a[n]&&u.setAttribute("morphNormal"+e,a[n]),r[e]=i,l+=i):(s&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),a&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),r[e]=0)}let c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function rz(e,t,n,i){let r=new WeakMap;function s(e){let t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){let a=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}let rB=new t3,rV=new t6,rH=new t8,rG=new i1,rW=[],rj=[],rq=new Float32Array(16),rX=new Float32Array(9),r$=new Float32Array(4);function rY(e,t,n){let i=e[0];if(i<=0||i>0)return e;let r=t*n,s=rW[r];if(void 0===s&&(s=new Float32Array(r),rW[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function rJ(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function rZ(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function rK(e,t){let n=rj[t];void 0===n&&(n=new Int32Array(t),rj[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function rQ(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function r0(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(rJ(n,t))return;e.uniform2fv(this.addr,t),rZ(n,t)}}function r1(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(rJ(n,t))return;e.uniform3fv(this.addr,t),rZ(n,t)}}function r2(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(rJ(n,t))return;e.uniform4fv(this.addr,t),rZ(n,t)}}function r3(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(rJ(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),rZ(n,t)}else{if(rJ(n,i))return;r$.set(i),e.uniformMatrix2fv(this.addr,!1,r$),rZ(n,i)}}function r4(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(rJ(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),rZ(n,t)}else{if(rJ(n,i))return;rX.set(i),e.uniformMatrix3fv(this.addr,!1,rX),rZ(n,i)}}function r5(e,t){let n=this.cache,i=t.elements;if(void 0===i){if(rJ(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),rZ(n,t)}else{if(rJ(n,i))return;rq.set(i),e.uniformMatrix4fv(this.addr,!1,rq),rZ(n,i)}}function r6(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function r8(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(rJ(n,t))return;e.uniform2iv(this.addr,t),rZ(n,t)}}function r9(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(rJ(n,t))return;e.uniform3iv(this.addr,t),rZ(n,t)}}function r7(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(rJ(n,t))return;e.uniform4iv(this.addr,t),rZ(n,t)}}function se(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function st(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(rJ(n,t))return;e.uniform2uiv(this.addr,t),rZ(n,t)}}function sn(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(rJ(n,t))return;e.uniform3uiv(this.addr,t),rZ(n,t)}}function si(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(rJ(n,t))return;e.uniform4uiv(this.addr,t),rZ(n,t)}}function sr(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||rB,r)}function ss(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||rH,r)}function sa(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||rG,r)}function so(e,t,n){let i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||rV,r)}function sl(e){switch(e){case 5126:return rQ;case 35664:return r0;case 35665:return r1;case 35666:return r2;case 35674:return r3;case 35675:return r4;case 35676:return r5;case 5124:case 35670:return r6;case 35667:case 35671:return r8;case 35668:case 35672:return r9;case 35669:case 35673:return r7;case 5125:return se;case 36294:return st;case 36295:return sn;case 36296:return si;case 35678:case 36198:case 36298:case 36306:case 35682:return sr;case 35679:case 36299:case 36307:return ss;case 35680:case 36300:case 36308:case 36293:return sa;case 36289:case 36303:case 36311:case 36292:return so}}function su(e,t){e.uniform1fv(this.addr,t)}function sc(e,t){let n=rY(t,this.size,2);e.uniform2fv(this.addr,n)}function sh(e,t){let n=rY(t,this.size,3);e.uniform3fv(this.addr,n)}function sf(e,t){let n=rY(t,this.size,4);e.uniform4fv(this.addr,n)}function sd(e,t){let n=rY(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function sp(e,t){let n=rY(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function sm(e,t){let n=rY(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function sg(e,t){e.uniform1iv(this.addr,t)}function sv(e,t){e.uniform2iv(this.addr,t)}function s_(e,t){e.uniform3iv(this.addr,t)}function sy(e,t){e.uniform4iv(this.addr,t)}function sx(e,t){e.uniform1uiv(this.addr,t)}function sb(e,t){e.uniform2uiv(this.addr,t)}function sw(e,t){e.uniform3uiv(this.addr,t)}function sM(e,t){e.uniform4uiv(this.addr,t)}function sS(e,t,n){let i=this.cache,r=t.length,s=rK(n,r);rJ(i,s)||(e.uniform1iv(this.addr,s),rZ(i,s));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||rB,s[e])}function sT(e,t,n){let i=this.cache,r=t.length,s=rK(n,r);rJ(i,s)||(e.uniform1iv(this.addr,s),rZ(i,s));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||rH,s[e])}function sE(e,t,n){let i=this.cache,r=t.length,s=rK(n,r);rJ(i,s)||(e.uniform1iv(this.addr,s),rZ(i,s));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||rG,s[e])}function sA(e,t,n){let i=this.cache,r=t.length,s=rK(n,r);rJ(i,s)||(e.uniform1iv(this.addr,s),rZ(i,s));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||rV,s[e])}function sC(e){switch(e){case 5126:return su;case 35664:return sc;case 35665:return sh;case 35666:return sf;case 35674:return sd;case 35675:return sp;case 35676:return sm;case 5124:case 35670:return sg;case 35667:case 35671:return sv;case 35668:case 35672:return s_;case 35669:case 35673:return sy;case 5125:return sx;case 36294:return sb;case 36295:return sw;case 36296:return sM;case 35678:case 36198:case 36298:case 36306:case 35682:return sS;case 35679:case 36299:case 36307:return sT;case 35680:case 36300:case 36308:case 36293:return sE;case 36289:case 36303:case 36311:case 36292:return sA}}class sL{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=sl(t.type)}}class sR{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=sC(t.type)}}class sD{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let i=this.seq;for(let r=0,s=i.length;r!==s;++r){let s=i[r];s.setValue(e,t[s.id],n)}}}let sP=/(\w+)(\])?(\[|\.)?/g;function sN(e,t){e.seq.push(t),e.map[t.id]=t}function sO(e,t,n){let i=e.name,r=i.length;for(sP.lastIndex=0;;){let s=sP.exec(i),a=sP.lastIndex,o=s[1],l="]"===s[2],u=s[3];if(l&&(o|=0),void 0===u||"["===u&&a+2===r){sN(n,void 0===u?new sL(o,e,t):new sR(o,e,t));break}{let e=n.map[o];void 0===e&&sN(n,e=new sD(o)),n=e}}}class sI{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){let n=e.getActiveUniform(t,i),r=e.getUniformLocation(t,n.name);sO(n,r,this)}}setValue(e,t,n,i){let r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){let i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){let s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){let n=[];for(let i=0,r=e.length;i!==r;++i){let r=e[i];r.id in t&&n.push(r)}return n}}function sk(e,t,n){let i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let sU=0;function sF(e,t){let n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=r;e<s;e++){let r=e+1;i.push(`${r===t?">":" "} ${r}: ${n[e]}`)}return i.join("\n")}function sz(e){switch(e){case ta:return["Linear","( value )"];case to:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function sB(e,t,n){let i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";let s=/ERROR: 0:(\d+)/.exec(r);if(!s)return r;{let i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+sF(e.getShaderSource(t),i)}}function sV(e,t){let n=sz(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function sH(e,t){let n;switch(t){case Y:n="Linear";break;case J:n="Reinhard";break;case Z:n="OptimizedCineon";break;case K:n="ACESFilmic";break;case Q:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function sG(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sq).join("\n")}function sW(e){let t=[];for(let n in e){let i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}function sj(e,t){let n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){let i=e.getActiveAttrib(t,r),s=i.name,a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}function sq(e){return""!==e}function sX(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function s$(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let sY=/^[ \t]*#include +<([\w\d./]+)>/gm;function sJ(e){return e.replace(sY,sZ)}function sZ(e,t){let n=ri[t];if(void 0===n)throw Error("Can not resolve #include <"+t+">");return sJ(n)}let sK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sQ(e){return e.replace(sK,s0)}function s0(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function s1(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function s2(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===c?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===h&&(t="SHADOWMAP_TYPE_VSM"),t}function s3(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case et:case en:t="ENVMAP_TYPE_CUBE";break;case es:t="ENVMAP_TYPE_CUBE_UV"}return t}function s4(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===en&&(t="ENVMAP_MODE_REFRACTION"),t}function s5(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case j:t="ENVMAP_BLENDING_MULTIPLY";break;case q:t="ENVMAP_BLENDING_MIX";break;case X:t="ENVMAP_BLENDING_ADD"}return t}function s6(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}function s8(e,t,n,i){let r,s,a,o;let l=e.getContext(),u=n.defines,c=n.vertexShader,h=n.fragmentShader,f=s2(n),d=s3(n),p=s4(n),m=s5(n),g=s6(n),v=n.isWebGL2?"":sG(n),_=sW(u),y=l.createProgram(),x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[_].filter(sq).join("\n")).length>0&&(r+="\n"),(s=[v,_].filter(sq).join("\n")).length>0&&(s+="\n")):(r=[s1(n),"#define SHADER_NAME "+n.shaderName,_,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(sq).join("\n"),s=[v,s1(n),"#define SHADER_NAME "+n.shaderName,_,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==$?"#define TONE_MAPPING":"",n.toneMapping!==$?ri.tonemapping_pars_fragment:"",n.toneMapping!==$?sH("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ri.encodings_pars_fragment,sV("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(sq).join("\n")),c=s$(c=sX(c=sJ(c),n),n),h=s$(h=sX(h=sJ(h),n),n),c=sQ(c),h=sQ(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",r="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+r,s=["#define varying in",n.glslVersion===tv?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s);let b=x+r+c,w=x+s+h,M=sk(l,35633,b),S=sk(l,35632,w);if(l.attachShader(y,M),l.attachShader(y,S),void 0!==n.index0AttributeName?l.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(y,0,"position"),l.linkProgram(y),e.debug.checkShaderErrors){let e=l.getProgramInfoLog(y).trim(),t=l.getShaderInfoLog(M).trim(),n=l.getShaderInfoLog(S).trim(),i=!0,a=!0;if(!1===l.getProgramParameter(y,35714)){i=!1;let t=sB(l,M,"vertex"),n=sB(l,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===t||""===n)&&(a=!1);a&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:r},fragmentShader:{log:n,prefix:s}})}return l.deleteShader(M),l.deleteShader(S),this.getUniforms=function(){return void 0===a&&(a=new sI(l,y)),a},this.getAttributes=function(){return void 0===o&&(o=sj(l,y)),o},this.destroy=function(){i.releaseStatesOfProgram(this),l.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=sU++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=M,this.fragmentShader=S,this}let s9=0;class s7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new ae(e),t.set(e,n)),n}}class ae{constructor(e){this.id=s9++,this.code=e,this.usedTimes=0}}function at(e,t,n,i,r,s,a){let o=new nB,l=new s7,u=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,f=r.vertexTextures,m=r.precision,v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}function y(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.map&&o.enable(4),t.matcap&&o.enable(5),t.envMap&&o.enable(6),t.lightMap&&o.enable(7),t.aoMap&&o.enable(8),t.emissiveMap&&o.enable(9),t.bumpMap&&o.enable(10),t.normalMap&&o.enable(11),t.objectSpaceNormalMap&&o.enable(12),t.tangentSpaceNormalMap&&o.enable(13),t.clearcoat&&o.enable(14),t.clearcoatMap&&o.enable(15),t.clearcoatRoughnessMap&&o.enable(16),t.clearcoatNormalMap&&o.enable(17),t.iridescence&&o.enable(18),t.iridescenceMap&&o.enable(19),t.iridescenceThicknessMap&&o.enable(20),t.displacementMap&&o.enable(21),t.specularMap&&o.enable(22),t.roughnessMap&&o.enable(23),t.metalnessMap&&o.enable(24),t.gradientMap&&o.enable(25),t.alphaMap&&o.enable(26),t.alphaTest&&o.enable(27),t.vertexColors&&o.enable(28),t.vertexAlphas&&o.enable(29),t.vertexUvs&&o.enable(30),t.vertexTangents&&o.enable(31),t.uvsVertexOnly&&o.enable(32),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.physicallyCorrectLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.specularIntensityMap&&o.enable(15),t.specularColorMap&&o.enable(16),t.transmission&&o.enable(17),t.transmissionMap&&o.enable(18),t.thicknessMap&&o.enable(19),t.sheen&&o.enable(20),t.sheenColorMap&&o.enable(21),t.sheenRoughnessMap&&o.enable(22),t.decodeVideoTexture&&o.enable(23),t.opaque&&o.enable(24),e.push(o.mask)}return{getParameters:function(s,o,u,_,y){let x,b,w,M;let S=_.fog,T=y.geometry,E=s.isMeshStandardMaterial?_.environment:null,A=(s.isMeshStandardMaterial?n:t).get(s.envMap||E),C=A&&A.mapping===es?A.image.height:null,L=v[s.type];null!==s.precision&&(m=r.getMaxPrecision(s.precision))!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",m,"instead.");let R=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,D=void 0!==R?R.length:0,P=0;if(void 0!==T.morphAttributes.position&&(P=1),void 0!==T.morphAttributes.normal&&(P=2),void 0!==T.morphAttributes.color&&(P=3),L){let e=rs[L];x=e.vertexShader,b=e.fragmentShader}else x=s.vertexShader,b=s.fragmentShader,l.update(s),w=l.getVertexShaderID(s),M=l.getFragmentShaderID(s);let N=e.getRenderTarget(),O=s.alphaTest>0,I=s.clearcoat>0,k=s.iridescence>0;return{isWebGL2:c,shaderID:L,shaderName:s.type,vertexShader:x,fragmentShader:b,defines:s.defines,customVertexShaderID:w,customFragmentShaderID:M,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null===N?e.outputEncoding:!0===N.isXRRenderTarget?N.texture.encoding:ta,map:!!s.map,matcap:!!s.matcap,envMap:!!A,envMapMode:A&&A.mapping,envMapCubeUVHeight:C,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===th,tangentSpaceNormalMap:s.normalMapType===tc,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===to,clearcoat:I,clearcoatMap:I&&!!s.clearcoatMap,clearcoatRoughnessMap:I&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!s.clearcoatNormalMap,iridescence:k,iridescenceMap:k&&!!s.iridescenceMap,iridescenceThicknessMap:k&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===g,alphaMap:!!s.alphaMap,alphaTest:O,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!T.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.iridescenceMap||!!s.iridescenceThicknessMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||!!s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!S,useFog:!0===s.fog,fogExp2:S&&S.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:D,morphTextureStride:P,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:$,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===p,flipSided:s.side===d,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(_(n,t),y(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=v[e.type];if(n){let e=rs[n];t=iq.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let i;for(let e=0,t=u.length;e<t;e++){let t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new s8(e,n,t,s),u.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){let t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function an(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function ai(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ar(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function as(){let e=[],t=0,n=[],i=[],r=[];function s(){t=0,n.length=0,i.length=0,r.length=0}function a(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}function o(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?i.push(c):!0===s.transparent?r.push(c):n.push(c)}function l(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?i.unshift(c):!0===s.transparent?r.unshift(c):n.unshift(c)}function u(e,t){n.length>1&&n.sort(e||ai),i.length>1&&i.sort(t||ar),r.length>1&&r.sort(t||ar)}return{opaque:n,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:function(){for(let n=t,i=e.length;n<i;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:u}}function aa(){let e=new WeakMap;return{get:function(t,n){let i;let r=e.get(t);return void 0===r?(i=new as,e.set(t,[i])):n>=r.length?(i=new as,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function ao(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new t7,color:new tK};break;case"SpotLight":n={position:new t7,direction:new t7,color:new tK,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new t7,color:new tK,distance:0,decay:0};break;case"HemisphereLight":n={direction:new t7,skyColor:new tK,groundColor:new tK};break;case"RectAreaLight":n={color:new tK,position:new t7,halfWidth:new t7,halfHeight:new t7}}return e[t.id]=n,n}}}function al(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tU};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tU,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}let au=0;function ac(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ah(e,t){let n=new ao,i=al(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)r.probe.push(new t7);let s=new t7,a=new nL,o=new nL;return{setup:function(s,a){let o=0,l=0,u=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,h=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0;s.sort(ac);let x=!0!==a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){let t=s[e],a=t.color,b=t.intensity,w=t.distance,M=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*b*x,l+=a.g*b*x,u+=a.b*b*x;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){let e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=M,r.directionalShadowMatrix[c]=t.shadow.matrix,m++}r.directional[c]=e,c++}else if(t.isSpotLight){let e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(b*x),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[f]=e;let s=t.shadow;if(t.map&&(r.spotLightMap[_]=t.map,_++,s.updateMatrices(t),t.castShadow&&y++),r.spotLightMatrix[f]=s.matrix,t.castShadow){let e=i.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[f]=e,r.spotShadowMap[f]=M,v++}f++}else if(t.isRectAreaLight){let e=n.get(t);e.color.copy(a).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[d]=e,d++}else if(t.isPointLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=M,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){let e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*x),e.groundColor.copy(t.groundColor).multiplyScalar(b*x),r.hemi[p]=e,p++}}d>0&&(t.isWebGL2?(r.rectAreaLTC1=rr.LTC_FLOAT_1,r.rectAreaLTC2=rr.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=rr.LTC_FLOAT_1,r.rectAreaLTC2=rr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=rr.LTC_HALF_1,r.rectAreaLTC2=rr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=u;let b=r.hash;(b.directionalLength!==c||b.pointLength!==h||b.spotLength!==f||b.rectAreaLength!==d||b.hemiLength!==p||b.numDirectionalShadows!==m||b.numPointShadows!==g||b.numSpotShadows!==v||b.numSpotMaps!==_)&&(r.directional.length=c,r.spot.length=f,r.rectArea.length=d,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+_-y,r.spotLightMap.length=_,r.numSpotLightShadowsWithMaps=y,b.directionalLength=c,b.pointLength=h,b.spotLength=f,b.rectAreaLength=d,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,b.numSpotMaps=_,r.version=au++)},setupView:function(e,t){let n=0,i=0,l=0,u=0,c=0,h=t.matrixWorldInverse;for(let t=0,f=e.length;t<f;t++){let f=e[t];if(f.isDirectionalLight){let e=r.directional[n];e.direction.setFromMatrixPosition(f.matrixWorld),s.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(f.isSpotLight){let e=r.spot[l];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(f.matrixWorld),s.setFromMatrixPosition(f.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(f.isRectAreaLight){let e=r.rectArea[u];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(f.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*f.width,0,0),e.halfHeight.set(0,.5*f.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),u++}else if(f.isPointLight){let e=r.point[i];e.position.setFromMatrixPosition(f.matrixWorld),e.position.applyMatrix4(h),i++}else if(f.isHemisphereLight){let e=r.hemi[c];e.direction.setFromMatrixPosition(f.matrixWorld),e.direction.transformDirection(h),c++}}},state:r}}function af(e,t){let n=new ah(e,t),i=[],r=[];function s(e){i.push(e)}function a(e){r.push(e)}function o(e){n.setup(i,e)}function l(e){n.setupView(i,e)}return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function ad(e,t){let n=new WeakMap;return{get:function(i,r=0){let s;let a=n.get(i);return void 0===a?(s=new af(e,t),n.set(i,[s])):r>=a.length?(s=new af(e,t),a.push(s)):s=a[r],s},dispose:function(){n=new WeakMap}}}class ap extends ir{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class am extends ir{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new t7,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}let ag="void main() {\n	gl_Position = vec4( position, 1.0 );\n}",av="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function a_(e,t,n){let i=new i7,r=new tU,s=new tU,a=new t4,o=new ap({depthPacking:tu}),l=new am,c={},g=n.maxTextureSize,v={0:d,1:f,2:p},_=new iY({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tU},radius:{value:4}},vertexShader:ag,fragmentShader:av}),y=_.clone();y.defines.HORIZONTAL_PASS=1;let x=new ix;x.setAttribute("position",new il(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new iF(x,_),w=this;function M(n,i){let s=t.update(b);_.defines.VSM_SAMPLES!==n.blurSamples&&(_.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new t5(r.x,r.y)),_.uniforms.shadow_pass.value=n.map.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,_,b,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,y,b,null)}function S(t,n,i,r,s,a){let u=null,f=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==f?f:!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=u.uuid,t=n.uuid,i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=u.clone(),i[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,a===h?u.side=null!==n.shadowSide?n.shadowSide:n.side:u.side=null!==n.shadowSide?n.shadowSide:v[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=r,u.farDistance=s),u}function T(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===h)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);let i=t.update(n),r=n.material;if(Array.isArray(r)){let t=i.groups;for(let l=0,u=t.length;l<u;l++){let u=t[l],c=r[u.materialIndex];if(c&&c.visible){let t=S(n,c,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,u)}}}else if(r.visible){let t=S(n,r,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,null)}}let l=n.children;for(let e=0,t=l.length;e<t;e++)T(l[e],r,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u,this.render=function(t,n,o){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===t.length)return;let l=e.getRenderTarget(),u=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),f=e.state;f.setBlending(m),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let l=0,u=t.length;l<u;l++){let u=t[l],c=u.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);let d=c.getFrameExtents();if(r.multiply(d),s.copy(c.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(s.x=Math.floor(g/d.x),r.x=s.x*d.x,c.mapSize.x=s.x),r.y>g&&(s.y=Math.floor(g/d.y),r.y=s.y*d.y,c.mapSize.y=s.y)),null===c.map){let e=this.type!==h?{minFilter:eu,magFilter:eu}:{};c.map=new t5(r.x,r.y,e),c.map.texture.name=u.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();let p=c.getViewportCount();for(let e=0;e<p;e++){let t=c.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),f.viewport(a),c.updateMatrices(u,e),i=c.getFrustum(),T(n,o,c.camera,u,this.type)}!0!==c.isPointLightShadow&&this.type===h&&M(c,o),c.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,u,c)}}function ay(e,t,n){let i=n.isWebGL2;function r(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?eM(2929):eS(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case U:e.depthFunc(512);break;case F:e.depthFunc(519);break;case z:e.depthFunc(513);break;case B:e.depthFunc(515);break;case V:e.depthFunc(514);break;case H:e.depthFunc(518);break;case G:e.depthFunc(516);break;case W:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}}function s(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,u=null;return{setTest:function(e){t||(e?eM(2960):eS(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){(i!==t||r!==n||s!==a)&&(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){(a!==t||o!==n||l!==i)&&(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,u=null}}}let u=new function(){let t=!1,n=new t4,i=null,r=new t4(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},c=new r,h=new s,f=new WeakMap,j=new WeakMap,q={},X={},$=new WeakMap,Y=[],J=null,Z=!1,K=null,Q=null,ee=null,et=null,en=null,ei=null,er=null,es=!1,ea=null,eo=null,el=null,eu=null,ec=null,eh=e.getParameter(35661),ef=!1,ed=0,ep=e.getParameter(7938);-1!==ep.indexOf("WebGL")?ef=(ed=parseFloat(/^WebGL (\d)/.exec(ep)[1]))>=1:-1!==ep.indexOf("OpenGL ES")&&(ef=(ed=parseFloat(/^OpenGL ES (\d)/.exec(ep)[1]))>=2);let em=null,eg={},ev=e.getParameter(3088),e_=e.getParameter(2978),ey=new t4().fromArray(ev),ex=new t4().fromArray(e_);function eb(t,n,i){let r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<i;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,r);return s}let ew={};function eM(t){!0!==q[t]&&(e.enable(t),q[t]=!0)}function eS(t){!1!==q[t]&&(e.disable(t),q[t]=!1)}function eT(t,n){return X[t]!==n&&(e.bindFramebuffer(t,n),X[t]=n,i&&(36009===t&&(X[36160]=n),36160===t&&(X[36009]=n)),!0)}function eE(i,r){let s=Y,a=!1;if(i){if(void 0===(s=$.get(r))&&(s=[],$.set(r,s)),i.isWebGLMultipleRenderTargets){let e=i.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0)}else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))}function eA(t){return J!==t&&(e.useProgram(t),J=t,!0)}ew[3553]=eb(3553,3553,1),ew[34067]=eb(34067,34069,6),u.setClear(0,0,0,1),c.setClear(1),h.setClear(0),eM(2929),c.setFunc(B),eP(!1),eN(o),eM(2884),eR(m);let eC={[b]:32774,[w]:32778,[M]:32779};if(i)eC[S]=32775,eC[T]=32776;else{let e=t.get("EXT_blend_minmax");null!==e&&(eC[S]=e.MIN_EXT,eC[T]=e.MAX_EXT)}let eL={[E]:0,[A]:1,[C]:768,[R]:770,[k]:776,[O]:774,[P]:772,[L]:769,[D]:771,[I]:775,[N]:773};function eR(t,n,i,r,s,a,o,l){if(t===m){!0===Z&&(eS(3042),Z=!1);return}if(!1===Z&&(eM(3042),Z=!0),t!==x){if(t!==K||l!==es){if((Q!==b||en!==b)&&(e.blendEquation(32774),Q=b,en=b),l)switch(t){case g:e.blendFuncSeparate(1,771,1,771);break;case v:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case y:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case g:e.blendFuncSeparate(770,771,1,771);break;case v:e.blendFunc(770,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case y:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}ee=null,et=null,ei=null,er=null,K=t,es=l}return}s=s||n,a=a||i,o=o||r,(n!==Q||s!==en)&&(e.blendEquationSeparate(eC[n],eC[s]),Q=n,en=s),(i!==ee||r!==et||a!==ei||o!==er)&&(e.blendFuncSeparate(eL[i],eL[r],eL[a],eL[o]),ee=i,et=r,ei=a,er=o),K=t,es=!1}function eD(e,t){e.side===p?eS(2884):eM(2884);let n=e.side===d;t&&(n=!n),eP(n),e.blending===g&&!1===e.transparent?eR(m):eR(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),c.setFunc(e.depthFunc),c.setTest(e.depthTest),c.setMask(e.depthWrite),u.setMask(e.colorWrite);let i=e.stencilWrite;h.setTest(i),i&&(h.setMask(e.stencilWriteMask),h.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),h.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),eO(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?eM(32926):eS(32926)}function eP(t){ea!==t&&(t?e.frontFace(2304):e.frontFace(2305),ea=t)}function eN(t){t!==a?(eM(2884),t!==eo&&(t===o?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):eS(2884),eo=t}function eO(t,n,i){t?(eM(32823),(eu!==n||ec!==i)&&(e.polygonOffset(n,i),eu=n,ec=i)):eS(32823)}function eI(e){e?eM(3089):eS(3089)}function ek(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),q={},em=null,eg={},X={},$=new WeakMap,Y=[],J=null,Z=!1,K=null,Q=null,ee=null,et=null,en=null,ei=null,er=null,es=!1,ea=null,eo=null,el=null,eu=null,ec=null,ey.set(0,0,e.canvas.width,e.canvas.height),ex.set(0,0,e.canvas.width,e.canvas.height),u.reset(),c.reset(),h.reset()}return{buffers:{color:u,depth:c,stencil:h},enable:eM,disable:eS,bindFramebuffer:eT,drawBuffers:eE,useProgram:eA,setBlending:eR,setMaterial:eD,setFlipSided:eP,setCullFace:eN,setLineWidth:function(t){t!==el&&(ef&&e.lineWidth(t),el=t)},setPolygonOffset:eO,setScissorTest:eI,activeTexture:function(t){void 0===t&&(t=33984+eh-1),em!==t&&(e.activeTexture(t),em=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===em?33984+eh-1:em);let r=eg[i];void 0===r&&(r={type:void 0,texture:void 0},eg[i]=r),(r.type!==t||r.texture!==n)&&(em!==i&&(e.activeTexture(i),em=i),e.bindTexture(t,n||ew[t]),r.type=t,r.texture=n)},unbindTexture:function(){let t=eg[em];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let i=j.get(n);void 0===i&&(i=new WeakMap,j.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){let i=j.get(n).get(t);f.get(t)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),f.set(t,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ey.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ey.copy(t))},viewport:function(t){!1===ex.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ex.copy(t))},reset:ek}}function ax(e,t,n,i,r,s,a){let o;let l=r.isWebGL2,u=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,f=r.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function _(e,t){return v?new OffscreenCanvas(e,t):tV("canvas")}function y(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let i=t?tN:Math.floor,s=i(r*e.width),a=i(r*e.height);void 0===o&&(o=_(s,a));let l=n?_(s,a):o;return l.width=s,l.height=a,l.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),l}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function x(e){return tP(e.width)&&tP(e.height)}function b(e){return!l&&(e.wrapS!==eo||e.wrapT!==eo||e.minFilter!==eu&&e.minFilter!==ef)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==eu&&e.minFilter!==ef}function M(t){e.generateMipmap(t)}function S(n,i,r,s,a=!1){if(!1===l)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),33319===i&&(5126===r&&(o=33328),5131===r&&(o=33327),5121===r&&(o=33323)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=s===to&&!1===a?35907:32856),32819===r&&(o=32854),32820===r&&(o=32855)),(33325===o||33326===o||33327===o||33328===o||34842===o||34836===o)&&t.get("EXT_color_buffer_float"),o}function T(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==eu&&e.minFilter!==ef?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===eu||e===ec||e===eh?9728:9729}function A(e){let t=e.target;t.removeEventListener("dispose",A),L(t),t.isVideoTexture&&m.delete(t)}function C(e){let t=e.target;t.removeEventListener("dispose",C),D(t)}function L(e){let t=i.get(e);if(void 0===t.__webglInit)return;let n=e.source,r=g.get(n);if(r){let i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&R(e),0===Object.keys(r).length&&g.delete(n)}i.remove(e)}function R(t){let n=i.get(t);e.deleteTexture(n.__webglTexture);let r=t.source,s=g.get(r);delete s[n.__cacheKey],a.memory.textures--}function D(t){let n=t.texture,r=i.get(t),s=i.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,r=n.length;t<r;t++){let r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[t])}i.remove(n),i.remove(t)}let P=0;function N(){P=0}function O(){let e=P;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),P+=1,e}function I(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}function k(e,t){let r=i.get(e);if(e.isVideoTexture&&en(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){let n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{W(r,e,t);return}}n.bindTexture(3553,r.__webglTexture,33984+t)}function U(e,t){let r=i.get(e);if(e.version>0&&r.__version!==e.version){W(r,e,t);return}n.bindTexture(35866,r.__webglTexture,33984+t)}function F(e,t){let r=i.get(e);if(e.version>0&&r.__version!==e.version){W(r,e,t);return}n.bindTexture(32879,r.__webglTexture,33984+t)}function z(e,t){let r=i.get(e);if(e.version>0&&r.__version!==e.version){j(r,e,t);return}n.bindTexture(34067,r.__webglTexture,33984+t)}let B={[ea]:10497,[eo]:33071,[el]:33648},V={[eu]:9728,[ec]:9984,[eh]:9986,[ef]:9729,[ed]:9985,[ep]:9987};function H(n,s,a){if(a?(e.texParameteri(n,10242,B[s.wrapS]),e.texParameteri(n,10243,B[s.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,B[s.wrapR]),e.texParameteri(n,10240,V[s.magFilter]),e.texParameteri(n,10241,V[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),(s.wrapS!==eo||s.wrapT!==eo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(s.magFilter)),e.texParameteri(n,10241,E(s.minFilter)),s.minFilter!==eu&&s.minFilter!==ef&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let a=t.get("EXT_texture_filter_anisotropic");(s.type!==eb||!1!==t.has("OES_texture_float_linear"))&&(!1!==l||s.type!==ew||!1!==t.has("OES_texture_half_float_linear"))&&(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function G(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",A));let r=n.source,s=g.get(r);void 0===s&&(s={},g.set(r,s));let o=I(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;let r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&R(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function W(t,r,a){let o=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(o=35866),r.isData3DTexture&&(o=32879);let u=G(t,r),c=r.source;n.bindTexture(o,t.__webglTexture,33984+a);let f=i.get(c);if(c.version!==f.__version||!0===u){let t;n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let i=b(r)&&!1===x(r.image),d=y(r.image,i,!1,h),p=x(d=ei(r,d))||l,m=s.convert(r.format,r.encoding),g=s.convert(r.type),v=S(r.internalFormat,m,g,r.encoding,r.isVideoTexture);H(o,r,p);let _=r.mipmaps,E=l&&!0!==r.isVideoTexture,A=void 0===f.__version||!0===u,C=T(r,d,p);if(r.isDepthTexture)v=6402,l?v=r.type===eb?36012:r.type===ex?33190:r.type===eT?35056:33189:r.type===eb&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===eD&&6402===v&&r.type!==e_&&r.type!==ex&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ex,g=s.convert(r.type)),r.format===eP&&6402===v&&(v=34041,r.type!==eT&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=eT,g=s.convert(r.type))),A&&(E?n.texStorage2D(3553,1,v,d.width,d.height):n.texImage2D(3553,0,v,d.width,d.height,0,m,g,null));else if(r.isDataTexture){if(_.length>0&&p){E&&A&&n.texStorage2D(3553,C,v,_[0].width,_[0].height);for(let e=0,i=_.length;e<i;e++)t=_[e],E?n.texSubImage2D(3553,e,0,0,t.width,t.height,m,g,t.data):n.texImage2D(3553,e,v,t.width,t.height,0,m,g,t.data);r.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,C,v,d.width,d.height),n.texSubImage2D(3553,0,0,0,d.width,d.height,m,g,d.data)):n.texImage2D(3553,0,v,d.width,d.height,0,m,g,d.data)}else if(r.isCompressedTexture){if(r.isCompressedArrayTexture){E&&A&&n.texStorage3D(35866,C,v,_[0].width,_[0].height,d.depth);for(let e=0,i=_.length;e<i;e++)t=_[e],r.format!==eC?null!==m?E?n.compressedTexSubImage3D(35866,e,0,0,0,t.width,t.height,d.depth,m,t.data,0,0):n.compressedTexImage3D(35866,e,v,t.width,t.height,d.depth,0,t.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage3D(35866,e,0,0,0,t.width,t.height,d.depth,m,g,t.data):n.texImage3D(35866,e,v,t.width,t.height,d.depth,0,m,g,t.data)}else{E&&A&&n.texStorage2D(3553,C,v,_[0].width,_[0].height);for(let e=0,i=_.length;e<i;e++)t=_[e],r.format!==eC?null!==m?E?n.compressedTexSubImage2D(3553,e,0,0,t.width,t.height,m,t.data):n.compressedTexImage2D(3553,e,v,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,e,0,0,t.width,t.height,m,g,t.data):n.texImage2D(3553,e,v,t.width,t.height,0,m,g,t.data)}}else if(r.isDataArrayTexture)E?(A&&n.texStorage3D(35866,C,v,d.width,d.height,d.depth),n.texSubImage3D(35866,0,0,0,0,d.width,d.height,d.depth,m,g,d.data)):n.texImage3D(35866,0,v,d.width,d.height,d.depth,0,m,g,d.data);else if(r.isData3DTexture)E?(A&&n.texStorage3D(32879,C,v,d.width,d.height,d.depth),n.texSubImage3D(32879,0,0,0,0,d.width,d.height,d.depth,m,g,d.data)):n.texImage3D(32879,0,v,d.width,d.height,d.depth,0,m,g,d.data);else if(r.isFramebufferTexture){if(A){if(E)n.texStorage2D(3553,C,v,d.width,d.height);else{let e=d.width,t=d.height;for(let i=0;i<C;i++)n.texImage2D(3553,i,v,e,t,0,m,g,null),e>>=1,t>>=1}}}else if(_.length>0&&p){E&&A&&n.texStorage2D(3553,C,v,_[0].width,_[0].height);for(let e=0,i=_.length;e<i;e++)t=_[e],E?n.texSubImage2D(3553,e,0,0,m,g,t):n.texImage2D(3553,e,v,m,g,t);r.generateMipmaps=!1}else E?(A&&n.texStorage2D(3553,C,v,d.width,d.height),n.texSubImage2D(3553,0,0,0,m,g,d)):n.texImage2D(3553,0,v,m,g,d);w(r,p)&&M(o),f.__version=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function j(t,r,a){if(6!==r.image.length)return;let o=G(t,r),u=r.source;n.bindTexture(34067,t.__webglTexture,33984+a);let h=i.get(u);if(u.version!==h.__version||!0===o){let t;n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let i=r.isCompressedTexture||r.image[0].isCompressedTexture,f=r.image[0]&&r.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)i||f?d[e]=f?r.image[e].image:r.image[e]:d[e]=y(r.image[e],!1,!0,c),d[e]=ei(r,d[e]);let p=d[0],m=x(p)||l,g=s.convert(r.format,r.encoding),v=s.convert(r.type),_=S(r.internalFormat,g,v,r.encoding),b=l&&!0!==r.isVideoTexture,E=void 0===h.__version||!0===o,A=T(r,p,m);if(H(34067,r,m),i){b&&E&&n.texStorage2D(34067,A,_,p.width,p.height);for(let e=0;e<6;e++){t=d[e].mipmaps;for(let i=0;i<t.length;i++){let s=t[i];r.format!==eC?null!==g?b?n.compressedTexSubImage2D(34069+e,i,0,0,s.width,s.height,g,s.data):n.compressedTexImage2D(34069+e,i,_,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?n.texSubImage2D(34069+e,i,0,0,s.width,s.height,g,v,s.data):n.texImage2D(34069+e,i,_,s.width,s.height,0,g,v,s.data)}}}else{t=r.mipmaps,b&&E&&(t.length>0&&A++,n.texStorage2D(34067,A,_,d[0].width,d[0].height));for(let e=0;e<6;e++)if(f){b?n.texSubImage2D(34069+e,0,0,0,d[e].width,d[e].height,g,v,d[e].data):n.texImage2D(34069+e,0,_,d[e].width,d[e].height,0,g,v,d[e].data);for(let i=0;i<t.length;i++){let r=t[i].image[e].image;b?n.texSubImage2D(34069+e,i+1,0,0,r.width,r.height,g,v,r.data):n.texImage2D(34069+e,i+1,_,r.width,r.height,0,g,v,r.data)}}else{b?n.texSubImage2D(34069+e,0,0,0,g,v,d[e]):n.texImage2D(34069+e,0,_,g,v,d[e]);for(let i=0;i<t.length;i++){let r=t[i];b?n.texSubImage2D(34069+e,i+1,0,0,g,v,r.image[e]):n.texImage2D(34069+e,i+1,_,g,v,r.image[e])}}}w(r,m)&&M(34067),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function q(t,r,a,o,l){let u=s.convert(a.format,a.encoding),c=s.convert(a.type),h=S(a.internalFormat,u,c,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,u,c,null):n.texImage2D(l,0,h,r.width,r.height,0,u,c,null)),n.bindFramebuffer(36160,t),et(r)?d.framebufferTexture2DMultisampleEXT(36160,o,l,i.get(a).__webglTexture,0,ee(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,o,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function X(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||et(n)){let t=n.depthTexture;t&&t.isDepthTexture&&(t.type===eb?r=36012:t.type===ex&&(r=33190));let i=ee(n);et(n)?d.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){let r=ee(n);i&&!1===et(n)?e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{let t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){let a=t[r],o=s.convert(a.format,a.encoding),l=s.convert(a.type),u=S(a.internalFormat,o,l,a.encoding),c=ee(n);i&&!1===et(n)?e.renderbufferStorageMultisample(36161,c,u,n.width,n.height):et(n)?d.renderbufferStorageMultisampleEXT(36161,c,u,n.width,n.height):e.renderbufferStorage(36161,u,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function $(t,r){if(r&&r.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!(r.depthTexture&&r.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),k(r.depthTexture,0);let s=i.get(r.depthTexture).__webglTexture,a=ee(r);if(r.depthTexture.format===eD)et(r)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):e.framebufferTexture2D(36160,36096,3553,s,0);else if(r.depthTexture.format===eP)et(r)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):e.framebufferTexture2D(36160,33306,3553,s,0);else throw Error("Unknown depthTexture format")}function Y(t){let r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw Error("target.depthTexture not supported in Cube render targets");$(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),X(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),X(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function J(e,t,n){let r=i.get(e);void 0!==t&&q(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&Y(e)}function Z(t){let o=t.texture,u=i.get(t),c=i.get(o);t.addEventListener("dispose",C),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=o.version,a.memory.textures++);let h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=x(t)||l;if(h){u.__webglFramebuffer=[];for(let t=0;t<6;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(u.__webglFramebuffer=e.createFramebuffer(),f){if(r.drawBuffers){let n=t.texture;for(let t=0,r=n.length;t<r;t++){let r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.")}if(l&&t.samples>0&&!1===et(t)){let i=f?o:[o];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){let r=i[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer[n]);let a=s.convert(r.format,r.encoding),o=s.convert(r.type),l=S(r.internalFormat,a,o,r.encoding,!0===t.isXRRenderTarget),c=ee(t);e.renderbufferStorageMultisample(36161,c,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),X(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,c.__webglTexture),H(34067,o,d);for(let e=0;e<6;e++)q(u.__webglFramebuffer[e],t,o,36064,34069+e);w(o,d)&&M(34067),n.unbindTexture()}else if(f){let e=t.texture;for(let r=0,s=e.length;r<s;r++){let s=e[r],a=i.get(s);n.bindTexture(3553,a.__webglTexture),H(3553,s,d),q(u.__webglFramebuffer,t,s,36064+r,3553),w(s,d)&&M(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,c.__webglTexture),H(e,o,d),q(u.__webglFramebuffer,t,o,36064,e),w(o,d)&&M(e),n.unbindTexture()}t.depthBuffer&&Y(t)}function K(e){let t=x(e)||l,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=r.length;s<a;s++){let a=r[s];if(w(a,t)){let t=e.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(t,r),M(t),n.unbindTexture()}}}function Q(t){if(l&&t.samples>0&&!1===et(t)){let r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height,o=16384,l=[],u=t.stencilBuffer?33306:36096,c=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(36064+n),t.depthBuffer&&l.push(u);let f=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===f&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[n]),!0===f&&(e.invalidateFramebuffer(36008,[u]),e.invalidateFramebuffer(36009,[u])),h){let t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,c.__webglColorRenderbuffer[t]);let s=i.get(r[t]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}}function ee(e){return Math.min(f,e.samples)}function et(e){let n=i.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function en(e){let t=a.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}function ei(e,n){let i=e.encoding,r=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===t_||i!==ta&&(i===to?!1===l?!0===t.has("EXT_sRGB")&&r===eC?(e.format=t_,e.minFilter=ef,e.generateMipmaps=!1):n=tQ.sRGBToLinear(n):(r!==eC||s!==em)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=O,this.resetTextureUnits=N,this.setTexture2D=k,this.setTexture2DArray=U,this.setTexture3D=F,this.setTextureCube=z,this.rebindTextures=J,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=Q,this.setupDepthRenderbuffer=Y,this.setupFrameBufferTexture=q,this.useMultisampledRTT=et}function ab(e,t,n){let i=n.isWebGL2;return{convert:function(n,r=null){let s;if(n===em)return 5121;if(n===eM)return 32819;if(n===eS)return 32820;if(n===eg)return 5120;if(n===ev)return 5122;if(n===e_)return 5123;if(n===ey)return 5124;if(n===ex)return 5125;if(n===eb)return 5126;if(n===ew)return i?5131:null!==(s=t.get("OES_texture_half_float"))?s.HALF_FLOAT_OES:null;if(n===eE)return 6406;if(n===eC)return 6408;if(n===eL)return 6409;if(n===eR)return 6410;if(n===eD)return 6402;if(n===eP)return 34041;if(n===eA)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===t_)return null!==(s=t.get("EXT_sRGB"))?s.SRGB_ALPHA_EXT:null;if(n===eN)return 6403;if(n===eO)return 36244;if(n===eI)return 33319;if(n===ek)return 33320;if(n===eU)return 36249;if(n===eF||n===ez||n===eB||n===eV){if(r===to){if(null===(s=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===eF)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ez)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===eB)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===eV)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(s=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===eF)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ez)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===eB)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===eV)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(n===eH||n===eG||n===eW||n===ej){if(null===(s=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===eH)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===eG)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===eW)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ej)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===eq)return null!==(s=t.get("WEBGL_compressed_texture_etc1"))?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===eX||n===e$){if(null===(s=t.get("WEBGL_compressed_texture_etc")))return null;if(n===eX)return r===to?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===e$)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===eY||n===eJ||n===eZ||n===eK||n===eQ||n===e0||n===e1||n===e2||n===e3||n===e4||n===e5||n===e6||n===e8||n===e9){if(null===(s=t.get("WEBGL_compressed_texture_astc")))return null;if(n===eY)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===eJ)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===eZ)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===eK)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===eQ)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===e0)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===e1)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===e2)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===e3)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===e4)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===e5)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===e6)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===e8)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===e9)return r===to?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===e7){if(null===(s=t.get("EXT_texture_compression_bptc")))return null;if(n===e7)return r===to?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===eT?i?34042:null!==(s=t.get("WEBGL_depth_texture"))?s.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}class aw extends iZ{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class aM extends n0{constructor(){super(),this.isGroup=!0,this.type="Group"}}let aS={type:"move"};class aT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new aM,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new aM,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new t7,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new t7),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new aM,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new t7,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new t7),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let i of(s=!0,e.hand.values())){let e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}let i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,u=.005;l.inputState.pinching&&a>o+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1);null!==a&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(aS)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new aM;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class aE extends t3{constructor(e,t,n,i,r,s,a,o,l,u){if((u=void 0!==u?u:eD)!==eD&&u!==eP)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===eD&&(n=ex),void 0===n&&u===eP&&(n=eT),super(null,i,r,s,a,o,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:eu,this.minFilter=void 0!==o?o:eu,this.flipY=!1,this.generateMipmaps=!1}}class aA extends ty{constructor(e,t){super();let n=this,i=null,r=1,s=null,a="local-floor",o=null,l=null,u=null,c=null,h=null,f=null,d=t.getContextAttributes(),p=null,m=null,g=[],v=[],_=new Set,y=new Map,x=new iZ;x.layers.enable(1),x.viewport=new t4;let b=new iZ;b.layers.enable(2),b.viewport=new t4;let w=[x,b],M=new aw;M.layers.enable(1),M.layers.enable(2);let S=null,T=null;function E(e){let t=v.indexOf(e.inputSource);if(-1===t)return;let n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function A(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",A),i.removeEventListener("inputsourceschange",C);for(let e=0;e<g.length;e++){let t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}S=null,T=null,e.setRenderTarget(p),h=null,c=null,u=null,i=null,m=null,I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],i=v.indexOf(n);i>=0&&(v[i]=null,g[i].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],i=v.indexOf(n);if(-1===i){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),i=e;break}if(null===v[e]){v[e]=n,i=e;break}}if(-1===i)break}let r=g[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new aT,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new aT,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new aT,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o||s},this.setReferenceSpace=function(e){o=e},this.getBaseLayer=function(){return null!==c?c:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(l){if(null!==(i=l)){if(p=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",A),i.addEventListener("inputsourceschange",C),!0!==d.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==i.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),m=new t5(h.framebufferWidth,h.framebufferHeight,{format:eC,type:em,encoding:e.outputEncoding,stencilBuffer:d.stencil})}else{let n=null,s=null,a=null;d.depth&&(a=d.stencil?35056:33190,n=d.stencil?eP:eD,s=d.stencil?eT:ex);let o={colorFormat:32856,depthFormat:a,scaleFactor:r};c=(u=new XRWebGLBinding(i,t)).createProjectionLayer(o),i.updateRenderState({layers:[c]}),m=new t5(c.textureWidth,c.textureHeight,{format:eC,type:em,depthTexture:new aE(c.textureWidth,c.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:d.stencil,encoding:e.outputEncoding,samples:d.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=c.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=null,s=await i.requestReferenceSpace(a),I.setContext(i),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};let L=new t7,R=new t7;function D(e,t,n){L.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);let i=L.distanceTo(R),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(s[8]+1)/s[0],f=a*c,d=a*h,p=i/(-c+h),m=-(p*c);t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let g=a+p,v=o+p,_=f-m,y=d+(i-m),x=l*o/v*g,b=u*o/v*g;e.projectionMatrix.makePerspective(_,y,x,b,g,v)}function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;M.near=b.near=x.near=e.near,M.far=b.far=x.far=e.far,(S!==M.near||T!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),S=M.near,T=M.far);let t=e.parent,n=M.cameras;P(M,t);for(let e=0;e<n.length;e++)P(n[e],t);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.matrix.copy(M.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);let r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);2===n.length?D(M,x,b):M.projectionMatrix.copy(x.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){return null!==c?c.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==c&&(c.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.getPlanes=function(){return _};let N=null;function O(t,i){if(l=i.getViewerPose(o||s),f=i,null!==l){let t=l.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){let r=t[i],s=null;if(null!==h)s=h.getViewport(r);else{let t=u.getViewSubImage(c,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(m,t.colorTexture,c.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=w[i];void 0===a&&((a=new iZ).layers.enable(i),a.viewport=new t4,w[i]=a),a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&M.matrix.copy(a.matrix),!0===n&&M.cameras.push(a)}}for(let e=0;e<g.length;e++){let t=v[e],n=g[e];null!==t&&void 0!==n&&n.update(t,i,o||s)}if(N&&N(t,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let e=null;for(let t of _)i.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(let t of e)_.delete(t),y.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(let e of i.detectedPlanes)if(_.has(e)){let t=y.get(e);e.lastChangedTime>t&&(y.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else _.add(e),y.set(e,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}f=null}let I=new re;I.setAnimationLoop(O),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}function aC(e,t){function n(n,i){let r,s;n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===d&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===d&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);let a=t.get(i).envMap;if(a&&(n.envMap.value=a,n.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;let t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*t}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.iridescenceMap?r=i.iridescenceMap:i.iridescenceThicknessMap?r=i.iridescenceThicknessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularColorMap?r=i.specularColorMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap?r=i.thicknessMap:i.sheenColorMap?r=i.sheenColorMap:i.sheenRoughnessMap&&(r=i.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),n.uvTransform.value.copy(r.matrix)),i.aoMap?s=i.aoMap:i.lightMap&&(s=i.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uv2Transform.value.copy(s.matrix))}function i(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}function r(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function s(e,t,n,i){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}function a(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function o(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}function l(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function u(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}function c(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===d&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}function h(e,t){t.matcap&&(e.matcap.value=t.matcap)}function f(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,ij(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,t,d,p,m){t.isMeshBasicMaterial?n(e,t):t.isMeshLambertMaterial?n(e,t):t.isMeshToonMaterial?(n(e,t),l(e,t)):t.isMeshPhongMaterial?(n(e,t),o(e,t)):t.isMeshStandardMaterial?(n(e,t),u(e,t),t.isMeshPhysicalMaterial&&c(e,t,m)):t.isMeshMatcapMaterial?(n(e,t),h(e,t)):t.isMeshDepthMaterial?n(e,t):t.isMeshDistanceMaterial?(n(e,t),f(e,t)):t.isMeshNormalMaterial?n(e,t):t.isLineBasicMaterial?(i(e,t),t.isLineDashedMaterial&&r(e,t)):t.isPointsMaterial?s(e,t,d,p):t.isSpriteMaterial?a(e,t):t.isShadowMaterial?(e.color.value.copy(t.color),e.opacity.value=t.opacity):t.isShaderMaterial&&(t.uniformsNeedUpdate=!1)}}}function aL(e,t,n,i){let r={},s={},a=[],o=n.isWebGL2?e.getParameter(35375):0;function l(t){let n=u();t.__bindingPointIndex=n;let i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}function u(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function c(t){let n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=i.length;t<n;t++){let n=i[t];if(!0===h(n,t,s)){let t=n.value,i=n.__offset;"number"==typeof t?n.__data[0]=t:n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(35345,i,n.__data)}}e.bindBuffer(35345,null)}function h(e,t,n){let i=e.value;if(void 0===n[t])return"number"==typeof i?n[t]=i:n[t]=i.clone(),!0;if("number"==typeof i){if(n[t]!==i)return n[t]=i,!0}else{let e=n[t];if(!1===e.equals(i))return e.copy(i),!0}return!1}function f(e){let t=e.uniforms,n=0,i=16,r=0;for(let e=0,s=t.length;e<s;e++){let s=t[e],a=d(s);if(s.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,e>0){r=n%i;let e=i-r;0!==r&&e-a.boundary<0&&(n+=i-r,s.__offset=n)}n+=a.storage}return(r=n%i)>0&&(n+=i-r),e.__size=n,e.__cache={},this}function d(e){let t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function p(t){let n=t.target;n.removeEventListener("dispose",p);let i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){let n=t.program;i.uniformBlockBinding(e,n)},update:function(e,n){let a=r[e.id];void 0===a&&(f(e),a=l(e),r[e.id]=a,e.addEventListener("dispose",p));let o=n.program;i.updateUBOMapping(e,o);let u=t.render.frame;s[e.id]!==u&&(c(e),s[e.id]=u)},dispose:function(){for(let t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}function aR(){let e=tV("canvas");return e.style.display="block",e}function aD(e={}){let t,n,r,s,a,o,l,u,c,h,m,g,v,_,y,x,b,w,M,S,T,E,A,C,L;this.isWebGLRenderer=!0;let R=void 0!==e.canvas?e.canvas:aR(),D=void 0!==e.context?e.context:null,P=void 0===e.depth||e.depth,N=void 0===e.stencil||e.stencil,O=void 0!==e.antialias&&e.antialias,I=void 0===e.premultipliedAlpha||e.premultipliedAlpha,k=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,U=void 0!==e.powerPreference?e.powerPreference:"default",F=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==D?D.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let z=null,B=null,V=[],H=[];this.domElement=R,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ta,this.physicallyCorrectLights=!1,this.toneMapping=$,this.toneMappingExposure=1;let G=this,W=!1,j=0,q=0,X=null,Y=-1,J=null,Z=new t4,K=new t4,Q=null,ee=R.width,et=R.height,en=1,ei=null,er=null,es=new t4(0,0,ee,et),ea=new t4(0,0,ee,et),eo=!1,el=new i7,eu=!1,ec=!1,eh=null,ef=new nL,ed=new tU,eg=new t7,ev={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function e_(){return null===X?en:1}let ey=D;function ex(e,t){for(let n=0;n<e.length;n++){let i=e[n],r=R.getContext(i,t);if(null!==r)return r}return null}try{let e={alpha:!0,depth:P,stencil:N,antialias:O,premultipliedAlpha:I,preserveDrawingBuffer:k,powerPreference:U,failIfMajorPerformanceCaveat:F};if("setAttribute"in R&&R.setAttribute("data-engine",`three.js r${i}`),R.addEventListener("webglcontextlost",eT,!1),R.addEventListener("webglcontextrestored",eE,!1),R.addEventListener("webglcontextcreationerror",eA,!1),null===ey){let t=["webgl2","webgl","experimental-webgl"];if(!0===G.isWebGL1Renderer&&t.shift(),ey=ex(t,e),null===ey){if(ex(t))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}void 0===ey.getShaderPrecisionFormat&&(ey.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eM(){n=new rP(ey),r=new rc(ey,n,e),n.init(r),A=new ab(ey,n,r),s=new ay(ey,n,r),a=new rI,o=new an,l=new ax(ey,n,s,o,r,A,a),u=new rf(G),c=new rD(G),h=new rt(ey,r),C=new rl(ey,n,h,r),m=new rN(ey,h,a,C),g=new rz(ey,m,h,a),S=new rF(ey,r,l),b=new rh(o),v=new at(G,u,c,n,r,C,b),_=new aC(G,o),y=new aa,x=new ad(n,r),M=new ro(G,u,c,s,g,t,I),w=new a_(G,g,r),L=new aL(ey,a,r,s),T=new ru(ey,n,a,r),E=new rO(ey,n,a,r),a.programs=v.programs,G.capabilities=r,G.extensions=n,G.properties=o,G.renderLists=y,G.shadowMap=w,G.state=s,G.info=a}eM();let eS=new aA(G,ey);function eT(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function eE(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;let e=a.autoReset,t=w.enabled,n=w.autoUpdate,i=w.needsUpdate,r=w.type;eM(),a.autoReset=e,w.enabled=t,w.autoUpdate=n,w.needsUpdate=i,w.type=r}function eA(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eL(e){let t=e.target;t.removeEventListener("dispose",eL),eR(t)}function eR(e){eD(e),o.remove(e)}function eD(e){let t=o.get(e).programs;void 0!==t&&(t.forEach(function(e){v.releaseProgram(e)}),e.isShaderMaterial&&v.releaseShaderCache(e))}this.xr=eS,this.getContext=function(){return ey},this.getContextAttributes=function(){return ey.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return en},this.setPixelRatio=function(e){void 0!==e&&(en=e,this.setSize(ee,et,!1))},this.getSize=function(e){return e.set(ee,et)},this.setSize=function(e,t,n){if(eS.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=e,et=t,R.width=Math.floor(e*en),R.height=Math.floor(t*en),!1!==n&&(R.style.width=e+"px",R.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(ee*en,et*en).floor()},this.setDrawingBufferSize=function(e,t,n){ee=e,et=t,en=n,R.width=Math.floor(e*n),R.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(Z)},this.getViewport=function(e){return e.copy(es)},this.setViewport=function(e,t,n,i){e.isVector4?es.set(e.x,e.y,e.z,e.w):es.set(e,t,n,i),s.viewport(Z.copy(es).multiplyScalar(en).floor())},this.getScissor=function(e){return e.copy(ea)},this.setScissor=function(e,t,n,i){e.isVector4?ea.set(e.x,e.y,e.z,e.w):ea.set(e,t,n,i),s.scissor(K.copy(ea).multiplyScalar(en).floor())},this.getScissorTest=function(){return eo},this.setScissorTest=function(e){s.setScissorTest(eo=e)},this.setOpaqueSort=function(e){ei=e},this.setTransparentSort=function(e){er=e},this.getClearColor=function(e){return e.copy(M.getClearColor())},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),ey.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){R.removeEventListener("webglcontextlost",eT,!1),R.removeEventListener("webglcontextrestored",eE,!1),R.removeEventListener("webglcontextcreationerror",eA,!1),y.dispose(),x.dispose(),o.dispose(),u.dispose(),c.dispose(),g.dispose(),C.dispose(),L.dispose(),v.dispose(),eS.dispose(),eS.removeEventListener("sessionstart",eO),eS.removeEventListener("sessionend",eI),eh&&(eh.dispose(),eh=null),ek.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){let o;null===t&&(t=ev);let l=r.isMesh&&0>r.matrixWorld.determinant(),u=eW(e,t,n,i,r);s.setMaterial(i,l);let c=n.index,f=1;!0===i.wireframe&&(c=m.getWireframeAttribute(n),f=2);let d=n.drawRange,p=n.attributes.position,g=d.start*f,v=(d.start+d.count)*f;null!==a&&(g=Math.max(g,a.start*f),v=Math.min(v,(a.start+a.count)*f)),null!==c?(g=Math.max(g,0),v=Math.min(v,c.count)):null!=p&&(g=Math.max(g,0),v=Math.min(v,p.count));let _=v-g;if(_<0||_===1/0)return;C.setup(r,i,u,n,c);let y=T;if(null!==c&&(o=h.get(c),(y=E).setIndex(o)),r.isMesh)!0===i.wireframe?(s.setLineWidth(i.wireframeLinewidth*e_()),y.setMode(1)):y.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),s.setLineWidth(e*e_()),r.isLineSegments?y.setMode(1):r.isLineLoop?y.setMode(2):y.setMode(3)}else r.isPoints?y.setMode(0):r.isSprite&&y.setMode(4);if(r.isInstancedMesh)y.renderInstances(g,_,r.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);y.renderInstances(g,_,t)}else y.render(g,_)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===p?(e.side=d,e.needsUpdate=!0,eH(e,t,n),e.side=f,e.needsUpdate=!0,eH(e,t,n),e.side=p):eH(e,t,n)}(B=x.get(e)).init(),H.push(B),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(B.pushLight(e),e.castShadow&&B.pushShadow(e))}),B.setupLights(G.physicallyCorrectLights),e.traverse(function(t){let i=t.material;if(i){if(Array.isArray(i))for(let r=0;r<i.length;r++)n(i[r],e,t);else n(i,e,t)}}),H.pop(),B=null};let eP=null;function eN(e){eP&&eP(e)}function eO(){ek.stop()}function eI(){ek.start()}let ek=new re;function eU(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)B.pushLight(e),e.castShadow&&B.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||el.intersectsSprite(e)){i&&eg.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ef);let t=g.update(e),r=e.material;r.visible&&z.push(e,t,r,n,eg.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==a.render.frame&&(e.skeleton.update(),e.skeleton.frame=a.render.frame),!e.frustumCulled||el.intersectsObject(e))){i&&eg.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ef);let t=g.update(e),r=e.material;if(Array.isArray(r)){let i=t.groups;for(let s=0,a=i.length;s<a;s++){let a=i[s],o=r[a.materialIndex];o&&o.visible&&z.push(e,t,o,n,eg.z,a)}}else r.visible&&z.push(e,t,r,n,eg.z,null)}}let r=e.children;for(let e=0,s=r.length;e<s;e++)eU(r[e],t,n,i)}function eF(e,t,n,i){let r=e.opaque,a=e.transmissive,o=e.transparent;B.setupLightsView(n),a.length>0&&ez(r,t,n),i&&s.viewport(Z.copy(i)),r.length>0&&eB(r,t,n),a.length>0&&eB(a,t,n),o.length>0&&eB(o,t,n),s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),s.setPolygonOffset(!1)}function ez(e,t,i){let s=r.isWebGL2;null===eh&&(eh=new t5(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")?ew:em,minFilter:ep,samples:s&&!0===O?4:0})),G.getDrawingBufferSize(ed),s?eh.setSize(ed.x,ed.y):eh.setSize(tN(ed.x),tN(ed.y));let a=G.getRenderTarget();G.setRenderTarget(eh),G.clear();let o=G.toneMapping;G.toneMapping=$,eB(e,t,i),G.toneMapping=o,l.updateMultisampleRenderTarget(eh),l.updateRenderTargetMipmap(eh),G.setRenderTarget(a)}function eB(e,t,n){let i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){let s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,u=s.group;a.layers.test(n.layers)&&eV(a,t,n,o,l,u)}}function eV(e,t,n,i,r,s){e.onBeforeRender(G,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(G,t,n,i,e,s),!0===r.transparent&&r.side===p?(r.side=d,r.needsUpdate=!0,G.renderBufferDirect(n,t,i,r,e,s),r.side=f,r.needsUpdate=!0,G.renderBufferDirect(n,t,i,r,e,s),r.side=p):G.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(G,t,n,i,r,s)}function eH(e,t,n){!0!==t.isScene&&(t=ev);let i=o.get(e),r=B.state.lights,s=B.state.shadowsArray,a=r.state.version,l=v.getParameters(e,r.state,s,t,n),h=v.getProgramCacheKey(l),f=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?c:u).get(e.envMap||i.environment),void 0===f&&(e.addEventListener("dispose",eL),f=new Map,i.programs=f);let d=f.get(h);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===a)return eG(e,l),d}else l.uniforms=v.getUniforms(e),e.onBuild(n,l,G),e.onBeforeCompile(l,G),d=v.acquireProgram(l,h),f.set(h,d),i.uniforms=l.uniforms;let p=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(p.clippingPlanes=b.uniform),eG(e,l),i.needsLights=eq(e),i.lightsStateVersion=a,i.needsLights&&(p.ambientLightColor.value=r.state.ambient,p.lightProbe.value=r.state.probe,p.directionalLights.value=r.state.directional,p.directionalLightShadows.value=r.state.directionalShadow,p.spotLights.value=r.state.spot,p.spotLightShadows.value=r.state.spotShadow,p.rectAreaLights.value=r.state.rectArea,p.ltc_1.value=r.state.rectAreaLTC1,p.ltc_2.value=r.state.rectAreaLTC2,p.pointLights.value=r.state.point,p.pointLightShadows.value=r.state.pointShadow,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotLightMatrix.value=r.state.spotLightMatrix,p.spotLightMap.value=r.state.spotLightMap,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);let m=d.getUniforms(),g=sI.seqWithValue(m.seq,p);return i.currentProgram=d,i.uniformsList=g,d}function eG(e,t){let n=o.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function eW(e,t,n,i,a){!0!==t.isScene&&(t=ev),l.resetTextureUnits();let h=t.fog,f=i.isMeshStandardMaterial?t.environment:null,d=null===X?G.outputEncoding:!0===X.isXRRenderTarget?X.texture.encoding:ta,p=(i.isMeshStandardMaterial?c:u).get(i.envMap||f),m=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,g=!!i.normalMap&&!!n.attributes.tangent,v=!!n.morphAttributes.position,y=!!n.morphAttributes.normal,x=!!n.morphAttributes.color,w=i.toneMapped?G.toneMapping:$,M=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,T=void 0!==M?M.length:0,E=o.get(i),A=B.state.lights;if(!0===eu&&(!0===ec||e!==J)){let t=e===J&&i.id===Y;b.setState(i,e,t)}let C=!1;i.version===E.__version?E.needsLights&&E.lightsStateVersion!==A.state.version?C=!0:E.outputEncoding!==d?C=!0:a.isInstancedMesh&&!1===E.instancing?C=!0:a.isInstancedMesh||!0!==E.instancing?a.isSkinnedMesh&&!1===E.skinning?C=!0:a.isSkinnedMesh||!0!==E.skinning?E.envMap!==p?C=!0:!0===i.fog&&E.fog!==h?C=!0:void 0!==E.numClippingPlanes&&(E.numClippingPlanes!==b.numPlanes||E.numIntersection!==b.numIntersection)?C=!0:E.vertexAlphas!==m?C=!0:E.vertexTangents!==g?C=!0:E.morphTargets!==v?C=!0:E.morphNormals!==y?C=!0:E.morphColors!==x?C=!0:E.toneMapping!==w?C=!0:!0===r.isWebGL2&&E.morphTargetsCount!==T&&(C=!0):C=!0:C=!0:(C=!0,E.__version=i.version);let R=E.currentProgram;!0===C&&(R=eH(i,t,a));let D=!1,P=!1,N=!1,O=R.getUniforms(),I=E.uniforms;if(s.useProgram(R.program)&&(D=!0,P=!0,N=!0),i.id!==Y&&(Y=i.id,P=!0),D||J!==e){if(O.setValue(ey,"projectionMatrix",e.projectionMatrix),r.logarithmicDepthBuffer&&O.setValue(ey,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),J!==e&&(J=e,P=!0,N=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){let t=O.map.cameraPosition;void 0!==t&&t.setValue(ey,eg.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&O.setValue(ey,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||a.isSkinnedMesh)&&O.setValue(ey,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){O.setOptional(ey,a,"bindMatrix"),O.setOptional(ey,a,"bindMatrixInverse");let e=a.skeleton;e&&(r.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),O.setValue(ey,"boneTexture",e.boneTexture,l),O.setValue(ey,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let k=n.morphAttributes;if((void 0!==k.position||void 0!==k.normal||void 0!==k.color&&!0===r.isWebGL2)&&S.update(a,n,i,R),(P||E.receiveShadow!==a.receiveShadow)&&(E.receiveShadow=a.receiveShadow,O.setValue(ey,"receiveShadow",a.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(I.envMap.value=p,I.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1),P&&(O.setValue(ey,"toneMappingExposure",G.toneMappingExposure),E.needsLights&&ej(I,N),h&&!0===i.fog&&_.refreshFogUniforms(I,h),_.refreshMaterialUniforms(I,i,en,et,eh),sI.upload(ey,E.uniformsList,I,l)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(sI.upload(ey,E.uniformsList,I,l),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&O.setValue(ey,"center",a.center),O.setValue(ey,"modelViewMatrix",a.modelViewMatrix),O.setValue(ey,"normalMatrix",a.normalMatrix),O.setValue(ey,"modelMatrix",a.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){let e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(r.isWebGL2){let n=e[t];L.update(n,R),L.bind(n,R)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return R}function ej(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function eq(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}ek.setAnimationLoop(eN),"undefined"!=typeof self&&ek.setContext(self),this.setAnimationLoop=function(e){eP=e,eS.setAnimationLoop(e),null===e?ek.stop():ek.start()},eS.addEventListener("sessionstart",eO),eS.addEventListener("sessionend",eI),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===W)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eS.enabled&&!0===eS.isPresenting&&(!0===eS.cameraAutoUpdate&&eS.updateCamera(t),t=eS.getCamera()),!0===e.isScene&&e.onBeforeRender(G,e,t,X),(B=x.get(e,H.length)).init(),H.push(B),ef.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),el.setFromProjectionMatrix(ef),ec=this.localClippingEnabled,eu=b.init(this.clippingPlanes,ec,t),(z=y.get(e,V.length)).init(),V.push(z),eU(e,t,0,G.sortObjects),z.finish(),!0===G.sortObjects&&z.sort(ei,er),!0===eu&&b.beginShadows();let n=B.state.shadowsArray;if(w.render(n,e,t),!0===eu&&b.endShadows(),!0===this.info.autoReset&&this.info.reset(),M.render(z,e),B.setupLights(G.physicallyCorrectLights),t.isArrayCamera){let n=t.cameras;for(let t=0,i=n.length;t<i;t++){let i=n[t];eF(z,e,i,i.viewport)}}else eF(z,e,t);null!==X&&(l.updateMultisampleRenderTarget(X),l.updateRenderTargetMipmap(X)),!0===e.isScene&&e.onAfterRender(G,e,t),C.resetDefaultState(),Y=-1,J=null,H.pop(),B=H.length>0?H[H.length-1]:null,V.pop(),z=V.length>0?V[V.length-1]:null},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return q},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(e,t,i){o.get(e.texture).__webglTexture=t,o.get(e.depthTexture).__webglTexture=i;let r=o.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===i,r.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let n=o.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){X=e,j=t,q=n;let i=!0,a=null,u=!1,c=!1;if(e){let n=o.get(e);void 0!==n.__useDefaultFramebuffer?(s.bindFramebuffer(36160,null),i=!1):void 0===n.__webglFramebuffer?l.setupRenderTarget(e):n.__hasExternalTextures&&l.rebindTextures(e,o.get(e.texture).__webglTexture,o.get(e.depthTexture).__webglTexture);let h=e.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(c=!0);let f=o.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=f[t],u=!0):a=r.isWebGL2&&e.samples>0&&!1===l.useMultisampledRTT(e)?o.get(e).__webglMultisampledFramebuffer:f,Z.copy(e.viewport),K.copy(e.scissor),Q=e.scissorTest}else Z.copy(es).multiplyScalar(en).floor(),K.copy(ea).multiplyScalar(en).floor(),Q=eo;if(s.bindFramebuffer(36160,a)&&r.drawBuffers&&i&&s.drawBuffers(e,a),s.viewport(Z),s.scissor(K),s.setScissorTest(Q),u){let i=o.get(e.texture);ey.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(c){let i=o.get(e.texture),r=t||0;ey.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}Y=-1},this.readRenderTargetPixels=function(e,t,i,a,l,u,c){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let h=o.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){s.bindFramebuffer(36160,h);try{let s=e.texture,o=s.format,c=s.type;if(o!==eC&&A.convert(o)!==ey.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let h=c===ew&&(n.has("EXT_color_buffer_half_float")||r.isWebGL2&&n.has("EXT_color_buffer_float"));if(c!==em&&A.convert(c)!==ey.getParameter(35738)&&!(c===eb&&(r.isWebGL2||n.has("OES_texture_float")||n.has("WEBGL_color_buffer_float")))&&!h){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-a&&i>=0&&i<=e.height-l&&ey.readPixels(t,i,a,l,A.convert(o),A.convert(c),u)}finally{let e=null!==X?o.get(X).__webglFramebuffer:null;s.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){let i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);l.setTexture2D(t,0),ey.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),s.unbindTexture()},this.copyTextureToTexture=function(e,t,n,i=0){let r=t.image.width,a=t.image.height,o=A.convert(n.format),u=A.convert(n.type);l.setTexture2D(n,0),ey.pixelStorei(37440,n.flipY),ey.pixelStorei(37441,n.premultiplyAlpha),ey.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ey.texSubImage2D(3553,i,e.x,e.y,r,a,o,u,t.image.data):t.isCompressedTexture?ey.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ey.texSubImage2D(3553,i,e.x,e.y,o,u,t.image),0===i&&n.generateMipmaps&&ey.generateMipmap(3553),s.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i,r=0){let a;if(G.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let o=e.max.x-e.min.x+1,u=e.max.y-e.min.y+1,c=e.max.z-e.min.z+1,h=A.convert(i.format),f=A.convert(i.type);if(i.isData3DTexture)l.setTexture3D(i,0),a=32879;else if(i.isDataArrayTexture)l.setTexture2DArray(i,0),a=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ey.pixelStorei(37440,i.flipY),ey.pixelStorei(37441,i.premultiplyAlpha),ey.pixelStorei(3317,i.unpackAlignment);let d=ey.getParameter(3314),p=ey.getParameter(32878),m=ey.getParameter(3316),g=ey.getParameter(3315),v=ey.getParameter(32877),_=n.isCompressedTexture?n.mipmaps[0]:n.image;ey.pixelStorei(3314,_.width),ey.pixelStorei(32878,_.height),ey.pixelStorei(3316,e.min.x),ey.pixelStorei(3315,e.min.y),ey.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ey.texSubImage3D(a,r,t.x,t.y,t.z,o,u,c,h,f,_.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ey.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,u,c,h,_.data)):ey.texSubImage3D(a,r,t.x,t.y,t.z,o,u,c,h,f,_),ey.pixelStorei(3314,d),ey.pixelStorei(32878,p),ey.pixelStorei(3316,m),ey.pixelStorei(3315,g),ey.pixelStorei(32877,v),0===r&&i.generateMipmaps&&ey.generateMipmap(a),s.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?l.setTextureCube(e,0):e.isData3DTexture?l.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?l.setTexture2DArray(e,0):l.setTexture2D(e,0),s.unbindTexture()},this.resetState=function(){j=0,q=0,X=null,s.reset(),C.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class aP extends aD{}aP.prototype.isWebGL1Renderer=!0;class aN extends n0{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class aO extends ir{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tK(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let aI=new t7,ak=new t7,aU=new nL,aF=new nC,az=new nx;class aB extends n0{constructor(e=new ix,t=new aO){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)aI.fromBufferAttribute(t,e-1),ak.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=aI.distanceTo(ak);e.setAttribute("lineDistance",new ih(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),az.copy(n.boundingSphere),az.applyMatrix4(i),az.radius+=r,!1===e.ray.intersectsSphere(az))return;aU.copy(i).invert(),aF.copy(e.ray).applyMatrix4(aU);let a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new t7,u=new t7,c=new t7,h=new t7,f=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d){let n=Math.max(0,s.start),i=Math.min(d.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=f){let n=d.getX(r),i=d.getX(r+1);if(l.fromBufferAttribute(p,n),u.fromBufferAttribute(p,i),aF.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);let s=e.ray.origin.distanceTo(h);s<e.near||s>e.far||t.push({distance:s,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else{let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count);for(let r=n,s=i-1;r<s;r+=f){if(l.fromBufferAttribute(p,r),u.fromBufferAttribute(p,r+1),aF.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);let n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}class aV{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)t.push(r+=(n=this.getPoint(s/e)).distanceTo(i)),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n;let i=this.getLengths(),r=0,s=i.length;n=t||e*i[s-1];let a=0,o=s-1,l;for(;a<=o;)if((l=i[r=Math.floor(a+(o-a)/2)]-n)<0)a=r+1;else if(l>0)o=r-1;else{o=r;break}if(i[r=o]===n)return r/(s-1);let u=i[r],c=i[r+1]-u;return(r+(n-u)/c)/(s-1)}getTangent(e,t){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);let r=this.getPoint(n),s=this.getPoint(i),a=t||(r.isVector2?new tU:new t7);return a.copy(s).sub(r).normalize(),a}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new t7,i=[],r=[],s=[],a=new t7,o=new nL;for(let t=0;t<=e;t++){let n=t/e;i[t]=this.getTangentAt(n,new t7)}r[0]=new t7,s[0]=new t7;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON){a.normalize();let e=Math.acos(tT(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(tT(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class aH extends aV{constructor(e=0,t=0,n=1,i=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let n=t||new tU,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);let a=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class aG extends aH{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function aW(){let e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,u=(n-t)/a-(i-t)/(a+o)+(i-n)/o;r(t,n,l*=a,u*=a)},calc:function(r){let s=r*r,a=s*r;return e+t*r+n*s+i*a}}}let aj=new t7,aq=new aW,aX=new aW,a$=new aW;class aY extends aV{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new t7){let n,i;let r=t,s=this.points,a=s.length,o=(a-(this.closed?0:1))*e,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:0===u&&l===a-1&&(l=a-2,u=1),this.closed||l>0?n=s[(l-1)%a]:(aj.subVectors(s[0],s[1]).add(s[0]),n=aj);let c=s[l%a],h=s[(l+1)%a];if(this.closed||l+2<a?i=s[(l+2)%a]:(aj.subVectors(s[a-1],s[a-2]).add(s[a-1]),i=aj),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(c),e),r=Math.pow(c.distanceToSquared(h),e),s=Math.pow(h.distanceToSquared(i),e);r<1e-4&&(r=1),t<1e-4&&(t=r),s<1e-4&&(s=r),aq.initNonuniformCatmullRom(n.x,c.x,h.x,i.x,t,r,s),aX.initNonuniformCatmullRom(n.y,c.y,h.y,i.y,t,r,s),a$.initNonuniformCatmullRom(n.z,c.z,h.z,i.z,t,r,s)}else"catmullrom"===this.curveType&&(aq.initCatmullRom(n.x,c.x,h.x,i.x,this.tension),aX.initCatmullRom(n.y,c.y,h.y,i.y,this.tension),a$.initCatmullRom(n.z,c.z,h.z,i.z,this.tension));return r.set(aq.calc(u),aX.calc(u),a$.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new t7().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aJ(e,t,n,i,r){let s=(i-t)*.5,a=(r-n)*.5,o=e*e;return e*o*(2*n-2*i+s+a)+(-3*n+3*i-2*s-a)*o+s*e+n}function aZ(e,t){let n=1-e;return n*n*t}function aK(e,t){return 2*(1-e)*e*t}function aQ(e,t){return e*e*t}function a0(e,t,n,i){return aZ(e,t)+aK(e,n)+aQ(e,i)}function a1(e,t){let n=1-e;return n*n*n*t}function a2(e,t){let n=1-e;return 3*n*n*e*t}function a3(e,t){return 3*(1-e)*e*e*t}function a4(e,t){return e*e*e*t}function a5(e,t,n,i,r){return a1(e,t)+a2(e,n)+a3(e,i)+a4(e,r)}class a6 extends aV{constructor(e=new tU,t=new tU,n=new tU,i=new tU){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new tU){let n=t,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(a5(e,i.x,r.x,s.x,a.x),a5(e,i.y,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class a8 extends aV{constructor(e=new t7,t=new t7,n=new t7,i=new t7){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new t7){let n=t,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return n.set(a5(e,i.x,r.x,s.x,a.x),a5(e,i.y,r.y,s.y,a.y),a5(e,i.z,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class a9 extends aV{constructor(e=new tU,t=new tU){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tU){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new tU;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a7 extends aV{constructor(e=new t7,t=new t7){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new t7){let n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oe extends aV{constructor(e=new tU,t=new tU,n=new tU){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tU){let n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(a0(e,i.x,r.x,s.x),a0(e,i.y,r.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ot extends aV{constructor(e=new t7,t=new t7,n=new t7){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new t7){let n=t,i=this.v0,r=this.v1,s=this.v2;return n.set(a0(e,i.x,r.x,s.x),a0(e,i.y,r.y,s.y),a0(e,i.z,r.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class on extends aV{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tU){let n=t,i=this.points,r=(i.length-1)*e,s=Math.floor(r),a=r-s,o=i[0===s?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return n.set(aJ(a,o.x,l.x,u.x,c.x),aJ(a,o.y,l.y,u.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new tU().fromArray(n))}return this}}var oi=Object.freeze({__proto__:null,ArcCurve:aG,CatmullRomCurve3:aY,CubicBezierCurve:a6,CubicBezierCurve3:a8,EllipseCurve:aH,LineCurve:a9,LineCurve3:a7,QuadraticBezierCurve:oe,QuadraticBezierCurve3:ot,SplineCurve:on});class or extends aV{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new a9(t,e))}getPoint(e,t){let n=e*this.getLength(),i=this.getCurveLengths(),r=0;for(;r<i.length;){if(i[r]>=n){let e=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}r++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,i=this.curves.length;n<i;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let i=0,r=this.curves;i<r.length;i++){let s=r[i],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){let i=o[e];t&&t.equals(i)||(n.push(i),t=i)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new oi[n.type]().fromJSON(n))}return this}}class os extends or{constructor(e){super(),this.type="Path",this.currentPoint=new tU,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new a9(this.currentPoint.clone(),new tU(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){let r=new oe(this.currentPoint.clone(),new tU(e,t),new tU(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){let a=new a6(this.currentPoint.clone(),new tU(e,t),new tU(n,i),new tU(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){let t=new on([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,a,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,s,a,o),this}absellipse(e,t,n,i,r,s,a,o){let l=new aH(e,t,n,i,r,s,a,o);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class oa extends ix{constructor(e=[new tU(0,-.5),new tU(.5,0),new tU(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=tT(i,0,2*Math.PI);let r=[],s=[],a=[],o=[],l=[],u=1/t,c=new t7,h=new tU,f=new t7,d=new t7,p=new t7,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,f.x=1*g,f.y=-m,f.z=0*g,p.copy(f),f.normalize(),o.push(f.x,f.y,f.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,f.x=1*g,f.y=-m,f.z=0*g,d.copy(f),f.x+=p.x,f.y+=p.y,f.z+=p.z,f.normalize(),o.push(f.x,f.y,f.z),p.copy(d)}for(let r=0;r<=t;r++){let f=n+r*u*i,d=Math.sin(f),p=Math.cos(f);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*d,c.y=e[n].y,c.z=e[n].x*p,s.push(c.x,c.y,c.z),h.x=r/t,h.y=n/(e.length-1),a.push(h.x,h.y);let i=o[3*n+0]*d,u=o[3*n+1],f=o[3*n+0]*p;l.push(i,u,f)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let i=t+n*e.length,s=i,a=i+e.length,o=i+e.length+1,l=i+1;r.push(s,a,l),r.push(o,l,a)}this.setIndex(r),this.setAttribute("position",new ih(s,3)),this.setAttribute("uv",new ih(a,2)),this.setAttribute("normal",new ih(l,3))}static fromJSON(e){return new oa(e.points,e.segments,e.phiStart,e.phiLength)}}class oo extends oa{constructor(e=1,t=1,n=4,i=8){let r=new os;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new oo(e.radius,e.length,e.capSegments,e.radialSegments)}}class ol extends ix{constructor(e=1,t=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);let r=[],s=[],a=[],o=[],l=new t7,u=new tU;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let r=0,c=3;r<=t;r++,c+=3){let h=n+r/t*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(s[c]/e+1)/2,u.y=(s[c+1]/e+1)/2,o.push(u.x,u.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new ih(s,3)),this.setAttribute("normal",new ih(a,3)),this.setAttribute("uv",new ih(o,2))}static fromJSON(e){return new ol(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ou extends ix{constructor(e=1,t=1,n=1,i=8,r=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};let l=this;i=Math.floor(i),r=Math.floor(r);let u=[],c=[],h=[],f=[],d=0,p=[],m=n/2,g=0;function v(n){let r=d,s=new tU,p=new t7,v=0,_=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=i;e++)c.push(0,m*y,0),h.push(0,y,0),f.push(.5,.5),d++;let x=d;for(let e=0;e<=i;e++){let t=e/i*o+a,n=Math.cos(t),r=Math.sin(t);p.x=_*r,p.y=m*y,p.z=_*n,c.push(p.x,p.y,p.z),h.push(0,y,0),s.x=.5*n+.5,s.y=.5*r*y+.5,f.push(s.x,s.y),d++}for(let e=0;e<i;e++){let t=r+e,i=x+e;!0===n?u.push(i,i+1,t):u.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let s=new t7,v=new t7,_=0,y=(t-e)/n;for(let l=0;l<=r;l++){let u=[],g=l/r,_=g*(t-e)+e;for(let e=0;e<=i;e++){let t=e/i,r=t*o+a,l=Math.sin(r),p=Math.cos(r);v.x=_*l,v.y=-g*n+m,v.z=_*p,c.push(v.x,v.y,v.z),s.set(l,y,p).normalize(),h.push(s.x,s.y,s.z),f.push(t,1-g),u.push(d++)}p.push(u)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){let n=p[t][e],i=p[t+1][e],r=p[t+1][e+1],s=p[t][e+1];u.push(n,i,s),u.push(i,r,s),_+=6}l.addGroup(g,_,0),g+=_})(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new ih(c,3)),this.setAttribute("normal",new ih(h,3)),this.setAttribute("uv",new ih(f,2))}static fromJSON(e){return new ou(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oc extends ou{constructor(e=1,t=1,n=8,i=1,r=!1,s=0,a=2*Math.PI){super(0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(e){return new oc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oh extends ix{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};let r=[],s=[];function a(e,t,n,i){let r=i+1,s=[];for(let i=0;i<=r;i++){s[i]=[];let a=e.clone().lerp(n,i/r),o=t.clone().lerp(n,i/r),l=r-i;for(let e=0;e<=l;e++)0===e&&i===r?s[i][e]=a:s[i][e]=a.clone().lerp(o,e/l)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){let n=Math.floor(t/2);t%2==0?(c(s[e][n+1]),c(s[e+1][n]),c(s[e][n])):(c(s[e][n+1]),c(s[e+1][n+1]),c(s[e+1][n]))}}function o(e){let t=new t7;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}function l(){let e=new t7;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];let n=p(e)/2/Math.PI+.5,i=m(e)/Math.PI+.5;s.push(n,1-i)}f(),u()}function u(){for(let e=0;e<s.length;e+=6){let t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}function c(e){r.push(e.x,e.y,e.z)}function h(t,n){let i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function f(){let e=new t7,t=new t7,n=new t7,i=new t7,a=new tU,o=new tU,l=new tU;for(let u=0,c=0;u<r.length;u+=9,c+=6){e.set(r[u+0],r[u+1],r[u+2]),t.set(r[u+3],r[u+4],r[u+5]),n.set(r[u+6],r[u+7],r[u+8]),a.set(s[c+0],s[c+1]),o.set(s[c+2],s[c+3]),l.set(s[c+4],s[c+5]),i.copy(e).add(t).add(n).divideScalar(3);let h=p(i);d(a,c+0,e,h),d(o,c+2,t,h),d(l,c+4,n,h)}}function d(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}function m(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){let n=new t7,i=new t7,r=new t7;for(let s=0;s<t.length;s+=3)h(t[s+0],n),h(t[s+1],i),h(t[s+2],r),a(n,i,r,e)})(i),o(n),l(),this.setAttribute("position",new ih(r,3)),this.setAttribute("normal",new ih(r.slice(),3)),this.setAttribute("uv",new ih(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new oh(e.vertices,e.indices,e.radius,e.details)}}class of extends oh{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new of(e.radius,e.detail)}}class od extends os{constructor(e){super(e),this.uuid=tS(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new os().fromJSON(n))}return this}}let op={triangulate:function(e,t,n=2){let i,r,s,a,o,l,u;let c=t&&t.length,h=c?t[0]*n:e.length,f=om(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=ow(e,t,f,n)),e.length>80*n){i=s=e[0],r=a=e[1];for(let t=n;t<h;t+=n)o=e[t],l=e[t+1],o<i&&(i=o),l<r&&(r=l),o>s&&(s=o),l>a&&(a=l);u=0!==(u=Math.max(s-i,a-r))?32767/u:0}return ov(f,d,n,i,r,u,0),d}};function om(e,t,n,i,r){let s,a;if(r===oj(e,t,n,i)>0)for(s=t;s<n;s+=i)a=oH(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=oH(s,e[s],e[s+1],a);return a&&oO(a,a.next)&&(oG(a),a=a.next),a}function og(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(oO(n,n.next)||0===oN(n.prev,n,n.next))){if(oG(n),(n=t=n.prev)===n.next)break;i=!0}else n=n.next;while(i||n!==t)return t}function ov(e,t,n,i,r,s,a){if(!e)return;!a&&s&&oA(e,i,r,s);let o=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,s?oy(e,i,r,s):o_(e)){t.push(l.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),oG(e),e=u.next,o=u.next;continue}if((e=u)===o){a?1===a?ov(e=ox(og(e),t,n),t,n,i,r,s,2):2===a&&ob(e,t,n,i,r,s):ov(og(e),t,n,i,r,s,1);break}}}function o_(e){let t=e.prev,n=e,i=e.next;if(oN(t,n,i)>=0)return!1;let r=t.x,s=n.x,a=i.x,o=t.y,l=n.y,u=i.y,c=r<s?r<a?r:a:s<a?s:a,h=o<l?o<u?o:u:l<u?l:u,f=r>s?r>a?r:a:s>a?s:a,d=o>l?o>u?o:u:l>u?l:u,p=i.next;for(;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&oD(r,o,s,l,a,u,p.x,p.y)&&oN(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function oy(e,t,n,i){let r=e.prev,s=e,a=e.next;if(oN(r,s,a)>=0)return!1;let o=r.x,l=s.x,u=a.x,c=r.y,h=s.y,f=a.y,d=o<l?o<u?o:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,m=o>l?o>u?o:u:l>u?l:u,g=c>h?c>f?c:f:h>f?h:f,v=oL(d,p,t,n,i),_=oL(m,g,t,n,i),y=e.prevZ,x=e.nextZ;for(;y&&y.z>=v&&x&&x.z<=_;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==a&&oD(o,c,l,h,u,f,y.x,y.y)&&oN(y.prev,y,y.next)>=0||(y=y.prevZ,x.x>=d&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&oD(o,c,l,h,u,f,x.x,x.y)&&oN(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=v;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==a&&oD(o,c,l,h,u,f,y.x,y.y)&&oN(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=_;){if(x.x>=d&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&oD(o,c,l,h,u,f,x.x,x.y)&&oN(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function ox(e,t,n){let i=e;do{let r=i.prev,s=i.next.next;!oO(r,s)&&oI(r,i,i.next,s)&&oz(r,s)&&oz(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),oG(i),oG(i.next),i=e=s),i=i.next}while(i!==e)return og(i)}function ob(e,t,n,i,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&oP(a,e)){let o=oV(a,e);a=og(a,a.next),o=og(o,o.next),ov(a,t,n,i,r,s,0),ov(o,t,n,i,r,s,0);return}e=e.next}a=a.next}while(a!==e)}function ow(e,t,n,i){let r,s,a,o,l;let u=[];for(r=0,s=t.length;r<s;r++)a=t[r]*i,o=r<s-1?t[r+1]*i:e.length,(l=om(e,a,o,i,!1))===l.next&&(l.steiner=!0),u.push(oR(l));for(u.sort(oM),r=0;r<u.length;r++)n=oS(u[r],n);return n}function oM(e,t){return e.x-t.x}function oS(e,t){let n=oT(e,t);if(!n)return t;let i=oV(n,e);return og(i,i.next),og(n,n.next)}function oT(e,t){let n=t,i=-1/0,r,s=e.x,a=e.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){let e=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=s&&e>i&&(i=e,r=n.x<n.next.x?n:n.next,e===s))return r}n=n.next}while(n!==t)if(!r)return null;let o=r,l=r.x,u=r.y,c=1/0,h;n=r;do s>=n.x&&n.x>=l&&s!==n.x&&oD(a<u?s:i,a,l,u,a<u?i:s,a,n.x,n.y)&&(h=Math.abs(a-n.y)/(s-n.x),oz(n,e)&&(h<c||h===c&&(n.x>r.x||n.x===r.x&&oE(r,n)))&&(r=n,c=h)),n=n.next;while(n!==o)return r}function oE(e,t){return 0>oN(e.prev,e,t.prev)&&0>oN(t.next,e,e.next)}function oA(e,t,n,i){let r=e;do 0===r.z&&(r.z=oL(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e)r.prevZ.nextZ=null,r.prevZ=null,oC(r)}function oC(e){let t,n,i,r,s,a,o,l,u=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<u&&(o++,i=i.nextZ);t++);for(l=u;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(a>1)return e}function oL(e,t,n,i,r){return(e=((e=((e=((e=((e=(e-n)*r|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(t=((t=((t=((t=((t=(t-i)*r|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)<<1}function oR(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e)return n}function oD(e,t,n,i,r,s,a,o){return(r-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function oP(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!oF(e,t)&&(oz(e,t)&&oz(t,e)&&oB(e,t)&&(oN(e.prev,e,t.prev)||oN(e,t.prev,t))||oO(e,t)&&oN(e.prev,e,e.next)>0&&oN(t.prev,t,t.next)>0)}function oN(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function oO(e,t){return e.x===t.x&&e.y===t.y}function oI(e,t,n,i){let r=oU(oN(e,t,n)),s=oU(oN(e,t,i)),a=oU(oN(n,i,e)),o=oU(oN(n,i,t));return!!(r!==s&&a!==o||0===r&&ok(e,n,t)||0===s&&ok(e,i,t)||0===a&&ok(n,e,i)||0===o&&ok(n,t,i))}function ok(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function oU(e){return e>0?1:e<0?-1:0}function oF(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&oI(n,n.next,e,t))return!0;n=n.next}while(n!==e)return!1}function oz(e,t){return 0>oN(e.prev,e,e.next)?oN(e,t,e.next)>=0&&oN(e,e.prev,t)>=0:0>oN(e,t,e.prev)||0>oN(e,e.next,t)}function oB(e,t){let n=e,i=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e)return i}function oV(e,t){let n=new oW(e.i,e.x,e.y),i=new oW(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function oH(e,t,n,i){let r=new oW(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oG(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function oW(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oj(e,t,n,i){let r=0;for(let s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}class oq{static area(e){let t=e.length,n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return .5*n}static isClockWise(e){return 0>oq.area(e)}static triangulateShape(e,t){let n=[],i=[],r=[];oX(e),o$(n,e);let s=e.length;t.forEach(oX);for(let e=0;e<t.length;e++)i.push(s),s+=t[e].length,o$(n,t[e]);let a=op.triangulate(n,i);for(let e=0;e<a.length;e+=3)r.push(a.slice(e,e+3));return r}}function oX(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function o$(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class oY extends ix{constructor(e=new od([new tU(.5,.5),new tU(-.5,.5),new tU(-.5,-.5),new tU(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,i=[],r=[];for(let t=0,n=e.length;t<n;t++)s(e[t]);function s(e){let s,a,o,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,h=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1,d=void 0===t.bevelEnabled||t.bevelEnabled,p=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:p-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,_=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:oJ,x,b=!1;_&&(x=_.getSpacedPoints(h),b=!0,d=!1,s=_.computeFrenetFrames(h,!1),a=new t7,o=new t7,l=new t7),d||(v=0,p=0,m=0,g=0);let w=e.extractPoints(c),M=w.shape,S=w.holes;if(!oq.isClockWise(M)){M=M.reverse();for(let e=0,t=S.length;e<t;e++){let t=S[e];oq.isClockWise(t)&&(S[e]=t.reverse())}}let T=oq.triangulateShape(M,S),E=M;for(let e=0,t=S.length;e<t;e++){let t=S[e];M=M.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}let C=M.length,L=T.length;function R(e,t,n){let i,r,s;let a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+o*o;if(Math.abs(a*u-o*l)>Number.EPSILON){let h=Math.sqrt(c),f=Math.sqrt(l*l+u*u),d=t.x-o/h,p=t.y+a/h,m=((n.x-u/f-d)*u-(n.y+l/f-p)*l)/(a*u-o*l),g=(i=d+a*m-e.x)*i+(r=p+o*m-e.y)*r;if(g<=2)return new tU(i,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(u)&&(e=!0),e?(i=-o,r=a,s=Math.sqrt(c)):(i=a,r=o,s=Math.sqrt(c/2))}return new tU(i/s,r/s)}let D=[];for(let e=0,t=E.length,n=t-1,i=e+1;e<t;e++,n++,i++)n===t&&(n=0),i===t&&(i=0),D[e]=R(E[e],E[n],E[i]);let P=[],N,O=D.concat();for(let e=0,t=S.length;e<t;e++){let t=S[e];N=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),N[e]=R(t[e],t[i],t[r]);P.push(N),O=O.concat(N)}for(let e=0;e<v;e++){let t=e/v,n=p*Math.cos(t*Math.PI/2),i=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=E.length;e<t;e++){let t=A(E[e],D[e],i);F(t.x,t.y,-n)}for(let e=0,t=S.length;e<t;e++){let t=S[e];N=P[e];for(let e=0,r=t.length;e<r;e++){let r=A(t[e],N[e],i);F(r.x,r.y,-n)}}}let I=m+g;for(let e=0;e<C;e++){let t=d?A(M[e],O[e],I):M[e];b?(o.copy(s.normals[0]).multiplyScalar(t.x),a.copy(s.binormals[0]).multiplyScalar(t.y),l.copy(x[0]).add(o).add(a),F(l.x,l.y,l.z)):F(t.x,t.y,0)}for(let e=1;e<=h;e++)for(let t=0;t<C;t++){let n=d?A(M[t],O[t],I):M[t];b?(o.copy(s.normals[e]).multiplyScalar(n.x),a.copy(s.binormals[e]).multiplyScalar(n.y),l.copy(x[e]).add(o).add(a),F(l.x,l.y,l.z)):F(n.x,n.y,f/h*e)}for(let e=v-1;e>=0;e--){let t=e/v,n=p*Math.cos(t*Math.PI/2),i=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=E.length;e<t;e++){let t=A(E[e],D[e],i);F(t.x,t.y,f+n)}for(let e=0,t=S.length;e<t;e++){let t=S[e];N=P[e];for(let e=0,r=t.length;e<r;e++){let r=A(t[e],N[e],i);b?F(r.x,r.y+x[h-1].y,x[h-1].x+n):F(r.x,r.y,f+n)}}}function k(){let e=i.length/3,t=0;U(E,0),t+=E.length;for(let e=0,n=S.length;e<n;e++){let n=S[e];U(n,t),t+=n.length}n.addGroup(e,i.length/3-e,1)}function U(e,t){let n=e.length;for(;--n>=0;){let i=n,r=n-1;r<0&&(r=e.length-1);for(let e=0,n=h+2*v;e<n;e++){let n=C*e,s=C*(e+1);B(t+i+n,t+r+n,t+r+s,t+i+s)}}}function F(e,t,n){u.push(e),u.push(t),u.push(n)}function z(e,t,r){V(e),V(t),V(r);let s=i.length/3,a=y.generateTopUV(n,i,s-3,s-2,s-1);H(a[0]),H(a[1]),H(a[2])}function B(e,t,r,s){V(e),V(t),V(s),V(t),V(r),V(s);let a=i.length/3,o=y.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function V(e){i.push(u[3*e+0]),i.push(u[3*e+1]),i.push(u[3*e+2])}function H(e){r.push(e.x),r.push(e.y)}(function(){let e=i.length/3;if(d){let e=0,t=0*C;for(let e=0;e<L;e++){let n=T[e];z(n[2]+t,n[1]+t,n[0]+t)}t=C*(e=h+2*v);for(let e=0;e<L;e++){let n=T[e];z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<L;e++){let t=T[e];z(t[2],t[1],t[0])}for(let e=0;e<L;e++){let t=T[e];z(t[0]+C*h,t[1]+C*h,t[2]+C*h)}}n.addGroup(e,i.length/3-e,0)})(),k()}this.setAttribute("position",new ih(i,3)),this.setAttribute("uv",new ih(r,2)),this.computeVertexNormals()}toJSON(){let e=super.toJSON();return oZ(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let i=0,r=e.shapes.length;i<r;i++){let r=t[e.shapes[i]];n.push(r)}let i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=new oi[i.type]().fromJSON(i)),new oY(n,e.options)}}let oJ={generateTopUV:function(e,t,n,i,r){let s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new tU(s,a),new tU(o,l),new tU(u,c)]},generateSideWallUV:function(e,t,n,i,r,s){let a=t[3*n],o=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],f=t[3*r],d=t[3*r+1],p=t[3*r+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-c)<Math.abs(a-u)?[new tU(a,1-l),new tU(u,1-h),new tU(f,1-p),new tU(m,1-v)]:[new tU(o,1-l),new tU(c,1-h),new tU(d,1-p),new tU(g,1-v)]}};function oZ(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){let i=e[t];n.shapes.push(i.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class oK extends oh{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oK(e.radius,e.detail)}}class oQ extends oh{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oQ(e.radius,e.detail)}}class o0 extends ix{constructor(e=.5,t=1,n=8,i=1,r=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n);let a=[],o=[],l=[],u=[],c=e,h=(t-e)/(i=Math.max(1,i)),f=new t7,d=new tU;for(let e=0;e<=i;e++){for(let e=0;e<=n;e++){let i=r+e/n*s;f.x=c*Math.cos(i),f.y=c*Math.sin(i),o.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(f.x/t+1)/2,d.y=(f.y/t+1)/2,u.push(d.x,d.y)}c+=h}for(let e=0;e<i;e++){let t=e*(n+1);for(let e=0;e<n;e++){let i=e+t,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new ih(o,3)),this.setAttribute("normal",new ih(l,3)),this.setAttribute("uv",new ih(u,2))}static fromJSON(e){return new o0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class o1 extends ix{constructor(e=new od([new tU(0,.5),new tU(-.5,-.5),new tU(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],i=[],r=[],s=[],a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,o,t),a+=o,o=0;function l(e){let a=i.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===oq.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===oq.isClockWise(t)&&(c[e]=t.reverse())}let h=oq.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];i.push(t.x,t.y,0),r.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){let t=h[e],i=t[0]+a,r=t[1]+a,s=t[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new ih(i,3)),this.setAttribute("normal",new ih(r,3)),this.setAttribute("uv",new ih(s,2))}toJSON(){let e=super.toJSON();return o2(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let i=0,r=e.shapes.length;i<r;i++){let r=t[e.shapes[i]];n.push(r)}return new o1(n,e.curveSegments)}}function o2(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){let i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}class o3 extends ix{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let o=Math.min(s+a,Math.PI),l=0,u=[],c=new t7,h=new t7,f=[],d=[],p=[],m=[];for(let f=0;f<=n;f++){let g=[],v=f/n,_=0;0==f&&0==s?_=.5/t:f==n&&o==Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){let o=n/t;c.x=-e*Math.cos(i+o*r)*Math.sin(s+v*a),c.y=e*Math.cos(s+v*a),c.z=e*Math.sin(i+o*r)*Math.sin(s+v*a),d.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),m.push(o+_,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){let t=u[e][i+1],r=u[e][i],a=u[e+1][i],l=u[e+1][i+1];(0!==e||s>0)&&f.push(t,r,l),(e!==n-1||o<Math.PI)&&f.push(r,a,l)}this.setIndex(f),this.setAttribute("position",new ih(d,3)),this.setAttribute("normal",new ih(p,3)),this.setAttribute("uv",new ih(m,2))}static fromJSON(e){return new o3(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class o4 extends oh{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new o4(e.radius,e.detail)}}class o5 extends ix{constructor(e=1,t=.4,n=8,i=6,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);let s=[],a=[],o=[],l=[],u=new t7,c=new t7,h=new t7;for(let s=0;s<=n;s++)for(let f=0;f<=i;f++){let d=f/i*r,p=s/n*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(d),c.y=(e+t*Math.cos(p))*Math.sin(d),c.z=t*Math.sin(p),a.push(c.x,c.y,c.z),u.x=e*Math.cos(d),u.y=e*Math.sin(d),h.subVectors(c,u).normalize(),o.push(h.x,h.y,h.z),l.push(f/i),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){let n=(i+1)*e+t-1,r=(i+1)*(e-1)+t-1,a=(i+1)*(e-1)+t,o=(i+1)*e+t;s.push(n,r,o),s.push(r,a,o)}this.setIndex(s),this.setAttribute("position",new ih(a,3)),this.setAttribute("normal",new ih(o,3)),this.setAttribute("uv",new ih(l,2))}static fromJSON(e){return new o5(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class o6 extends ix{constructor(e=1,t=.4,n=64,i=8,r=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);let a=[],o=[],l=[],u=[],c=new t7,h=new t7,f=new t7,d=new t7,p=new t7,m=new t7,g=new t7;for(let a=0;a<=n;++a){let _=a/n*r*Math.PI*2;v(_,r,s,e,f),v(_+.01,r,s,e,d),m.subVectors(d,f),g.addVectors(d,f),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=i;++e){let r=e/i*Math.PI*2,s=-t*Math.cos(r),d=t*Math.sin(r);c.x=f.x+(s*g.x+d*p.x),c.y=f.y+(s*g.y+d*p.y),c.z=f.z+(s*g.z+d*p.z),o.push(c.x,c.y,c.z),h.subVectors(c,f).normalize(),l.push(h.x,h.y,h.z),u.push(a/n),u.push(e/i)}}for(let e=1;e<=n;e++)for(let t=1;t<=i;t++){let n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,o=(i+1)*(e-1)+t;a.push(n,r,o),a.push(r,s,o)}function v(e,t,n,i,r){let s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new ih(o,3)),this.setAttribute("normal",new ih(l,3)),this.setAttribute("uv",new ih(u,2))}static fromJSON(e){return new o6(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class o8 extends ix{constructor(e=new ot(new t7(-1,-1,0),new t7(-1,1,0),new t7(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};let s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;let a=new t7,o=new t7,l=new tU,u=new t7,c=[],h=[],f=[],d=[];function p(r){u=e.getPointAt(r/t,u);let l=s.normals[r],f=s.binormals[r];for(let e=0;e<=i;e++){let t=e/i*Math.PI*2,r=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+r*f.x,o.y=s*l.y+r*f.y,o.z=s*l.z+r*f.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=u.x+n*o.x,a.y=u.y+n*o.y,a.z=u.z+n*o.z,c.push(a.x,a.y,a.z)}}function m(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){let n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,a=(i+1)*(e-1)+t;d.push(n,r,a),d.push(r,s,a)}}function g(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,f.push(l.x,l.y)}(function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),g(),m()})(),this.setIndex(d),this.setAttribute("position",new ih(c,3)),this.setAttribute("normal",new ih(h,3)),this.setAttribute("uv",new ih(f,2))}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new o8(new oi[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class o9 extends ir{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new tK(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tK(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tc,this.normalScale=new tU(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=j,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function o7(e,t,n){return lt(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function le(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function lt(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class ln{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,e<(i=t[++n]))break t}s=t.length;break n}if(!(e>=r)){let a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,e>=(r=t[--n-1]))break t}s=n,n=0;break n}break e}for(;n<s;){let i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class li extends ln{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ti,endingEnd:ti}}intervalChanged_(e,t,n){let i=this.parameterPositions,r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case tr:r=e,a=2*t-n;break;case ts:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case tr:s=e,o=2*n-t;break;case ts:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*u,this._offsetNext=s*u}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(i-t),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,_=(-1-f)*m+(1.5+f)*p+.5*d,y=f*m-f*p;for(let e=0;e!==a;++e)r[e]=g*s[u+e]+v*s[l+e]+_*s[o+e]+y*s[c+e];return r}}class lr extends ln{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=(n-t)/(i-t),c=1-u;for(let e=0;e!==a;++e)r[e]=s[l+e]*c+s[o+e]*u;return r}}class ls extends ln{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class la{constructor(e,t,n,i){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=le(t,this.TimeBufferType),this.values=le(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:le(e.times,Array),values:le(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new ls(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lr(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new li(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case te:t=this.InterpolantFactoryMethodDiscrete;break;case tt:t=this.InterpolantFactoryMethodLinear;break;case tn:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return te;case this.InterpolantFactoryMethodLinear:return tt;case this.InterpolantFactoryMethodSmooth:return tn}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){let n=this.times,i=n.length,r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(r=(s=Math.max(s,1))-1);let e=this.getValueSize();this.times=o7(n,r,s),this.values=o7(this.values,r*e,s*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==r;t++){let i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==s&&s>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,s),e=!1;break}s=i}if(void 0!==i&&lt(i))for(let t=0,n=i.length;t!==n;++t){let n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){let e=o7(this.times),t=o7(this.values),n=this.getValueSize(),i=this.getInterpolation()===tn,r=e.length-1,s=1;for(let a=1;a<r;++a){let r=!1,o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0])){if(i)r=!0;else{let e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){let n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}}if(r){if(a!==s){e[s]=e[a];let i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=o7(e,0,s),this.values=o7(t,0,s*n)):(this.times=e,this.values=t),this}clone(){let e=o7(this.times,0),t=o7(this.values,0),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}la.prototype.TimeBufferType=Float32Array,la.prototype.ValueBufferType=Float32Array,la.prototype.DefaultInterpolation=tt;class lo extends la{}lo.prototype.ValueTypeName="bool",lo.prototype.ValueBufferType=Array,lo.prototype.DefaultInterpolation=te,lo.prototype.InterpolantFactoryMethodLinear=void 0,lo.prototype.InterpolantFactoryMethodSmooth=void 0;class ll extends la{}ll.prototype.ValueTypeName="color";class lu extends la{}lu.prototype.ValueTypeName="number";class lc extends ln{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t),l=e*a;for(let e=l+a;l!==e;l+=4)t9.slerpFlat(r,0,s,l-a,s,l,o);return r}}class lh extends la{InterpolantFactoryMethodLinear(e){return new lc(this.times,this.values,this.getValueSize(),e)}}lh.prototype.ValueTypeName="quaternion",lh.prototype.DefaultInterpolation=tt,lh.prototype.InterpolantFactoryMethodSmooth=void 0;class lf extends la{}lf.prototype.ValueTypeName="string",lf.prototype.ValueBufferType=Array,lf.prototype.DefaultInterpolation=te,lf.prototype.InterpolantFactoryMethodLinear=void 0,lf.prototype.InterpolantFactoryMethodSmooth=void 0;class ld extends la{}ld.prototype.ValueTypeName="vector";class lp extends n0{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new tK(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}let lm=new nL,lg=new t7,lv=new t7;class l_{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tU(512,512),this.map=null,this.mapPass=null,this.matrix=new nL,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new i7,this._frameExtents=new tU(1,1),this._viewportCount=1,this._viewports=[new t4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;lg.setFromMatrixPosition(e.matrixWorld),t.position.copy(lg),lv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lv),t.updateMatrixWorld(),lm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lm),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(lm)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let ly=new nL,lx=new t7,lb=new t7;class lw extends l_{constructor(){super(new iZ(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tU(4,2),this._viewportCount=6,this._viewports=[new t4(2,1,1,1),new t4(0,1,1,1),new t4(3,1,1,1),new t4(1,1,1,1),new t4(3,0,1,1),new t4(1,0,1,1)],this._cubeDirections=[new t7(1,0,0),new t7(-1,0,0),new t7(0,0,1),new t7(0,0,-1),new t7(0,1,0),new t7(0,-1,0)],this._cubeUps=[new t7(0,1,0),new t7(0,1,0),new t7(0,1,0),new t7(0,1,0),new t7(0,0,1),new t7(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),lx.setFromMatrixPosition(e.matrixWorld),n.position.copy(lx),lb.copy(n.position),lb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lb),n.updateMatrixWorld(),i.makeTranslation(-lx.x,-lx.y,-lx.z),ly.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ly)}}class lM extends lp{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new lw}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class lS extends lp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}let lT="\\[\\]\\.:\\/",lE=RegExp("["+lT+"]","g"),lA="[^"+lT+"]",lC="[^"+lT.replace("\\.","")+"]",lL=/((?:WC+[\/:])*)/.source.replace("WC",lA),lR=RegExp("^"+lL+/(WCOD+)?/.source.replace("WCOD",lC)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lA)+"$"),lD=["material","materials","bones","map"];class lP{constructor(e,t,n){let i=n||lN.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class lN{constructor(e,t,n){this.path=t,this.parsedPath=n||lN.parseTrackName(t),this.node=lN.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new lN.Composite(e,t,n):new lN(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(lE,"")}static parseTrackName(e){let t=lR.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let e=n.nodeName.substring(i+1);-1!==lD.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let i=0;i<e.length;i++){let r=e[i];if(r.name===t||r.uuid===t)return r;let s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=lN.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==i){if(void 0===e[i]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[i]}}let s=e[i];if(void 0===s){console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}lN.Composite=lP,lN.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},lN.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},lN.prototype.GetterByBindingType=[lN.prototype._getValue_direct,lN.prototype._getValue_array,lN.prototype._getValue_arrayElement,lN.prototype._getValue_toArray],lN.prototype.SetterByBindingTypeAndVersioning=[[lN.prototype._setValue_direct,lN.prototype._setValue_direct_setNeedsUpdate,lN.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[lN.prototype._setValue_array,lN.prototype._setValue_array_setNeedsUpdate,lN.prototype._setValue_array_setMatrixWorldNeedsUpdate],[lN.prototype._setValue_arrayElement,lN.prototype._setValue_arrayElement_setNeedsUpdate,lN.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[lN.prototype._setValue_fromArray,lN.prototype._setValue_fromArray_setNeedsUpdate,lN.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class lO{constructor(e,t,n=0,i=1/0){this.ray=new nC(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new nB,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return lk(e,this,n,t),n.sort(lI),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)lk(e[i],this,n,t);return n.sort(lI),n}}function lI(e,t){return e.distance-t.distance}function lk(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){let i=e.children;for(let e=0,r=i.length;e<r;e++)lk(i[e],t,n,!0)}}class lU{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){let e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(tT(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i)}),parcelRegister("crxWL",function(e,t){!function(e,t){"function"==typeof define&&define.amd?define([],t):t()}(e.exports,function(){function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function n(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){o(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof $parcel$global&&$parcel$global.global===$parcel$global?$parcel$global:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,a){var o=s.URL||s.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):i(l.href)?n(e,t,a):r(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,s,a){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),s);else if(i(e))n(e,s,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){r(o)})}}:function(e,t,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,i);var o="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},c.readAsDataURL(e)}else{var h=s.URL||s.webkitURL,f=h.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});s.saveAs=o.saveAs=o,e.exports=o})}),parcelRegister("cqQJN",function(e,t){$parcel$export(e.exports,"PolycubePatch",()=>r);var n=parcelRequire("ilwiq"),i=parcelRequire("kUBvx");class r{color;alignDir;direction;state_var;activation_var;constructor(e,t,r,s=0,a=0){if(this.color=e,t instanceof n.Vector3&&(t=(0,i.RULE_ORDER).indexOf(t)),"number"==typeof r){let e=(0,i.FACE_ROTATIONS)[t].clone();e.applyAxisAngle(i.RULE_ORDER[t],r*Math.PI/2).round(),r=e}this.alignDir=r,console.assert("number"==typeof t),this.direction=t;let o=i.RULE_ORDER[t];this.has_torsion()&&console.assert(1e-6>this.alignDir.dot(o)),this.state_var=s,this.activation_var=a}rotate(e){let t=this.alignDir.clone().applyQuaternion(e).round(),n=(0,i.RULE_ORDER)[this.direction].clone().applyQuaternion(e).round();return new r(this.color,n,t,this.state_var,this.activation_var)}has_color(){return 0!=this.color}has_torsion(){return void 0!==this.alignDir}abscolor(){return Math.abs(this.color)}}}),parcelRegister("5XX9r",function(module,exports){var C_MINISAT,__dirname="node_modules/logic-solver";C_MINISAT=function(){var Module,tempValue,tempInt,tempBigInt,tempInt2,tempBigInt2,tempPair,tempBigIntI,tempBigIntR,tempBigIntS,tempBigIntP,tempBigIntD,tempDouble,tempFloat,tempI64,tempI64b,tempRet0,tempRet1,tempRet2,tempRet3,tempRet4,tempRet5,tempRet6,tempRet7,tempRet8,tempRet9,cwrap,ccall,HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,initialStackTop,setInnerMalloc,setInnerFree,module1={},require=function(){},process={argv:["node","minisat"],on:function(){},stdout:{write:function(e){console.log("MINISAT-out:",e.replace(/\n$/,""))}},stderr:{write:function(e){console.log("MINISAT-err:",e.replace(/\n$/,""))}}},window=0;Module||(Module=(void 0!==Module?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_NODE="object"==typeof process&&"function"==typeof require,ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=function(e){process.stdout.write(e+"\n")}),Module.printErr||(Module.printErr=function(e){process.stderr.write(e+"\n")});var nodeFS=require("fs"),nodePath=require("path");Module.read=function(e,t){e=nodePath.normalize(e);var n=nodeFS.readFileSync(e);return n||e==nodePath.resolve(e)||(e=path.join(__dirname,"..","src",e),n=nodeFS.readFileSync(e)),n&&!t&&(n=n.toString()),n},Module.readBinary=function(e){return Module.read(e,!0)},Module.load=function(e){globalEval(read(e))},process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program",Module.arguments=process.argv.slice(2),void 0!==module1&&(module1.exports=Module),process.on("uncaughtException",function(e){if(!(e instanceof ExitStatus))throw e})}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),"undefined"!=typeof printErr&&(Module.printErr=printErr),"undefined"!=typeof read?Module.read=read:Module.read=function(){throw"no read() available (jsc?)"},Module.readBinary=function(e){if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));var t=read(e,"binary");return assert("object"==typeof t),t},"undefined"!=typeof scriptArgs?Module.arguments=scriptArgs:"undefined"!=typeof arguments&&(Module.arguments=arguments),this.Module=Module;else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},"undefined"!=typeof arguments&&(Module.arguments=arguments),"undefined"!=typeof console)Module.print||(Module.print=function(e){console.log(e)}),Module.printErr||(Module.printErr=function(e){console.log(e)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&"undefined"!=typeof dump?function(e){dump(e)}:function(e){})}ENVIRONMENT_IS_WEB?window.Module=Module:Module.load=importScripts}else throw"Unknown runtime environment. Where are we?";function globalEval(e){eval.call(null,e)}for(var key in!Module.load&&Module.read&&(Module.load=function(e){globalEval(Module.read(e))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[],moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(e){tempRet0=e},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(e){STACKTOP=e},getNativeTypeSize:function(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if("*"===e[e.length-1])return Runtime.QUANTUM_SIZE;if("i"!==e[0])return 0;var t=parseInt(e.substr(1));return assert(t%8==0),t/8}},getNativeFieldSize:function(e){return Math.max(Runtime.getNativeTypeSize(e),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,getAlignSize:function(e,t,n){return n||"i64"!=e&&"double"!=e?e?Math.min(t||(e?Runtime.getNativeFieldSize(e):0),Runtime.QUANTUM_SIZE):Math.min(t,8):8},dynCall:function(e,t,n){return n&&n.length?(n.splice||(n=Array.prototype.slice.call(n)),n.splice(0,0,t),Module["dynCall_"+e].apply(null,n)):Module["dynCall_"+e].call(null,t)},functionPointers:[],addFunction:function(e){for(var t=0;t<Runtime.functionPointers.length;t++)if(!Runtime.functionPointers[t])return Runtime.functionPointers[t]=e,2*(1+t);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(e){Runtime.functionPointers[(e-2)/2]=null},getAsmConst:function(code,numArgs){Runtime.asmConstCache||(Runtime.asmConstCache={});var func=Runtime.asmConstCache[code];if(func)return func;for(var args=[],i=0;i<numArgs;i++)args.push("$"+i);var source=Pointer_stringify(code);'"'===source[0]&&(source.indexOf('"',1)===source.length-1?source=source.substr(1,source.length-2):abort("invalid EM_ASM input |"+source+"|. Please use EM_ASM(..code..) (no quotes) or EM_ASM({ ..code($0).. }, input) (to input values)"));try{var evalled=eval("(function(Module, FS) { return function("+args.join(",")+"){ "+source+" } })")(Module,void 0!==FS?FS:null)}catch(e){throw Module.printErr("error in executing inline EM_ASM code: "+e+" on: \n\n"+source+"\n\nwith args |"+args+"| (make sure to use the right one out of EM_ASM, EM_ASM_ARGS, etc.)"),e}return Runtime.asmConstCache[code]=evalled},warnOnce:function(e){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[e]||(Runtime.warnOnce.shown[e]=1,Module.printErr(e))},funcWrappers:{},getFuncWrapper:function(e,t){assert(t),Runtime.funcWrappers[t]||(Runtime.funcWrappers[t]={});var n=Runtime.funcWrappers[t];return n[e]||(n[e]=function(){return Runtime.dynCall(t,e,arguments)}),n[e]},UTF8Processor:function(){var e=[],t=0;this.processCChar=function(n){if(n&=255,0==e.length)return(128&n)==0?String.fromCharCode(n):(e.push(n),t=(224&n)==192?1:(240&n)==224?2:3,"");if(t&&(e.push(n),--t>0))return"";var i,r=e[0],s=e[1],a=e[2],o=e[3];if(2==e.length)i=String.fromCharCode((31&r)<<6|63&s);else if(3==e.length)i=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a);else{var l=(7&r)<<18|(63&s)<<12|(63&a)<<6|63&o;i=String.fromCharCode(((l-65536)/1024|0)+55296,(l-65536)%1024+56320)}return e.length=0,i},this.processJSString=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}},getCompilerSetting:function(e){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(e){var t=STACKTOP;return STACKTOP=(STACKTOP=STACKTOP+e|0)+15&-16,t},staticAlloc:function(e){var t=STATICTOP;return STATICTOP=(STATICTOP=STATICTOP+e|0)+15&-16,t},dynamicAlloc:function(e){var t=DYNAMICTOP;return(DYNAMICTOP=(DYNAMICTOP=DYNAMICTOP+e|0)+15&-16)>=TOTAL_MEMORY&&enlargeMemory(),t},alignMemory:function(e,t){return e=Math.ceil(e/(t||16))*(t||16)},makeBigInt:function(e,t,n){return n?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var __THREW__=0,ABORT=!1,EXITSTATUS=0,undef=0;function assert(e,t){e||abort("Assertion failed: "+t)}var globalScope=this;function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(e){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}function setValue(e,t,n,i){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,+Math_abs(tempDouble=t)>=1?tempDouble>0?(0|Math_min(+Math_floor(tempDouble/4294967296),4294967295))>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+n)}}function getValue(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return HEAP8[e>>0];case"i16":return HEAP16[e>>1];case"i32":case"i64":return HEAP32[e>>2];case"float":return HEAPF32[e>>2];case"double":return HEAPF64[e>>3];default:abort("invalid type for setValue: "+t)}return null}(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(e){var t=Runtime.stackAlloc(e.length);return writeArrayToMemory(e,t),t},stringToC:function(e){var t=0;return null!=e&&0!==e&&(t=Runtime.stackAlloc((e.length<<2)+1),writeStringToMemory(e,t)),t}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(e,t,n,i){var r=getCFunc(e),s=[],a=0;if(i)for(var o=0;o<i.length;o++){var l=toC[n[o]];l?(0===a&&(a=Runtime.stackSave()),s[o]=l(i[o])):s[o]=i[o]}var u=r.apply(null,s);return"string"===t&&(u=Pointer_stringify(u)),0!==a&&Runtime.stackRestore(a),u};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(e){var t=e.toString().match(sourceRegex).slice(1);return{arguments:t[0],body:t[1],returnValue:t[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(e){return"number"===e}),numericRet="string"!==returnType;if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(e,t){return"$"+t}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if("number"!==type){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;return funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",numericRet||(funcstr+="ret = "+parseJSFunc(function(){return Pointer_stringify}).returnValue+"(ret);"),numericArgs||(funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.cwrap=cwrap,Module.ccall=ccall,Module.setValue=setValue,Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;function allocate(e,t,n,i){"number"==typeof e?(s=!0,a=e):(s=!1,a=e.length);var r="string"==typeof t?t:null;if(o=n==ALLOC_NONE?i:[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][void 0===n?ALLOC_STATIC:n](Math.max(a,r?1:t.length)),s){var s,a,o,l,i=o;for(assert((3&o)==0),l=o+(-4&a);i<l;i+=4)HEAP32[i>>2]=0;for(l=o+a;i<l;)HEAP8[i++>>0]=0;return o}if("i8"===r)return e.subarray||e.slice?HEAPU8.set(e,o):HEAPU8.set(new Uint8Array(e),o),o;for(var u,c,h,f=0;f<a;){var d=e[f];if("function"==typeof d&&(d=Runtime.getFunctionIndex(d)),0===(u=r||t[f])){f++;continue}"i64"==u&&(u="i32"),setValue(o+f,d,u),h!==u&&(c=Runtime.getNativeTypeSize(u),h=u),f+=c}return o}function Pointer_stringify(e,t){if(0===t||!e)return"";for(var n=!1,i=0;;){if((s=HEAPU8[e+i>>0])>=128)n=!0;else if(0==s&&!t)break;if(i++,t&&i==t)break}t||(t=i);var r="";if(!n){for(var s,a,o=1024;t>0;)a=String.fromCharCode.apply(String,HEAPU8.subarray(e,e+Math.min(t,o))),r=r?r+a:a,e+=o,t-=o;return r}var l=new Runtime.UTF8Processor;for(i=0;i<t;i++)s=HEAPU8[e+i>>0],r+=l.processCChar(s);return r}function UTF16ToString(e){for(var t=0,n="";;){var i=HEAP16[e+2*t>>1];if(0==i)return n;++t,n+=String.fromCharCode(i)}}function stringToUTF16(e,t){for(var n=0;n<e.length;++n){var i=e.charCodeAt(n);HEAP16[t+2*n>>1]=i}HEAP16[t+2*e.length>>1]=0}function UTF32ToString(e){for(var t=0,n="";;){var i=HEAP32[e+4*t>>2];if(0==i)return n;if(++t,i>=65536){var r=i-65536;n+=String.fromCharCode(55296|r>>10,56320|1023&r)}else n+=String.fromCharCode(i)}}function stringToUTF32(e,t){for(var n=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),HEAP32[t+4*n>>2]=r,++n}HEAP32[t+4*n>>2]=0}function demangle(e){var t=!!Module.___cxa_demangle;if(t)try{var n=_malloc(e.length);writeStringToMemory(e.substr(1),n);var i=_malloc(4),r=Module.___cxa_demangle(n,0,0,i);if(0===getValue(i,"i32")&&r)return Pointer_stringify(r)}catch(e){}finally{n&&_free(n),i&&_free(i),r&&_free(r)}var s=3,a={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},o=[],l=!0;function u(){"K"===e[++s]&&s++;for(var t=[];"E"!==e[s];){if("S"===e[s]){s++;var n=e.indexOf("_",s),i=e.substring(s,n)||0;t.push(o[i]||"?"),s=n+1;continue}if("C"===e[s]){t.push(t[t.length-1]),s+=2;continue}var r=parseInt(e.substr(s)),a=r.toString().length;if(!r||!a){s--;break}var l=e.substr(s+a,r);t.push(l),o.push(l),s+=a+r}return s++,t}function c(t,n,i){n=n||1/0;var r,o="",h=[];function f(){return"("+h.join(", ")+")"}if("N"===e[s]){if(r=u().join("::"),0==--n)return t?[r]:r}else{("K"===e[s]||l&&"L"===e[s])&&s++;var d=parseInt(e.substr(s));if(d){var p=d.toString().length;r=e.substr(s+p,d),s+=p+d}}if(l=!1,"I"===e[s]){s++;var m=c(!0);o+=c(!0,1,!0)[0]+" "+r+"<"+m.join(", ")+">"}else o=r;r:for(;s<e.length&&n-- >0;){var g=e[s++];if(g in a)h.push(a[g]);else switch(g){case"P":h.push(c(!0,1,!0)[0]+"*");break;case"R":h.push(c(!0,1,!0)[0]+"&");break;case"L":s++;var d=e.indexOf("E",s)-s;h.push(e.substr(s,d)),s+=d+2;break;case"A":var d=parseInt(e.substr(s));if("_"!==e[s+=d.toString().length])throw"?";s++,h.push(c(!0,1,!0)[0]+" ["+d+"]");break;case"E":break r;default:o+="?"+g;break r}}return(i||1!==h.length||"void"!==h[0]||(h=[]),t)?(o&&h.push(o+"?"),h):o+f()}var h=e;try{if("Object._main"==e||"_main"==e)return"main()";if("number"==typeof e&&(e=Pointer_stringify(e)),"_"!==e[0]||"_"!==e[1]||"Z"!==e[2])return e;switch(e[3]){case"n":return"operator new()";case"d":return"operator delete()"}h=c()}catch(e){h+="?"}return h.indexOf("?")>=0&&!t&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),h}function demangleAll(e){return e.replace(/__Z[\w\d_]+/g,function(e){var t=demangle(e);return e===t?e:e+" ["+t+"]"})}function jsStackTrace(){var e=Error();if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE,Module.allocate=allocate,Module.Pointer_stringify=Pointer_stringify,Module.UTF16ToString=UTF16ToString,Module.stringToUTF16=stringToUTF16,Module.UTF32ToString=UTF32ToString,Module.stringToUTF32=stringToUTF32,Module.stackTrace=stackTrace;var PAGE_SIZE=4096;function alignMemoryPage(e){return e+4095&-4096}var STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function enlargeMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with -s TOTAL_MEMORY=X with X higher than the current value "+TOTAL_MEMORY+", (2) compile with ALLOW_MEMORY_GROWTH which adjusts the size at runtime but prevents some optimizations, or (3) set Module.TOTAL_MEMORY before the program runs.")}for(var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||67108864,FAST_MEMORY=Module.FAST_MEMORY||2097152,totalMemory=65536;totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK;)totalMemory<16777216?totalMemory*=2:totalMemory+=16777216;totalMemory!==TOTAL_MEMORY&&(Module.printErr("increasing TOTAL_MEMORY to "+totalMemory+" to be compliant with the asm.js spec"),TOTAL_MEMORY=totalMemory),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer=new ArrayBuffer(TOTAL_MEMORY);function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"==typeof t){t();continue}var n=t.func;"number"==typeof n?void 0===t.arg?Runtime.dynCall("v",n):Runtime.dynCall("vi",n,[t.arg]):n(void 0===t.arg?null:t.arg)}}HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(255===HEAPU8[0]&&0===HEAPU8[3],"Typed arrays 2 must be run on a little-endian system"),Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__),runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnInit(e){__ATINIT__.unshift(e)}function addOnPreMain(e){__ATMAIN__.unshift(e)}function addOnExit(e){__ATEXIT__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}function intArrayFromString(e,t,n){var i=(new Runtime.UTF8Processor).processJSString(e);return n&&(i.length=n),t||i.push(0),i}function intArrayToString(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i>255&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")}function writeStringToMemory(e,t,n){for(var i=intArrayFromString(e,n),r=0;r<i.length;){var s=i[r];HEAP8[t+r>>0]=s,r+=1}}function writeArrayToMemory(e,t){for(var n=0;n<e.length;n++)HEAP8[t+n>>0]=e[n]}function writeAsciiToMemory(e,t,n){for(var i=0;i<e.length;i++)HEAP8[t+i>>0]=e.charCodeAt(i);n||(HEAP8[t+e.length>>0]=0)}function unSign(e,t,n){return e>=0?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function reSign(e,t,n){if(e<=0)return e;var i=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e>=i&&(t<=32||e>i)&&(e=-2*i+e),e}Module.addOnPreRun=Module.addOnPreRun=addOnPreRun,Module.addOnInit=Module.addOnInit=addOnInit,Module.addOnPreMain=Module.addOnPreMain=addOnPreMain,Module.addOnExit=Module.addOnExit=addOnExit,Module.addOnPostRun=Module.addOnPostRun=addOnPostRun,Module.intArrayFromString=intArrayFromString,Module.intArrayToString=intArrayToString,Module.writeStringToMemory=writeStringToMemory,Module.writeArrayToMemory=writeArrayToMemory,Module.writeAsciiToMemory=writeAsciiToMemory,Math.imul&&-5===Math.imul(4294967295,5)||(Math.imul=function(e,t){var n=e>>>16,i=65535&e,r=t>>>16,s=65535&t;return i*s+(n*s+i*r<<16)|0}),Math.imul=Math.imul;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_tan=Math.tan,Math_acos=Math.acos,Math_asin=Math.asin,Math_atan=Math.atan,Math_atan2=Math.atan2,Math_exp=Math.exp,Math_log=Math.log,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_pow=Math.pow,Math_imul=Math.imul,Math_fround=Math.fround,Math_min=Math.min,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var memoryInitializer=null;STATIC_BASE=8,STATICTOP=STATIC_BASE+5664,__ATINIT__.push({func:function(){__GLOBAL__I_a()}},{func:function(){__GLOBAL__I_a127()}}),allocate([78,55,77,105,110,105,115,97,116,50,48,79,117,116,79,102,77,101,109,111,114,121,69,120,99,101,112,116,105,111,110,69,0,0,0,0,0,0,0,0,88,18,0,0,8,0,0,0,78,55,77,105,110,105,115,97,116,54,79,112,116,105,111,110,69,0,0,0,0,0,0,0,88,18,0,0,56,0,0,0,10,32,32,32,32,32,32,32,32,37,115,10,0,0,0,0,0,0,0,0,80,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,200,0,0,0,1,0,0,0,3,0,0,0,1,0,0,0,1,0,0,0,78,55,77,105,110,105,115,97,116,49,48,66,111,111,108,79,112,116,105,111,110,69,0,0,128,18,0,0,176,0,0,0,80,0,0,0,0,0,0,0,32,32,45,37,115,44,32,45,110,111,45,37,115,0,0,0,40,100,101,102,97,117,108,116,58,32,37,115,41,10,0,0,111,110,0,0,0,0,0,0,111,102,102,0,0,0,0,0,110,111,45,0,0,0,0,0,0,0,0,0,64,1,0,0,1,0,0,0,4,0,0,0,2,0,0,0,2,0,0,0,78,55,77,105,110,105,115,97,116,57,73,110,116,79,112,116,105,111,110,69,0,0,0,0,128,18,0,0,40,1,0,0,80,0,0,0,0,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,91,0,0,0,0,0,0,0,105,109,105,110,0,0,0,0,37,52,100,0,0,0,0,0,32,46,46,32,0,0,0,0,105,109,97,120,0,0,0,0,93,32,40,100,101,102,97,117,108,116,58,32,37,100,41,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,115,109,97,108,108,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118,97,114,45,100,101,99,97,121,0,0,0,0,0,0,0,84,104,101,32,118,97,114,105,97,98,108,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,108,97,45,100,101,99,97,121,0,0,0,0,0,0,0,84,104,101,32,99,108,97,117,115,101,32,97,99,116,105,118,105,116,121,32,100,101,99,97,121,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,102,114,101,113,0,0,0,0,0,0,0,0,84,104,101,32,102,114,101,113,117,101,110,99,121,32,119,105,116,104,32,119,104,105,99,104,32,116,104,101,32,100,101,99,105,115,105,111,110,32,104,101,117,114,105,115,116,105,99,32,116,114,105,101,115,32,116,111,32,99,104,111,111,115,101,32,97,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,115,101,101,100,0,0,0,0,0,0,0,0,85,115,101,100,32,98,121,32,116,104,101,32,114,97,110,100,111,109,32,118,97,114,105,97,98,108,101,32,115,101,108,101,99,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,99,109,105,110,45,109,111,100,101,0,0,0,0,0,0,67,111,110,116,114,111,108,115,32,99,111,110,102,108,105,99,116,32,99,108,97,117,115,101,32,109,105,110,105,109,105,122,97,116,105,111,110,32,40,48,61,110,111,110,101,44,32,49,61,98,97,115,105,99,44,32,50,61,100,101,101,112,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,104,97,115,101,45,115,97,118,105,110,103,0,0,0,0,67,111,110,116,114,111,108,115,32,116,104,101,32,108,101,118,101,108,32,111,102,32,112,104,97,115,101,32,115,97,118,105,110,103,32,40,48,61,110,111,110,101,44,32,49,61,108,105,109,105,116,101,100,44,32,50,61,102,117,108,108,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,110,100,45,105,110,105,116,0,0,0,0,0,0,0,0,82,97,110,100,111,109,105,122,101,32,116,104,101,32,105,110,105,116,105,97,108,32,97,99,116,105,118,105,116,121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,108,117,98,121,0,0,0,0,85,115,101,32,116,104,101,32,76,117,98,121,32,114,101,115,116,97,114,116,32,115,101,113,117,101,110,99,101,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,102,105,114,115,116,0,0,84,104,101,32,98,97,115,101,32,114,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,105,110,99,0,0,0,0,82,101,115,116,97,114,116,32,105,110,116,101,114,118,97,108,32,105,110,99,114,101,97,115,101,32,102,97,99,116,111,114,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,99,45,102,114,97,99,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,105,110,45,108,101,97,114,110,116,115,0,0,0,0,0,77,105,110,105,109,117,109,32,108,101,97,114,110,116,32,99,108,97,117,115,101,32,108,105,109,105,116,0,0,0,0,0,0,0,0,0,192,7,0,0,5,0,0,0,6,0,0,0,7,0,0,0,0,0,0,0,124,32,37,57,100,32,124,32,37,55,100,32,37,56,100,32,37,56,100,32,124,32,37,56,100,32,37,56,100,32,37,54,46,48,102,32,124,32,37,54,46,51,102,32,37,37,32,124,10,0,0,0,0,0,0,0,124,32,32,71,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,58,32,32,32,37,49,50,100,32,98,121,116,101,115,32,61,62,32,37,49,50,100,32,98,121,116,101,115,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,54,83,111,108,118,101,114,69,0,0,0,0,0,0,0,88,18,0,0,168,7,0,0,60,98,111,111,108,62,0,0,10,32,32,32,32,32,32,32,32,37,115,10,0,0,0,0,60,105,110,116,51,50,62,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,69,82,82,79,82,33,32,118,97,108,117,101,32,60,37,115,62,32,105,115,32,116,111,111,32,115,109,97,108,108,32,102,111,114,32,111,112,116,105,111,110,32,34,37,115,34,46,10,0,0,0,0,0,0,0,0,67,79,82,69,0,0,0,0,60,100,111,117,98,108,101,62,0,0,0,0,0,0,0,0,0,0,0,0,168,8,0,0,1,0,0,0,8,0,0,0,3,0,0,0,3,0,0,0,78,55,77,105,110,105,115,97,116,49,50,68,111,117,98,108,101,79,112,116,105,111,110,69,0,0,0,0,0,0,0,0,128,18,0,0,136,8,0,0,80,0,0,0,0,0,0,0,32,32,45,37,45,49,50,115,32,61,32,37,45,56,115,32,37,99,37,52,46,50,103,32,46,46,32,37,52,46,50,103,37,99,32,40,100,101,102,97,117,108,116,58,32,37,103,41,10,0,0,0,0,0,0,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,91,32,83,101,97,114,99,104,32,83,116,97,116,105,115,116,105,99,115,32,93,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,124,32,67,111,110,102,108,105,99,116,115,32,124,32,32,32,32,32,32,32,32,32,32,79,82,73,71,73,78,65,76,32,32,32,32,32,32,32,32,32,124,32,32,32,32,32,32,32,32,32,32,76,69,65,82,78,84,32,32,32,32,32,32,32,32,32,32,124,32,80,114,111,103,114,101,115,115,32,124,0,124,32,32,32,32,32,32,32,32,32,32,32,124,32,32,32,32,86,97,114,115,32,32,67,108,97,117,115,101,115,32,76,105,116,101,114,97,108,115,32,124,32,32,32,32,76,105,109,105,116,32,32,67,108,97,117,115,101,115,32,76,105,116,47,67,108,32,124,32,32,32,32,32,32,32,32,32,32,124,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,97,115,121,109,109,0,0,0,83,104,114,105,110,107,32,99,108,97,117,115,101,115,32,98,121,32,97,115,121,109,109,101,116,114,105,99,32,98,114,97,110,99,104,105,110,103,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,114,99,104,101,99,107,0,0,67,104,101,99,107,32,105,102,32,97,32,99,108,97,117,115,101,32,105,115,32,97,108,114,101,97,100,121,32,105,109,112,108,105,101,100,46,32,40,99,111,115,116,108,121,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,101,108,105,109,0,0,0,0,80,101,114,102,111,114,109,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,114,111,119,0,0,0,0,65,108,108,111,119,32,97,32,118,97,114,105,97,98,108,101,32,101,108,105,109,105,110,97,116,105,111,110,32,115,116,101,112,32,116,111,32,103,114,111,119,32,98,121,32,97,32,110,117,109,98,101,114,32,111,102,32,99,108,97,117,115,101,115,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,99,108,45,108,105,109,0,0,86,97,114,105,97,98,108,101,115,32,97,114,101,32,110,111,116,32,101,108,105,109,105,110,97,116,101,100,32,105,102,32,105,116,32,112,114,111,100,117,99,101,115,32,97,32,114,101,115,111,108,118,101,110,116,32,119,105,116,104,32,97,32,108,101,110,103,116,104,32,97,98,111,118,101,32,116,104,105,115,32,108,105,109,105,116,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,117,98,45,108,105,109,0,68,111,32,110,111,116,32,99,104,101,99,107,32,105,102,32,115,117,98,115,117,109,112,116,105,111,110,32,97,103,97,105,110,115,116,32,97,32,99,108,97,117,115,101,32,108,97,114,103,101,114,32,116,104,97,110,32,116,104,105,115,46,32,45,49,32,109,101,97,110,115,32,110,111,32,108,105,109,105,116,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,115,105,109,112,45,103,99,45,102,114,97,99,0,0,0,0,84,104,101,32,102,114,97,99,116,105,111,110,32,111,102,32,119,97,115,116,101,100,32,109,101,109,111,114,121,32,97,108,108,111,119,101,100,32,98,101,102,111,114,101,32,97,32,103,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,32,105,115,32,116,114,105,103,103,101,114,101,100,32,100,117,114,105,110,103,32,115,105,109,112,108,105,102,105,99,97,116,105,111,110,46,0,0,0,0,0,0,0,120,14,0,0,9,0,0,0,10,0,0,0,11,0,0,0,0,0,0,0,115,117,98,115,117,109,112,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,32,40,37,49,48,100,32,115,117,98,115,117,109,101,100,44,32,37,49,48,100,32,100,101,108,101,116,101,100,32,108,105,116,101,114,97,108,115,41,13,0,0,101,108,105,109,105,110,97,116,105,111,110,32,108,101,102,116,58,32,37,49,48,100,13,0,124,32,32,69,108,105,109,105,110,97,116,101,100,32,99,108,97,117,115,101,115,58,32,32,32,32,32,37,49,48,46,50,102,32,77,98,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,124,32,32,71,97,114,98,97,103,101,32,99,111,108,108,101,99,116,105,111,110,58,32,32,32,37,49,50,100,32,98,121,116,101,115,32,61,62,32,37,49,50,100,32,98,121,116,101,115,32,32,32,32,32,32,32,32,32,32,32,32,32,124,10,0,0,0,0,0,0,0,0,78,55,77,105,110,105,115,97,116,49,48,83,105,109,112,83,111,108,118,101,114,69,0,0,128,18,0,0,96,14,0,0,192,7,0,0,0,0,0,0,60,100,111,117,98,108,101,62,0,0,0,0,0,0,0,0,60,105,110,116,51,50,62,0,83,73,77,80,0,0,0,0,60,98,111,111,108,62,0,0,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,61,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,79,33,0,0,0,0,0,2,0,0,0,0,0,0,0,48,15,0,0,0,0,0,0,117,110,99,97,117,103,104,116,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,58,32,37,115,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,101,120,99,101,112,116,105,111,110,32,111,102,32,116,121,112,101,32,37,115,0,0,0,0,0,0,0,0,116,101,114,109,105,110,97,116,105,110,103,32,119,105,116,104,32,37,115,32,102,111,114,101,105,103,110,32,101,120,99,101,112,116,105,111,110,0,0,0,116,101,114,109,105,110,97,116,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,116,104,114,101,97,100,95,111,110,99,101,32,102,97,105,108,117,114,101,32,105,110,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,95,102,97,115,116,40,41,0,0,0,0,0,0,0,0,99,97,110,110,111,116,32,99,114,101,97,116,101,32,112,116,104,114,101,97,100,32,107,101,121,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,99,97,110,110,111,116,32,122,101,114,111,32,111,117,116,32,116,104,114,101,97,100,32,118,97,108,117,101,32,102,111,114,32,95,95,99,120,97,95,103,101,116,95,103,108,111,98,97,108,115,40,41,0,0,0,0,0,0,0,0,200,16,0,0,12,0,0,0,13,0,0,0,1,0,0,0,0,0,0,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,0,83,116,57,98,97,100,95,97,108,108,111,99,0,0,0,0,128,18,0,0,184,16,0,0,80,17,0,0,0,0,0,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,114,101,116,117,114,110,101,100,0,116,101,114,109,105,110,97,116,101,95,104,97,110,100,108,101,114,32,117,110,101,120,112,101,99,116,101,100,108,121,32,116,104,114,101,119,32,97,110,32,101,120,99,101,112,116,105,111,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,116,57,101,120,99,101,112,116,105,111,110,0,0,0,0,88,18,0,0,64,17,0,0,83,116,57,116,121,112,101,95,105,110,102,111,0,0,0,0,88,18,0,0,88,17,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,0,128,18,0,0,112,17,0,0,104,17,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,128,18,0,0,168,17,0,0,152,17,0,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,57,95,95,112,111,105,110,116,101,114,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,112,98,97,115,101,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,0,0,0,128,18,0,0,8,18,0,0,152,17,0,0,0,0,0,0,128,18,0,0,224,17,0,0,48,18,0,0,0,0,0,0,0,0,0,0,208,17,0,0,14,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,200,18,0,0,14,0,0,0,18,0,0,0,16,0,0,0,17,0,0,0,1,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,0,0,0,128,18,0,0,160,18,0,0,208,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,1,2,4,7,3,6,5,0,0,0,0,0,0,0,0,105,110,102,105,110,105,116,121,0,0,0,0,0,0,0,0,110,97,110,0,0,0,0,0,95,112,137,0,255,9,47,15,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);function copyTempFloat(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3]}function copyTempDouble(e){HEAP8[tempDoublePtr]=HEAP8[e],HEAP8[tempDoublePtr+1]=HEAP8[e+1],HEAP8[tempDoublePtr+2]=HEAP8[e+2],HEAP8[tempDoublePtr+3]=HEAP8[e+3],HEAP8[tempDoublePtr+4]=HEAP8[e+4],HEAP8[tempDoublePtr+5]=HEAP8[e+5],HEAP8[tempDoublePtr+6]=HEAP8[e+6],HEAP8[tempDoublePtr+7]=HEAP8[e+7]}function _atexit(e,t){__ATEXIT__.unshift({func:e,arg:t})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}assert(tempDoublePtr%8==0),Module._i64Subtract=_i64Subtract;var ___errno_state=0;function ___setErrNo(e){return HEAP32[___errno_state>>2]=e,e}var ERRNO_CODES={EBADF:9,EINVAL:22};function _sysconf(e){switch(e){case 30:return PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 79:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return -1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:if("object"==typeof navigator)return navigator.hardwareConcurrency||1;return 1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||EXCEPTIONS.infos[e])return e;for(var t in EXCEPTIONS.infos)if(EXCEPTIONS.infos[t].adjusted===e)return t;return e},addRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount++}},decRef:function(e){if(e){var t=EXCEPTIONS.infos[e];assert(t.refcount>0),t.refcount--,0===t.refcount&&(t.destructor&&Runtime.dynCall("vi",t.destructor,[e]),delete EXCEPTIONS.infos[e],___cxa_free_exception(e))}},clearRef:function(e){if(e){var t=EXCEPTIONS.infos[e];t.refcount=0}}};function ___resumeException(e){throw EXCEPTIONS.last||(EXCEPTIONS.last=e),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(e)),e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var e=EXCEPTIONS.last;if(!e)return asm.setTempRet0(0),0;var t=EXCEPTIONS.infos[e],n=t.type;if(!n)return asm.setTempRet0(0),0|e;var i=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(n),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=e,e=___cxa_find_matching_catch.buffer;for(var r=0;r<i.length;r++)if(i[r]&&Module.___cxa_can_catch(i[r],n,e))return e=HEAP32[e>>2],t.adjusted=e,asm.setTempRet0(i[r]),0|e;return e=HEAP32[e>>2],asm.setTempRet0(n),0|e}function ___cxa_throw(e,t,n){throw EXCEPTIONS.infos[e]={ptr:e,adjusted:e,type:t,destructor:n,refcount:0},EXCEPTIONS.last=e,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function _abort(){Module.abort()}Module._memset=_memset,Module._bitshift64Shl=_bitshift64Shl;var FS=void 0,SOCKFS=void 0;function _send(e,t,n,i){return SOCKFS.getSocket(e)?_write(e,t,n):(___setErrNo(ERRNO_CODES.EBADF),-1)}function _pwrite(e,t,n,i){var r=FS.getStream(e);if(!r)return ___setErrNo(ERRNO_CODES.EBADF),-1;try{var s=HEAP8;return FS.write(r,s,t,n,i)}catch(e){return FS.handleFSError(e),-1}}function _write(e,t,n){var i=FS.getStream(e);if(!i)return ___setErrNo(ERRNO_CODES.EBADF),-1;try{var r=HEAP8;return FS.write(i,r,t,n)}catch(e){return FS.handleFSError(e),-1}}function _fileno(e){return(e=FS.getStreamFromPtr(e))?e.fd:-1}function _fwrite(e,t,n,i){var r=n*t;if(0==r)return 0;var s=_write(_fileno(i),e,r);if(-1!=s)return s/t|0;var a=FS.getStreamFromPtr(i);return a&&(a.error=!0),0}function __reallyNegative(e){return e<0||0===e&&1/e==-1/0}function __formatString(e,t){var n=e,i=0;function r(e){var n;return"double"===e?(HEAP32[tempDoublePtr>>2]=HEAP32[t+i>>2],HEAP32[tempDoublePtr+4>>2]=HEAP32[t+(i+4)>>2],n=+HEAPF64[tempDoublePtr>>3]):"i64"==e?n=[HEAP32[t+i>>2],HEAP32[t+(i+4)>>2]]:(e="i32",n=HEAP32[t+i>>2]),i+=Runtime.getNativeFieldSize(e),n}for(var s=[];;){var a=n;if(0===(v=HEAP8[n>>0]))break;if(_=HEAP8[n+1>>0],37==v){var o=!1,l=!1,u=!1,c=!1,h=!1;s:for(;;){switch(_){case 43:o=!0;break;case 45:l=!0;break;case 35:u=!0;break;case 48:if(c)break s;c=!0;break;case 32:h=!0;break;default:break s}_=HEAP8[++n+1>>0]}var f=0;if(42==_)f=r("i32"),_=HEAP8[++n+1>>0];else for(;_>=48&&_<=57;)f=10*f+(_-48),_=HEAP8[++n+1>>0];var d=!1,p=-1;if(46==_){if(p=0,d=!0,42==(_=HEAP8[++n+1>>0]))p=r("i32"),n++;else for(;;){var m=HEAP8[n+1>>0];if(m<48||m>57)break;p=10*p+(m-48),n++}_=HEAP8[n+1>>0]}switch(p<0&&(p=6,d=!1),String.fromCharCode(_)){case"h":var g=HEAP8[n+2>>0];104==g?(n++,y=1):y=2;break;case"l":var g=HEAP8[n+2>>0];108==g?(n++,y=8):y=4;break;case"L":case"q":case"j":y=8;break;case"z":case"t":case"I":y=4;break;default:y=null}switch(y&&n++,String.fromCharCode(_=HEAP8[n+1>>0])){case"d":case"i":case"u":case"o":case"x":case"X":case"p":var v,_,y,x,b=100==_||105==_,w=r("i"+8*(y=y||4)),M=w;8==y&&(w=Runtime.makeBigInt(w[0],w[1],117==_)),y<=4&&(w=(b?reSign:unSign)(w&Math.pow(256,y)-1,8*y));var S=Math.abs(w),T="";if(100==_||105==_)x=8==y&&i64Math?i64Math.stringify(M[0],M[1],null):reSign(w,8*y,1).toString(10);else if(117==_)x=8==y&&i64Math?i64Math.stringify(M[0],M[1],!0):unSign(w,8*y,1).toString(10),w=Math.abs(w);else if(111==_)x=(u?"0":"")+S.toString(8);else if(120==_||88==_){if(T=u&&0!=w?"0x":"",8==y&&i64Math){if(M[1]){x=(M[1]>>>0).toString(16);for(var E=(M[0]>>>0).toString(16);E.length<8;)E="0"+E;x+=E}else x=(M[0]>>>0).toString(16)}else if(w<0){w=-w,x=(S-1).toString(16);for(var A=[],C=0;C<x.length;C++)A.push((15-parseInt(x[C],16)).toString(16));for(x=A.join("");x.length<2*y;)x="f"+x}else x=S.toString(16);88==_&&(T=T.toUpperCase(),x=x.toUpperCase())}else 112==_&&(0===S?x="(nil)":(T="0x",x=S.toString(16)));if(d)for(;x.length<p;)x="0"+x;for(w>=0&&(o?T="+"+T:h&&(T=" "+T)),"-"==x.charAt(0)&&(T="-"+T,x=x.substr(1));T.length+x.length<f;)l?x+=" ":c?x="0"+x:T=" "+T;(x=T+x).split("").forEach(function(e){s.push(e.charCodeAt(0))});break;case"f":case"F":case"e":case"E":case"g":case"G":var x,w=r("double");if(isNaN(w))x="nan",c=!1;else if(isFinite(w)){var L=!1,R=Math.min(p,20);if(103==_||71==_){L=!0,p=p||1;var D=parseInt(w.toExponential(R).split("e")[1],10);p>D&&D>=-4?(_=(103==_?"f":"F").charCodeAt(0),p-=D+1):(_=(103==_?"e":"E").charCodeAt(0),p--),R=Math.min(p,20)}101==_||69==_?(x=w.toExponential(R),/[eE][-+]\d$/.test(x)&&(x=x.slice(0,-1)+"0"+x.slice(-1))):(102==_||70==_)&&(x=w.toFixed(R),0===w&&__reallyNegative(w)&&(x="-"+x));var P=x.split("e");if(L&&!u)for(;P[0].length>1&&-1!=P[0].indexOf(".")&&("0"==P[0].slice(-1)||"."==P[0].slice(-1));)P[0]=P[0].slice(0,-1);else for(u&&-1==x.indexOf(".")&&(P[0]+=".");p>R++;)P[0]+="0";x=P[0]+(P.length>1?"e"+P[1]:""),69==_&&(x=x.toUpperCase()),w>=0&&(o?x="+"+x:h&&(x=" "+x))}else x=(w<0?"-":"")+"inf",c=!1;for(;x.length<f;)l?x+=" ":x=c&&("-"==x[0]||"+"==x[0])?x[0]+"0"+x.slice(1):(c?"0":" ")+x;_<97&&(x=x.toUpperCase()),x.split("").forEach(function(e){s.push(e.charCodeAt(0))});break;case"s":var N=r("i8*"),O=N?_strlen(N):6;if(d&&(O=Math.min(O,p)),!l)for(;O<f--;)s.push(32);if(N)for(var C=0;C<O;C++)s.push(HEAPU8[N++>>0]);else s=s.concat(intArrayFromString("(null)".substr(0,O),!0));if(l)for(;O<f--;)s.push(32);break;case"c":for(l&&s.push(r("i8"));--f>0;)s.push(32);l||s.push(r("i8"));break;case"n":HEAP32[r("i32*")>>2]=s.length;break;case"%":s.push(v);break;default:for(var C=a;C<n+2;C++)s.push(HEAP8[C>>0])}n+=2}else s.push(v),n+=1}return s}function _fprintf(e,t,n){var i=__formatString(t,n),r=Runtime.stackSave(),s=_fwrite(allocate(i,"i8",ALLOC_STACK),1,i.length,e);return Runtime.stackRestore(r),s}function _printf(e,t){var n=__formatString(e,t),i=intArrayToString(n);return"\n"===i[i.length-1]&&(i=i.substr(0,i.length-1)),Module.print(i),n.length}function _pthread_once(e,t){_pthread_once.seen||(_pthread_once.seen={}),e in _pthread_once.seen||(Runtime.dynCall("v",t),_pthread_once.seen[e]=1)}function _fputc(e,t){var n=unSign(255&e);if(HEAP8[_fputc.ret>>0]=n,-1!=_write(_fileno(t),_fputc.ret,1))return n;var i=FS.getStreamFromPtr(t);return i&&(i.error=!0),-1}Module._strlen=_strlen;var PTHREAD_SPECIFIC={};function _pthread_getspecific(e){return PTHREAD_SPECIFIC[e]||0}function _fputs(e,t){return _write(_fileno(t),e,_strlen(e))}Module._i64Add=_i64Add;var _stdout=allocate(1,"i32*",ALLOC_STATIC);function _puts(e){var t=Pointer_stringify(e),n=t.substr(0);return"\n"===n[n.length-1]&&(n=n.substr(0,n.length-1)),Module.print(n),t.length}function _pthread_setspecific(e,t){return e in PTHREAD_SPECIFIC?(PTHREAD_SPECIFIC[e]=t,0):ERRNO_CODES.EINVAL}function __exit(e){Module.exit(e)}function _exit(e){__exit(e)}var _UItoD=!0;function _malloc(e){return Runtime.dynamicAlloc(e+8)+8&4294967288}function ___cxa_allocate_exception(e){return _malloc(e)}function _fmod(e,t){return e%t}function _fmodl(){return _fmod.apply(null,arguments)}function ___cxa_pure_virtual(){throw ABORT=!0,"Pure virtual function called!"}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}Module._malloc=_malloc,Module._bitshift64Lshr=_bitshift64Lshr;var PTHREAD_SPECIFIC_NEXT_KEY=1;function _pthread_key_create(e,t){return 0==e?ERRNO_CODES.EINVAL:(HEAP32[e>>2]=PTHREAD_SPECIFIC_NEXT_KEY,PTHREAD_SPECIFIC[PTHREAD_SPECIFIC_NEXT_KEY]=0,PTHREAD_SPECIFIC_NEXT_KEY++,0)}function ___cxa_guard_acquire(e){return HEAP8[e>>0]?0:(HEAP8[e>>0]=1,1)}function ___cxa_guard_release(){}function _vfprintf(e,t,n){return _fprintf(e,t,HEAP32[n>>2])}function ___cxa_begin_catch(e){return __ZSt18uncaught_exceptionv.uncaught_exception--,EXCEPTIONS.caught.push(e),EXCEPTIONS.addRef(EXCEPTIONS.deAdjust(e)),e}function _emscripten_memcpy_big(e,t,n){return HEAPU8.set(HEAPU8.subarray(t,t+n),e),e}Module._memcpy=_memcpy;var _llvm_pow_f64=Math_pow;function _sbrk(e){var t=_sbrk;t.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),t.called=!0,assert(Runtime.dynamicAlloc),t.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var n=DYNAMICTOP;return 0!=e&&t.alloc(e),n}var _fabs=Math_abs;function ___errno_location(){return ___errno_state}var _BItoD=!0;function _copysign(e,t){return __reallyNegative(e)===__reallyNegative(t)?e:-e}function _copysignl(){return _copysign.apply(null,arguments)}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC),_stderr=allocate(1,"i32*",ALLOC_STATIC);___errno_state=Runtime.staticAlloc(4),HEAP32[___errno_state>>2]=0,_fputc.ret=allocate([0],"i8",ALLOC_STATIC),STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var ctlz_i8=allocate([8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"i8",ALLOC_DYNAMIC),cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(e,t,n,i){try{return Module.dynCall_iiii(e,t,n,i)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiiii(e,t,n,i,r,s){try{Module.dynCall_viiiii(e,t,n,i,r,s)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_vi(e,t){try{Module.dynCall_vi(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_vii(e,t,n){try{Module.dynCall_vii(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_ii(e,t){try{return Module.dynCall_ii(e,t)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_v(e){try{Module.dynCall_v(e)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiiiii(e,t,n,i,r,s,a){try{Module.dynCall_viiiiii(e,t,n,i,r,s,a)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_iii(e,t,n){try{return Module.dynCall_iii(e,t,n)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}function invoke_viiii(e,t,n,i,r){try{Module.dynCall_viiii(e,t,n,i,r)}catch(e){if("number"!=typeof e&&"longjmp"!==e)throw e;asm.setThrew(1,0)}}Module.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Module.asmLibraryArg={abort:abort,assert:assert,min:Math_min,invoke_iiii:invoke_iiii,invoke_viiiii:invoke_viiiii,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_ii:invoke_ii,invoke_v:invoke_v,invoke_viiiiii:invoke_viiiiii,invoke_iii:invoke_iii,invoke_viiii:invoke_viiii,_fabs:_fabs,_llvm_pow_f64:_llvm_pow_f64,_send:_send,_fmod:_fmod,___cxa_guard_acquire:___cxa_guard_acquire,___setErrNo:___setErrNo,_vfprintf:_vfprintf,___cxa_allocate_exception:___cxa_allocate_exception,___cxa_find_matching_catch:___cxa_find_matching_catch,___cxa_guard_release:___cxa_guard_release,_pwrite:_pwrite,__reallyNegative:__reallyNegative,_sbrk:_sbrk,___cxa_begin_catch:___cxa_begin_catch,_emscripten_memcpy_big:_emscripten_memcpy_big,_fileno:_fileno,___resumeException:___resumeException,__ZSt18uncaught_exceptionv:__ZSt18uncaught_exceptionv,_sysconf:_sysconf,_pthread_getspecific:_pthread_getspecific,_atexit:_atexit,_pthread_once:_pthread_once,_puts:_puts,_printf:_printf,_pthread_key_create:_pthread_key_create,_write:_write,___errno_location:___errno_location,_pthread_setspecific:_pthread_setspecific,___cxa_atexit:___cxa_atexit,_copysign:_copysign,_fputc:_fputc,___cxa_throw:___cxa_throw,__exit:__exit,_copysignl:_copysignl,_abort:_abort,_fwrite:_fwrite,_time:_time,_fprintf:_fprintf,__formatString:__formatString,_fputs:_fputs,_exit:_exit,___cxa_pure_virtual:___cxa_pure_virtual,_fmodl:_fmodl,STACKTOP:STACKTOP,STACK_MAX:STACK_MAX,tempDoublePtr:tempDoublePtr,ABORT:ABORT,cttz_i8:cttz_i8,ctlz_i8:ctlz_i8,NaN:NaN,Infinity:1/0,___dso_handle:___dso_handle,_stderr:_stderr};var asm=function(e,t,n){"use asm";var i=new e.Int8Array(n);var r=new e.Int16Array(n);var s=new e.Int32Array(n);var a=new e.Uint8Array(n);var o=new e.Uint16Array(n);var l=new e.Uint32Array(n);var u=new e.Float32Array(n);var c=new e.Float64Array(n);var h=t.STACKTOP|0;var f=t.STACK_MAX|0;var d=t.tempDoublePtr|0;var p=t.ABORT|0;var m=t.cttz_i8|0;var g=t.ctlz_i8|0;var v=t.___dso_handle|0;var _=t._stderr|0;var y=0;var x=0;var b=0;var w=0;var M=+t.NaN,S=+t.Infinity;var T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0;var O=0;var I=0;var k=0;var U=0;var F=0;var z=0;var B=0;var V=0;var H=0;var G=0;var W=e.Math.floor;var j=e.Math.abs;var q=e.Math.sqrt;var X=e.Math.pow;var $=e.Math.cos;var Y=e.Math.sin;var J=e.Math.tan;var Z=e.Math.acos;var K=e.Math.asin;var Q=e.Math.atan;var ee=e.Math.atan2;var et=e.Math.exp;var en=e.Math.log;var ei=e.Math.ceil;var er=e.Math.imul;var es=t.abort;var ea=t.assert;var eo=t.min;var el=t.invoke_iiii;var eu=t.invoke_viiiii;var ec=t.invoke_vi;var eh=t.invoke_vii;var ef=t.invoke_ii;var ed=t.invoke_v;var ep=t.invoke_viiiiii;var em=t.invoke_iii;var eg=t.invoke_viiii;var ev=t._fabs;var e_=t._llvm_pow_f64;var ey=t._send;var ex=t._fmod;var eb=t.___cxa_guard_acquire;var ew=t.___setErrNo;var eM=t._vfprintf;var eS=t.___cxa_allocate_exception;var eT=t.___cxa_find_matching_catch;var eE=t.___cxa_guard_release;var eA=t._pwrite;var eC=t.__reallyNegative;var eL=t._sbrk;var eR=t.___cxa_begin_catch;var eD=t._emscripten_memcpy_big;var eP=t._fileno;var eN=t.___resumeException;var eO=t.__ZSt18uncaught_exceptionv;var eI=t._sysconf;var ek=t._pthread_getspecific;var eU=t._atexit;var eF=t._pthread_once;var ez=t._puts;var eB=t._printf;var eV=t._pthread_key_create;var eH=t._write;var eG=t.___errno_location;var eW=t._pthread_setspecific;var ej=t.___cxa_atexit;var eq=t._copysign;var eX=t._fputc;var e$=t.___cxa_throw;var eY=t.__exit;var eJ=t._copysignl;var eZ=t._abort;var eK=t._fwrite;var eQ=t._time;var e0=t._fprintf;var e1=t.__formatString;var e2=t._fputs;var e3=t._exit;var e4=t.___cxa_pure_virtual;var e5=t._fmodl;var e6=0;function e8(e){e=e|0;var t=0;t=h;h=h+e|0;h=h+15&-16;return t|0}function e9(){return h|0}function e7(e){e=e|0;h=e}function te(e,t){e=e|0;t=t|0;if(!y){y=e;x=t}}function tt(e){e=e|0;i[d>>0]=i[e>>0];i[d+1>>0]=i[e+1>>0];i[d+2>>0]=i[e+2>>0];i[d+3>>0]=i[e+3>>0]}function tn(e){e=e|0;i[d>>0]=i[e>>0];i[d+1>>0]=i[e+1>>0];i[d+2>>0]=i[e+2>>0];i[d+3>>0]=i[e+3>>0];i[d+4>>0]=i[e+4>>0];i[d+5>>0]=i[e+5>>0];i[d+6>>0]=i[e+6>>0];i[d+7>>0]=i[e+7>>0]}function ti(e){e=e|0;O=e}function tr(){return O|0}function ts(e){e=e|0;eR(e|0);n$()}function ta(e){e=e|0;return}function to(e,t,n,r,a){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;var o=0;o=h;s[e>>2]=112;s[e+4>>2]=t;s[e+8>>2]=n;s[e+12>>2]=r;s[e+16>>2]=a;if((i[144]|0)==0?(eb(144)|0)!=0:0){s[32]=0;s[33]=0;s[34]=0;ej(19,128,v|0);eE(144)}a=s[33]|0;if((a|0)==(s[34]|0)){r=(a>>1)+2&-2;r=(r|0)<2?2:r;if((r|0)>(2147483647-a|0)){t=eS(1)|0;e$(t|0,48,0)}n=s[32]|0;t=r+a|0;s[34]=t;t=ih(n,t<<2)|0;s[32]=t;if((t|0)==0?(s[(eG()|0)>>2]|0)==12:0){t=eS(1)|0;e$(t|0,48,0)}a=s[33]|0}s[33]=a+1;a=(s[32]|0)+(a<<2)|0;if(!a){h=o;return}s[a>>2]=e;h=o;return}function tl(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function tu(e){e=e|0;var t=0,n=0;t=h;n=s[e>>2]|0;if(!n){h=t;return}s[e+4>>2]=0;ic(n);s[e>>2]=0;s[e+8>>2]=0;h=t;return}function tc(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function th(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0;n=h;if((i[t>>0]|0)!=45){u=0;h=n;return u|0}r=t+1|0;a=110;l=r;u=0;while(true){o=u+1|0;if((i[l>>0]|0)!=a<<24>>24){a=1;break}l=t+(u+2)|0;if((o|0)==3){a=0;r=l;break}else{a=i[264+o>>0]|0;u=o}}if(iS(r,s[e+4>>2]|0)|0){u=0;h=n;return u|0}i[e+20>>0]=a;u=1;h=n;return u|0}function tf(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0;o=h;h=h+16|0;n=o;r=s[_>>2]|0;a=e+4|0;l=s[a>>2]|0;s[n>>2]=l;s[n+4>>2]=l;e0(r|0,216,n|0);l=0;while(true){u=l>>>0<(32-((iP(s[a>>2]|0)|0)<<1)|0)>>>0;eX(32,r|0);if(u)l=l+1|0;else break}s[n>>2]=(i[e+20>>0]|0)!=0?248:256;e0(r|0,232,n|0);if(!t){h=o;return}s[n>>2]=s[e+8>>2];e0(r|0,88,n|0);eX(10,r|0);h=o;return}function td(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function tp(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0;n=h;h=h+16|0;o=n;a=n+8|0;if((i[t>>0]|0)!=45){d=0;h=n;return d|0}c=t+1|0;r=e+4|0;l=s[r>>2]|0;u=i[l>>0]|0;a:do if(u<<24>>24){f=0;while(true){d=f;f=f+1|0;if((i[c>>0]|0)!=u<<24>>24){e=0;break}u=i[l+f>>0]|0;c=t+(d+2)|0;if(!(u<<24>>24))break a}h=n;return e|0}while(0)if((i[c>>0]|0)!=61){d=0;h=n;return d|0}t=c+1|0;l=iM(t,a,10)|0;if(!(s[a>>2]|0)){d=0;h=n;return d|0}if((l|0)>(s[e+24>>2]|0)){d=s[_>>2]|0;f=s[r>>2]|0;s[o>>2]=t;s[o+4>>2]=f;e0(d|0,416,o|0);e3(1)}if((l|0)<(s[e+20>>2]|0)){d=s[_>>2]|0;f=s[r>>2]|0;s[o>>2]=t;s[o+4>>2]=f;e0(d|0,472,o|0);e3(1)}s[e+28>>2]=l;d=1;h=n;return d|0}function tm(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0;n=h;h=h+16|0;i=n;r=s[_>>2]|0;a=s[e+16>>2]|0;s[i>>2]=s[e+4>>2];s[i+4>>2]=a;e0(r|0,336,i|0);a=s[e+20>>2]|0;if((a|0)==-2147483648)eK(360,4,1,r|0);else{s[i>>2]=a;e0(r|0,368,i|0)}eK(376,4,1,r|0);a=s[e+24>>2]|0;if((a|0)==2147483647)eK(384,4,1,r|0);else{s[i>>2]=a;e0(r|0,368,i|0)}s[i>>2]=s[e+28>>2];e0(r|0,392,i|0);if(!t){h=n;return}s[i>>2]=s[e+8>>2];e0(r|0,88,i|0);eX(10,r|0);h=n;return}function tg(e){e=e|0;var t=0,n=0,r=0,a=0,o=0;a=h;s[e>>2]=1816;r=e+4|0;n=e+32|0;o=e+48|0;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;c[o>>3]=+c[75];c[e+56>>3]=+c[89];c[e+64>>3]=+c[103];c[e+72>>3]=+c[123];i[e+80>>0]=i[1364]|0;s[e+84>>2]=s[269];s[e+88>>2]=s[297];i[e+92>>0]=0;i[e+93>>0]=i[1292]|0;c[e+96>>3]=+c[204];s[e+104>>2]=s[439];s[e+108>>2]=s[359];c[e+112>>3]=+c[191];c[e+120>>3]=.3333333333333333;c[e+128>>3]=1.1;s[e+136>>2]=100;c[e+144>>3]=1.5;o=e+316|0;s[e+332>>2]=0;s[e+336>>2]=0;s[e+340>>2]=0;s[e+348>>2]=0;s[e+352>>2]=0;s[e+356>>2]=0;s[e+364>>2]=0;s[e+368>>2]=0;s[e+372>>2]=0;s[e+380>>2]=0;s[e+384>>2]=0;s[e+388>>2]=0;s[e+396>>2]=0;s[e+400>>2]=0;s[e+404>>2]=0;n=e+544|0;s[e+412>>2]=0;s[e+416>>2]=0;s[e+420>>2]=0;s[e+428>>2]=0;s[e+432>>2]=0;s[e+436>>2]=0;s[e+444>>2]=0;s[e+448>>2]=0;s[e+452>>2]=0;iR(e+152|0,0,176);s[e+456>>2]=n;r=e+460|0;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;s[r+20>>2]=0;s[e+488>>2]=o;i[e+492>>0]=1;c[e+496>>3]=1;c[e+504>>3]=1;s[e+512>>2]=0;s[e+516>>2]=-1;o=e+520|0;r=e+536|0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;i[r>>0]=1;r=e+540|0;s[r+0>>2]=0;s[r+4>>2]=0;s[r+8>>2]=0;s[r+12>>2]=0;s[r+16>>2]=0;tW(n,1048576);i[e+560>>0]=0;n=e+604|0;r=e+664|0;o=e+564|0;t=o+36|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(t|0))o=n+0|0;t=o+36|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(t|0))o=e+680|0;s[r+0>>2]=-1;s[r+4>>2]=-1;s[r+8>>2]=-1;s[r+12>>2]=-1;i[o>>0]=0;h=a;return}function tv(e){e=e|0;var t=0;t=h;t_(e);nG(e);h=t;return}function t_(e){e=e|0;var t=0,n=0,i=0;t=h;s[e>>2]=1816;n=e+628|0;i=s[n>>2]|0;if(i){s[e+632>>2]=0;ic(i);s[n>>2]=0;s[e+636>>2]=0}n=e+616|0;i=s[n>>2]|0;if(i){s[e+620>>2]=0;ic(i);s[n>>2]=0;s[e+624>>2]=0}n=e+604|0;i=s[n>>2]|0;if(i){s[e+608>>2]=0;ic(i);s[n>>2]=0;s[e+612>>2]=0}n=e+588|0;i=s[n>>2]|0;if(i){s[e+592>>2]=0;ic(i);s[n>>2]=0;s[e+596>>2]=0}n=e+576|0;i=s[n>>2]|0;if(i){s[e+580>>2]=0;ic(i);s[n>>2]=0;s[e+584>>2]=0}n=e+564|0;i=s[n>>2]|0;if(i){s[e+568>>2]=0;ic(i);s[n>>2]=0;s[e+572>>2]=0}n=s[e+544>>2]|0;if(n)ic(n);n=e+472|0;i=s[n>>2]|0;if(i){s[e+476>>2]=0;ic(i);s[n>>2]=0;s[e+480>>2]=0}n=e+460|0;i=s[n>>2]|0;if(i){s[e+464>>2]=0;ic(i);s[n>>2]=0;s[e+468>>2]=0}tj(e+412|0);n=e+396|0;i=s[n>>2]|0;if(i){s[e+400>>2]=0;ic(i);s[n>>2]=0;s[e+404>>2]=0}n=e+380|0;i=s[n>>2]|0;if(i){s[e+384>>2]=0;ic(i);s[n>>2]=0;s[e+388>>2]=0}i=e+364|0;n=s[i>>2]|0;if(n){s[e+368>>2]=0;ic(n);s[i>>2]=0;s[e+372>>2]=0}n=e+348|0;i=s[n>>2]|0;if(i){s[e+352>>2]=0;ic(i);s[n>>2]=0;s[e+356>>2]=0}n=e+332|0;i=s[n>>2]|0;if(i){s[e+336>>2]=0;ic(i);s[n>>2]=0;s[e+340>>2]=0}n=e+316|0;i=s[n>>2]|0;if(i){s[e+320>>2]=0;ic(i);s[n>>2]=0;s[e+324>>2]=0}n=e+304|0;i=s[n>>2]|0;if(i){s[e+308>>2]=0;ic(i);s[n>>2]=0;s[e+312>>2]=0}n=e+292|0;i=s[n>>2]|0;if(i){s[e+296>>2]=0;ic(i);s[n>>2]=0;s[e+300>>2]=0}n=e+280|0;i=s[n>>2]|0;if(i){s[e+284>>2]=0;ic(i);s[n>>2]=0;s[e+288>>2]=0}n=e+268|0;i=s[n>>2]|0;if(i){s[e+272>>2]=0;ic(i);s[n>>2]=0;s[e+276>>2]=0}n=e+256|0;i=s[n>>2]|0;if(i){s[e+260>>2]=0;ic(i);s[n>>2]=0;s[e+264>>2]=0}n=e+32|0;i=s[n>>2]|0;if(i){s[e+36>>2]=0;ic(i);s[n>>2]=0;s[e+40>>2]=0}n=e+16|0;i=s[n>>2]|0;if(i){s[e+20>>2]=0;ic(i);s[n>>2]=0;s[e+24>>2]=0}i=e+4|0;n=s[i>>2]|0;if(!n){h=t;return}s[e+8>>2]=0;ic(n);s[i>>2]=0;s[e+12>>2]=0;h=t;return}function ty(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0;r=h;h=h+16|0;l=r+4|0;o=r;a=e+580|0;f=s[a>>2]|0;if((f|0)>0){p=f+-1|0;m=s[(s[e+576>>2]|0)+(p<<2)>>2]|0;s[a>>2]=p;a=m}else{m=e+540|0;a=s[m>>2]|0;s[m>>2]=a+1}f=e+412|0;m=a<<1;s[l>>2]=m;tq(f,l);s[o>>2]=m|1;tq(f,o);l=e+332|0;f=i[544]|0;o=a+1|0;tX(l,o);i[(s[l>>2]|0)+a>>0]=f;l=e+396|0;f=e+400|0;if((s[f>>2]|0)<(o|0)){p=e+404|0;m=s[p>>2]|0;if((m|0)<(o|0)){g=a+2-m&-2;d=(m>>1)+2&-2;d=(g|0)>(d|0)?g:d;if((d|0)>(2147483647-m|0)){g=eS(1)|0;e$(g|0,48,0)}v=s[l>>2]|0;g=d+m|0;s[p>>2]=g;g=ih(v,g<<3)|0;s[l>>2]=g;if((g|0)==0?(s[(eG()|0)>>2]|0)==12:0){v=eS(1)|0;e$(v|0,48,0)}}p=s[f>>2]|0;if((p|0)<(o|0))do{d=(s[l>>2]|0)+(p<<3)|0;if(d){v=d;s[v>>2]=0;s[v+4>>2]=0}p=p+1|0}while((p|0)!=(o|0))s[f>>2]=o}f=(s[l>>2]|0)+(a<<3)|0;s[f>>2]=-1;s[f+4>>2]=0;f=e+316|0;if(!(i[e+93>>0]|0))u=0;else{v=e+72|0;u=+c[v>>3]*1389796;u=u-+(~~(u/2147483647)|0)*2147483647;c[v>>3]=u;u=u/2147483647*1e-5}l=e+320|0;if((s[l>>2]|0)<(o|0)){d=e+324|0;p=s[d>>2]|0;if((p|0)<(o|0)){v=a+2-p&-2;m=(p>>1)+2&-2;m=(v|0)>(m|0)?v:m;if((m|0)>(2147483647-p|0)){v=eS(1)|0;e$(v|0,48,0)}g=s[f>>2]|0;v=m+p|0;s[d>>2]=v;v=ih(g,v<<3)|0;s[f>>2]=v;if((v|0)==0?(s[(eG()|0)>>2]|0)==12:0){v=eS(1)|0;e$(v|0,48,0)}}m=s[l>>2]|0;if((m|0)<(o|0)){d=s[f>>2]|0;do{p=d+(m<<3)|0;if(p)c[p>>3]=0;m=m+1|0}while((m|0)!=(o|0))}s[l>>2]=o}c[(s[f>>2]|0)+(a<<3)>>3]=u;t$(e+588|0,a,0);t$(e+348|0,a,1);l=e+364|0;t=i[t>>0]|0;tX(l,o);i[(s[l>>2]|0)+a>>0]=t;l=e+380|0;t=e+384|0;if((s[t>>2]|0)<(o|0)){f=e+388|0;p=s[f>>2]|0;if((p|0)<(o|0)){v=a+2-p&-2;d=(p>>1)+2&-2;d=(v|0)>(d|0)?v:d;if((d|0)>(2147483647-p|0)){v=eS(1)|0;e$(v|0,48,0)}g=s[l>>2]|0;v=d+p|0;s[f>>2]=v;v=ih(g,v)|0;s[l>>2]=v;if((v|0)==0?(s[(eG()|0)>>2]|0)==12:0){v=eS(1)|0;e$(v|0,48,0)}}f=s[t>>2]|0;if((f|0)<(o|0))do{d=(s[l>>2]|0)+f|0;if(d)i[d>>0]=0;f=f+1|0}while((f|0)!=(o|0))s[t>>2]=o}t=e+288|0;l=s[t>>2]|0;if((l|0)<(o|0)){v=a+2-l&-2;o=(l>>1)+2&-2;o=(v|0)>(o|0)?v:o;if((o|0)>(2147483647-l|0)){v=eS(1)|0;e$(v|0,48,0)}g=e+280|0;m=s[g>>2]|0;v=o+l|0;s[t>>2]=v;v=ih(m,v<<2)|0;s[g>>2]=v;if((v|0)==0?(s[(eG()|0)>>2]|0)==12:0){v=eS(1)|0;e$(v|0,48,0)}}o=e+380|0;t=(s[o>>2]|0)+a|0;l=(i[t>>0]|0)==0;if(n){if(l){v=e+200|0;g=v;g=iN(s[g>>2]|0,s[g+4>>2]|0,1,0)|0;s[v>>2]=g;s[v+4>>2]=O}}else if(!l){v=e+200|0;g=v;g=iN(s[g>>2]|0,s[g+4>>2]|0,-1,-1)|0;s[v>>2]=g;s[v+4>>2]=O}i[t>>0]=n&1;n=e+460|0;if((s[e+476>>2]|0)>(a|0)?(s[(s[e+472>>2]|0)+(a<<2)>>2]|0)>-1:0){h=r;return a|0}if(!(i[(s[o>>2]|0)+a>>0]|0)){h=r;return a|0}tY(n,a);h=r;return a|0}function tx(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0;n=h;h=h+16|0;u=n+1|0;l=n;r=e+492|0;if(!(i[r>>0]|0)){_=0;h=n;return _|0}_=s[t>>2]|0;o=t+4|0;c=s[o>>2]|0;i[u+0>>0]=i[l+0>>0]|0;tK(_,c,u);c=s[o>>2]|0;a:do if((c|0)>0){u=e+332|0;l=i[528]|0;f=0;d=0;m=-2;while(true){_=s[t>>2]|0;p=s[_+(f<<2)>>2]|0;v=a[(s[u>>2]|0)+(p>>1)>>0]|0;y=v^p&1;g=y&255;x=l&255;if((p|0)==(m^1|0)?1:(g<<24>>24==l<<24>>24&(x>>>1^1)|x&2&y|0)!=0){e=1;break}y=i[536]|0;x=y&255;if((p|0)!=(m|0)?((x>>>1^1)&g<<24>>24==y<<24>>24|v&2&x|0)==0:0){s[_+(d<<2)>>2]=p;c=s[o>>2]|0;d=d+1|0}else p=m;f=f+1|0;if((f|0)<(c|0))m=p;else break a}h=n;return e|0}else{f=0;d=0}while(0)l=f-d|0;if((l|0)>0){c=c-l|0;s[o>>2]=c}if(!c){i[r>>0]=0;x=0;h=n;return x|0}else if((c|0)==1){y=s[s[t>>2]>>2]|0;_=y>>1;i[(s[e+332>>2]|0)+_>>0]=(y&1^1)&255^1;x=s[e+296>>2]|0;_=(s[e+396>>2]|0)+(_<<3)|0;s[_>>2]=-1;s[_+4>>2]=x;_=e+284|0;x=s[_>>2]|0;s[_>>2]=x+1;s[(s[e+280>>2]|0)+(x<<2)>>2]=y;x=(tw(e)|0)==-1;i[r>>0]=x&1;h=n;return x|0}else{t=tQ(e+544|0,t,0)|0;o=e+256|0;r=e+260|0;u=s[r>>2]|0;l=e+264|0;if((u|0)==(s[l>>2]|0)){c=(u>>1)+2&-2;c=(c|0)<2?2:c;if((c|0)>(2147483647-u|0)){x=eS(1)|0;e$(x|0,48,0)}y=s[o>>2]|0;x=c+u|0;s[l>>2]=x;x=ih(y,x<<2)|0;s[o>>2]=x;if((x|0)==0?(s[(eG()|0)>>2]|0)==12:0){x=eS(1)|0;e$(x|0,48,0)}u=s[r>>2]|0}s[r>>2]=u+1;r=(s[o>>2]|0)+(u<<2)|0;if(r)s[r>>2]=t;tM(e,t);x=1;h=n;return x|0}return 0}function tb(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0;r=s[t>>2]|0;t=r>>1;i[(s[e+332>>2]|0)+t>>0]=(r&1^1)&255^1;a=s[e+296>>2]|0;t=(s[e+396>>2]|0)+(t<<3)|0;s[t>>2]=n;s[t+4>>2]=a;n=e+284|0;t=s[n>>2]|0;s[n>>2]=t+1;s[(s[e+280>>2]|0)+(t<<2)>>2]=r;return}function tw(e){e=e|0;var t=0,n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,I=0,k=0,U=0,F=0,z=0,B=0,V=0;u=h;h=h+16|0;v=u;o=e+512|0;y=s[o>>2]|0;g=e+284|0;if((y|0)>=(s[g>>2]|0)){F=0;k=0;B=-1;z=e+184|0;N=z;U=N;U=s[U>>2]|0;N=N+4|0;N=s[N>>2]|0;N=iN(U|0,N|0,F|0,k|0)|0;U=O;I=z;s[I>>2]=N;z=z+4|0;s[z>>2]=U;z=e+520|0;U=z;I=U;I=s[I>>2]|0;U=U+4|0;U=s[U>>2]|0;k=iL(I|0,U|0,F|0,k|0)|0;F=O;U=z;s[U>>2]=k;z=z+4|0;s[z>>2]=F;h=u;return B|0}p=e+280|0;l=e+428|0;r=e+412|0;c=e+332|0;f=e+544|0;d=v+4|0;t=e+396|0;m=e+296|0;n=e+456|0;T=-1;_=0;do{s[o>>2]=y+1;w=s[(s[p>>2]|0)+(y<<2)>>2]|0;if(i[(s[l>>2]|0)+w>>0]|0){x=s[r>>2]|0;y=x+(w*12|0)+4|0;S=s[y>>2]|0;if((S|0)>0){x=x+(w*12|0)|0;b=0;M=0;do{A=s[x>>2]|0;E=A+(b<<3)|0;if((s[(s[s[n>>2]>>2]|0)+(s[E>>2]<<2)>>2]&3|0)!=1){z=E;B=s[z+4>>2]|0;S=A+(M<<3)|0;s[S>>2]=s[z>>2];s[S+4>>2]=B;S=s[y>>2]|0;M=M+1|0}b=b+1|0}while((b|0)<(S|0))}else{b=0;M=0}x=b-M|0;if((x|0)>0)s[y>>2]=S-x;i[(s[l>>2]|0)+w>>0]=0}y=s[r>>2]|0;_=_+1|0;x=s[y+(w*12|0)>>2]|0;y=y+(w*12|0)+4|0;M=s[y>>2]|0;b=x+(M<<3)|0;a:do if(!M){b=x;S=x}else{w=w^1;M=(M<<3)+-1|0;A=x;S=x;while(true){while(true){o:while(true){P=s[A+4>>2]|0;B=a[(s[c>>2]|0)+(P>>1)>>0]^P&1;I=i[528]|0;N=I&255;k=N&2;N=N>>>1^1;if((B&255)<<24>>24==I<<24>>24&N|k&B){R=19;break}E=s[A>>2]|0;R=s[f>>2]|0;D=R+(E<<2)|0;C=R+(E+1<<2)|0;L=s[C>>2]|0;if((L|0)==(w|0)){B=R+(E+2<<2)|0;L=s[B>>2]|0;s[C>>2]=L;s[B>>2]=w}C=A+8|0;s[v>>2]=E;s[d>>2]=L;if((L|0)!=(P|0)?(B=a[(s[c>>2]|0)+(L>>1)>>0]^L&1,((B&255)<<24>>24==I<<24>>24&N|k&B|0)!=0):0){R=27;break}k=s[D>>2]|0;if(k>>>0<=95){R=31;break}N=s[c>>2]|0;I=i[536]|0;P=I&255;B=P&2;P=P>>>1^1;z=2;while(true){U=D+(z<<2)+4|0;F=s[U>>2]|0;V=a[N+(F>>1)>>0]^F&1;z=z+1|0;if(!((V&255)<<24>>24==I<<24>>24&P|B&V))break;if((z|0)>=(k>>>5|0)){R=32;break o}}V=R+(E+2<<2)|0;s[V>>2]=F;s[U>>2]=w;t0((s[r>>2]|0)+((s[V>>2]^1)*12|0)|0,v);if((C|0)==(b|0))break a;else A=C}if((R|0)==19){R=0;z=A;B=s[z+4>>2]|0;V=S;s[V>>2]=s[z>>2];s[V+4>>2]=B;A=A+8|0;S=S+8|0}else if((R|0)==27){R=0;B=v;V=s[B+4>>2]|0;A=S;s[A>>2]=s[B>>2];s[A+4>>2]=V;A=C;S=S+8|0}else if((R|0)==31){I=i[536]|0;R=32}if((R|0)==32){R=S+8|0;D=v;N=s[D+4>>2]|0;P=S;s[P>>2]=s[D>>2];s[P+4>>2]=N;P=L>>1;N=L&1;D=(s[c>>2]|0)+P|0;V=a[D>>0]^N;B=I&255;if((V&255)<<24>>24==I<<24>>24&(B>>>1^1)|B&2&V)break;i[D>>0]=(N^1)&255^1;S=s[m>>2]|0;A=(s[t>>2]|0)+(P<<3)|0;s[A>>2]=E;s[A+4>>2]=S;A=s[g>>2]|0;s[g>>2]=A+1;s[(s[p>>2]|0)+(A<<2)>>2]=L;A=C;S=R}if((A|0)==(b|0))break a}s[o>>2]=s[g>>2];if(C>>>0<b>>>0){T=(x+(M-C)|0)>>>3;while(true){z=C;C=C+8|0;B=s[z+4>>2]|0;V=R;s[V>>2]=s[z>>2];s[V+4>>2]=B;if(C>>>0>=b>>>0)break;else R=R+8|0}A=A+(T+2<<3)|0;S=S+(T+2<<3)|0}else{A=C;S=R}if((A|0)==(b|0)){T=E;break}else T=E}}while(0)x=b-S|0;if((x|0)>0)s[y>>2]=(s[y>>2]|0)-(x>>3);y=s[o>>2]|0}while((y|0)<(s[g>>2]|0))z=_;U=((_|0)<0)<<31>>31;V=T;B=e+184|0;I=B;F=I;F=s[F>>2]|0;I=I+4|0;I=s[I>>2]|0;I=iN(F|0,I|0,z|0,U|0)|0;F=O;k=B;s[k>>2]=I;B=B+4|0;s[B>>2]=F;B=e+520|0;F=B;k=F;k=s[k>>2]|0;F=F+4|0;F=s[F>>2]|0;U=iL(k|0,F|0,z|0,U|0)|0;z=O;F=B;s[F>>2]=U;B=B+4|0;s[B>>2]=z;h=u;return V|0}function tM(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;n=h;h=h+16|0;u=n+8|0;r=n;a=s[e+544>>2]|0;i=a+(t<<2)|0;o=a+(t+1<<2)|0;l=e+412|0;c=(s[l>>2]|0)+((s[o>>2]^1)*12|0)|0;a=a+(t+2<<2)|0;f=s[a>>2]|0;s[u>>2]=t;s[u+4>>2]=f;t0(c,u);a=(s[l>>2]|0)+((s[a>>2]^1)*12|0)|0;o=s[o>>2]|0;s[r>>2]=t;s[r+4>>2]=o;t0(a,r);if(!(s[i>>2]&4)){f=e+208|0;c=f;c=iN(s[c>>2]|0,s[c+4>>2]|0,1,0)|0;s[f>>2]=c;s[f+4>>2]=O;f=e+224|0;c=f;c=iN((s[i>>2]|0)>>>5|0,0,s[c>>2]|0,s[c+4>>2]|0)|0;s[f>>2]=c;s[f+4>>2]=O;h=n;return}else{f=e+216|0;c=f;c=iN(s[c>>2]|0,s[c+4>>2]|0,1,0)|0;s[f>>2]=c;s[f+4>>2]=O;f=e+232|0;c=f;c=iN((s[i>>2]|0)>>>5|0,0,s[c>>2]|0,s[c+4>>2]|0)|0;s[f>>2]=c;s[f+4>>2]=O;h=n;return}}function tS(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;a=h;h=h+16|0;c=a+4|0;l=a;o=s[e+544>>2]|0;r=o+(t<<2)|0;u=s[o+(t+1<<2)>>2]^1;if(!n){s[c>>2]=u;n=e+428|0;f=s[n>>2]|0;u=f+u|0;if(!(i[u>>0]|0)){i[u>>0]=1;tJ(e+444|0,c);f=s[n>>2]|0}t=s[o+(t+2<<2)>>2]^1;s[l>>2]=t;t=f+t|0;if(!(i[t>>0]|0)){i[t>>0]=1;tJ(e+444|0,l)}}else{l=e+412|0;n=s[l>>2]|0;c=n+(u*12|0)|0;o=o+(t+2<<2)|0;u=n+(u*12|0)+4|0;f=s[u>>2]|0;a:do if((f|0)>0){m=s[c>>2]|0;p=0;while(true){d=p+1|0;if((s[m+(p<<3)>>2]|0)==(t|0)){d=p;break a}if((d|0)<(f|0))p=d;else break}}else d=0;while(0)f=f+-1|0;if((d|0)<(f|0)){do{n=s[c>>2]|0;f=d;d=d+1|0;p=n+(d<<3)|0;m=s[p+4>>2]|0;f=n+(f<<3)|0;s[f>>2]=s[p>>2];s[f+4>>2]=m;f=(s[u>>2]|0)+-1|0}while((d|0)<(f|0))n=s[l>>2]|0}s[u>>2]=f;l=s[o>>2]^1;o=n+(l*12|0)|0;l=n+(l*12|0)+4|0;u=s[l>>2]|0;o:do if((u|0)>0){n=s[o>>2]|0;f=0;while(true){c=f+1|0;if((s[n+(f<<3)>>2]|0)==(t|0)){c=f;break o}if((c|0)<(u|0))f=c;else break}}else c=0;while(0)t=u+-1|0;if((c|0)<(t|0))do{d=s[o>>2]|0;t=c;c=c+1|0;p=d+(c<<3)|0;m=s[p+4>>2]|0;t=d+(t<<3)|0;s[t>>2]=s[p>>2];s[t+4>>2]=m;t=(s[l>>2]|0)+-1|0}while((c|0)<(t|0))s[l>>2]=t}if(!(s[r>>2]&4)){m=e+208|0;p=m;p=iN(s[p>>2]|0,s[p+4>>2]|0,-1,-1)|0;s[m>>2]=p;s[m+4>>2]=O;m=e+224|0;p=m;p=iL(s[p>>2]|0,s[p+4>>2]|0,(s[r>>2]|0)>>>5|0,0)|0;s[m>>2]=p;s[m+4>>2]=O;h=a;return}else{m=e+216|0;p=m;p=iN(s[p>>2]|0,s[p+4>>2]|0,-1,-1)|0;s[m>>2]=p;s[m+4>>2]=O;m=e+232|0;p=m;p=iL(s[p>>2]|0,s[p+4>>2]|0,(s[r>>2]|0)>>>5|0,0)|0;s[m>>2]=p;s[m+4>>2]=O;h=a;return}}function tT(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0;o=h;r=e+544|0;f=s[r>>2]|0;n=f+(t<<2)|0;tS(e,t,0);f=s[f+(t+1<<2)>>2]|0;l=f>>1;f=(a[(s[e+332>>2]|0)+l>>0]|0)^f&1;p=i[528]|0;d=p&255;if((((f&255)<<24>>24==p<<24>>24&(d>>>1^1)|d&2&f|0)!=0?(u=(s[e+396>>2]|0)+(l<<3)|0,c=s[u>>2]|0,(c|0)!=-1):0)?((s[r>>2]|0)+(c<<2)|0)==(n|0):0)s[u>>2]=-1;s[n>>2]=s[n>>2]&-4|1;d=s[(s[r>>2]|0)+(t<<2)>>2]|0;p=e+556|0;s[p>>2]=((((d>>>3&1)+(d>>>5)<<2)+4|0)>>>2)+(s[p>>2]|0);h=o;return}function tE(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0;n=h;r=s[t>>2]|0;if(r>>>0<=31){c=0;h=n;return c|0}o=s[e+332>>2]|0;l=i[528]|0;u=l&255;c=u&2;u=u>>>1^1;e=0;while(true){f=s[t+(e<<2)+4>>2]|0;f=(a[o+(f>>1)>>0]|0)^f&1;e=e+1|0;if((f&255)<<24>>24==l<<24>>24&u|c&f){r=1;t=5;break}if((e|0)>=(r>>>5|0)){r=0;t=5;break}}if((t|0)==5){h=n;return r|0}return 0}function tA(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0;a=h;n=e+296|0;if((s[n>>2]|0)<=(t|0)){h=a;return}r=e+284|0;_=s[r>>2]|0;l=e+292|0;y=s[l>>2]|0;x=s[y+(t<<2)>>2]|0;if((_|0)>(x|0)){v=e+280|0;f=e+332|0;c=e+88|0;u=e+348|0;d=e+460|0;m=e+476|0;g=e+472|0;p=e+380|0;do{_=_+-1|0;x=s[(s[v>>2]|0)+(_<<2)>>2]>>1;i[(s[f>>2]|0)+x>>0]=i[544]|0;y=s[c>>2]|0;if((y|0)<=1){if((y|0)==1?(_|0)>(s[(s[l>>2]|0)+((s[n>>2]|0)+-1<<2)>>2]|0):0)o=7}else o=7;if((o|0)==7){o=0;i[(s[u>>2]|0)+x>>0]=s[(s[v>>2]|0)+(_<<2)>>2]&1}if(!((s[m>>2]|0)>(x|0)?(s[(s[g>>2]|0)+(x<<2)>>2]|0)>-1:0))o=11;if((o|0)==11?(o=0,(i[(s[p>>2]|0)+x>>0]|0)!=0):0)tY(d,x);y=s[l>>2]|0;x=s[y+(t<<2)>>2]|0}while((_|0)>(x|0))_=s[r>>2]|0}s[e+512>>2]=x;e=s[y+(t<<2)>>2]|0;if((_-e|0)>0)s[r>>2]=e;if(((s[n>>2]|0)-t|0)<=0){h=a;return}s[n>>2]=t;h=a;return}function tC(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0;t=h;r=e+72|0;g=+c[r>>3]*1389796;g=g-+(~~(g/2147483647)|0)*2147483647;c[r>>3]=g;u=e+464|0;if(g/2147483647<+c[e+64>>3]?(f=s[u>>2]|0,(f|0)!=0):0){g=g*1389796;g=g-+(~~(g/2147483647)|0)*2147483647;c[r>>3]=g;f=s[(s[e+460>>2]|0)+(~~(+(f|0)*(g/2147483647))<<2)>>2]|0;p=i[(s[e+332>>2]|0)+f>>0]|0;d=i[544]|0;m=d&255;if(((m>>>1^1)&p<<24>>24==d<<24>>24|p&2&m|0)!=0?(i[(s[e+380>>2]|0)+f>>0]|0)!=0:0){m=e+176|0;p=m;p=iN(s[p>>2]|0,s[p+4>>2]|0,1,0)|0;s[m>>2]=p;s[m+4>>2]=O}}else f=-1;d=e+460|0;m=e+332|0;p=e+380|0;while(true){if(((f|0)!=-1?(v=i[(s[m>>2]|0)+f>>0]|0,o=i[544]|0,n=o&255,a=n>>>1^1,(a&v<<24>>24==o<<24>>24|v&2&n|0)!=0):0)?(i[(s[p>>2]|0)+f>>0]|0)!=0:0)break;if(!(s[u>>2]|0)){n=-2;l=17;break}f=t1(d)|0}if((l|0)==17){h=t;return n|0}u=i[(s[e+364>>2]|0)+f>>0]|0;l=u&255;if(!(a&u<<24>>24==o<<24>>24|n&2&l)){m=i[528]|0;v=m&255;v=((v>>>1^1)&u<<24>>24==m<<24>>24|l&2&v|0)!=0|f<<1;h=t;return v|0}if(!(i[e+92>>0]|0)){v=(i[(s[e+348>>2]|0)+f>>0]|0)!=0|f<<1;h=t;return v|0}else{g=+c[r>>3]*1389796;g=g-+(~~(g/2147483647)|0)*2147483647;c[r>>3]=g;v=g/2147483647<.5|f<<1;h=t;return v|0}return 0}function tL(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,o=0,l=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,I=0,k=0,U=0,F=0,z=0,B=0,V=0,H=0,G=0,W=0,j=0,q=0;a=h;h=h+16|0;m=a+8|0;y=a+4|0;d=a;f=n+4|0;o=s[f>>2]|0;l=n+8|0;if((o|0)==(s[l>>2]|0)){g=(o>>1)+2&-2;g=(g|0)<2?2:g;if((g|0)>(2147483647-o|0)){W=eS(1)|0;e$(W|0,48,0)}G=s[n>>2]|0;W=g+o|0;s[l>>2]=W;W=ih(G,W<<2)|0;s[n>>2]=W;if((W|0)==0?(s[(eG()|0)>>2]|0)==12:0){W=eS(1)|0;e$(W|0,48,0)}o=s[f>>2]|0}l=(s[n>>2]|0)+(o<<2)|0;if(l){s[l>>2]=0;o=s[f>>2]|0}s[f>>2]=o+1;g=e+544|0;P=e+280|0;o=e+588|0;l=e+396|0;C=e+504|0;R=e+316|0;L=e+540|0;A=e+476|0;E=e+472|0;T=e+460|0;S=e+488|0;M=e+296|0;b=e+496|0;w=e+272|0;D=e+268|0;I=-2;N=(s[e+284>>2]|0)+-1|0;k=0;do{U=s[g>>2]|0;t=U+(t<<2)|0;F=s[t>>2]|0;if((F&4|0)!=0?(v=+c[b>>3],W=t+(F>>>5<<2)+4|0,j=v+ +u[W>>2],u[W>>2]=j,j>1e20):0){B=s[w>>2]|0;if((B|0)>0){z=s[D>>2]|0;F=0;do{W=U+(s[z+(F<<2)>>2]<<2)|0;W=W+((s[W>>2]|0)>>>5<<2)+4|0;u[W>>2]=+u[W>>2]*1e-20;F=F+1|0}while((F|0)!=(B|0))}c[b>>3]=v*1e-20}I=(I|0)!=-2&1;if(I>>>0<(s[t>>2]|0)>>>5>>>0)do{F=s[t+(I<<2)+4>>2]|0;s[y>>2]=F;F=F>>1;U=(s[o>>2]|0)+F|0;do if((i[U>>0]|0)==0?(s[(s[l>>2]|0)+(F<<3)+4>>2]|0)>0:0){B=s[R>>2]|0;W=B+(F<<3)|0;j=+c[C>>3]+ +c[W>>3];c[W>>3]=j;if(j>1e100){V=s[L>>2]|0;if((V|0)>0){z=0;do{W=B+(z<<3)|0;c[W>>3]=+c[W>>3]*1e-100;z=z+1|0}while((z|0)!=(V|0))}c[C>>3]=+c[C>>3]*1e-100}if((s[A>>2]|0)>(F|0)?(x=s[E>>2]|0,_=s[x+(F<<2)>>2]|0,(_|0)>-1):0){z=s[T>>2]|0;B=s[z+(_<<2)>>2]|0;a:do if(!_)G=0;else{W=_;while(true){G=W;W=W+-1>>1;H=z+(W<<2)|0;V=s[H>>2]|0;q=s[s[S>>2]>>2]|0;if(!(+c[q+(B<<3)>>3]>+c[q+(V<<3)>>3]))break a;s[z+(G<<2)>>2]=V;s[x+(s[H>>2]<<2)>>2]=G;if(!W){G=0;break}}}while(0)s[z+(G<<2)>>2]=B;s[x+(B<<2)>>2]=G}i[U>>0]=1;if((s[(s[l>>2]|0)+(F<<3)+4>>2]|0)<(s[M>>2]|0)){tJ(n,y);break}else{k=k+1|0;break}}while(0)I=I+1|0}while((I|0)<((s[t>>2]|0)>>>5|0))t=s[P>>2]|0;U=s[o>>2]|0;do{I=N;N=N+-1|0;I=s[t+(I<<2)>>2]|0;z=I>>1;F=U+z|0}while((i[F>>0]|0)==0)t=s[(s[l>>2]|0)+(z<<3)>>2]|0;i[F>>0]=0;k=k+-1|0}while((k|0)>0)s[s[n>>2]>>2]=I^1;y=e+616|0;b=s[y>>2]|0;_=e+620|0;if(!b)w=s[_>>2]|0;else{s[_>>2]=0;w=0}x=s[f>>2]|0;if((w|0)<(x|0)){S=e+624|0;M=s[S>>2]|0;if((M|0)<(x|0)){q=x+1-M&-2;w=(M>>1)+2&-2;w=(q|0)>(w|0)?q:w;if((w|0)>(2147483647-M|0)){q=eS(1)|0;e$(q|0,48,0)}q=w+M|0;s[S>>2]=q;b=ih(b,q<<2)|0;s[y>>2]=b;if((b|0)==0?(s[(eG()|0)>>2]|0)==12:0){q=eS(1)|0;e$(q|0,48,0)}}w=s[_>>2]|0;o:{if((w|0)<(x|0))while(true){b=b+(w<<2)|0;if(b)s[b>>2]=0;w=w+1|0;if((w|0)==(x|0))break o;b=s[y>>2]|0}}s[_>>2]=x;x=s[f>>2]|0}if((x|0)>0){w=s[y>>2]|0;b=s[n>>2]|0;M=0;do{s[w+(M<<2)>>2]=s[b+(M<<2)>>2];M=M+1|0;x=s[f>>2]|0}while((M|0)<(x|0))}b=s[e+84>>2]|0;if((b|0)==1){if((x|0)>1){d=s[n>>2]|0;p=1;b=1;while(true){x=s[d+(p<<2)>>2]|0;m=s[l>>2]|0;w=s[m+(x>>1<<3)>>2]|0;l:do if((w|0)!=-1){M=(s[g>>2]|0)+(w<<2)|0;S=s[M>>2]|0;if(S>>>0>63){w=s[o>>2]|0;T=1;while(true){q=s[M+(T<<2)+4>>2]>>1;if((i[w+q>>0]|0)==0?(s[m+(q<<3)+4>>2]|0)>0:0)break;T=T+1|0;if((T|0)>=(S>>>5|0))break l}s[d+(b<<2)>>2]=x;b=b+1|0}}else{s[d+(b<<2)>>2]=x;b=b+1|0}while(0)p=p+1|0;m=s[f>>2]|0;if((p|0)>=(m|0)){d=m;break}}}else{d=x;p=1;b=1}}else if((b|0)==2){if((x|0)>1){g=1;b=1;do{w=s[n>>2]|0;x=s[w+(g<<2)>>2]|0;if((s[(s[l>>2]|0)+(x>>1<<3)>>2]|0)!=-1){s[d>>2]=x;s[m+0>>2]=s[d+0>>2];if(!(tR(e,m)|0)){x=s[n>>2]|0;w=x;x=s[x+(g<<2)>>2]|0;p=62}}else p=62;if((p|0)==62){p=0;s[w+(b<<2)>>2]=x;b=b+1|0}g=g+1|0;x=s[f>>2]|0}while((g|0)<(x|0))d=x;p=g}else{d=x;p=1;b=1}}else{d=x;p=x;b=x}q=e+240|0;W=q;W=iN(s[W>>2]|0,s[W+4>>2]|0,d|0,((d|0)<0)<<31>>31|0)|0;s[q>>2]=W;s[q+4>>2]=O;p=p-b|0;if((p|0)>0){d=d-p|0;s[f>>2]=d}q=e+248|0;W=q;W=iN(s[W>>2]|0,s[W+4>>2]|0,d|0,((d|0)<0)<<31>>31|0)|0;s[q>>2]=W;s[q+4>>2]=O;if((d|0)==1)n=0;else{n=s[n>>2]|0;if((d|0)>2){e=s[l>>2]|0;f=2;p=1;do{p=(s[e+(s[n+(f<<2)>>2]>>1<<3)+4>>2]|0)>(s[e+(s[n+(p<<2)>>2]>>1<<3)+4>>2]|0)?f:p;f=f+1|0}while((f|0)<(d|0))}else p=1;W=n+(p<<2)|0;q=s[W>>2]|0;n=n+4|0;s[W>>2]=s[n>>2];s[n>>2]=q;n=s[(s[l>>2]|0)+(q>>1<<3)+4>>2]|0}s[r>>2]=n;if((s[_>>2]|0)>0)r=0;else{h=a;return}do{i[(s[o>>2]|0)+(s[(s[y>>2]|0)+(r<<2)>>2]>>1)>>0]=0;r=r+1|0}while((r|0)<(s[_>>2]|0))h=a;return}function tR(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0;n=h;d=s[t>>2]|0;c=e+396|0;g=s[c>>2]|0;u=e+544|0;_=(s[u>>2]|0)+(s[g+(d>>1<<3)>>2]<<2)|0;o=e+604|0;r=e+608|0;if(s[o>>2]|0)s[r>>2]=0;a=e+588|0;l=e+612|0;e=e+616|0;p=1;while(true){if(p>>>0<(s[_>>2]|0)>>>5>>>0){v=s[_+(p<<2)+4>>2]|0;m=v>>1;if((s[g+(m<<3)+4>>2]|0)!=0?(f=i[(s[a>>2]|0)+m>>0]|0,(f+-1<<24>>24&255)>=2):0){_=s[r>>2]|0;y=(_|0)==(s[l>>2]|0);if(f<<24>>24==3?1:(s[g+(m<<3)>>2]|0)==-1){u=8;break}if(y){g=(_>>1)+2&-2;g=(g|0)<2?2:g;if((g|0)>(2147483647-_|0)){u=24;break}x=s[o>>2]|0;y=g+_|0;s[l>>2]=y;y=ih(x,y<<3)|0;s[o>>2]=y;if((y|0)==0?(s[(eG()|0)>>2]|0)==12:0){u=24;break}_=s[r>>2]|0}s[r>>2]=_+1;g=(s[o>>2]|0)+(_<<3)|0;if(g){x=g;s[x>>2]=p;s[x+4>>2]=d}s[t>>2]=v;_=s[c>>2]|0;d=v;g=_;_=(s[u>>2]|0)+(s[_+(m<<3)>>2]<<2)|0;p=0}}else{d=(s[a>>2]|0)+(d>>1)|0;if(!(i[d>>0]|0)){i[d>>0]=2;tJ(e,t)}d=s[r>>2]|0;if(!d){r=1;u=34;break}x=d+-1|0;d=s[o>>2]|0;p=s[d+(x<<3)>>2]|0;d=s[d+(x<<3)+4>>2]|0;s[t>>2]=d;g=s[c>>2]|0;_=(s[u>>2]|0)+(s[g+(d>>1<<3)>>2]<<2)|0;s[r>>2]=x}p=p+1|0}if((u|0)==8){if(y){u=(_>>1)+2&-2;u=(u|0)<2?2:u;if((u|0)>(2147483647-_|0)){x=eS(1)|0;e$(x|0,48,0)}y=s[o>>2]|0;x=u+_|0;s[l>>2]=x;x=ih(y,x<<3)|0;s[o>>2]=x;if((x|0)==0?(s[(eG()|0)>>2]|0)==12:0){x=eS(1)|0;e$(x|0,48,0)}_=s[r>>2]|0}l=_+1|0;s[r>>2]=l;u=(s[o>>2]|0)+(_<<3)|0;if(u){l=u;s[l>>2]=0;s[l+4>>2]=d;l=s[r>>2]|0}if((l|0)>0)u=0;else{x=0;h=n;return x|0}do{c=(s[a>>2]|0)+(s[(s[o>>2]|0)+(u<<3)+4>>2]>>1)|0;if(!(i[c>>0]|0)){i[c>>0]=3;tJ(e,(s[o>>2]|0)+(u<<3)+4|0);l=s[r>>2]|0}u=u+1|0}while((u|0)<(l|0))r=0;h=n;return r|0}else if((u|0)==24)e$(eS(1)|0,48,0);else if((u|0)==34){h=n;return r|0}return 0}function tD(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0;l=h;h=h+32|0;o=l+16|0;a=l+12|0;u=l+8|0;r=l;d=n+20|0;c=n+16|0;if((s[d>>2]|0)>0){f=0;do{i[(s[n>>2]|0)+(s[(s[c>>2]|0)+(f<<2)>>2]|0)>>0]=0;f=f+1|0}while((f|0)<(s[d>>2]|0))}if(s[c>>2]|0)s[d>>2]=0;f=s[t>>2]|0;s[u>>2]=f;s[a>>2]=f;s[o+0>>2]=s[a+0>>2];t2(n,o,0);c=(s[n>>2]|0)+f|0;if(!(i[c>>0]|0)){i[c>>0]=1;tJ(n+16|0,u)}if(!(s[e+296>>2]|0)){h=l;return}t=f>>1;p=e+588|0;i[(s[p>>2]|0)+t>>0]=1;m=s[e+284>>2]|0;d=e+292|0;_=s[s[d>>2]>>2]|0;if((m|0)>(_|0)){u=e+280|0;c=e+396|0;f=n+16|0;e=e+544|0;do{m=m+-1|0;v=s[(s[u>>2]|0)+(m<<2)>>2]|0;g=v>>1;if(i[(s[p>>2]|0)+g>>0]|0){_=s[c>>2]|0;y=s[_+(g<<3)>>2]|0;a:if((y|0)==-1){v=v^1;s[r>>2]=v;s[a>>2]=v;s[o+0>>2]=s[a+0>>2];t2(n,o,0);v=(s[n>>2]|0)+v|0;if(!(i[v>>0]|0)){i[v>>0]=1;tJ(f,r)}}else{v=(s[e>>2]|0)+(y<<2)|0;y=s[v>>2]|0;if(y>>>0>63){x=1;while(true){b=s[v+(x<<2)+4>>2]>>1;if((s[_+(b<<3)+4>>2]|0)>0){i[(s[p>>2]|0)+b>>0]=1;y=s[v>>2]|0}x=x+1|0;if((x|0)>=(y>>>5|0))break a;_=s[c>>2]|0}}}i[(s[p>>2]|0)+g>>0]=0;_=s[s[d>>2]>>2]|0}}while((m|0)>(_|0))}i[(s[p>>2]|0)+t>>0]=0;h=l;return}function tP(e){e=e|0;var t=0,n=0,r=0,o=0,l=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0;n=h;h=h+16|0;m=n+4|0;x=n;t=e+272|0;w=s[t>>2]|0;d=+c[e+496>>3]/+(w|0);o=e+544|0;l=e+268|0;b=s[l>>2]|0;s[x>>2]=o;s[m+0>>2]=s[x+0>>2];t3(b,w,m);m=s[t>>2]|0;if((m|0)>0){f=e+332|0;p=e+396|0;g=0;b=0;do{y=s[l>>2]|0;x=s[y+(g<<2)>>2]|0;w=s[o>>2]|0;v=w+(x<<2)|0;_=s[v>>2]|0;do if(_>>>0>95){M=s[w+(x+1<<2)>>2]|0;w=M>>1;M=(a[(s[f>>2]|0)+w>>0]|0)^M&1;T=i[528]|0;S=T&255;if(((M&255)<<24>>24==T<<24>>24&(S>>>1^1)|S&2&M|0)!=0?(T=s[(s[p>>2]|0)+(w<<3)>>2]|0,(T|0)!=-1&(T|0)==(x|0)):0){r=9;break}if((g|0)>=((m|0)/2|0)?!(+u[v+(_>>>5<<2)+4>>2]<d):0){r=9;break}tT(e,x)}else r=9;while(0)if((r|0)==9){r=0;s[y+(b<<2)>>2]=x;b=b+1|0}g=g+1|0;m=s[t>>2]|0}while((g|0)<(m|0))}else{g=0;b=0}r=g-b|0;if((r|0)>0)s[t>>2]=m-r;if(!(+((s[e+556>>2]|0)>>>0)>+c[e+96>>3]*+((s[e+548>>2]|0)>>>0))){h=n;return}ri[s[(s[e>>2]|0)+8>>2]&31](e);h=n;return}function tN(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0;n=h;r=t+4|0;f=s[r>>2]|0;if((f|0)>0){l=e+544|0;o=e+332|0;u=0;c=0;do{x=s[t>>2]|0;m=s[x+(u<<2)>>2]|0;f=(s[l>>2]|0)+(m<<2)|0;p=s[f>>2]|0;do if(p>>>0>31){b=s[o>>2]|0;v=i[528]|0;g=v&255;w=g&2;g=g>>>1^1;_=p>>>5;y=0;do{M=s[f+(y<<2)+4>>2]|0;M=(a[b+(M>>1)>>0]|0)^M&1;y=y+1|0;if((M&255)<<24>>24==v<<24>>24&g|w&M){d=7;break}}while((y|0)<(_|0))if((d|0)==7){d=0;tT(e,m);break}if(p>>>0>95){d=i[536]|0;g=p>>>5;m=2;do{v=f+(m<<2)+4|0;M=s[v>>2]|0;M=(a[(s[o>>2]|0)+(M>>1)>>0]|0)^M&1;w=d&255;if((M&255)<<24>>24==d<<24>>24&(w>>>1^1)|w&2&M){s[v>>2]=s[f+(g+-1<<2)+4>>2];p=s[f>>2]|0;if(p&8){p=p>>>5;s[f+(p+-1<<2)+4>>2]=s[f+(p<<2)+4>>2];p=s[f>>2]|0}p=p+-32|0;s[f>>2]=p;m=m+-1|0}m=m+1|0;g=p>>>5}while((m|0)<(g|0))m=s[t>>2]|0;x=m;m=s[m+(u<<2)>>2]|0;d=16}else d=16}else d=16;while(0)if((d|0)==16){d=0;s[x+(c<<2)>>2]=m;c=c+1|0}u=u+1|0;f=s[r>>2]|0}while((u|0)<(f|0))}else{u=0;c=0}t=u-c|0;if((t|0)<=0){h=n;return}s[r>>2]=f-t;h=n;return}function tO(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0;a=h;h=h+16|0;n=a+4|0;o=a;s[n>>2]=0;t=n+4|0;s[t>>2]=0;r=n+8|0;s[r>>2]=0;s[o>>2]=0;l=e+540|0;d=s[l>>2]|0;if((d|0)>0){c=e+380|0;u=e+332|0;f=0;do{if((i[(s[c>>2]|0)+f>>0]|0)!=0?(m=i[(s[u>>2]|0)+f>>0]|0,g=i[544]|0,p=g&255,((p>>>1^1)&m<<24>>24==g<<24>>24|m&2&p|0)!=0):0){tZ(n,o);d=s[l>>2]|0}f=f+1|0;s[o>>2]=f}while((f|0)<(d|0))}t4(e+460|0,n);e=s[n>>2]|0;if(!e){h=a;return}s[t>>2]=0;ic(e);s[n>>2]=0;s[r>>2]=0;h=a;return}function tI(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;t=h;r=e+492|0;if((i[r>>0]|0)!=0?(tw(e)|0)==-1:0){r=e+284|0;a=e+516|0;if((s[r>>2]|0)==(s[a>>2]|0)){_=1;h=t;return _|0}o=e+520|0;_=o;v=s[_+4>>2]|0;if((v|0)>0|(v|0)==0&(s[_>>2]|0)>>>0>0){_=1;h=t;return _|0}tN(e,e+268|0);if(i[e+536>>0]|0){tN(e,e+256|0);u=e+564|0;l=e+568|0;if((s[l>>2]|0)>0){d=e+588|0;f=0;do{i[(s[d>>2]|0)+(s[(s[u>>2]|0)+(f<<2)>>2]|0)>>0]=1;f=f+1|0}while((f|0)<(s[l>>2]|0))}m=s[r>>2]|0;if((m|0)>0){f=s[e+280>>2]|0;d=s[e+588>>2]|0;g=0;p=0;do{v=s[f+(g<<2)>>2]|0;if(!(i[d+(v>>1)>>0]|0)){s[f+(p<<2)>>2]=v;m=s[r>>2]|0;p=p+1|0}g=g+1|0}while((g|0)<(m|0))}else{g=0;p=0}f=g-p|0;if((f|0)>0){m=m-f|0;s[r>>2]=m}s[e+512>>2]=m;a:do if((s[l>>2]|0)>0){p=e+588|0;f=0;do{i[(s[p>>2]|0)+(s[(s[u>>2]|0)+(f<<2)>>2]|0)>>0]=0;f=f+1|0;d=s[l>>2]|0}while((f|0)<(d|0))if((d|0)>0){d=e+580|0;p=e+584|0;f=e+576|0;m=0;while(true){v=s[d>>2]|0;if((v|0)==(s[p>>2]|0)){g=(v>>1)+2&-2;g=(g|0)<2?2:g;if((g|0)>(2147483647-v|0)){n=28;break}_=s[f>>2]|0;g=g+v|0;s[p>>2]=g;g=ih(_,g<<2)|0;s[f>>2]=g;if((g|0)==0?(s[(eG()|0)>>2]|0)==12:0){n=28;break}v=s[d>>2]|0}else g=s[f>>2]|0;_=g+(v<<2)|0;if(_){s[_>>2]=0;v=s[d>>2]|0}s[d>>2]=v+1;_=s[u>>2]|0;s[g+(v<<2)>>2]=s[_+(m<<2)>>2];m=m+1|0;if((m|0)>=(s[l>>2]|0))break a}if((n|0)==28)e$(eS(1)|0,48,0)}else n=21}else n=21;while(0)if((n|0)==21)_=s[u>>2]|0;if(_)s[l>>2]=0}if(+((s[e+556>>2]|0)>>>0)>+c[e+96>>3]*+((s[e+548>>2]|0)>>>0))ri[s[(s[e>>2]|0)+8>>2]&31](e);tO(e);s[a>>2]=s[r>>2];v=e+224|0;_=e+232|0;v=iN(s[_>>2]|0,s[_+4>>2]|0,s[v>>2]|0,s[v+4>>2]|0)|0;_=o;s[_>>2]=v;s[_+4>>2]=O;_=1;h=t;return _|0}i[r>>0]=0;_=0;h=t;return _|0}function tk(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,l=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,I=0,k=0,U=0,F=0,z=0,B=0,V=0,H=0,G=0,W=0,j=0,q=0,$=0,Y=0,J=0,Z=0,K=0,Q=0,ee=0,et=0,en=0,ei=0,er=0,es=0,ea=0,eo=0,el=0,eu=0,ec=0,eh=0,ef=0,ed=0,ep=0,em=0,eg=0,ev=0,e_=0,ey=0;f=h;h=h+64|0;K=f;D=f+60|0;A=f+56|0;r=f+44|0;Q=f+40|0;s[r>>2]=0;l=r+4|0;s[l>>2]=0;o=r+8|0;s[o>>2]=0;z=t+160|0;F=z;F=iN(s[F>>2]|0,s[F+4>>2]|0,1,0)|0;s[z>>2]=F;s[z+4>>2]=O;z=(n|0)<0;F=t+680|0;U=t+664|0;k=t+672|0;g=t+296|0;w=t+272|0;p=t+284|0;N=t+640|0;R=t+308|0;L=t+304|0;v=t+332|0;P=t+292|0;et=t+168|0;y=t+396|0;b=t+280|0;I=t+184|0;C=t+192|0;x=t+48|0;j=t+504|0;J=t+56|0;ee=t+496|0;en=t+656|0;B=t+144|0;V=t+648|0;H=t+128|0;G=t+44|0;W=t+200|0;q=t+208|0;$=t+224|0;Y=t+216|0;_=t+232|0;Z=t+540|0;m=t+292|0;M=t+544|0;T=t+276|0;S=t+268|0;E=t+268|0;ei=0;a:while(true){er=z|(ei|0)<(n|0);while(true){ea=tw(t)|0;if((ea|0)!=-1)break;if(!er){ea=41;break a}if(i[F>>0]|0){ea=41;break a}ea=U;eo=s[ea+4>>2]|0;if((eo|0)>=0?(e_=C,ev=s[e_+4>>2]|0,!(ev>>>0<eo>>>0|((ev|0)==(eo|0)?(s[e_>>2]|0)>>>0<(s[ea>>2]|0)>>>0:0))):0){ea=41;break a}ea=k;eo=s[ea+4>>2]|0;if((eo|0)>=0?(e_=I,ev=s[e_+4>>2]|0,!(ev>>>0<eo>>>0|((ev|0)==(eo|0)?(s[e_>>2]|0)>>>0<(s[ea>>2]|0)>>>0:0))):0){ea=41;break a}if((s[g>>2]|0)==0?!(tI(t)|0):0){ea=50;break a}if(+((s[w>>2]|0)-(s[p>>2]|0)|0)>=+c[N>>3])tP(t);while(true){ea=s[g>>2]|0;if((ea|0)>=(s[R>>2]|0)){ea=59;break}ec=s[(s[L>>2]|0)+(ea<<2)>>2]|0;eo=a[(s[v>>2]|0)+(ec>>1)>>0]|0;e_=eo^ec&1;el=e_&255;em=i[528]|0;ev=em&255;if(!(el<<24>>24==em<<24>>24&(ev>>>1^1)|ev&2&e_)){ea=56;break}s[D>>2]=s[p>>2];tZ(P,D)}if((ea|0)==56){ea=0;ev=i[536]|0;e_=ev&255;if((e_>>>1^1)&el<<24>>24==ev<<24>>24|eo&2&e_){ea=57;break a}if((ec|0)==-2)ea=59}if((ea|0)==59){e_=et;e_=iN(s[e_>>2]|0,s[e_+4>>2]|0,1,0)|0;ec=et;s[ec>>2]=e_;s[ec+4>>2]=O;ec=tC(t)|0;if((ec|0)==-2){ea=60;break a}}s[K>>2]=s[p>>2];tZ(P,K);e_=ec>>1;i[(s[v>>2]|0)+e_>>0]=(ec&1^1)&255^1;ev=s[g>>2]|0;e_=(s[y>>2]|0)+(e_<<3)|0;s[e_>>2]=-1;s[e_+4>>2]=ev;e_=s[p>>2]|0;s[p>>2]=e_+1;s[(s[b>>2]|0)+(e_<<2)>>2]=ec}ev=C;ev=iN(s[ev>>2]|0,s[ev+4>>2]|0,1,0)|0;e_=C;s[e_>>2]=ev;s[e_+4>>2]=O;ei=ei+1|0;if(!(s[g>>2]|0)){ea=5;break}if(s[r>>2]|0)s[l>>2]=0;tL(t,ea,r,A);tA(t,s[A>>2]|0);if((s[l>>2]|0)==1){ev=s[s[r>>2]>>2]|0;e_=ev>>1;i[(s[v>>2]|0)+e_>>0]=(ev&1^1)&255^1;em=s[g>>2]|0;e_=(s[y>>2]|0)+(e_<<3)|0;s[e_>>2]=-1;s[e_+4>>2]=em;e_=s[p>>2]|0;s[p>>2]=e_+1;s[(s[b>>2]|0)+(e_<<2)>>2]=ev}else{er=tQ(M,r,1)|0;ea=s[w>>2]|0;if((ea|0)==(s[T>>2]|0)){eo=(ea>>1)+2&-2;eo=(eo|0)<2?2:eo;if((eo|0)>(2147483647-ea|0)){ea=14;break}ev=s[S>>2]|0;e_=eo+ea|0;s[T>>2]=e_;e_=ih(ev,e_<<2)|0;s[S>>2]=e_;if((e_|0)==0?(s[(eG()|0)>>2]|0)==12:0){ea=14;break}ea=s[w>>2]|0}s[w>>2]=ea+1;ea=(s[S>>2]|0)+(ea<<2)|0;if(ea)s[ea>>2]=er;tM(t,er);el=s[M>>2]|0;e_=el+(er<<2)|0;es=+c[ee>>3];e_=e_+((s[e_>>2]|0)>>>5<<2)+4|0;ey=es+ +u[e_>>2];u[e_>>2]=ey;if(ey>1e20){eo=s[w>>2]|0;if((eo|0)>0){ea=s[E>>2]|0;ec=0;do{e_=el+(s[ea+(ec<<2)>>2]<<2)|0;e_=e_+((s[e_>>2]|0)>>>5<<2)+4|0;u[e_>>2]=+u[e_>>2]*1e-20;ec=ec+1|0}while((ec|0)!=(eo|0))}c[ee>>3]=es*1e-20}ev=s[s[r>>2]>>2]|0;e_=ev>>1;i[(s[v>>2]|0)+e_>>0]=(ev&1^1)&255^1;em=s[g>>2]|0;e_=(s[y>>2]|0)+(e_<<3)|0;s[e_>>2]=er;s[e_+4>>2]=em;e_=s[p>>2]|0;s[p>>2]=e_+1;s[(s[b>>2]|0)+(e_<<2)>>2]=ev}c[j>>3]=1/+c[x>>3]*+c[j>>3];c[ee>>3]=1/+c[J>>3]*+c[ee>>3];e_=(s[en>>2]|0)+-1|0;s[en>>2]=e_;if(e_)continue;es=+c[B>>3]*+c[V>>3];c[V>>3]=es;s[en>>2]=~~es;es=+c[H>>3]*+c[N>>3];c[N>>3]=es;if((s[G>>2]|0)<=0)continue;ea=s[C>>2]|0;er=s[W>>2]|0;ep=s[g>>2]|0;if(!ep)eo=p;else eo=s[m>>2]|0;eo=s[eo>>2]|0;ed=s[q>>2]|0;ef=s[$>>2]|0;eh=s[Y>>2]|0;ec=_;el=s[ec>>2]|0;ec=s[ec+4>>2]|0;eu=+(s[Z>>2]|0);eg=1/eu;if((ep|0)<0)ey=0;else{em=0;ey=0;while(true){if(!em)ev=0;else ev=s[(s[m>>2]|0)+(em+-1<<2)>>2]|0;if((em|0)==(ep|0))e_=p;else e_=(s[m>>2]|0)+(em<<2)|0;ey=ey+ +X(+eg,+ +(em|0))*+((s[e_>>2]|0)-ev|0);if((em|0)==(ep|0))break;else em=em+1|0}}s[K>>2]=ea;s[K+4>>2]=er-eo;s[K+8>>2]=ed;s[K+12>>2]=ef;s[K+16>>2]=~~es;s[K+20>>2]=eh;e_=K+24|0;c[d>>3]=(+(el>>>0)+4294967296*+(ec>>>0))/+(eh|0);s[e_>>2]=s[d>>2];s[e_+4>>2]=s[d+4>>2];e_=K+32|0;c[d>>3]=ey/eu*100;s[e_>>2]=s[d>>2];s[e_+4>>2]=s[d+4>>2];eB(1832,K|0)}if((ea|0)==5)i[e>>0]=i[536]|0;else if((ea|0)==14)e$(eS(1)|0,48,0);else if((ea|0)==41){es=+(s[Z>>2]|0);eu=1/es;v=s[g>>2]|0;if((v|0)<0)eg=0;else{g=0;eg=0;while(true){if(!g)_=0;else _=s[(s[m>>2]|0)+(g+-1<<2)>>2]|0;if((g|0)==(v|0))y=p;else y=(s[m>>2]|0)+(g<<2)|0;eg=eg+ +X(+eu,+ +(g|0))*+((s[y>>2]|0)-_|0);if((g|0)==(v|0))break;else g=g+1|0}}c[t+528>>3]=eg/es;tA(t,0);i[e>>0]=i[544]|0}else if((ea|0)==50)i[e>>0]=i[536]|0;else if((ea|0)==57){s[Q>>2]=ec^1;e_=t+16|0;s[K+0>>2]=s[Q+0>>2];tD(t,K,e_);i[e>>0]=i[536]|0}else if((ea|0)==60)i[e>>0]=i[528]|0;e=s[r>>2]|0;if(!e){h=f;return}s[l>>2]=0;ic(e);s[r>>2]=0;s[o>>2]=0;h=f;return}function tU(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0;r=h;h=h+16|0;o=r;n=t+4|0;if(s[n>>2]|0)s[t+8>>2]=0;a=t+36|0;l=t+32|0;if((s[a>>2]|0)>0){u=t+16|0;f=0;do{i[(s[u>>2]|0)+(s[(s[l>>2]|0)+(f<<2)>>2]|0)>>0]=0;f=f+1|0}while((f|0)<(s[a>>2]|0))}if(s[l>>2]|0)s[a>>2]=0;l=t+492|0;if(!(i[l>>0]|0)){i[e>>0]=i[536]|0;h=r;return}u=t+152|0;S=u;S=iN(s[S>>2]|0,s[S+4>>2]|0,1,0)|0;s[u>>2]=S;s[u+4>>2]=O;T=+c[t+120>>3]*+(s[t+208>>2]|0);u=t+640|0;c[u>>3]=T;b=+(s[t+104>>2]|0);if(T<b)c[u>>3]=b;w=s[t+136>>2]|0;c[t+648>>3]=+(w|0);s[t+656>>2]=w;w=i[544]|0;u=t+44|0;if((s[u>>2]|0)>0){ez(2288);ez(2368);ez(2448);ez(2528);p=i[544]|0}else p=w;d=t+192|0;f=t+184|0;S=p&255;a:do if((S>>>1^1)&w<<24>>24==p<<24>>24|w&2&S){g=t+80|0;y=t+112|0;m=t+108|0;p=t+680|0;v=t+664|0;_=t+672|0;x=0;while(true){b=+c[y>>3];if(!(i[g>>0]|0))b=+X(+b,+ +(x|0));else{S=x+1|0;if((x|0)>0){M=0;w=1;do{M=M+1|0;w=w<<1|1}while((w|0)<(S|0))S=w+-1|0}else{M=0;S=0}if((S|0)!=(x|0)){w=x;do{E=S>>1;M=M+-1|0;w=(w|0)%(E|0)|0;S=E+-1|0}while((S|0)!=(w|0))}b=+X(+b,+ +(M|0))}tk(o,t,~~(b*+(s[m>>2]|0)));w=i[o>>0]|0;if(i[p>>0]|0)break a;S=v;M=s[S+4>>2]|0;if((M|0)>=0?(E=d,A=s[E+4>>2]|0,!(A>>>0<M>>>0|((A|0)==(M|0)?(s[E>>2]|0)>>>0<(s[S>>2]|0)>>>0:0))):0)break a;S=_;M=s[S+4>>2]|0;if((M|0)>=0?(A=f,E=s[A+4>>2]|0,!(E>>>0<M>>>0|((E|0)==(M|0)?(s[A>>2]|0)>>>0<(s[S>>2]|0)>>>0:0))):0)break a;E=i[544]|0;A=E&255;if(!((A>>>1^1)&w<<24>>24==E<<24>>24|w&2&A))break;else x=x+1|0}}while(0)if((s[u>>2]|0)>0)ez(2528);E=i[528]|0;A=E&255;o=w&2;if(!((A>>>1^1)&w<<24>>24==E<<24>>24|o&A)){E=i[536]|0;A=E&255;if(((A>>>1^1)&w<<24>>24==E<<24>>24|o&A|0)!=0?(s[a>>2]|0)==0:0)i[l>>0]=0}else{a=t+540|0;tX(n,s[a>>2]|0);if((s[a>>2]|0)>0){o=t+332|0;l=0;do{i[(s[n>>2]|0)+l>>0]=i[(s[o>>2]|0)+l>>0]|0;l=l+1|0}while((l|0)<(s[a>>2]|0))}}tA(t,0);i[e>>0]=w;h=r;return}function tF(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0;n=h;o=e+412|0;t5(o);u=e+540|0;if((s[u>>2]|0)>0){l=e+544|0;r=0;do{c=r<<1;d=s[o>>2]|0;f=d+(c*12|0)+4|0;if((s[f>>2]|0)>0){m=d+(c*12|0)|0;p=0;do{_=(s[m>>2]|0)+(p<<3)|0;d=s[_>>2]|0;g=s[l>>2]|0;v=g+(d<<2)|0;if(!(s[v>>2]&16)){y=t6(t,v)|0;s[_>>2]=y;s[v>>2]=s[v>>2]|16;s[g+(d+1<<2)>>2]=y}else s[_>>2]=s[g+(d+1<<2)>>2];p=p+1|0}while((p|0)<(s[f>>2]|0))f=s[o>>2]|0}else f=d;d=c|1;c=f+(d*12|0)+4|0;if((s[c>>2]|0)>0){v=f+(d*12|0)|0;g=0;do{f=(s[v>>2]|0)+(g<<3)|0;m=s[f>>2]|0;p=s[l>>2]|0;d=p+(m<<2)|0;if(!(s[d>>2]&16)){y=t6(t,d)|0;s[f>>2]=y;s[d>>2]=s[d>>2]|16;s[p+(m+1<<2)>>2]=y}else s[f>>2]=s[p+(m+1<<2)>>2];g=g+1|0}while((g|0)<(s[c>>2]|0))}r=r+1|0}while((r|0)<(s[u>>2]|0))}r=e+284|0;if((s[r>>2]|0)>0){c=e+280|0;u=e+396|0;l=e+544|0;o=e+332|0;f=0;do{v=s[u>>2]|0;m=v+(s[(s[c>>2]|0)+(f<<2)>>2]>>1<<3)|0;g=s[m>>2]|0;do if((g|0)!=-1){y=s[l>>2]|0;_=y+(g<<2)|0;p=(s[_>>2]&16|0)==0;if(p){x=s[y+(g+1<<2)>>2]|0;d=x>>1;x=(a[(s[o>>2]|0)+d>>0]|0)^x&1;w=i[528]|0;b=w&255;if(!((x&255)<<24>>24==w<<24>>24&(b>>>1^1)|b&2&x))break;w=s[v+(d<<3)>>2]|0;if(!((w|0)!=-1&(w|0)==(g|0)))break;if(p){w=t6(t,_)|0;s[m>>2]=w;s[_>>2]=s[_>>2]|16;s[y+(g+1<<2)>>2]=w;break}}s[m>>2]=s[y+(g+1<<2)>>2]}while(0)f=f+1|0}while((f|0)<(s[r>>2]|0))}r=e+272|0;d=s[r>>2]|0;if((d|0)>0){l=e+268|0;o=e+544|0;f=s[l>>2]|0;u=0;c=0;do{m=f+(u<<2)|0;p=s[m>>2]|0;v=s[o>>2]|0;g=v+(p<<2)|0;_=s[g>>2]|0;if((_&3|0)!=1){if(!(_&16)){d=t6(t,g)|0;s[m>>2]=d;s[g>>2]=s[g>>2]|16;s[v+(p+1<<2)>>2]=d;d=s[l>>2]|0;f=d;d=s[d+(u<<2)>>2]|0}else{d=s[v+(p+1<<2)>>2]|0;s[m>>2]=d}s[f+(c<<2)>>2]=d;d=s[r>>2]|0;c=c+1|0}u=u+1|0}while((u|0)<(d|0))}else{u=0;c=0}o=u-c|0;if((o|0)>0)s[r>>2]=d-o;r=e+260|0;f=s[r>>2]|0;if((f|0)>0){o=e+256|0;e=e+544|0;c=s[o>>2]|0;l=0;u=0;do{d=c+(l<<2)|0;m=s[d>>2]|0;p=s[e>>2]|0;v=p+(m<<2)|0;g=s[v>>2]|0;if((g&3|0)!=1){if(!(g&16)){f=t6(t,v)|0;s[d>>2]=f;s[v>>2]=s[v>>2]|16;s[p+(m+1<<2)>>2]=f;f=s[o>>2]|0;c=f;f=s[f+(l<<2)>>2]|0}else{f=s[p+(m+1<<2)>>2]|0;s[d>>2]=f}s[c+(u<<2)>>2]=f;f=s[r>>2]|0;u=u+1|0}l=l+1|0}while((l|0)<(f|0))}else{l=0;u=0}t=l-u|0;if((t|0)<=0){h=n;return}s[r>>2]=f-t;h=n;return}function tz(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0;a=h;h=h+32|0;l=a;t=a+8|0;n=e+548|0;r=e+556|0;o=(s[n>>2]|0)-(s[r>>2]|0)|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;tW(t,o);o=t+16|0;i[o>>0]=0;tF(e,t);if((s[e+44>>2]|0)>1){u=s[t+4>>2]<<2;s[l>>2]=s[n>>2]<<2;s[l+4>>2]=u;eB(1888,l|0)}i[e+560>>0]=i[o>>0]|0;o=e+544|0;l=s[o>>2]|0;if(l)ic(l);s[o>>2]=s[t>>2];s[n>>2]=s[t+4>>2];s[e+552>>2]=s[t+8>>2];s[r>>2]=s[t+12>>2];h=a;return}function tB(){var e=0,t=0,n=0;e=h;h=h+16|0;t=e;i[528]=0;i[536]=1;i[544]=2;to(552,608,624,2136,2144);s[138]=2168;c[72]=0;c[73]=1;i[592]=0;i[593]=0;r[297]=r[t+0>>1]|0;r[298]=r[t+2>>1]|0;r[299]=r[t+4>>1]|0;c[75]=.95;to(664,720,736,2136,2144);s[166]=2168;c[86]=0;c[87]=1;i[704]=0;i[705]=0;r[353]=r[t+0>>1]|0;r[354]=r[t+2>>1]|0;r[355]=r[t+4>>1]|0;c[89]=.999;to(776,832,848,2136,2144);s[194]=2168;c[100]=0;c[101]=1;i[816]=1;i[817]=1;r[409]=r[t+0>>1]|0;r[410]=r[t+2>>1]|0;r[411]=r[t+4>>1]|0;c[103]=0;to(936,992,1008,2136,2144);s[234]=2168;c[120]=0;c[121]=S;i[976]=0;i[977]=0;r[489]=r[t+0>>1]|0;r[490]=r[t+2>>1]|0;r[491]=r[t+4>>1]|0;c[123]=91648253;to(1048,1080,1096,2136,2016);s[262]=280;n=1068;s[n>>2]=0;s[n+4>>2]=2;s[269]=2;to(1160,1192,1208,2136,2016);s[290]=280;n=1180;s[n>>2]=0;s[n+4>>2]=2;s[297]=2;to(1272,1296,1312,2136,1992);s[318]=160;i[1292]=0;to(1344,1368,1376,2136,1992);s[336]=160;i[1364]=1;to(1408,1440,1448,2136,2016);s[352]=280;n=1428;s[n>>2]=1;s[n+4>>2]=2147483647;s[359]=100;to(1480,1536,1544,2136,2144);s[370]=2168;c[188]=1;c[189]=S;i[1520]=0;i[1521]=0;r[761]=r[t+0>>1]|0;r[762]=r[t+2>>1]|0;r[763]=r[t+4>>1]|0;c[191]=2;to(1584,1640,1648,2136,2144);s[396]=2168;c[201]=0;c[202]=S;i[1624]=0;i[1625]=0;r[813]=r[t+0>>1]|0;r[814]=r[t+2>>1]|0;r[815]=r[t+4>>1]|0;c[204]=.2;to(1728,1760,1776,2136,2016);s[432]=280;t=1748;s[t>>2]=0;s[t+4>>2]=2147483647;s[439]=0;h=e;return}function tV(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function tH(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0;n=h;h=h+16|0;o=n;a=n+8|0;if((i[t>>0]|0)!=45){p=0;h=n;return p|0}f=t+1|0;r=e+4|0;l=s[r>>2]|0;u=i[l>>0]|0;a:do if(u<<24>>24){d=0;while(true){p=d;d=d+1|0;if((i[f>>0]|0)!=u<<24>>24){e=0;break}u=i[l+d>>0]|0;f=t+(p+2)|0;if(!(u<<24>>24))break a}h=n;return e|0}while(0)if((i[f>>0]|0)!=61){p=0;h=n;return p|0}l=f+1|0;m=+iw(l,a);if(!(s[a>>2]|0)){p=0;h=n;return p|0}g=+c[e+32>>3];if(m>=g?(i[e+41>>0]|0)==0|m!=g:0){p=s[_>>2]|0;d=s[r>>2]|0;s[o>>2]=l;s[o+4>>2]=d;e0(p|0,2024,o|0);e3(1)}g=+c[e+24>>3];if(m<=g?(i[e+40>>0]|0)==0|m!=g:0){p=s[_>>2]|0;d=s[r>>2]|0;s[o>>2]=l;s[o+4>>2]=d;e0(p|0,2080,o|0);e3(1)}c[e+48>>3]=m;p=1;h=n;return p|0}function tG(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,f=0,p=0,m=0;n=h;h=h+48|0;r=n;a=s[_>>2]|0;m=s[e+16>>2]|0;u=(i[e+40>>0]|0)!=0?91:40;p=+c[e+24>>3];f=+c[e+32>>3];o=(i[e+41>>0]|0)!=0?93:41;l=+c[e+48>>3];s[r>>2]=s[e+4>>2];s[r+4>>2]=m;s[r+8>>2]=u;u=r+12|0;c[d>>3]=p;s[u>>2]=s[d>>2];s[u+4>>2]=s[d+4>>2];u=r+20|0;c[d>>3]=f;s[u>>2]=s[d>>2];s[u+4>>2]=s[d+4>>2];s[r+28>>2]=o;o=r+32|0;c[d>>3]=l;s[o>>2]=s[d>>2];s[o+4>>2]=s[d+4>>2];e0(a|0,2232,r|0);if(!t){h=n;return}s[r>>2]=s[e+8>>2];e0(a|0,2e3,r|0);eX(10,a|0);h=n;return}function tW(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0;n=h;i=e+8|0;r=s[i>>2]|0;if(r>>>0<t>>>0)o=r;else{h=n;return}while(true){if(o>>>0>=t>>>0)break;o=((o>>>3)+2+(o>>>1)&-2)+o|0;s[i>>2]=o;if(o>>>0<=r>>>0){a=4;break}}if((a|0)==4)e$(eS(1)|0,48,0);i=ih(s[e>>2]|0,o<<2)|0;if((i|0)==0?(s[(eG()|0)>>2]|0)==12:0)e$(eS(1)|0,48,0);s[e>>2]=i;h=n;return}function tj(e){e=e|0;var t=0,n=0,i=0,r=0,a=0,o=0,l=0;t=h;i=e+32|0;n=s[i>>2]|0;if(n){s[e+36>>2]=0;ic(n);s[i>>2]=0;s[e+40>>2]=0}i=e+16|0;n=s[i>>2]|0;if(n){s[e+20>>2]=0;ic(n);s[i>>2]=0;s[e+24>>2]=0}i=s[e>>2]|0;if(!i){h=t;return}n=e+4|0;a=s[n>>2]|0;if((a|0)>0){r=0;do{l=i+(r*12|0)|0;o=s[l>>2]|0;if(o){s[i+(r*12|0)+4>>2]=0;ic(o);s[l>>2]=0;s[i+(r*12|0)+8>>2]=0;i=s[e>>2]|0;a=s[n>>2]|0}r=r+1|0}while((r|0)<(a|0))}s[n>>2]=0;ic(i);s[e>>2]=0;s[e+8>>2]=0;h=t;return}function tq(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0;r=h;h=h+16|0;i=r+4|0;n=r;c=s[t>>2]|0;o=c+1|0;a=e+4|0;if((s[a>>2]|0)<(o|0)){u=e+8|0;l=s[u>>2]|0;if((l|0)<(o|0)){f=c+2-l&-2;c=(l>>1)+2&-2;c=(f|0)>(c|0)?f:c;if((c|0)>(2147483647-l|0)){f=eS(1)|0;e$(f|0,48,0)}d=s[e>>2]|0;f=c+l|0;s[u>>2]=f;f=ih(d,f*12|0)|0;s[e>>2]=f;if((f|0)==0?(s[(eG()|0)>>2]|0)==12:0){d=eS(1)|0;e$(d|0,48,0)}}u=s[a>>2]|0;if((u|0)<(o|0)){l=s[e>>2]|0;do{c=l+(u*12|0)|0;if(c){s[c>>2]=0;s[l+(u*12|0)+4>>2]=0;s[l+(u*12|0)+8>>2]=0}u=u+1|0}while((u|0)!=(o|0))}s[a>>2]=o;c=s[t>>2]|0}a=s[e>>2]|0;if(!(s[a+(c*12|0)>>2]|0)){f=c;d=e+16|0;s[n>>2]=f;s[i+0>>2]=s[n+0>>2];t2(d,i,0);h=r;return}s[a+(c*12|0)+4>>2]=0;f=s[t>>2]|0;d=e+16|0;s[n>>2]=f;s[i+0>>2]=s[n+0>>2];t2(d,i,0);h=r;return}function tX(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0;r=h;n=e+4|0;if((s[n>>2]|0)>=(t|0)){h=r;return}o=e+8|0;a=s[o>>2]|0;if((a|0)<(t|0)){u=t+1-a&-2;l=(a>>1)+2&-2;l=(u|0)>(l|0)?u:l;if((l|0)>(2147483647-a|0)){u=eS(1)|0;e$(u|0,48,0)}c=s[e>>2]|0;u=l+a|0;s[o>>2]=u;u=ih(c,u)|0;s[e>>2]=u;if((u|0)==0?(s[(eG()|0)>>2]|0)==12:0){c=eS(1)|0;e$(c|0,48,0)}}a=s[n>>2]|0;if((a|0)<(t|0)){e=s[e>>2]|0;do{o=e+a|0;if(o)i[o>>0]=0;a=a+1|0}while((a|0)!=(t|0))}s[n>>2]=t;h=r;return}function t$(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0;o=h;a=t+1|0;r=e+4|0;if((s[r>>2]|0)>=(a|0)){c=s[e>>2]|0;c=c+t|0;i[c>>0]=n;h=o;return}u=e+8|0;l=s[u>>2]|0;if((l|0)<(a|0)){f=t+2-l&-2;c=(l>>1)+2&-2;c=(f|0)>(c|0)?f:c;if((c|0)>(2147483647-l|0)){f=eS(1)|0;e$(f|0,48,0)}d=s[e>>2]|0;f=c+l|0;s[u>>2]=f;f=ih(d,f)|0;s[e>>2]=f;if((f|0)==0?(s[(eG()|0)>>2]|0)==12:0){d=eS(1)|0;e$(d|0,48,0)}}l=s[r>>2]|0;if((l|0)<(a|0))do{u=(s[e>>2]|0)+l|0;if(u)i[u>>0]=0;l=l+1|0}while((l|0)!=(a|0))s[r>>2]=a;d=s[e>>2]|0;d=d+t|0;i[d>>0]=n;h=o;return}function tY(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0;n=h;h=h+16|0;a=n;s[a>>2]=t;o=e+12|0;r=t+1|0;i=e+16|0;if((s[i>>2]|0)<(r|0)){u=e+20|0;l=s[u>>2]|0;if((l|0)<(r|0)){d=t+2-l&-2;f=(l>>1)+2&-2;f=(d|0)>(f|0)?d:f;if((f|0)>(2147483647-l|0)){d=eS(1)|0;e$(d|0,48,0)}p=s[o>>2]|0;d=f+l|0;s[u>>2]=d;d=ih(p,d<<2)|0;s[o>>2]=d;if((d|0)==0?(s[(eG()|0)>>2]|0)==12:0){p=eS(1)|0;e$(p|0,48,0)}}l=s[i>>2]|0;if((r|0)>(l|0))iR((s[o>>2]|0)+(l<<2)|0,-1,r-l<<2|0);s[i>>2]=r}s[(s[o>>2]|0)+(t<<2)>>2]=s[e+4>>2];tZ(e,a);i=s[o>>2]|0;a=s[i+(t<<2)>>2]|0;t=s[e>>2]|0;r=s[t+(a<<2)>>2]|0;if(!a){d=0;p=t+(d<<2)|0;s[p>>2]=r;p=i+(r<<2)|0;s[p>>2]=d;h=n;return}e=e+28|0;while(true){o=a;a=a+-1>>1;l=t+(a<<2)|0;u=s[l>>2]|0;p=s[s[e>>2]>>2]|0;if(!(+c[p+(r<<3)>>3]>+c[p+(u<<3)>>3])){e=14;break}s[t+(o<<2)>>2]=u;s[i+(s[l>>2]<<2)>>2]=o;if(!a){o=0;e=14;break}}if((e|0)==14){p=t+(o<<2)|0;s[p>>2]=r;p=i+(r<<2)|0;s[p>>2]=o;h=n;return}}function tJ(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0;n=h;i=e+4|0;r=s[i>>2]|0;a=e+8|0;o=s[a>>2]|0;if((r|0)==(o|0)&(o|0)<(r+1|0)){o=(r>>1)+2&-2;o=(o|0)<2?2:o;if((o|0)>(2147483647-r|0)){o=eS(1)|0;e$(o|0,48,0)}l=s[e>>2]|0;r=o+r|0;s[a>>2]=r;r=ih(l,r<<2)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0){l=eS(1)|0;e$(l|0,48,0)}}else r=s[e>>2]|0;l=s[i>>2]|0;s[i>>2]=l+1;i=r+(l<<2)|0;if(!i){h=n;return}s[i>>2]=s[t>>2];h=n;return}function tZ(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0;n=h;i=e+4|0;r=s[i>>2]|0;a=e+8|0;o=s[a>>2]|0;if((r|0)==(o|0)&(o|0)<(r+1|0)){o=(r>>1)+2&-2;o=(o|0)<2?2:o;if((o|0)>(2147483647-r|0)){o=eS(1)|0;e$(o|0,48,0)}l=s[e>>2]|0;r=o+r|0;s[a>>2]=r;r=ih(l,r<<2)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0){l=eS(1)|0;e$(l|0,48,0)}}else r=s[e>>2]|0;l=s[i>>2]|0;s[i>>2]=l+1;i=r+(l<<2)|0;if(!i){h=n;return}s[i>>2]=s[t>>2];h=n;return}function tK(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n=h;h=h+16|0;r=n+2|0;o=n+1|0;a=n;if((t|0)<16){a=t+-1|0;if((a|0)>0)o=0;else{h=n;return}do{r=o;o=o+1|0;if((o|0)<(t|0)){u=r;l=o;do{u=(s[e+(l<<2)>>2]|0)<(s[e+(u<<2)>>2]|0)?l:u;l=l+1|0}while((l|0)!=(t|0))}else u=r;d=e+(r<<2)|0;p=s[d>>2]|0;m=e+(u<<2)|0;s[d>>2]=s[m>>2];s[m>>2]=p}while((o|0)!=(a|0))h=n;return}l=s[e+(((t|0)/2|0)<<2)>>2]|0;f=-1;d=t;while(true){do{f=f+1|0;c=e+(f<<2)|0;u=s[c>>2]|0}while((u|0)<(l|0))do{d=d+-1|0;p=e+(d<<2)|0;m=s[p>>2]|0}while((l|0)<(m|0))if((f|0)>=(d|0))break;s[c>>2]=m;s[p>>2]=u}i[r+0>>0]=i[o+0>>0]|0;tK(e,f,r);m=t-f|0;i[r+0>>0]=i[a+0>>0]|0;tK(c,m,r);h=n;return}function tQ(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,o=0,l=0,c=0,f=0;i=h;l=n&1;o=a[e+16>>0]|0|l;r=t+4|0;c=((o+(s[r>>2]|0)<<2)+4|0)>>>2;f=e+4|0;tW(e,c+(s[f>>2]|0)|0);n=s[f>>2]|0;c=c+n|0;s[f>>2]=c;if(c>>>0<n>>>0)e$(eS(1)|0,48,0);e=(s[e>>2]|0)+(n<<2)|0;if(!e){h=i;return n|0}o=o<<3|l<<2;s[e>>2]=s[e>>2]&-32|o;o=s[r>>2]<<5|o;s[e>>2]=o;if((s[r>>2]|0)>0){o=s[t>>2]|0;t=0;do{s[e+(t<<2)+4>>2]=s[o+(t<<2)>>2];t=t+1|0}while((t|0)<(s[r>>2]|0))o=s[e>>2]|0}if(!(o&8)){h=i;return n|0}r=o>>>5;if(o&4){u[e+(r<<2)+4>>2]=0;h=i;return n|0}if(!r){r=0;o=0}else{o=0;t=0;do{o=1<<((s[e+(t<<2)+4>>2]|0)>>>1&31)|o;t=t+1|0}while((t|0)<(r|0))}s[e+(r<<2)+4>>2]=o;h=i;return n|0}function t0(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0;n=h;i=e+4|0;r=s[i>>2]|0;a=e+8|0;o=s[a>>2]|0;if((r|0)==(o|0)&(o|0)<(r+1|0)){o=(r>>1)+2&-2;o=(o|0)<2?2:o;if((o|0)>(2147483647-r|0)){o=eS(1)|0;e$(o|0,48,0)}l=s[e>>2]|0;r=o+r|0;s[a>>2]=r;r=ih(l,r<<3)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0){l=eS(1)|0;e$(l|0,48,0)}}else r=s[e>>2]|0;l=s[i>>2]|0;s[i>>2]=l+1;i=r+(l<<3)|0;if(!i){h=n;return}a=t;o=s[a+4>>2]|0;l=i;s[l>>2]=s[a>>2];s[l+4>>2]=o;h=n;return}function t1(e){e=e|0;var t=0,n=0,i=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;t=h;n=s[e>>2]|0;r=s[n>>2]|0;l=e+4|0;p=s[n+((s[l>>2]|0)+-1<<2)>>2]|0;s[n>>2]=p;i=s[e+12>>2]|0;s[i+(p<<2)>>2]=0;s[i+(r<<2)>>2]=-1;p=(s[l>>2]|0)+-1|0;s[l>>2]=p;if((p|0)<=1){h=t;return r|0}a=s[n>>2]|0;u=e+28|0;e=0;f=1;while(true){d=(e<<1)+2|0;if((d|0)<(p|0)){m=s[n+(d<<2)>>2]|0;_=s[n+(f<<2)>>2]|0;p=s[s[u>>2]>>2]|0;g=+c[p+(m<<3)>>3];v=+c[p+(_<<3)>>3];if(!(g>v)){m=_;g=v;o=6}}else{p=s[s[u>>2]>>2]|0;o=s[n+(f<<2)>>2]|0;m=o;g=+c[p+(o<<3)>>3];o=6}if((o|0)==6){o=0;d=f}if(!(g>+c[p+(a<<3)>>3]))break;s[n+(e<<2)>>2]=m;s[i+(m<<2)>>2]=e;f=d<<1|1;p=s[l>>2]|0;if((f|0)>=(p|0)){e=d;break}else e=d}s[n+(e<<2)>>2]=a;s[i+(a<<2)>>2]=e;h=t;return r|0}function t2(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0,f=0;r=h;u=s[t>>2]|0;t=u+1|0;a=e+4|0;if((s[a>>2]|0)>=(t|0)){h=r;return}l=e+8|0;o=s[l>>2]|0;if((o|0)<(t|0)){c=u+2-o&-2;u=(o>>1)+2&-2;u=(c|0)>(u|0)?c:u;if((u|0)>(2147483647-o|0)){c=eS(1)|0;e$(c|0,48,0)}f=s[e>>2]|0;c=u+o|0;s[l>>2]=c;c=ih(f,c)|0;s[e>>2]=c;if((c|0)==0?(s[(eG()|0)>>2]|0)==12:0){f=eS(1)|0;e$(f|0,48,0)}}o=s[a>>2]|0;if((o|0)<(t|0))do{i[(s[e>>2]|0)+o>>0]=n;o=o+1|0}while((o|0)!=(t|0))s[a>>2]=t;h=r;return}function t3(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0,l=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0;i=h;h=h+16|0;a=i+8|0;r=i+4|0;o=i;if((t|0)<16){r=t+-1|0;if((r|0)<=0){h=i;return}a=s[n>>2]|0;n=0;do{o=n;n=n+1|0;if((n|0)<(t|0)){l=s[a>>2]|0;f=o;c=n;do{d=l+(s[e+(c<<2)>>2]<<2)|0;x=s[d>>2]|0;g=x>>>5;if(x>>>0>95){p=l+(s[e+(f<<2)>>2]<<2)|0;m=(s[p>>2]|0)>>>5;if((m|0)==2)f=c;else f=+u[d+(g<<2)+4>>2]<+u[p+(m<<2)+4>>2]?c:f}c=c+1|0}while((c|0)!=(t|0))}else f=o;_=e+(o<<2)|0;y=s[_>>2]|0;x=e+(f<<2)|0;s[_>>2]=s[x>>2];s[x>>2]=y}while((n|0)!=(r|0))h=i;return}l=s[e+(((t|0)/2|0)<<2)>>2]|0;g=-1;p=t;while(true){y=g+1|0;m=e+(y<<2)|0;x=s[m>>2]|0;c=s[n>>2]|0;f=s[c>>2]|0;_=f+(x<<2)|0;v=s[_>>2]|0;g=f+(l<<2)|0;d=s[g>>2]|0;a:do if(v>>>0>95)while(true){b=d>>>5;if((b|0)!=2?!(+u[_+(v>>>5<<2)+4>>2]<+u[g+(b<<2)+4>>2]):0){g=y;break a}y=y+1|0;m=e+(y<<2)|0;x=s[m>>2]|0;_=f+(x<<2)|0;v=s[_>>2]|0;if(v>>>0<=95){g=y;break}}else g=y;while(0)p=p+-1|0;_=e+(p<<2)|0;v=f+(l<<2)|0;o:{if(d>>>0>95)while(true){y=f+(s[_>>2]<<2)|0;b=(s[y>>2]|0)>>>5;if((b|0)!=2?!(+u[v+(d>>>5<<2)+4>>2]<+u[y+(b<<2)+4>>2]):0)break o;b=p+-1|0;_=e+(b<<2)|0;p=b}}if((g|0)>=(p|0))break;s[m>>2]=s[_>>2];s[_>>2]=x}s[r>>2]=c;s[a+0>>2]=s[r+0>>2];t3(e,g,a);b=t-g|0;s[o>>2]=c;s[a+0>>2]=s[o+0>>2];t3(m,b,a);h=i;return}function t4(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;i=h;r=e+4|0;o=s[r>>2]|0;a=s[e>>2]|0;if((o|0)>0){u=s[e+12>>2]|0;l=0;do{s[u+(s[a+(l<<2)>>2]<<2)>>2]=-1;l=l+1|0;o=s[r>>2]|0}while((l|0)<(o|0))}if(a){s[r>>2]=0;o=0}a=t+4|0;if((s[a>>2]|0)>0){l=e+12|0;o=0;do{_=(s[t>>2]|0)+(o<<2)|0;s[(s[l>>2]|0)+(s[_>>2]<<2)>>2]=o;tZ(e,_);o=o+1|0}while((o|0)<(s[a>>2]|0))o=s[r>>2]|0}if((o|0)<=1){h=i;return}a=s[e>>2]|0;t=e+28|0;e=e+12|0;p=o;l=(o|0)/2|0;while(true){l=l+-1|0;o=s[a+(l<<2)>>2]|0;f=l<<1|1;a:do if((f|0)<(p|0)){u=l;while(true){d=(u<<1)+2|0;if((d|0)<(p|0)){m=s[a+(d<<2)>>2]|0;_=s[a+(f<<2)>>2]|0;p=s[s[t>>2]>>2]|0;g=+c[p+(m<<3)>>3];v=+c[p+(_<<3)>>3];if(!(g>v)){m=_;g=v;n=16}}else{p=s[s[t>>2]>>2]|0;n=s[a+(f<<2)>>2]|0;m=n;g=+c[p+(n<<3)>>3];n=16}if((n|0)==16){n=0;d=f}if(!(g>+c[p+(o<<3)>>3]))break a;s[a+(u<<2)>>2]=m;s[(s[e>>2]|0)+(m<<2)>>2]=u;f=d<<1|1;p=s[r>>2]|0;if((f|0)>=(p|0)){u=d;break}else u=d}}else u=l;while(0)s[a+(u<<2)>>2]=o;s[(s[e>>2]|0)+(o<<2)>>2]=u;if((l|0)<=0)break;p=s[r>>2]|0}h=i;return}function t5(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;n=h;t=e+36|0;c=s[t>>2]|0;r=e+32|0;d=s[r>>2]|0;if((c|0)>0){o=e+16|0;a=e+44|0;l=0;do{u=d+(l<<2)|0;f=s[u>>2]|0;if(i[(s[o>>2]|0)+f>>0]|0){d=s[e>>2]|0;c=d+(f*12|0)+4|0;m=s[c>>2]|0;if((m|0)>0){f=d+(f*12|0)|0;d=0;p=0;do{g=s[f>>2]|0;v=g+(d<<3)|0;if((s[(s[s[a>>2]>>2]|0)+(s[v>>2]<<2)>>2]&3|0)!=1){_=v;v=s[_+4>>2]|0;m=g+(p<<3)|0;s[m>>2]=s[_>>2];s[m+4>>2]=v;m=s[c>>2]|0;p=p+1|0}d=d+1|0}while((d|0)<(m|0))}else{d=0;p=0}f=d-p|0;if((f|0)>0)s[c>>2]=m-f;i[(s[o>>2]|0)+(s[u>>2]|0)>>0]=0;c=s[t>>2]|0;d=s[r>>2]|0}l=l+1|0}while((l|0)<(c|0))}if(!d){h=n;return}s[t>>2]=0;h=n;return}function t6(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,l=0;i=h;o=s[t>>2]|0;r=o>>>2&1|(a[e+16>>0]|0);o=((r+(o>>>5)<<2)+4|0)>>>2;l=e+4|0;tW(e,o+(s[l>>2]|0)|0);n=s[l>>2]|0;o=o+n|0;s[l>>2]=o;if(o>>>0<n>>>0)e$(eS(1)|0,48,0);e=(s[e>>2]|0)+(n<<2)|0;if(!e){h=i;return n|0}r=s[t>>2]&-9|r<<3;s[e>>2]=r;if((s[t>>2]|0)>>>0>31){r=0;do{s[e+(r<<2)+4>>2]=s[t+(r<<2)+4>>2];r=r+1|0}while((r|0)<((s[t>>2]|0)>>>5|0))r=s[e>>2]|0}if(!(r&8)){h=i;return n|0}o=r>>>5;t=t+(o<<2)+4|0;if(!(r&4)){s[e+(o<<2)+4>>2]=s[t>>2];h=i;return n|0}else{u[e+(o<<2)+4>>2]=+u[t>>2];h=i;return n|0}return 0}function t8(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0;t=h;h=h+16|0;a=t;tg(e);s[e>>2]=3424;s[e+684>>2]=s[719];s[e+688>>2]=s[747];s[e+692>>2]=s[785];c[e+696>>3]=+c[411];i[e+704>>0]=i[2652]|0;i[e+705>>0]=i[2724]|0;i[e+706>>0]=i[2804]|0;i[e+707>>0]=1;s[e+708>>2]=0;s[e+712>>2]=0;s[e+716>>2]=0;s[e+720>>2]=1;i[e+724>>0]=1;n=e+732|0;l=e+544|0;s[e+760>>2]=0;s[e+764>>2]=0;s[e+768>>2]=0;s[e+776>>2]=0;s[e+780>>2]=0;s[e+784>>2]=0;s[e+792>>2]=0;s[e+796>>2]=0;s[e+800>>2]=0;o=e+804|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[o>>2]=l;o=e+808|0;s[o>>2]=0;s[e+812>>2]=0;s[e+816>>2]=0;n=e+824|0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;s[e+852>>2]=o;ng(e+856|0,1);o=e+868|0;n=e+892|0;s[e+920>>2]=0;s[e+924>>2]=0;s[o+0>>2]=0;s[o+4>>2]=0;s[o+8>>2]=0;s[o+12>>2]=0;s[o+16>>2]=0;s[n+0>>2]=0;s[n+4>>2]=0;s[n+8>>2]=0;s[n+12>>2]=0;s[n+16>>2]=0;s[n+20>>2]=0;n=a+4|0;s[n>>2]=0;o=a+8|0;s[o>>2]=2;r=ih(0,8)|0;s[a>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0)e$(eS(1)|0,48,0);s[r>>2]=-2;s[n>>2]=1;i[e+560>>0]=1;s[e+928>>2]=tQ(l,a,0)|0;i[e+536>>0]=0;if(!r){h=t;return}s[n>>2]=0;ic(r);s[a>>2]=0;s[o>>2]=0;h=t;return}function t9(e){e=e|0;var t=0;t=h;t7(e);nG(e);h=t;return}function t7(e){e=e|0;var t=0,n=0,i=0;t=h;s[e>>2]=3424;n=e+904|0;i=s[n>>2]|0;if(i){s[e+908>>2]=0;ic(i);s[n>>2]=0;s[e+912>>2]=0}n=e+892|0;i=s[n>>2]|0;if(i){s[e+896>>2]=0;ic(i);s[n>>2]=0;s[e+900>>2]=0}n=e+876|0;i=s[n>>2]|0;if(i){s[e+880>>2]=0;ic(i);s[n>>2]=0;s[e+884>>2]=0}n=e+856|0;i=s[n>>2]|0;if(i){s[e+860>>2]=0;ic(i);s[n>>2]=0;s[e+864>>2]=0}i=e+836|0;n=s[i>>2]|0;if(n){s[e+840>>2]=0;ic(n);s[i>>2]=0;s[e+844>>2]=0}n=e+824|0;i=s[n>>2]|0;if(i){s[e+828>>2]=0;ic(i);s[n>>2]=0;s[e+832>>2]=0}n=e+808|0;i=s[n>>2]|0;if(i){s[e+812>>2]=0;ic(i);s[n>>2]=0;s[e+816>>2]=0}nv(e+760|0);n=e+744|0;i=s[n>>2]|0;if(i){s[e+748>>2]=0;ic(i);s[n>>2]=0;s[e+752>>2]=0}n=e+732|0;i=s[n>>2]|0;if(!i){t_(e);h=t;return}s[e+736>>2]=0;ic(i);s[n>>2]=0;s[e+740>>2]=0;t_(e);h=t;return}function ne(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0,u=0,c=0;r=h;h=h+32|0;o=r+12|0;u=r+8|0;c=r+16|0;a=r+4|0;l=r;i[c>>0]=i[t>>0]|0;i[o+0>>0]=i[c+0>>0]|0;n=ty(e,o,n)|0;s[u>>2]=n;t$(e+876|0,n,0);t$(e+904|0,n,0);if(!(i[e+724>>0]|0)){h=r;return n|0}c=e+808|0;t=n<<1;s[a>>2]=t;s[o+0>>2]=s[a+0>>2];n_(c,o,0);s[l>>2]=t|1;s[o+0>>2]=s[l+0>>2];n_(c,o,0);ny(e+760|0,u);t$(e+744|0,n,0);nx(e+824|0,n);h=r;return n|0}function nt(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0;u=h;h=h+32|0;o=u+4|0;v=u;m=u+16|0;s[o>>2]=0;l=o+4|0;s[l>>2]=0;c=o+8|0;s[c>>2]=0;_=i[2608]|0;i[e>>0]=_;f=t+724|0;n=(a[f>>0]&(n&1)|0)!=0;if(n){x=t+308|0;M=s[x>>2]|0;if((M|0)>0){y=t+304|0;_=t+876|0;b=0;do{w=s[(s[y>>2]|0)+(b<<2)>>2]>>1;s[v>>2]=w;w=(s[_>>2]|0)+w|0;if(!(i[w>>0]|0)){i[w>>0]=1;tZ(o,v);M=s[x>>2]|0}b=b+1|0}while((b|0)<(M|0))}v=(nn(t,r)|0)&1^1;i[e>>0]=v;r=i[2608]|0}else{r=_;v=_}M=r&255;if(!((M>>>1^1)&v<<24>>24==r<<24>>24|M&2&(v&255))){if((s[t+44>>2]|0)>0)ez(3760)}else{tU(m,t);v=i[m>>0]|0;i[e>>0]=v}w=i[2608]|0;M=w&255;if((((M>>>1^1)&v<<24>>24==w<<24>>24|M&2&(v&255)|0)!=0?(i[t+707>>0]|0)!=0:0)?(g=(s[t+736>>2]|0)+-1|0,(g|0)>0):0){e=t+732|0;m=t+4|0;do{r=s[e>>2]|0;x=s[r+(g<<2)>>2]|0;b=g+-1|0;w=s[r+(b<<2)>>2]|0;g=s[m>>2]|0;a:do if((x|0)>1){_=i[2616]|0;v=_&255;y=v&2;v=v>>>1^1;M=b;while(true){w=a[g+(w>>1)>>0]^w&1;b=x+-1|0;if(!((w&255)<<24>>24==_<<24>>24&v|y&w))break a;x=M+-1|0;w=s[r+(x<<2)>>2]|0;if((b|0)>1){M=x;x=b}else{M=x;x=b;p=20;break}}}else{M=b;p=20}while(0)if((p|0)==20){p=0;i[g+(w>>1)>>0]=(w&1^1)&255^1}g=M-x|0}while((g|0)>0)}if(n?(d=s[l>>2]|0,(d|0)>0):0){p=s[o>>2]|0;n=t+876|0;m=0;do{e=s[p+(m<<2)>>2]|0;i[(s[n>>2]|0)+e>>0]=0;if(i[f>>0]|0)nb(t,e);m=m+1|0}while((m|0)<(d|0))}t=s[o>>2]|0;if(!t){h=u;return}s[l>>2]=0;ic(t);s[o>>2]=0;s[c>>2]=0;h=u;return}function nn(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,O=0,I=0;u=h;h=h+16|0;o=u;if(!(tI(e)|0)){N=0;h=u;return N|0}l=e+724|0;if(!(i[l>>0]|0)){N=1;h=u;return N|0}M=e+924|0;b=e+872|0;w=e+868|0;x=e+860|0;v=e+680|0;S=e+824|0;a=e+828|0;p=e+836|0;T=e+904|0;E=e+332|0;n=e+44|0;A=e+704|0;L=e+706|0;R=e+696|0;m=e+556|0;g=e+548|0;C=e+876|0;_=e+920|0;y=e+284|0;a:while(true){if(((s[M>>2]|0)<=0?(s[_>>2]|0)>=(s[y>>2]|0):0)?(s[a>>2]|0)<=0:0)break;nl(e);P=s[b>>2]|0;N=s[w>>2]|0;D=P-N|0;if((P|0)<(N|0))D=(s[x>>2]|0)+D|0;if(!((D|0)<=0?(s[_>>2]|0)>=(s[y>>2]|0):0))f=11;if((f|0)==11?(f=0,!(nu(e,1)|0)):0){f=12;break}N=s[a>>2]|0;if(i[v>>0]|0){f=15;break}if(!N)continue;else D=0;while(true){I=s[S>>2]|0;P=s[I>>2]|0;O=s[I+(N+-1<<2)>>2]|0;s[I>>2]=O;N=s[p>>2]|0;s[N+(O<<2)>>2]=0;s[N+(P<<2)>>2]=-1;N=(s[a>>2]|0)+-1|0;s[a>>2]=N;if((N|0)>1)nw(S,0);if(i[v>>0]|0)continue a;if((i[(s[T>>2]|0)+P>>0]|0)==0?(O=i[(s[E>>2]|0)+P>>0]|0,N=i[2624]|0,I=N&255,((I>>>1^1)&O<<24>>24==N<<24>>24|O&2&I|0)!=0):0){if((s[n>>2]|0)>1&((D|0)%100|0)==0){s[o>>2]=s[a>>2];eB(3504,o|0)}if(i[A>>0]|0){I=(s[C>>2]|0)+P|0;N=i[I>>0]|0;i[I>>0]=1;if(!(nh(e,P)|0)){f=29;break a}i[(s[C>>2]|0)+P>>0]=N<<24>>24!=0&1}if((((i[L>>0]|0)!=0?(O=i[(s[E>>2]|0)+P>>0]|0,N=i[2624]|0,I=N&255,((I>>>1^1)&O<<24>>24==N<<24>>24|O&2&I|0)!=0):0)?(i[(s[C>>2]|0)+P>>0]|0)==0:0)?!(nf(e,P)|0):0){f=35;break a}if(+((s[m>>2]|0)>>>0)>+c[R>>3]*+((s[g>>2]|0)>>>0))ri[s[(s[e>>2]|0)+8>>2]&31](e)}N=s[a>>2]|0;if(!N)continue a;else D=D+1|0}}do if((f|0)==12)i[e+492>>0]=0;else if((f|0)==15){v=s[e+824>>2]|0;if((N|0)<=0){if(!v)break}else{y=s[p>>2]|0;_=0;do{s[y+(s[v+(_<<2)>>2]<<2)>>2]=-1;_=_+1|0}while((_|0)<(s[a>>2]|0))}s[a>>2]=0}else if((f|0)==29)i[e+492>>0]=0;else if((f|0)==35)i[e+492>>0]=0;while(0)if(!t){if(+((s[m>>2]|0)>>>0)>+c[e+96>>3]*+((s[g>>2]|0)>>>0))ri[s[(s[e>>2]|0)+8>>2]&31](e)}else{t=e+744|0;m=s[t>>2]|0;if(m){s[e+748>>2]=0;ic(m);s[t>>2]=0;s[e+752>>2]=0}nM(e+760|0,1);t=e+808|0;m=s[t>>2]|0;if(m){s[e+812>>2]=0;ic(m);s[t>>2]=0;s[e+816>>2]=0}m=e+824|0;t=s[m>>2]|0;if((s[a>>2]|0)<=0){if(t)f=48}else{f=s[p>>2]|0;p=0;do{s[f+(s[t+(p<<2)>>2]<<2)>>2]=-1;p=p+1|0}while((p|0)<(s[a>>2]|0))f=48}if((f|0)==48){s[a>>2]=0;ic(t);s[m>>2]=0;s[e+832>>2]=0}nS(e+856|0,1);i[l>>0]=0;i[e+536>>0]=1;i[e+560>>0]=0;s[e+728>>2]=s[e+540>>2];tO(e);ri[s[(s[e>>2]|0)+8>>2]&31](e)}if((s[n>>2]|0)>0?(r=s[e+736>>2]|0,(r|0)>0):0){c[d>>3]=+(r<<2>>>0)*95367431640625e-20;s[o>>2]=s[d>>2];s[o+4>>2]=s[d+4>>2];eB(3528,o|0)}I=(i[e+492>>0]|0)!=0;h=u;return I|0}function ni(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0;n=h;h=h+16|0;a=n;l=e+256|0;u=e+260|0;o=s[u>>2]|0;if((i[e+705>>0]|0)!=0?nr(e,t)|0:0){m=1;h=n;return m|0}if(!(tx(e,t)|0)){m=0;h=n;return m|0}if(!(i[e+724>>0]|0)){m=1;h=n;return m|0}t=s[u>>2]|0;if((t|0)!=(o+1|0)){m=1;h=n;return m|0}m=s[(s[l>>2]|0)+(t+-1<<2)>>2]|0;s[a>>2]=m;f=(s[e+544>>2]|0)+(m<<2)|0;nT(e+856|0,m);if((s[f>>2]|0)>>>0<=31){m=1;h=n;return m|0}c=e+760|0;u=e+808|0;l=e+744|0;o=e+924|0;t=e+824|0;d=e+840|0;e=e+836|0;p=0;do{m=f+(p<<2)+4|0;nE((s[c>>2]|0)+((s[m>>2]>>1)*12|0)|0,a);g=(s[u>>2]|0)+(s[m>>2]<<2)|0;s[g>>2]=(s[g>>2]|0)+1;i[(s[l>>2]|0)+(s[m>>2]>>1)>>0]=1;s[o>>2]=(s[o>>2]|0)+1;m=s[m>>2]>>1;if((s[d>>2]|0)>(m|0)?(r=s[(s[e>>2]|0)+(m<<2)>>2]|0,(r|0)>-1):0)nw(t,r);p=p+1|0}while((p|0)<((s[f>>2]|0)>>>5|0))r=1;h=n;return r|0}function nr(e,t){e=e|0;t=t|0;var n=0,r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;u=h;h=h+16|0;o=u+8|0;l=u+4|0;r=u;s[l>>2]=s[e+284>>2];tZ(e+292|0,l);l=t+4|0;f=s[l>>2]|0;a:do if((f|0)>0){n=e+332|0;c=0;while(true){d=s[(s[t>>2]|0)+(c<<2)>>2]|0;m=a[(s[n>>2]|0)+(d>>1)>>0]|0;g=m^d&1;p=g&255;_=i[2608]|0;v=_&255;if(p<<24>>24==_<<24>>24&(v>>>1^1)|v&2&g)break;v=i[2616]|0;_=v&255;if(!((_>>>1^1)&p<<24>>24==v<<24>>24|m&2&_)){s[r>>2]=d^1;s[o+0>>2]=s[r+0>>2];tb(e,o,-1);f=s[l>>2]|0}c=c+1|0;if((c|0)>=(f|0))break a}tA(e,0);_=1;h=u;return _|0}while(0)_=(tw(e)|0)!=-1;tA(e,0);h=u;return _|0}function ns(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0;n=h;h=h+16|0;a=n;r=(s[e+544>>2]|0)+(t<<2)|0;if(!(i[e+724>>0]|0)){tT(e,t);h=n;return}if((s[r>>2]|0)>>>0<=31){tT(e,t);h=n;return}l=e+808|0;u=e+776|0;o=e+792|0;c=0;do{f=r+(c<<2)+4|0;d=(s[l>>2]|0)+(s[f>>2]<<2)|0;s[d>>2]=(s[d>>2]|0)+-1;nb(e,s[f>>2]>>1);f=s[f>>2]>>1;s[a>>2]=f;f=(s[u>>2]|0)+f|0;if(!(i[f>>0]|0)){i[f>>0]=1;tZ(o,a)}c=c+1|0}while((c|0)<((s[r>>2]|0)>>>5|0))tT(e,t);h=n;return}function na(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0;r=h;h=h+16|0;l=r+4|0;o=r;c=s[e+544>>2]|0;u=c+(t<<2)|0;nT(e+856|0,t);if((s[u>>2]&-32|0)==64){ns(e,t);m=s[n>>2]|0;n=s[u>>2]|0;a:do if(n>>>0>31){f=n>>>5;d=0;while(true){p=d+1|0;if((s[u+(d<<2)+4>>2]|0)==(m|0)){p=d;break a}if((p|0)<(f|0))d=p;else break}}else{f=0;p=0}while(0)d=f+-1|0;if((p|0)<(d|0))do{n=p;p=p+1|0;s[u+(n<<2)+4>>2]=s[u+(p<<2)+4>>2];n=s[u>>2]|0;f=n>>>5;d=f+-1|0}while((p|0)<(d|0))if(n&8){s[u+(d<<2)+4>>2]=s[u+(f<<2)+4>>2];n=s[u>>2]|0}f=n+-32|0;s[u>>2]=f;f=f>>>5;if(!f){f=0;n=0}else{n=0;d=0;do{n=1<<((s[u+(d<<2)+4>>2]|0)>>>1&31)|n;d=d+1|0}while((d|0)<(f|0))}s[u+(f<<2)+4>>2]=n}else{tS(e,t,1);n=s[n>>2]|0;d=s[u>>2]|0;o:do if(d>>>0>31){f=d>>>5;p=0;while(true){m=p+1|0;if((s[u+(p<<2)+4>>2]|0)==(n|0)){m=p;break o}if((m|0)<(f|0))p=m;else break}}else{f=0;m=0}while(0)p=f+-1|0;if((m|0)<(p|0))do{d=m;m=m+1|0;s[u+(d<<2)+4>>2]=s[u+(m<<2)+4>>2];d=s[u>>2]|0;f=d>>>5;p=f+-1|0}while((m|0)<(p|0))if(d&8){s[u+(p<<2)+4>>2]=s[u+(f<<2)+4>>2];d=s[u>>2]|0}p=d+-32|0;s[u>>2]=p;p=p>>>5;if(!p){p=0;f=0}else{f=0;d=0;do{f=1<<((s[u+(d<<2)+4>>2]|0)>>>1&31)|f;d=d+1|0}while((d|0)<(p|0))}s[u+(p<<2)+4>>2]=f;tM(e,t);f=n>>1;d=s[e+760>>2]|0;p=d+(f*12|0)|0;d=d+(f*12|0)+4|0;m=s[d>>2]|0;l:do if((m|0)>0){_=s[p>>2]|0;g=0;while(true){v=g+1|0;if((s[_+(g<<2)>>2]|0)==(t|0))break l;if((v|0)<(m|0))g=v;else{g=v;break}}}else g=0;while(0)m=m+-1|0;if((g|0)<(m|0)){p=s[p>>2]|0;do{m=g;g=g+1|0;s[p+(m<<2)>>2]=s[p+(g<<2)>>2];m=(s[d>>2]|0)+-1|0}while((g|0)<(m|0))}s[d>>2]=m;_=(s[e+808>>2]|0)+(n<<2)|0;s[_>>2]=(s[_>>2]|0)+-1;nb(e,f)}if((s[u>>2]&-32|0)!=32){_=1;h=r;return _|0}c=s[c+(t+1<<2)>>2]|0;u=a[(s[e+332>>2]|0)+(c>>1)>>0]|0;_=u^c&1;t=_&255;g=i[2624]|0;v=g&255;if(!(t<<24>>24==g<<24>>24&(v>>>1^1)|v&2&_)){v=i[2616]|0;_=v&255;if((_>>>1^1)&t<<24>>24==v<<24>>24|u&2&_){_=0;h=r;return _|0}}else{s[o>>2]=c;s[l+0>>2]=s[o+0>>2];tb(e,l,-1)}_=(tw(e)|0)==-1;h=r;return _|0}function no(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0;a=h;h=h+16|0;l=a+4|0;o=a;p=e+708|0;s[p>>2]=(s[p>>2]|0)+1;if(s[r>>2]|0)s[r+4>>2]=0;u=(s[t>>2]|0)>>>5>>>0<(s[n>>2]|0)>>>5>>>0;e=u?n:t;t=u?t:n;u=s[t>>2]|0;a:do if(u>>>0>31){n=0;o:while(true){c=s[t+(n<<2)+4>>2]|0;l:do if((c>>1|0)!=(i|0)){f=s[e>>2]|0;u:do if(f>>>0>31){d=0;while(true){p=s[e+(d<<2)+4>>2]|0;d=d+1|0;if((c^p)>>>0<2)break;if((d|0)>=(f>>>5|0))break u}if((p|0)==(c^1|0)){r=0;break o}else break l}while(0)s[l>>2]=c;tJ(r,l);u=s[t>>2]|0}while(0)n=n+1|0;if((n|0)>=(u>>>5|0))break a}h=a;return r|0}while(0)n=s[e>>2]|0;if(n>>>0<=31){p=1;h=a;return p|0}l=0;do{t=s[e+(l<<2)+4>>2]|0;if((t>>1|0)!=(i|0)){s[o>>2]=t;tJ(r,o);n=s[e>>2]|0}l=l+1|0}while((l|0)<(n>>>5|0))r=1;h=a;return r|0}function nl(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0;t=h;u=e+924|0;if(!(s[u>>2]|0)){h=t;return}o=e+856|0;n=e+872|0;r=e+868|0;l=e+860|0;a=e+544|0;c=0;while(true){w=s[n>>2]|0;f=s[r>>2]|0;d=w-f|0;if((w|0)<(f|0))d=(s[l>>2]|0)+d|0;if((c|0)>=(d|0))break;d=(s[a>>2]|0)+(s[(s[o>>2]|0)+(((f+c|0)%(s[l>>2]|0)|0)<<2)>>2]<<2)|0;f=s[d>>2]|0;if(!(f&3))s[d>>2]=f&-4|2;c=c+1|0}c=e+540|0;g=s[c>>2]|0;if((g|0)>0){d=e+744|0;p=e+776|0;f=e+760|0;e=e+804|0;m=0;do{if(i[(s[d>>2]|0)+m>>0]|0){v=(s[p>>2]|0)+m|0;if(i[v>>0]|0){_=s[f>>2]|0;g=_+(m*12|0)+4|0;x=s[g>>2]|0;if((x|0)>0){_=s[_+(m*12|0)>>2]|0;b=0;y=0;do{w=s[_+(b<<2)>>2]|0;if((s[(s[s[e>>2]>>2]|0)+(w<<2)>>2]&3|0)!=1){s[_+(y<<2)>>2]=w;x=s[g>>2]|0;y=y+1|0}b=b+1|0}while((b|0)<(x|0))}else{b=0;y=0}_=b-y|0;if((_|0)>0)s[g>>2]=x-_;i[v>>0]=0}v=s[f>>2]|0;g=v+(m*12|0)+4|0;y=s[g>>2]|0;if((y|0)>0){v=v+(m*12|0)|0;_=0;do{x=s[(s[v>>2]|0)+(_<<2)>>2]|0;if(!(s[(s[a>>2]|0)+(x<<2)>>2]&3)){nT(o,x);y=(s[a>>2]|0)+(s[(s[v>>2]|0)+(_<<2)>>2]<<2)|0;s[y>>2]=s[y>>2]&-4|2;y=s[g>>2]|0}_=_+1|0}while((_|0)<(y|0))}i[(s[d>>2]|0)+m>>0]=0;g=s[c>>2]|0}m=m+1|0}while((m|0)<(g|0))c=0}else c=0;while(true){w=s[n>>2]|0;f=s[r>>2]|0;d=w-f|0;if((w|0)<(f|0))d=(s[l>>2]|0)+d|0;if((c|0)>=(d|0))break;f=(s[a>>2]|0)+(s[(s[o>>2]|0)+(((f+c|0)%(s[l>>2]|0)|0)<<2)>>2]<<2)|0;d=s[f>>2]|0;if((d&3|0)==2)s[f>>2]=d&-4;c=c+1|0}s[u>>2]=0;h=t;return}function nu(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,O=0,I=0,k=0,U=0,F=0,z=0,B=0,V=0;n=h;h=h+16|0;f=n;M=n+12|0;a=e+856|0;c=e+872|0;g=e+868|0;l=e+860|0;x=e+680|0;r=e+920|0;o=e+284|0;y=e+280|0;v=e+544|0;_=e+928|0;p=e+44|0;d=e+776|0;b=e+692|0;m=e+804|0;u=e+760|0;C=0;D=0;L=0;a:while(true){R=s[g>>2]|0;do{E=s[c>>2]|0;A=(E|0)<(R|0);E=E-R|0;if(A)P=(s[l>>2]|0)+E|0;else P=E;if((P|0)<=0?(s[r>>2]|0)>=(s[o>>2]|0):0){r=1;l=53;break a}if(i[x>>0]|0){l=8;break a}if(A)E=(s[l>>2]|0)+E|0;if((E|0)==0?(T=s[r>>2]|0,(T|0)<(s[o>>2]|0)):0){s[r>>2]=T+1;s[(s[v>>2]|0)+((s[_>>2]|0)+1<<2)>>2]=s[(s[y>>2]|0)+(T<<2)>>2];E=(s[v>>2]|0)+(s[_>>2]<<2)|0;A=(s[E>>2]|0)>>>5;if(!A){A=0;P=0}else{P=0;R=0;do{P=1<<((s[E+(R<<2)+4>>2]|0)>>>1&31)|P;R=R+1|0}while((R|0)<(A|0))}s[E+(A<<2)+4>>2]=P;nT(a,s[_>>2]|0);R=s[g>>2]|0}E=s[(s[a>>2]|0)+(R<<2)>>2]|0;R=R+1|0;I=s[l>>2]|0;R=(R|0)==(I|0)?0:R;s[g>>2]=R;P=s[v>>2]|0;A=P+(E<<2)|0;O=s[A>>2]|0}while((O&3|0)!=0)if(t?(s[p>>2]|0)>1:0){N=C+1|0;if(!((C|0)%1e3|0)){O=s[c>>2]|0;s[f>>2]=O-R+((O|0)<(R|0)?I:0);s[f+4>>2]=L;s[f+8>>2]=D;eB(3440,f|0);O=s[A>>2]|0;C=N}else C=N}R=P+(E+1<<2)|0;P=s[R>>2]>>1;if(O>>>0>63){N=s[u>>2]|0;O=O>>>5;I=1;do{V=s[A+(I<<2)+4>>2]>>1;P=(s[N+(V*12|0)+4>>2]|0)<(s[N+(P*12|0)+4>>2]|0)?V:P;I=I+1|0}while((I|0)<(O|0))}O=(s[d>>2]|0)+P|0;if(i[O>>0]|0){I=s[u>>2]|0;N=I+(P*12|0)+4|0;F=s[N>>2]|0;if((F|0)>0){I=s[I+(P*12|0)>>2]|0;U=0;k=0;do{z=s[I+(U<<2)>>2]|0;if((s[(s[s[m>>2]>>2]|0)+(z<<2)>>2]&3|0)!=1){s[I+(k<<2)>>2]=z;F=s[N>>2]|0;k=k+1|0}U=U+1|0}while((U|0)<(F|0))}else{U=0;k=0}I=U-k|0;if((I|0)>0)s[N>>2]=F-I;i[O>>0]=0}O=s[u>>2]|0;N=s[O+(P*12|0)>>2]|0;O=O+(P*12|0)+4|0;if((s[O>>2]|0)>0)I=0;else continue;while(true){z=s[A>>2]|0;if(z&3)continue a;k=s[N+(I<<2)>>2]|0;U=s[v>>2]|0;B=U+(k<<2)|0;F=s[B>>2]|0;o:do if(((!((F&3|0)!=0|(k|0)==(E|0))?(V=s[b>>2]|0,S=F>>>5,(V|0)==-1|(S|0)<(V|0)):0)?(w=z>>>5,S>>>0>=w>>>0):0)?(s[A+(w<<2)+4>>2]&~s[B+(S<<2)+4>>2]|0)==0:0){U=U+(k+1<<2)|0;do if(z>>>0>31){if(F>>>0>31){B=-2;F=0}else break o;while(true){z=s[R+(F<<2)>>2]|0;l:if((B|0)==-2){V=0;while(true){B=s[U+(V<<2)>>2]|0;if((z|0)==(B|0)){z=-2;break l}V=V+1|0;if((z|0)==(B^1|0))break l;if(V>>>0>=S>>>0)break o}}else{V=0;while(true){if((z|0)==(s[U+(V<<2)>>2]|0)){z=B;break l}V=V+1|0;if(V>>>0>=S>>>0)break o}}F=F+1|0;if(F>>>0>=w>>>0)break;else B=z}if((z|0)==-2)break;else if((z|0)==-1)break o;s[M>>2]=z^1;s[f+0>>2]=s[M+0>>2];if(!(na(e,k,f)|0)){r=0;l=53;break a}D=D+1|0;I=(((z>>1|0)==(P|0))<<31>>31)+I|0;break o}while(0)ns(e,k);L=L+1|0}while(0)I=I+1|0;if((I|0)>=(s[O>>2]|0))continue a}}if((l|0)==8){nS(a,0);s[r>>2]=s[o>>2];V=1;h=n;return V|0}else if((l|0)==53){h=n;return r|0}return 0}function nc(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0;o=h;h=h+16|0;r=o+12|0;f=o+8|0;u=o+4|0;l=o;c=(s[e+544>>2]|0)+(n<<2)|0;if(s[c>>2]&3){v=1;h=o;return v|0}if(tE(e,c)|0){v=1;h=o;return v|0}s[f>>2]=s[e+284>>2];tZ(e+292|0,f);m=s[c>>2]|0;if(m>>>0>31){f=e+332|0;d=0;p=-2;do{g=s[c+(d<<2)+4>>2]|0;v=g>>1;if((v|0)!=(t|0)?(v=(a[(s[f>>2]|0)+v>>0]|0)^g&1,y=i[2616]|0,_=y&255,((v&255)<<24>>24==y<<24>>24&(_>>>1^1)|_&2&v|0)==0):0){s[u>>2]=g^1;s[r+0>>2]=s[u+0>>2];tb(e,r,-1);m=s[c>>2]|0}else p=g;d=d+1|0}while((d|0)<(m>>>5|0))}else p=-2;y=(tw(e)|0)==-1;tA(e,0);if(!y){y=e+712|0;s[y>>2]=(s[y>>2]|0)+1;s[l>>2]=p;s[r+0>>2]=s[l+0>>2];if(!(na(e,n,r)|0)){y=0;h=o;return y|0}}y=1;h=o;return y|0}function nh(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0;n=h;o=(s[e+776>>2]|0)+t|0;r=e+760|0;if(i[o>>0]|0){u=s[r>>2]|0;a=u+(t*12|0)+4|0;d=s[a>>2]|0;if((d|0)>0){l=e+804|0;u=s[u+(t*12|0)>>2]|0;f=0;c=0;do{p=s[u+(f<<2)>>2]|0;if((s[(s[s[l>>2]>>2]|0)+(p<<2)>>2]&3|0)!=1){s[u+(c<<2)>>2]=p;d=s[a>>2]|0;c=c+1|0}f=f+1|0}while((f|0)<(d|0))}else{f=0;c=0}l=f-c|0;if((l|0)>0)s[a>>2]=d-l;i[o>>0]=0}a=s[r>>2]|0;d=i[(s[e+332>>2]|0)+t>>0]|0;f=i[2624]|0;p=f&255;if(!((p>>>1^1)&d<<24>>24==f<<24>>24|d&2&p)){p=1;h=n;return p|0}r=a+(t*12|0)+4|0;o=s[r>>2]|0;if(!o){p=1;h=n;return p|0}a:do if((o|0)>0){a=a+(t*12|0)|0;o=0;while(true){if(!(nc(e,t,s[(s[a>>2]|0)+(o<<2)>>2]|0)|0)){e=0;break}o=o+1|0;if((o|0)>=(s[r>>2]|0))break a}h=n;return e|0}while(0)p=nu(e,0)|0;h=n;return p|0}function nf(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,I=0,k=0,U=0,F=0,z=0,B=0,V=0,H=0,G=0,W=0,j=0,q=0,X=0,$=0,Y=0,J=0,Z=0;n=h;h=h+48|0;_=n+36|0;v=n+32|0;y=n+28|0;x=n+24|0;r=n+12|0;a=n;d=(s[e+776>>2]|0)+t|0;f=e+760|0;if(i[d>>0]|0){g=s[f>>2]|0;p=g+(t*12|0)+4|0;S=s[p>>2]|0;if((S|0)>0){m=e+804|0;g=s[g+(t*12|0)>>2]|0;w=0;b=0;do{T=s[g+(w<<2)>>2]|0;if((s[(s[s[m>>2]>>2]|0)+(T<<2)>>2]&3|0)!=1){s[g+(b<<2)>>2]=T;S=s[p>>2]|0;b=b+1|0}w=w+1|0}while((w|0)<(S|0))}else{w=0;b=0}m=w-b|0;if((m|0)>0)s[p>>2]=S-m;i[d>>0]=0}b=s[f>>2]|0;w=b+(t*12|0)|0;s[r>>2]=0;d=r+4|0;s[d>>2]=0;p=r+8|0;s[p>>2]=0;s[a>>2]=0;g=a+4|0;s[g>>2]=0;m=a+8|0;s[m>>2]=0;b=b+(t*12|0)+4|0;a:do if((s[b>>2]|0)>0){S=e+544|0;A=t<<1;E=0;do{C=(s[w>>2]|0)+(E<<2)|0;R=(s[S>>2]|0)+(s[C>>2]<<2)|0;Z=s[R>>2]|0;T=Z>>>5;o:do if(Z>>>0>31){D=0;while(true){L=D+1|0;if((s[R+(D<<2)+4>>2]|0)==(A|0)){L=D;break o}if((L|0)<(T|0))D=L;else break}}else L=0;while(0)nE((L|0)<(T|0)?r:a,C);E=E+1|0;T=s[b>>2]|0}while((E|0)<(T|0))S=s[d>>2]|0;A=(S|0)>0;if(A){C=s[g>>2]|0;k=(C|0)>0;I=e+544|0;L=s[r>>2]|0;E=s[a>>2]|0;R=e+708|0;N=e+684|0;P=e+688|0;V=0;D=0;while(true){if(k){F=L+(D<<2)|0;U=s[I>>2]|0;z=s[R>>2]|0;B=0;do{W=U+(s[F>>2]<<2)|0;q=U+(s[E+(B<<2)>>2]<<2)|0;z=z+1|0;s[R>>2]=z;H=(s[W>>2]|0)>>>5>>>0<(s[q>>2]|0)>>>5>>>0;G=H?q:W;q=H?W:q;W=G+4|0;H=q+4|0;G=s[G>>2]|0;j=G>>>5;$=j+-1|0;q=s[q>>2]|0;l:do if(q>>>0>31){X=0;while(true){Z=s[H+(X<<2)>>2]|0;u:do if((Z>>1|0)!=(t|0)){c:do if(G>>>0>31){J=0;while(true){Y=s[W+(J<<2)>>2]|0;J=J+1|0;if((Y^Z)>>>0<2)break;if((J|0)>=(j|0))break c}if((Y|0)==(Z^1|0))break l;else break u}while(0)$=$+1|0}while(0)X=X+1|0;if((X|0)>=(q>>>5|0)){M=28;break}}}else M=28;while(0)if((M|0)==28){M=0;if((V|0)>=((s[N>>2]|0)+T|0)){e=1;break a}Z=s[P>>2]|0;if((Z|0)!=-1&($|0)>(Z|0)){e=1;break a}else V=V+1|0}B=B+1|0}while((B|0)<(C|0))}D=D+1|0;if((D|0)>=(S|0)){M=32;break}}}else{A=0;M=32}}else{S=0;A=0;M=32}while(0)h:if((M|0)==32){i[(s[e+904>>2]|0)+t>>0]=1;T=e+380|0;E=(s[T>>2]|0)+t|0;if(i[E>>0]|0){Z=e+200|0;J=Z;J=iN(s[J>>2]|0,s[J+4>>2]|0,-1,-1)|0;s[Z>>2]=J;s[Z+4>>2]=O}i[E>>0]=0;E=e+460|0;if(!((s[e+476>>2]|0)>(t|0)?(s[(s[e+472>>2]|0)+(t<<2)>>2]|0)>-1:0))M=36;if((M|0)==36?(i[(s[T>>2]|0)+t>>0]|0)!=0:0)tY(E,t);M=e+716|0;s[M>>2]=(s[M>>2]|0)+1;M=s[g>>2]|0;if((S|0)>(M|0)){E=e+732|0;if((M|0)>0){x=e+544|0;y=s[a>>2]|0;R=e+736|0;L=0;do{C=(s[x>>2]|0)+(s[y+(L<<2)>>2]<<2)|0;T=s[R>>2]|0;if((s[C>>2]|0)>>>0>31){D=0;P=-1;do{Z=C+(D<<2)+4|0;s[_>>2]=s[Z>>2];nE(E,_);P=(s[Z>>2]>>1|0)==(t|0)?D+T|0:P;D=D+1|0}while((D|0)<((s[C>>2]|0)>>>5|0))}else P=-1;Z=s[E>>2]|0;Y=Z+(P<<2)|0;J=s[Y>>2]|0;Z=Z+(T<<2)|0;s[Y>>2]=s[Z>>2];s[Z>>2]=J;s[v>>2]=(s[C>>2]|0)>>>5;nE(E,v);L=L+1|0}while((L|0)<(M|0))}s[_>>2]=t<<1;nE(E,_);s[v>>2]=1;nE(E,v)}else{L=e+732|0;if(A){D=e+544|0;R=s[r>>2]|0;T=e+736|0;P=0;do{C=(s[D>>2]|0)+(s[R+(P<<2)>>2]<<2)|0;E=s[T>>2]|0;if((s[C>>2]|0)>>>0>31){N=0;I=-1;do{Z=C+(N<<2)+4|0;s[_>>2]=s[Z>>2];nE(L,_);I=(s[Z>>2]>>1|0)==(t|0)?N+E|0:I;N=N+1|0}while((N|0)<((s[C>>2]|0)>>>5|0))}else I=-1;Z=s[L>>2]|0;Y=Z+(I<<2)|0;J=s[Y>>2]|0;Z=Z+(E<<2)|0;s[Y>>2]=s[Z>>2];s[Z>>2]=J;s[v>>2]=(s[C>>2]|0)>>>5;nE(L,v);P=P+1|0}while((P|0)<(S|0))}s[y>>2]=t<<1|1;nE(L,y);s[x>>2]=1;nE(L,x)}if((s[b>>2]|0)>0){v=0;do{ns(e,s[(s[w>>2]|0)+(v<<2)>>2]|0);v=v+1|0}while((v|0)<(s[b>>2]|0))}v=e+628|0;f:if(A){_=e+544|0;w=s[r>>2]|0;E=s[a>>2]|0;if((M|0)>0)b=0;else{v=0;while(true){v=v+1|0;if((v|0)>=(S|0))break f}}do{x=w+(b<<2)|0;y=0;do{Z=s[_>>2]|0;if(no(e,Z+(s[x>>2]<<2)|0,Z+(s[E+(y<<2)>>2]<<2)|0,t,v)|0?!(ni(e,v)|0):0){e=0;break h}y=y+1|0}while((y|0)<(M|0))b=b+1|0}while((b|0)<(S|0))}v=s[f>>2]|0;f=v+(t*12|0)|0;_=s[f>>2]|0;if(_){s[v+(t*12|0)+4>>2]=0;ic(_);s[f>>2]=0;s[v+(t*12|0)+8>>2]=0}f=e+412|0;t=t<<1;_=s[f>>2]|0;v=_+(t*12|0)+4|0;if((s[v>>2]|0)==0?(c=_+(t*12|0)|0,u=s[c>>2]|0,(u|0)!=0):0){s[v>>2]=0;ic(u);s[c>>2]=0;s[_+(t*12|0)+8>>2]=0;_=s[f>>2]|0}u=t|1;c=_+(u*12|0)+4|0;if((s[c>>2]|0)==0?(l=_+(u*12|0)|0,o=s[l>>2]|0,(o|0)!=0):0){s[c>>2]=0;ic(o);s[l>>2]=0;s[_+(u*12|0)+8>>2]=0}e=nu(e,0)|0;E=s[a>>2]|0}if(E){s[g>>2]=0;ic(E);s[a>>2]=0;s[m>>2]=0}a=s[r>>2]|0;if(!a){h=n;return e|0}s[d>>2]=0;ic(a);s[r>>2]=0;s[p>>2]=0;h=n;return e|0}function nd(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0;n=h;if(!(i[e+724>>0]|0)){h=n;return}c=e+540|0;if((s[c>>2]|0)>0){l=e+760|0;r=e+804|0;a=e+776|0;u=e+544|0;o=0;do{d=s[l>>2]|0;f=d+(o*12|0)+4|0;m=s[f>>2]|0;if((m|0)>0){d=s[d+(o*12|0)>>2]|0;g=0;p=0;do{v=s[d+(g<<2)>>2]|0;if((s[(s[s[r>>2]>>2]|0)+(v<<2)>>2]&3|0)!=1){s[d+(p<<2)>>2]=v;m=s[f>>2]|0;p=p+1|0}g=g+1|0}while((g|0)<(m|0))}else{g=0;p=0}d=g-p|0;if((d|0)>0)s[f>>2]=m-d;i[(s[a>>2]|0)+o>>0]=0;d=s[l>>2]|0;f=d+(o*12|0)+4|0;if((s[f>>2]|0)>0){v=d+(o*12|0)|0;m=0;do{d=(s[v>>2]|0)+(m<<2)|0;p=s[d>>2]|0;g=s[u>>2]|0;_=g+(p<<2)|0;if(!(s[_>>2]&16)){y=t6(t,_)|0;s[d>>2]=y;s[_>>2]=s[_>>2]|16;s[g+(p+1<<2)>>2]=y}else s[d>>2]=s[g+(p+1<<2)>>2];m=m+1|0}while((m|0)<(s[f>>2]|0))}o=o+1|0}while((o|0)<(s[c>>2]|0))}r=e+856|0;y=s[e+872>>2]|0;a=e+868|0;f=s[a>>2]|0;u=y-f|0;if((y|0)<(f|0))u=(s[e+860>>2]|0)+u|0;a:if((u|0)>0){o=e+860|0;l=e+544|0;while(true){c=s[(s[r>>2]|0)+(f<<2)>>2]|0;d=f+1|0;s[a>>2]=(d|0)==(s[o>>2]|0)?0:d;d=s[l>>2]|0;p=d+(c<<2)|0;f=s[p>>2]|0;if(!(f&3)){if(!(f&16)){y=t6(t,p)|0;s[p>>2]=s[p>>2]|16;s[d+(c+1<<2)>>2]=y;c=y}else c=s[d+(c+1<<2)>>2]|0;nT(r,c)}u=u+-1|0;if((u|0)<=0)break a;f=s[a>>2]|0}}else l=e+544|0;e=e+928|0;r=s[e>>2]|0;o=s[l>>2]|0;a=o+(r<<2)|0;if(!(s[a>>2]&16)){y=t6(t,a)|0;s[e>>2]=y;s[a>>2]=s[a>>2]|16;s[o+(r+1<<2)>>2]=y;h=n;return}else{s[e>>2]=s[o+(r+1<<2)>>2];h=n;return}}function np(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;o=h;h=h+32|0;c=o;t=o+8|0;n=e+544|0;r=e+548|0;a=e+556|0;l=(s[r>>2]|0)-(s[a>>2]|0)|0;s[t+0>>2]=0;s[t+4>>2]=0;s[t+8>>2]=0;s[t+12>>2]=0;tW(t,l);l=t+16|0;u=e+560|0;i[l>>0]=i[u>>0]|0;nd(e,t);tF(e,t);if((s[e+44>>2]|0)>1){f=s[t+4>>2]<<2;s[c>>2]=s[r>>2]<<2;s[c+4>>2]=f;eB(3608,c|0)}i[u>>0]=i[l>>0]|0;l=s[n>>2]|0;if(l)ic(l);s[n>>2]=s[t>>2];s[r>>2]=s[t+4>>2];s[e+552>>2]=s[t+8>>2];s[a>>2]=s[t+12>>2];h=o;return}function nm(){var e=0,t=0,n=0;e=h;h=h+16|0;t=e;i[2608]=0;i[2616]=1;i[2624]=2;to(2632,2656,2664,3744,3752);s[658]=160;i[2652]=0;to(2704,2728,2736,3744,3752);s[676]=160;i[2724]=0;to(2784,2808,2816,3744,3752);s[696]=160;i[2804]=1;to(2848,2880,2888,3744,3736);s[712]=280;n=2868;s[n>>2]=-2147483648;s[n+4>>2]=2147483647;s[719]=0;to(2960,2992,3e3,3744,3736);s[740]=280;n=2980;s[n>>2]=-1;s[n+4>>2]=2147483647;s[747]=20;to(3112,3144,3152,3744,3736);s[778]=280;n=3132;s[n>>2]=-1;s[n+4>>2]=2147483647;s[785]=1e3;to(3240,3296,3312,3744,3720);s[810]=2168;c[408]=0;c[409]=S;i[3280]=0;i[3281]=0;r[1641]=r[t+0>>1]|0;r[1642]=r[t+2>>1]|0;r[1643]=r[t+4>>1]|0;c[411]=.5;h=e;return}function ng(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0;n=h;s[e>>2]=0;i=e+4|0;s[i>>2]=0;r=e+8|0;s[r>>2]=0;if((t|0)<=0){h=n;return}a=t+1&-2;a=(a|0)>2?a:2;s[r>>2]=a;r=ih(0,a<<2)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0)e$(eS(1)|0,48,0);e=s[i>>2]|0;if((e|0)<(t|0))do{a=r+(e<<2)|0;if(a)s[a>>2]=0;e=e+1|0}while((e|0)!=(t|0))s[i>>2]=t;h=n;return}function nv(e){e=e|0;var t=0,n=0,i=0,r=0,a=0,o=0,l=0;t=h;i=e+32|0;n=s[i>>2]|0;if(n){s[e+36>>2]=0;ic(n);s[i>>2]=0;s[e+40>>2]=0}i=e+16|0;n=s[i>>2]|0;if(n){s[e+20>>2]=0;ic(n);s[i>>2]=0;s[e+24>>2]=0}i=s[e>>2]|0;if(!i){h=t;return}n=e+4|0;a=s[n>>2]|0;if((a|0)>0){r=0;do{l=i+(r*12|0)|0;o=s[l>>2]|0;if(o){s[i+(r*12|0)+4>>2]=0;ic(o);s[l>>2]=0;s[i+(r*12|0)+8>>2]=0;i=s[e>>2]|0;a=s[n>>2]|0}r=r+1|0}while((r|0)<(a|0))}s[n>>2]=0;ic(i);s[e>>2]=0;s[e+8>>2]=0;h=t;return}function n_(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;i=h;t=s[t>>2]|0;a=t+1|0;r=e+4|0;if((s[r>>2]|0)>=(a|0)){u=s[e>>2]|0;u=u+(t<<2)|0;s[u>>2]=n;h=i;return}o=e+8|0;u=s[o>>2]|0;if((u|0)<(a|0)){c=t+2-u&-2;l=(u>>1)+2&-2;l=(c|0)>(l|0)?c:l;if((l|0)>(2147483647-u|0)){c=eS(1)|0;e$(c|0,48,0)}f=s[e>>2]|0;c=l+u|0;s[o>>2]=c;c=ih(f,c<<2)|0;s[e>>2]=c;if((c|0)==0?(s[(eG()|0)>>2]|0)==12:0){f=eS(1)|0;e$(f|0,48,0)}}u=s[r>>2]|0;if((u|0)<(a|0)){o=s[e>>2]|0;do{l=o+(u<<2)|0;if(l)s[l>>2]=0;u=u+1|0}while((u|0)!=(a|0))}s[r>>2]=a;f=s[e>>2]|0;f=f+(t<<2)|0;s[f>>2]=n;h=i;return}function ny(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;n=h;u=s[t>>2]|0;a=u+1|0;r=e+4|0;if((s[r>>2]|0)<(a|0)){l=e+8|0;o=s[l>>2]|0;if((o|0)<(a|0)){c=u+2-o&-2;u=(o>>1)+2&-2;u=(c|0)>(u|0)?c:u;if((u|0)>(2147483647-o|0)){c=eS(1)|0;e$(c|0,48,0)}f=s[e>>2]|0;c=u+o|0;s[l>>2]=c;c=ih(f,c*12|0)|0;s[e>>2]=c;if((c|0)==0?(s[(eG()|0)>>2]|0)==12:0){f=eS(1)|0;e$(f|0,48,0)}}l=s[r>>2]|0;if((l|0)<(a|0)){o=s[e>>2]|0;do{u=o+(l*12|0)|0;if(u){s[u>>2]=0;s[o+(l*12|0)+4>>2]=0;s[o+(l*12|0)+8>>2]=0}l=l+1|0}while((l|0)!=(a|0))}s[r>>2]=a;o=s[t>>2]|0}else o=u;r=s[e>>2]|0;if(s[r+(o*12|0)>>2]|0){s[r+(o*12|0)+4>>2]=0;o=s[t>>2]|0}t=e+16|0;r=o+1|0;a=e+20|0;if((s[a>>2]|0)>=(r|0)){h=n;return}l=e+24|0;e=s[l>>2]|0;if((e|0)<(r|0)){f=o+2-e&-2;o=(e>>1)+2&-2;o=(f|0)>(o|0)?f:o;if((o|0)>(2147483647-e|0)){f=eS(1)|0;e$(f|0,48,0)}c=s[t>>2]|0;f=o+e|0;s[l>>2]=f;f=ih(c,f)|0;s[t>>2]=f;if((f|0)==0?(s[(eG()|0)>>2]|0)==12:0){f=eS(1)|0;e$(f|0,48,0)}}e=s[a>>2]|0;if((e|0)<(r|0))do{i[(s[t>>2]|0)+e>>0]=0;e=e+1|0}while((e|0)!=(r|0))s[a>>2]=r;h=n;return}function nx(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0;n=h;h=h+16|0;a=n;s[a>>2]=t;r=e+12|0;i=t+1|0;o=e+16|0;if((s[o>>2]|0)<(i|0)){u=e+20|0;l=s[u>>2]|0;if((l|0)<(i|0)){f=t+2-l&-2;c=(l>>1)+2&-2;c=(f|0)>(c|0)?f:c;if((c|0)>(2147483647-l|0)){f=eS(1)|0;e$(f|0,48,0)}d=s[r>>2]|0;f=c+l|0;s[u>>2]=f;f=ih(d,f<<2)|0;s[r>>2]=f;if((f|0)==0?(s[(eG()|0)>>2]|0)==12:0){d=eS(1)|0;e$(d|0,48,0)}}l=s[o>>2]|0;if((i|0)>(l|0))iR((s[r>>2]|0)+(l<<2)|0,-1,i-l<<2|0);s[o>>2]=i}s[(s[r>>2]|0)+(t<<2)>>2]=s[e+4>>2];tZ(e,a);i=s[r>>2]|0;l=s[i+(t<<2)>>2]|0;t=s[e>>2]|0;r=s[t+(l<<2)>>2]|0;if(!l){f=0;d=t+(f<<2)|0;s[d>>2]=r;d=i+(r<<2)|0;s[d>>2]=f;h=n;return}e=e+28|0;a=r<<1;o=a|1;while(true){f=l;l=l+-1>>1;c=t+(l<<2)|0;u=s[c>>2]|0;v=s[s[e>>2]>>2]|0;p=s[v+(a<<2)>>2]|0;g=s[v+(o<<2)>>2]|0;p=iH(g|0,((g|0)<0)<<31>>31|0,p|0,((p|0)<0)<<31>>31|0)|0;g=O;m=u<<1;d=s[v+(m<<2)>>2]|0;m=s[v+((m|1)<<2)>>2]|0;d=iH(m|0,((m|0)<0)<<31>>31|0,d|0,((d|0)<0)<<31>>31|0)|0;m=O;if(!(g>>>0<m>>>0|(g|0)==(m|0)&p>>>0<d>>>0)){e=14;break}s[t+(f<<2)>>2]=u;s[i+(s[c>>2]<<2)>>2]=f;if(!l){f=0;e=14;break}}if((e|0)==14){v=t+(f<<2)|0;s[v>>2]=r;v=i+(r<<2)|0;s[v>>2]=f;h=n;return}}function nb(e,t){e=e|0;t=t|0;var n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0;n=h;o=e+824|0;c=(s[e+840>>2]|0)>(t|0);if(c?(s[(s[e+836>>2]|0)+(t<<2)>>2]|0)>-1:0)l=7;else l=3;do if((l|0)==3){if(i[(s[e+876>>2]|0)+t>>0]|0){h=n;return}if(i[(s[e+904>>2]|0)+t>>0]|0){h=n;return}p=i[(s[e+332>>2]|0)+t>>0]|0;d=i[2624]|0;m=d&255;if((m>>>1^1)&p<<24>>24==d<<24>>24|p&2&m){if(c){l=7;break}else break}else{h=n;return}}while(0)if((l|0)==7?(r=s[e+836>>2]|0,a=r+(t<<2)|0,u=s[a>>2]|0,(u|0)>-1):0){t=s[o>>2]|0;l=s[t+(u<<2)>>2]|0;a:do if(!u)p=0;else{c=e+852|0;f=l<<1;e=f|1;while(true){p=u;u=u+-1>>1;m=t+(u<<2)|0;d=s[m>>2]|0;x=s[s[c>>2]>>2]|0;v=s[x+(f<<2)>>2]|0;y=s[x+(e<<2)>>2]|0;v=iH(y|0,((y|0)<0)<<31>>31|0,v|0,((v|0)<0)<<31>>31|0)|0;y=O;_=d<<1;g=s[x+(_<<2)>>2]|0;_=s[x+((_|1)<<2)>>2]|0;g=iH(_|0,((_|0)<0)<<31>>31|0,g|0,((g|0)<0)<<31>>31|0)|0;_=O;if(!(y>>>0<_>>>0|(y|0)==(_|0)&v>>>0<g>>>0))break a;s[t+(p<<2)>>2]=d;s[r+(s[m>>2]<<2)>>2]=p;if(!u){p=0;break}}}while(0)s[t+(p<<2)>>2]=l;s[r+(l<<2)>>2]=p;nw(o,s[a>>2]|0);h=n;return}nx(o,t);h=n;return}function nw(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0;n=h;i=s[e>>2]|0;r=s[i+(t<<2)>>2]|0;f=t<<1|1;c=e+4|0;p=s[c>>2]|0;if((f|0)>=(p|0)){m=t;g=e+12|0;p=i+(m<<2)|0;s[p>>2]=r;g=s[g>>2]|0;g=g+(r<<2)|0;s[g>>2]=m;h=n;return}o=e+28|0;u=r<<1;l=u|1;e=e+12|0;while(true){d=(t<<1)+2|0;if((d|0)<(p|0)){m=s[i+(d<<2)>>2]|0;g=s[i+(f<<2)>>2]|0;x=m<<1;p=s[s[o>>2]>>2]|0;_=s[p+(x<<2)>>2]|0;x=s[p+((x|1)<<2)>>2]|0;_=iH(x|0,((x|0)<0)<<31>>31|0,_|0,((_|0)<0)<<31>>31|0)|0;x=O;y=g<<1;v=s[p+(y<<2)>>2]|0;y=s[p+((y|1)<<2)>>2]|0;v=iH(y|0,((y|0)<0)<<31>>31|0,v|0,((v|0)<0)<<31>>31|0)|0;y=O;if(!(x>>>0<y>>>0|(x|0)==(y|0)&_>>>0<v>>>0)){m=g;a=7}}else{m=s[i+(f<<2)>>2]|0;p=s[s[o>>2]>>2]|0;a=7}if((a|0)==7){a=0;d=f}v=m<<1;y=s[p+(v<<2)>>2]|0;v=s[p+((v|1)<<2)>>2]|0;y=iH(v|0,((v|0)<0)<<31>>31|0,y|0,((y|0)<0)<<31>>31|0)|0;v=O;x=s[p+(u<<2)>>2]|0;_=s[p+(l<<2)>>2]|0;x=iH(_|0,((_|0)<0)<<31>>31|0,x|0,((x|0)<0)<<31>>31|0)|0;_=O;if(!(v>>>0<_>>>0|(v|0)==(_|0)&y>>>0<x>>>0)){a=10;break}s[i+(t<<2)>>2]=m;s[(s[e>>2]|0)+(m<<2)>>2]=t;f=d<<1|1;p=s[c>>2]|0;if((f|0)>=(p|0)){t=d;a=10;break}else t=d}if((a|0)==10){x=i+(t<<2)|0;s[x>>2]=r;x=s[e>>2]|0;x=x+(r<<2)|0;s[x>>2]=t;h=n;return}}function nM(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0;n=h;o=s[e>>2]|0;if(o){i=e+4|0;r=s[i>>2]|0;a:if((r|0)>0){a=0;while(true){l=o+(a*12|0)|0;u=s[l>>2]|0;if(u){s[o+(a*12|0)+4>>2]=0;ic(u);s[l>>2]=0;s[o+(a*12|0)+8>>2]=0;r=s[i>>2]|0}a=a+1|0;if((a|0)>=(r|0))break a;o=s[e>>2]|0}}s[i>>2]=0;if(t){ic(s[e>>2]|0);s[e>>2]=0;s[e+8>>2]=0}}i=e+16|0;r=s[i>>2]|0;if((r|0)!=0?(s[e+20>>2]=0,t):0){ic(r);s[i>>2]=0;s[e+24>>2]=0}r=e+32|0;i=s[r>>2]|0;if(!i){h=n;return}s[e+36>>2]=0;if(!t){h=n;return}ic(i);s[r>>2]=0;s[e+40>>2]=0;h=n;return}function nS(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0;i=h;r=s[e>>2]|0;n=e+4|0;if(r){s[n>>2]=0;if(t){ic(r);s[e>>2]=0;s[e+8>>2]=0;r=0}}else r=0;if((s[n>>2]|0)>=1){o=e+16|0;s[o>>2]=0;o=e+12|0;s[o>>2]=0;h=i;return}o=e+8|0;a=s[o>>2]|0;if((a|0)<1){l=2-a&-2;t=(a>>1)+2&-2;t=(l|0)>(t|0)?l:t;if((t|0)>(2147483647-a|0)){l=eS(1)|0;e$(l|0,48,0)}l=t+a|0;s[o>>2]=l;r=ih(r,l<<2)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0){l=eS(1)|0;e$(l|0,48,0)}}t=s[n>>2]|0;if((t|0)<1)while(true){a=r+(t<<2)|0;if(a)s[a>>2]=0;if(!t)break;else t=t+1|0}s[n>>2]=1;l=e+16|0;s[l>>2]=0;l=e+12|0;s[l>>2]=0;h=i;return}function nT(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;i=h;h=h+16|0;n=i;r=e+16|0;l=s[r>>2]|0;s[r>>2]=l+1;s[(s[e>>2]|0)+(l<<2)>>2]=t;l=s[r>>2]|0;t=e+4|0;o=s[t>>2]|0;if((l|0)==(o|0)){s[r>>2]=0;l=0}a=e+12|0;if((s[a>>2]|0)!=(l|0)){h=i;return}ng(n,(o*3|0)+1>>1);c=s[a>>2]|0;f=s[t>>2]|0;if((c|0)<(f|0)){l=s[e>>2]|0;u=s[n>>2]|0;f=0;while(true){o=f+1|0;s[u+(f<<2)>>2]=s[l+(c<<2)>>2];c=c+1|0;f=s[t>>2]|0;if((c|0)>=(f|0)){u=o;break}else f=o}}else u=0;o=s[e>>2]|0;if((s[r>>2]|0)>0){l=s[n>>2]|0;c=0;while(true){s[l+(u<<2)>>2]=s[o+(c<<2)>>2];c=c+1|0;if((c|0)>=(s[r>>2]|0))break;else u=u+1|0}f=s[t>>2]|0}s[a>>2]=0;s[r>>2]=f;if(!o)r=e+8|0;else{s[t>>2]=0;ic(o);s[e>>2]=0;r=e+8|0;s[r>>2]=0}s[e>>2]=s[n>>2];c=n+4|0;s[t>>2]=s[c>>2];f=n+8|0;s[r>>2]=s[f>>2];s[n>>2]=0;s[c>>2]=0;s[f>>2]=0;h=i;return}function nE(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0;n=h;i=e+4|0;r=s[i>>2]|0;a=e+8|0;o=s[a>>2]|0;if((r|0)==(o|0)&(o|0)<(r+1|0)){o=(r>>1)+2&-2;o=(o|0)<2?2:o;if((o|0)>(2147483647-r|0)){o=eS(1)|0;e$(o|0,48,0)}l=s[e>>2]|0;r=o+r|0;s[a>>2]=r;r=ih(l,r<<2)|0;s[e>>2]=r;if((r|0)==0?(s[(eG()|0)>>2]|0)==12:0){l=eS(1)|0;e$(l|0,48,0)}}else r=s[e>>2]|0;l=s[i>>2]|0;s[i>>2]=l+1;i=r+(l<<2)|0;if(!i){h=n;return}s[i>>2]=s[t>>2];h=n;return}function nA(){var e=0,t=0;t=h;ez(3864);e=nH(936)|0;t8(e);h=t;return e|0}function nC(e){e=e|0;var t=0;t=h;if(!e){h=t;return}ri[s[(s[e>>2]|0)+4>>2]&31](e);h=t;return}function nL(){var e=0,t=0,n=0;e=h;h=h+16|0;t=e;n=nH(936)|0;t8(n);s[964]=n;nn(n,1);n=s[964]|0;i[t+0>>0]=i[3840]|0;ne(n,t,1);h=e;return}function nR(e){e=e|0;var t=0,n=0,r=0;t=h;h=h+16|0;n=t;if((s[962]|0)>=(e|0)){h=t;return}do{r=s[964]|0;i[n+0>>0]=i[3840]|0;ne(r,n,1);r=(s[962]|0)+1|0;s[962]=r}while((r|0)<(e|0))h=t;return}function nD(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;a=h;h=h+32|0;o=a+16|0;n=a+4|0;l=a;s[n>>2]=0;r=n+4|0;s[r>>2]=0;t=n+8|0;s[t>>2]=0;u=s[e>>2]|0;if(u)do{c=(u|0)<0?0-u|0:u;if((s[962]|0)<(c|0))do{f=s[964]|0;i[o+0>>0]=i[3840]|0;ne(f,o,1);f=(s[962]|0)+1|0;s[962]=f}while((f|0)<(c|0))s[l>>2]=c<<1|u>>>31;tJ(n,l);e=e+4|0;u=s[e>>2]|0}while((u|0)!=0)l=s[964]|0;o=l+628|0;nz(n,o);o=ni(l,o)|0;l=s[n>>2]|0;if(!l){h=a;return o|0}s[r>>2]=0;ic(l);s[n>>2]=0;s[t>>2]=0;h=a;return o|0}function nP(){var e=0,t=0,n=0,r=0;t=h;h=h+16|0;e=t;n=s[964]|0;r=n+664|0;s[r+0>>2]=-1;s[r+4>>2]=-1;s[r+8>>2]=-1;s[r+12>>2]=-1;if(s[n+304>>2]|0)s[n+308>>2]=0;nt(e,n,1,0);h=t;return(i[e>>0]|0)==0|0}function nN(){return(s[(s[964]|0)+4>>2]|0)+1|0}function nO(){return s[962]|0}function nI(e){e=e|0;var t=0,n=0,r=0,a=0,o=0,l=0;t=h;h=h+32|0;o=t+16|0;r=t+4|0;l=t;s[r>>2]=0;n=r+4|0;s[n>>2]=0;a=r+8|0;s[a>>2]=0;s[l>>2]=e<<1;tJ(r,l);e=s[964]|0;l=e+664|0;s[l+0>>2]=-1;s[l+4>>2]=-1;s[l+8>>2]=-1;s[l+12>>2]=-1;nz(r,e+304|0);nt(o,e,1,0);e=(i[o>>0]|0)==0;o=s[r>>2]|0;if(!o){h=t;return e|0}s[n>>2]=0;ic(o);s[r>>2]=0;s[a>>2]=0;h=t;return e|0}function nk(e){e=e|0;var t=0,n=0,i=0;t=h;h=h+16|0;i=t;n=s[964]|0;s[i>>2]=e<<1|1;e=n+628|0;if(s[e>>2]|0)s[n+632>>2]=0;tJ(e,i);ni(n,e);h=t;return}function nU(){return s[(s[964]|0)+36>>2]|0}function nF(){return s[(s[964]|0)+32>>2]|0}function nz(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0;n=h;o=s[t>>2]|0;i=t+4|0;if(!o)l=s[i>>2]|0;else{s[i>>2]=0;l=0}i=e+4|0;r=s[i>>2]|0;a=t+4|0;if((l|0)<(r|0)){u=t+8|0;l=s[u>>2]|0;if((l|0)<(r|0)){f=r+1-l&-2;c=(l>>1)+2&-2;c=(f|0)>(c|0)?f:c;if((c|0)>(2147483647-l|0)){f=eS(1)|0;e$(f|0,48,0)}f=c+l|0;s[u>>2]=f;o=ih(o,f<<2)|0;s[t>>2]=o;if((o|0)==0?(s[(eG()|0)>>2]|0)==12:0){f=eS(1)|0;e$(f|0,48,0)}}l=s[a>>2]|0;a:{if((l|0)<(r|0))while(true){o=o+(l<<2)|0;if(o)s[o>>2]=0;l=l+1|0;if((l|0)==(r|0))break a;o=s[t>>2]|0}}s[a>>2]=r;r=s[i>>2]|0}if((r|0)<=0){h=n;return}t=s[t>>2]|0;e=s[e>>2]|0;r=0;do{s[t+(r<<2)>>2]=s[e+(r<<2)>>2];r=r+1|0}while((r|0)<(s[i>>2]|0))h=n;return}function nB(e,t){e=e|0;t=t|0;var n=0;n=h;h=h+16|0;s[n>>2]=t;t=s[_>>2]|0;eM(t|0,e|0,n|0);eX(10,t|0);eZ()}function nV(){var e=0,t=0;e=h;h=h+16|0;if(!(eF(4064,3)|0)){t=ek(s[1014]|0)|0;h=e;return t|0}else nB(4072,e);return 0}function nH(e){e=e|0;var t=0,n=0;t=h;e=(e|0)==0?1:e;n=iu(e)|0;if(n){h=t;return n|0}while(true){n=nY()|0;if(!n){e=4;break}ra[n&3]();n=iu(e)|0;if(n){e=5;break}}if((e|0)==4){n=eS(4)|0;s[n>>2]=4248;e$(n|0,4296,12)}else if((e|0)==5){h=t;return n|0}return 0}function nG(e){e=e|0;var t=0;t=h;ic(e);h=t;return}function nW(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function nj(e){e=e|0;return}function nq(e){e=e|0;return 4264}function nX(e){e=e|0;var t=0;t=h;h=h+16|0;ra[e&3]();nB(4312,t)}function n$(){var e=0,t=0;t=nV()|0;if(((t|0)!=0?(e=s[t>>2]|0,(e|0)!=0):0)?(t=e+48|0,(s[t>>2]&-256|0)==1126902528?(s[t+4>>2]|0)==1129074247:0):0)nX(s[e+12>>2]|0);t=s[968]|0;s[968]=t+0;nX(t)}function nY(){var e=0;e=s[1102]|0;s[1102]=e+0;return e|0}function nJ(e){e=e|0;return}function nZ(e){e=e|0;return}function nK(e){e=e|0;return}function nQ(e){e=e|0;return}function n0(e){e=e|0;return}function n1(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function n2(e){e=e|0;var t=0;t=h;nG(e);h=t;return}function n3(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0,o=0;i=h;h=h+64|0;r=i;if((e|0)==(t|0)){o=1;h=i;return o|0}if(!t){o=0;h=i;return o|0}t=n8(t,4504,4560,0)|0;if(!t){o=0;h=i;return o|0}o=r+0|0;a=o+56|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(a|0))s[r>>2]=t;s[r+8>>2]=e;s[r+12>>2]=-1;s[r+48>>2]=1;ru[s[(s[t>>2]|0)+28>>2]&3](t,r,s[n>>2]|0,1);if((s[r+24>>2]|0)!=1){o=0;h=i;return o|0}s[n>>2]=s[r+16>>2];o=1;h=i;return o|0}function n4(e,t,n,r){e=e|0;t=t|0;n=n|0;r=r|0;var a=0,o=0;e=h;a=t+16|0;o=s[a>>2]|0;if(!o){s[a>>2]=n;s[t+24>>2]=r;s[t+36>>2]=1;h=e;return}if((o|0)!=(n|0)){o=t+36|0;s[o>>2]=(s[o>>2]|0)+1;s[t+24>>2]=2;i[t+54>>0]=1;h=e;return}n=t+24|0;if((s[n>>2]|0)!=2){h=e;return}s[n>>2]=r;h=e;return}function n5(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=h;if((s[t+8>>2]|0)!=(e|0)){h=r;return}n4(0,t,n,i);h=r;return}function n6(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0;r=h;if((e|0)==(s[t+8>>2]|0)){n4(0,t,n,i);h=r;return}else{e=s[e+8>>2]|0;ru[s[(s[e>>2]|0)+28>>2]&3](e,t,n,i);h=r;return}}function n8(e,t,n,a){e=e|0;t=t|0;n=n|0;a=a|0;var o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0;o=h;h=h+64|0;l=o;u=s[e>>2]|0;c=e+(s[u+-8>>2]|0)|0;u=s[u+-4>>2]|0;s[l>>2]=n;s[l+4>>2]=e;s[l+8>>2]=t;s[l+12>>2]=a;d=l+16|0;p=l+20|0;t=l+24|0;f=l+28|0;a=l+32|0;e=l+40|0;m=(u|0)==(n|0);g=d+0|0;n=g+36|0;do{s[g>>2]=0;g=g+4|0}while((g|0)<(n|0))r[d+36>>1]=0;i[d+38>>0]=0;if(m){s[l+48>>2]=1;ro[s[(s[u>>2]|0)+20>>2]&3](u,l,c,c,1,0);g=(s[t>>2]|0)==1?c:0;h=o;return g|0}rn[s[(s[u>>2]|0)+24>>2]&3](u,l,c,1,0);l=s[l+36>>2]|0;if(!l){g=(s[e>>2]|0)==1&(s[f>>2]|0)==1&(s[a>>2]|0)==1?s[p>>2]|0:0;h=o;return g|0}else if((l|0)==1){if((s[t>>2]|0)!=1?!((s[e>>2]|0)==0&(s[f>>2]|0)==1&(s[a>>2]|0)==1):0){g=0;h=o;return g|0}g=s[d>>2]|0;h=o;return g|0}else{g=0;h=o;return g|0}return 0}function n9(e,t,n,r,a){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;var o=0;e=h;i[t+53>>0]=1;if((s[t+4>>2]|0)!=(r|0)){h=e;return}i[t+52>>0]=1;r=t+16|0;o=s[r>>2]|0;if(!o){s[r>>2]=n;s[t+24>>2]=a;s[t+36>>2]=1;if(!((a|0)==1?(s[t+48>>2]|0)==1:0)){h=e;return}i[t+54>>0]=1;h=e;return}if((o|0)!=(n|0)){o=t+36|0;s[o>>2]=(s[o>>2]|0)+1;i[t+54>>0]=1;h=e;return}n=t+24|0;r=s[n>>2]|0;if((r|0)==2)s[n>>2]=a;else a=r;if(!((a|0)==1?(s[t+48>>2]|0)==1:0)){h=e;return}i[t+54>>0]=1;h=e;return}function n7(e,t,n,r,a){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;var o=0,l=0,u=0,c=0,f=0;o=h;if((e|0)==(s[t+8>>2]|0)){if((s[t+4>>2]|0)!=(n|0)){h=o;return}l=t+28|0;if((s[l>>2]|0)==1){h=o;return}s[l>>2]=r;h=o;return}if((e|0)!=(s[t>>2]|0)){c=s[e+8>>2]|0;rn[s[(s[c>>2]|0)+24>>2]&3](c,t,n,r,a);h=o;return}if((s[t+16>>2]|0)!=(n|0)?(u=t+20|0,(s[u>>2]|0)!=(n|0)):0){s[t+32>>2]=r;r=t+44|0;if((s[r>>2]|0)==4){h=o;return}c=t+52|0;i[c>>0]=0;f=t+53|0;i[f>>0]=0;e=s[e+8>>2]|0;ro[s[(s[e>>2]|0)+20>>2]&3](e,t,n,n,1,a);if(i[f>>0]|0){if(!(i[c>>0]|0)){e=1;l=13}}else{e=0;l=13}do if((l|0)==13){s[u>>2]=n;f=t+40|0;s[f>>2]=(s[f>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0){i[t+54>>0]=1;if(e)break}else l=16;if((l|0)==16?e:0)break;s[r>>2]=4;h=o;return}while(0)s[r>>2]=3;h=o;return}if((r|0)!=1){h=o;return}s[t+32>>2]=1;h=o;return}function ie(e,t,n,r,a){e=e|0;t=t|0;n=n|0;r=r|0;a=a|0;var o=0;a=h;if((s[t+8>>2]|0)==(e|0)){if((s[t+4>>2]|0)!=(n|0)){h=a;return}t=t+28|0;if((s[t>>2]|0)==1){h=a;return}s[t>>2]=r;h=a;return}if((s[t>>2]|0)!=(e|0)){h=a;return}if((s[t+16>>2]|0)!=(n|0)?(o=t+20|0,(s[o>>2]|0)!=(n|0)):0){s[t+32>>2]=r;s[o>>2]=n;e=t+40|0;s[e>>2]=(s[e>>2]|0)+1;if((s[t+36>>2]|0)==1?(s[t+24>>2]|0)==2:0)i[t+54>>0]=1;s[t+44>>2]=4;h=a;return}if((r|0)!=1){h=a;return}s[t+32>>2]=1;h=a;return}function it(e,t,n,i,r,a){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;var o=0;o=h;if((e|0)==(s[t+8>>2]|0)){n9(0,t,n,i,r);h=o;return}else{e=s[e+8>>2]|0;ro[s[(s[e>>2]|0)+20>>2]&3](e,t,n,i,r,a);h=o;return}}function ii(e,t,n,i,r,a){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;a=a|0;a=h;if((s[t+8>>2]|0)!=(e|0)){h=a;return}n9(0,t,n,i,r);h=a;return}function ir(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0;i=h;h=h+16|0;r=i;s[r>>2]=s[n>>2];e=rt[s[(s[e>>2]|0)+16>>2]&1](e,t,r)|0;t=e&1;if(!e){h=i;return t|0}s[n>>2]=s[r>>2];h=i;return t|0}function is(e){e=e|0;var t=0;t=h;if(!e)e=0;else e=(n8(e,4504,4672,0)|0)!=0;h=t;return e&1|0}function ia(){var e=0,t=0,n=0,i=0,r=0;e=h;h=h+16|0;t=e;e=e+12|0;n=nV()|0;if(!n)nB(4040,t);n=s[n>>2]|0;if(!n)nB(4040,t);r=n+48|0;i=s[r>>2]|0;r=s[r+4>>2]|0;if(!((i&-256|0)==1126902528&(r|0)==1129074247)){s[t>>2]=s[970];nB(4e3,t)}if((i|0)==1126902529&(r|0)==1129074247)i=s[n+44>>2]|0;else i=n+80|0;s[e>>2]=i;r=s[n>>2]|0;n=s[r+4>>2]|0;if(rt[s[(s[1108]|0)+16>>2]&1](4432,r,e)|0){r=s[e>>2]|0;i=s[970]|0;r=rs[s[(s[r>>2]|0)+8>>2]&1](r)|0;s[t>>2]=i;s[t+4>>2]=n;s[t+8>>2]=r;nB(3904,t)}else{s[t>>2]=s[970];s[t+4>>2]=n;nB(3952,t)}}function io(){var e=0;e=h;h=h+16|0;if(!(eV(4056,20)|0)){h=e;return}else nB(4128,e)}function il(e){e=e|0;var t=0;t=h;h=h+16|0;ic(e);if(!(eW(s[1014]|0,0)|0)){h=t;return}else nB(4184,t)}function iu(e){e=e|0;var t=0,n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,M=0,S=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0;t=h;do if(e>>>0<245){if(e>>>0<11)e=16;else e=e+11&-8;M=e>>>3;m=s[1206]|0;w=m>>>M;if(w&3){a=(w&1^1)+M|0;r=a<<1;n=4864+(r<<2)|0;r=4864+(r+2<<2)|0;o=s[r>>2]|0;l=o+8|0;i=s[l>>2]|0;do if((n|0)!=(i|0)){if(i>>>0<(s[1210]|0)>>>0)eZ();u=i+12|0;if((s[u>>2]|0)==(o|0)){s[u>>2]=n;s[r>>2]=i;break}else eZ()}else s[1206]=m&~(1<<a);while(0)N=a<<3;s[o+4>>2]=N|3;N=o+(N|4)|0;s[N>>2]=s[N>>2]|1;N=l;h=t;return N|0}b=s[1208]|0;if(e>>>0>b>>>0){if(w){o=2<<M;o=w<<M&(o|0-o);o=(o&0-o)+-1|0;n=o>>>12&16;o=o>>>n;l=o>>>5&8;o=o>>>l;r=o>>>2&4;o=o>>>r;a=o>>>1&2;o=o>>>a;i=o>>>1&1;i=(l|n|r|a|i)+(o>>>i)|0;o=i<<1;a=4864+(o<<2)|0;o=4864+(o+2<<2)|0;r=s[o>>2]|0;n=r+8|0;l=s[n>>2]|0;do if((a|0)!=(l|0)){if(l>>>0<(s[1210]|0)>>>0)eZ();u=l+12|0;if((s[u>>2]|0)==(r|0)){s[u>>2]=a;s[o>>2]=l;R=s[1208]|0;break}else eZ()}else{s[1206]=m&~(1<<i);R=b}while(0)N=i<<3;i=N-e|0;s[r+4>>2]=e|3;a=r+e|0;s[r+(e|4)>>2]=i|1;s[r+N>>2]=i;if(R){r=s[1211]|0;c=R>>>3;l=c<<1;o=4864+(l<<2)|0;u=s[1206]|0;c=1<<c;if(u&c){l=4864+(l+2<<2)|0;u=s[l>>2]|0;if(u>>>0<(s[1210]|0)>>>0)eZ();else{L=l;C=u}}else{s[1206]=u|c;L=4864+(l+2<<2)|0;C=o}s[L>>2]=r;s[C+12>>2]=r;s[r+8>>2]=C;s[r+12>>2]=o}s[1208]=i;s[1211]=a;N=n;h=t;return N|0}m=s[1207]|0;if(m){n=(m&0-m)+-1|0;P=n>>>12&16;n=n>>>P;D=n>>>5&8;n=n>>>D;N=n>>>2&4;n=n>>>N;r=n>>>1&2;n=n>>>r;i=n>>>1&1;i=s[5128+((D|P|N|r|i)+(n>>>i)<<2)>>2]|0;n=(s[i+4>>2]&-8)-e|0;r=i;while(true){a=s[r+16>>2]|0;if(!a){a=s[r+20>>2]|0;if(!a)break}r=(s[a+4>>2]&-8)-e|0;N=r>>>0<n>>>0;n=N?r:n;r=a;i=N?a:i}o=s[1210]|0;if(i>>>0<o>>>0)eZ();r=i+e|0;if(i>>>0>=r>>>0)eZ();a=s[i+24>>2]|0;u=s[i+12>>2]|0;do if((u|0)==(i|0)){u=i+20|0;l=s[u>>2]|0;if(!l){u=i+16|0;l=s[u>>2]|0;if(!l){A=0;break}}while(true){c=l+20|0;f=s[c>>2]|0;if(f){l=f;u=c;continue}c=l+16|0;f=s[c>>2]|0;if(!f)break;else{l=f;u=c}}if(u>>>0<o>>>0)eZ();else{s[u>>2]=0;A=l;break}}else{l=s[i+8>>2]|0;if(l>>>0<o>>>0)eZ();o=l+12|0;if((s[o>>2]|0)!=(i|0))eZ();c=u+8|0;if((s[c>>2]|0)==(i|0)){s[o>>2]=u;s[c>>2]=l;A=u;break}else eZ()}while(0)do if(a){l=s[i+28>>2]|0;o=5128+(l<<2)|0;if((i|0)==(s[o>>2]|0)){s[o>>2]=A;if(!A){s[1207]=s[1207]&~(1<<l);break}}else{if(a>>>0<(s[1210]|0)>>>0)eZ();o=a+16|0;if((s[o>>2]|0)==(i|0))s[o>>2]=A;else s[a+20>>2]=A;if(!A)break}o=s[1210]|0;if(A>>>0<o>>>0)eZ();s[A+24>>2]=a;a=s[i+16>>2]|0;do if(a){if(a>>>0<o>>>0)eZ();else{s[A+16>>2]=a;s[a+24>>2]=A;break}}while(0)a=s[i+20>>2]|0;if(a){if(a>>>0<(s[1210]|0)>>>0)eZ();else{s[A+20>>2]=a;s[a+24>>2]=A;break}}}while(0)if(n>>>0<16){N=n+e|0;s[i+4>>2]=N|3;N=i+(N+4)|0;s[N>>2]=s[N>>2]|1}else{s[i+4>>2]=e|3;s[i+(e|4)>>2]=n|1;s[i+(n+e)>>2]=n;o=s[1208]|0;if(o){a=s[1211]|0;u=o>>>3;c=u<<1;o=4864+(c<<2)|0;l=s[1206]|0;u=1<<u;if(l&u){l=4864+(c+2<<2)|0;u=s[l>>2]|0;if(u>>>0<(s[1210]|0)>>>0)eZ();else{E=l;T=u}}else{s[1206]=l|u;E=4864+(c+2<<2)|0;T=o}s[E>>2]=a;s[T+12>>2]=a;s[a+8>>2]=T;s[a+12>>2]=o}s[1208]=n;s[1211]=r}N=i+8|0;h=t;return N|0}}}else if(e>>>0<=4294967231){T=e+11|0;e=T&-8;A=s[1207]|0;if(A){E=0-e|0;T=T>>>8;if(T){if(e>>>0>16777215)C=31;else{P=(T+1048320|0)>>>16&8;N=T<<P;D=(N+520192|0)>>>16&4;N=N<<D;C=(N+245760|0)>>>16&2;C=14-(D|P|C)+(N<<C>>>15)|0;C=e>>>(C+7|0)&1|C<<1}}else C=0;L=s[5128+(C<<2)>>2]|0;a:do if(!L){D=0;T=0}else{if((C|0)==31)T=0;else T=25-(C>>>1)|0;D=0;R=e<<T;T=0;while(true){P=s[L+4>>2]&-8;N=P-e|0;if(N>>>0<E>>>0){if((P|0)==(e|0)){E=N;D=L;T=L;break a}else{E=N;T=L}}N=s[L+20>>2]|0;L=s[L+(R>>>31<<2)+16>>2]|0;D=(N|0)==0|(N|0)==(L|0)?D:N;if(!L)break;else R=R<<1}}while(0)if((D|0)==0&(T|0)==0){N=2<<C;A=A&(N|0-N);if(!A)break;N=(A&0-A)+-1|0;L=N>>>12&16;N=N>>>L;C=N>>>5&8;N=N>>>C;R=N>>>2&4;N=N>>>R;P=N>>>1&2;N=N>>>P;D=N>>>1&1;D=s[5128+((C|L|R|P|D)+(N>>>D)<<2)>>2]|0}if(D)while(true){N=(s[D+4>>2]&-8)-e|0;A=N>>>0<E>>>0;E=A?N:E;T=A?D:T;A=s[D+16>>2]|0;if(A){D=A;continue}D=s[D+20>>2]|0;if(!D)break}if((T|0)!=0?E>>>0<((s[1208]|0)-e|0)>>>0:0){r=s[1210]|0;if(T>>>0<r>>>0)eZ();n=T+e|0;if(T>>>0>=n>>>0)eZ();i=s[T+24>>2]|0;a=s[T+12>>2]|0;do if((a|0)==(T|0)){o=T+20|0;a=s[o>>2]|0;if(!a){o=T+16|0;a=s[o>>2]|0;if(!a){M=0;break}}while(true){l=a+20|0;u=s[l>>2]|0;if(u){a=u;o=l;continue}l=a+16|0;u=s[l>>2]|0;if(!u)break;else{a=u;o=l}}if(o>>>0<r>>>0)eZ();else{s[o>>2]=0;M=a;break}}else{o=s[T+8>>2]|0;if(o>>>0<r>>>0)eZ();l=o+12|0;if((s[l>>2]|0)!=(T|0))eZ();r=a+8|0;if((s[r>>2]|0)==(T|0)){s[l>>2]=a;s[r>>2]=o;M=a;break}else eZ()}while(0)do if(i){r=s[T+28>>2]|0;a=5128+(r<<2)|0;if((T|0)==(s[a>>2]|0)){s[a>>2]=M;if(!M){s[1207]=s[1207]&~(1<<r);break}}else{if(i>>>0<(s[1210]|0)>>>0)eZ();r=i+16|0;if((s[r>>2]|0)==(T|0))s[r>>2]=M;else s[i+20>>2]=M;if(!M)break}r=s[1210]|0;if(M>>>0<r>>>0)eZ();s[M+24>>2]=i;i=s[T+16>>2]|0;do if(i){if(i>>>0<r>>>0)eZ();else{s[M+16>>2]=i;s[i+24>>2]=M;break}}while(0)i=s[T+20>>2]|0;if(i){if(i>>>0<(s[1210]|0)>>>0)eZ();else{s[M+20>>2]=i;s[i+24>>2]=M;break}}}while(0)o:do if(E>>>0>=16){s[T+4>>2]=e|3;s[T+(e|4)>>2]=E|1;s[T+(E+e)>>2]=E;r=E>>>3;if(E>>>0<256){o=r<<1;i=4864+(o<<2)|0;a=s[1206]|0;r=1<<r;do if(!(a&r)){s[1206]=a|r;w=4864+(o+2<<2)|0;b=i}else{r=4864+(o+2<<2)|0;a=s[r>>2]|0;if(a>>>0>=(s[1210]|0)>>>0){w=r;b=a;break}eZ()}while(0)s[w>>2]=n;s[b+12>>2]=n;s[T+(e+8)>>2]=b;s[T+(e+12)>>2]=i;break}i=E>>>8;if(i){if(E>>>0>16777215)i=31;else{P=(i+1048320|0)>>>16&8;N=i<<P;D=(N+520192|0)>>>16&4;N=N<<D;i=(N+245760|0)>>>16&2;i=14-(D|P|i)+(N<<i>>>15)|0;i=E>>>(i+7|0)&1|i<<1}}else i=0;r=5128+(i<<2)|0;s[T+(e+28)>>2]=i;s[T+(e+20)>>2]=0;s[T+(e+16)>>2]=0;a=s[1207]|0;o=1<<i;if(!(a&o)){s[1207]=a|o;s[r>>2]=n;s[T+(e+24)>>2]=r;s[T+(e+12)>>2]=n;s[T+(e+8)>>2]=n;break}o=s[r>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;l:do if((s[o+4>>2]&-8|0)!=(E|0)){i=E<<i;while(true){a=o+(i>>>31<<2)+16|0;r=s[a>>2]|0;if(!r)break;if((s[r+4>>2]&-8|0)==(E|0)){m=r;break l}else{i=i<<1;o=r}}if(a>>>0<(s[1210]|0)>>>0)eZ();else{s[a>>2]=n;s[T+(e+24)>>2]=o;s[T+(e+12)>>2]=n;s[T+(e+8)>>2]=n;break o}}else m=o;while(0)r=m+8|0;i=s[r>>2]|0;N=s[1210]|0;if(m>>>0>=N>>>0&i>>>0>=N>>>0){s[i+12>>2]=n;s[r>>2]=n;s[T+(e+8)>>2]=i;s[T+(e+12)>>2]=m;s[T+(e+24)>>2]=0;break}else eZ()}else{N=E+e|0;s[T+4>>2]=N|3;N=T+(N+4)|0;s[N>>2]=s[N>>2]|1}while(0)N=T+8|0;h=t;return N|0}}}else e=-1;while(0)m=s[1208]|0;if(m>>>0>=e>>>0){i=m-e|0;n=s[1211]|0;if(i>>>0>15){s[1211]=n+e;s[1208]=i;s[n+(e+4)>>2]=i|1;s[n+m>>2]=i;s[n+4>>2]=e|3}else{s[1208]=0;s[1211]=0;s[n+4>>2]=m|3;N=n+(m+4)|0;s[N>>2]=s[N>>2]|1}N=n+8|0;h=t;return N|0}m=s[1209]|0;if(m>>>0>e>>>0){P=m-e|0;s[1209]=P;N=s[1212]|0;s[1212]=N+e;s[N+(e+4)>>2]=P|1;s[N+4>>2]=e|3;N=N+8|0;h=t;return N|0}do if(!(s[1324]|0)){m=eI(30)|0;if(!(m+-1&m)){s[1326]=m;s[1325]=m;s[1327]=-1;s[1328]=-1;s[1329]=0;s[1317]=0;s[1324]=(eQ(0)|0)&-16^1431655768;break}else eZ()}while(0)M=e+48|0;m=s[1326]|0;w=e+47|0;E=m+w|0;m=0-m|0;b=E&m;if(b>>>0<=e>>>0){N=0;h=t;return N|0}T=s[1316]|0;if((T|0)!=0?(P=s[1314]|0,N=P+b|0,N>>>0<=P>>>0|N>>>0>T>>>0):0){N=0;h=t;return N|0}u:do if(!(s[1317]&4)){A=s[1212]|0;c:do if(A){T=5272;while(true){C=s[T>>2]|0;if(C>>>0<=A>>>0?(S=T+4|0,(C+(s[S>>2]|0)|0)>>>0>A>>>0):0)break;T=s[T+8>>2]|0;if(!T){p=181;break c}}if(T){E=E-(s[1209]|0)&m;if(E>>>0<2147483647){m=eL(E|0)|0;if((m|0)==((s[T>>2]|0)+(s[S>>2]|0)|0)){T=E;p=190}else{T=E;p=191}}else T=0}else p=181}else p=181;while(0)do if((p|0)==181){S=eL(0)|0;if((S|0)!=-1){E=S;T=s[1325]|0;m=T+-1|0;if(!(m&E))T=b;else T=b-E+(m+E&0-T)|0;m=s[1314]|0;E=m+T|0;if(T>>>0>e>>>0&T>>>0<2147483647){N=s[1316]|0;if((N|0)!=0?E>>>0<=m>>>0|E>>>0>N>>>0:0){T=0;break}m=eL(T|0)|0;if((m|0)==(S|0)){m=S;p=190}else p=191}else T=0}else T=0}while(0)h:do if((p|0)==190){if((m|0)!=-1){g=T;p=201;break u}}else if((p|0)==191){p=0-T|0;do if((m|0)!=-1&T>>>0<2147483647&M>>>0>T>>>0?(x=s[1326]|0,x=w-T+x&0-x,x>>>0<2147483647):0){if((eL(x|0)|0)==-1){eL(p|0);T=0;break h}else{T=x+T|0;break}}while(0)if((m|0)==-1)T=0;else{g=T;p=201;break u}}while(0)s[1317]=s[1317]|4;p=198}else{T=0;p=198}while(0)if((((p|0)==198?b>>>0<2147483647:0)?(y=eL(b|0)|0,_=eL(0)|0,(y|0)!=-1&(_|0)!=-1&y>>>0<_>>>0):0)?(v=_-y|0,g=v>>>0>(e+40|0)>>>0,g):0){m=y;g=g?v:T;p=201}if((p|0)==201){v=(s[1314]|0)+g|0;s[1314]=v;if(v>>>0>(s[1315]|0)>>>0)s[1315]=v;v=s[1212]|0;f:do if(v){y=5272;while(true){_=s[y>>2]|0;b=y+4|0;w=s[b>>2]|0;if((m|0)==(_+w|0)){p=213;break}x=s[y+8>>2]|0;if(!x)break;else y=x}if(((p|0)==213?(s[y+12>>2]&8|0)==0:0)?v>>>0>=_>>>0&v>>>0<m>>>0:0){s[b>>2]=w+g;n=(s[1209]|0)+g|0;i=v+8|0;if(!(i&7))i=0;else i=0-i&7;N=n-i|0;s[1212]=v+i;s[1209]=N;s[v+(i+4)>>2]=N|1;s[v+(n+4)>>2]=40;s[1213]=s[1328];break}_=s[1210]|0;if(m>>>0<_>>>0){s[1210]=m;_=m}b=m+g|0;y=5272;while(true){if((s[y>>2]|0)==(b|0)){p=223;break}x=s[y+8>>2]|0;if(!x)break;else y=x}if((p|0)==223?(s[y+12>>2]&8|0)==0:0){s[y>>2]=m;o=y+4|0;s[o>>2]=(s[o>>2]|0)+g;o=m+8|0;if(!(o&7))o=0;else o=0-o&7;l=m+(g+8)|0;if(!(l&7))d=0;else d=0-l&7;p=m+(d+g)|0;u=o+e|0;l=m+u|0;f=p-(m+o)-e|0;s[m+(o+4)>>2]=e|3;d:do if((p|0)!=(v|0)){if((p|0)==(s[1211]|0)){N=(s[1208]|0)+f|0;s[1208]=N;s[1211]=l;s[m+(u+4)>>2]=N|1;s[m+(N+u)>>2]=N;break}v=g+4|0;x=s[m+(v+d)>>2]|0;if((x&3|0)==1){e=x&-8;y=x>>>3;p:do if(x>>>0>=256){c=s[m+((d|24)+g)>>2]|0;y=s[m+(g+12+d)>>2]|0;do if((y|0)==(p|0)){b=d|16;x=m+(v+b)|0;y=s[x>>2]|0;if(!y){x=m+(b+g)|0;y=s[x>>2]|0;if(!y){a=0;break}}while(true){w=y+20|0;b=s[w>>2]|0;if(b){y=b;x=w;continue}w=y+16|0;b=s[w>>2]|0;if(!b)break;else{y=b;x=w}}if(x>>>0<_>>>0)eZ();else{s[x>>2]=0;a=y;break}}else{x=s[m+((d|8)+g)>>2]|0;if(x>>>0<_>>>0)eZ();b=x+12|0;if((s[b>>2]|0)!=(p|0))eZ();_=y+8|0;if((s[_>>2]|0)==(p|0)){s[b>>2]=y;s[_>>2]=x;a=y;break}else eZ()}while(0)if(!c)break;_=s[m+(g+28+d)>>2]|0;y=5128+(_<<2)|0;do if((p|0)!=(s[y>>2]|0)){if(c>>>0<(s[1210]|0)>>>0)eZ();_=c+16|0;if((s[_>>2]|0)==(p|0))s[_>>2]=a;else s[c+20>>2]=a;if(!a)break p}else{s[y>>2]=a;if(a)break;s[1207]=s[1207]&~(1<<_);break p}while(0)p=s[1210]|0;if(a>>>0<p>>>0)eZ();s[a+24>>2]=c;_=d|16;c=s[m+(_+g)>>2]|0;do if(c){if(c>>>0<p>>>0)eZ();else{s[a+16>>2]=c;s[c+24>>2]=a;break}}while(0)c=s[m+(v+_)>>2]|0;if(!c)break;if(c>>>0<(s[1210]|0)>>>0)eZ();else{s[a+20>>2]=c;s[c+24>>2]=a;break}}else{a=s[m+((d|8)+g)>>2]|0;v=s[m+(g+12+d)>>2]|0;x=4864+(y<<1<<2)|0;do if((a|0)!=(x|0)){if(a>>>0<_>>>0)eZ();if((s[a+12>>2]|0)==(p|0))break;eZ()}while(0)if((v|0)==(a|0)){s[1206]=s[1206]&~(1<<y);break}do if((v|0)==(x|0))c=v+8|0;else{if(v>>>0<_>>>0)eZ();_=v+8|0;if((s[_>>2]|0)==(p|0)){c=_;break}eZ()}while(0)s[a+12>>2]=v;s[c>>2]=a}while(0)p=m+((e|d)+g)|0;f=e+f|0}a=p+4|0;s[a>>2]=s[a>>2]&-2;s[m+(u+4)>>2]=f|1;s[m+(f+u)>>2]=f;a=f>>>3;if(f>>>0<256){c=a<<1;n=4864+(c<<2)|0;f=s[1206]|0;a=1<<a;do if(!(f&a)){s[1206]=f|a;r=4864+(c+2<<2)|0;i=n}else{c=4864+(c+2<<2)|0;a=s[c>>2]|0;if(a>>>0>=(s[1210]|0)>>>0){r=c;i=a;break}eZ()}while(0)s[r>>2]=l;s[i+12>>2]=l;s[m+(u+8)>>2]=i;s[m+(u+12)>>2]=n;break}i=f>>>8;do if(!i)i=0;else{if(f>>>0>16777215){i=31;break}P=(i+1048320|0)>>>16&8;N=i<<P;D=(N+520192|0)>>>16&4;N=N<<D;i=(N+245760|0)>>>16&2;i=14-(D|P|i)+(N<<i>>>15)|0;i=f>>>(i+7|0)&1|i<<1}while(0)c=5128+(i<<2)|0;s[m+(u+28)>>2]=i;s[m+(u+20)>>2]=0;s[m+(u+16)>>2]=0;a=s[1207]|0;r=1<<i;if(!(a&r)){s[1207]=a|r;s[c>>2]=l;s[m+(u+24)>>2]=c;s[m+(u+12)>>2]=l;s[m+(u+8)>>2]=l;break}r=s[c>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;m:do if((s[r+4>>2]&-8|0)!=(f|0)){i=f<<i;while(true){a=r+(i>>>31<<2)+16|0;c=s[a>>2]|0;if(!c)break;if((s[c+4>>2]&-8|0)==(f|0)){n=c;break m}else{i=i<<1;r=c}}if(a>>>0<(s[1210]|0)>>>0)eZ();else{s[a>>2]=l;s[m+(u+24)>>2]=r;s[m+(u+12)>>2]=l;s[m+(u+8)>>2]=l;break d}}else n=r;while(0)i=n+8|0;r=s[i>>2]|0;N=s[1210]|0;if(n>>>0>=N>>>0&r>>>0>=N>>>0){s[r+12>>2]=l;s[i>>2]=l;s[m+(u+8)>>2]=r;s[m+(u+12)>>2]=n;s[m+(u+24)>>2]=0;break}else eZ()}else{N=(s[1209]|0)+f|0;s[1209]=N;s[1212]=l;s[m+(u+4)>>2]=N|1}while(0)N=m+(o|8)|0;h=t;return N|0}i=5272;while(true){n=s[i>>2]|0;if(n>>>0<=v>>>0?(d=s[i+4>>2]|0,f=n+d|0,f>>>0>v>>>0):0)break;i=s[i+8>>2]|0}i=n+(d+-39)|0;if(!(i&7))i=0;else i=0-i&7;n=n+(d+-47+i)|0;n=n>>>0<(v+16|0)>>>0?v:n;i=n+8|0;r=m+8|0;if(!(r&7))r=0;else r=0-r&7;N=g+-40-r|0;s[1212]=m+r;s[1209]=N;s[m+(r+4)>>2]=N|1;s[m+(g+-36)>>2]=40;s[1213]=s[1328];s[n+4>>2]=27;s[i+0>>2]=s[1318];s[i+4>>2]=s[1319];s[i+8>>2]=s[1320];s[i+12>>2]=s[1321];s[1318]=m;s[1319]=g;s[1321]=0;s[1320]=i;i=n+28|0;s[i>>2]=7;if((n+32|0)>>>0<f>>>0)do{N=i;i=i+4|0;s[i>>2]=7}while((N+8|0)>>>0<f>>>0)if((n|0)!=(v|0)){n=n-v|0;i=v+(n+4)|0;s[i>>2]=s[i>>2]&-2;s[v+4>>2]=n|1;s[v+n>>2]=n;i=n>>>3;if(n>>>0<256){r=i<<1;n=4864+(r<<2)|0;a=s[1206]|0;i=1<<i;do if(!(a&i)){s[1206]=a|i;u=4864+(r+2<<2)|0;l=n}else{r=4864+(r+2<<2)|0;i=s[r>>2]|0;if(i>>>0>=(s[1210]|0)>>>0){u=r;l=i;break}eZ()}while(0)s[u>>2]=v;s[l+12>>2]=v;s[v+8>>2]=l;s[v+12>>2]=n;break}i=n>>>8;if(i){if(n>>>0>16777215)i=31;else{P=(i+1048320|0)>>>16&8;N=i<<P;D=(N+520192|0)>>>16&4;N=N<<D;i=(N+245760|0)>>>16&2;i=14-(D|P|i)+(N<<i>>>15)|0;i=n>>>(i+7|0)&1|i<<1}}else i=0;l=5128+(i<<2)|0;s[v+28>>2]=i;s[v+20>>2]=0;s[v+16>>2]=0;r=s[1207]|0;a=1<<i;if(!(r&a)){s[1207]=r|a;s[l>>2]=v;s[v+24>>2]=l;s[v+12>>2]=v;s[v+8>>2]=v;break}r=s[l>>2]|0;if((i|0)==31)i=0;else i=25-(i>>>1)|0;g:do if((s[r+4>>2]&-8|0)!=(n|0)){i=n<<i;l=r;while(true){r=l+(i>>>31<<2)+16|0;a=s[r>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(n|0)){o=a;break g}else{i=i<<1;l=a}}if(r>>>0<(s[1210]|0)>>>0)eZ();else{s[r>>2]=v;s[v+24>>2]=l;s[v+12>>2]=v;s[v+8>>2]=v;break f}}else o=r;while(0)i=o+8|0;n=s[i>>2]|0;N=s[1210]|0;if(o>>>0>=N>>>0&n>>>0>=N>>>0){s[n+12>>2]=v;s[i>>2]=v;s[v+8>>2]=n;s[v+12>>2]=o;s[v+24>>2]=0;break}else eZ()}}else{N=s[1210]|0;if((N|0)==0|m>>>0<N>>>0)s[1210]=m;s[1318]=m;s[1319]=g;s[1321]=0;s[1215]=s[1324];s[1214]=-1;n=0;do{N=n<<1;P=4864+(N<<2)|0;s[4864+(N+3<<2)>>2]=P;s[4864+(N+2<<2)>>2]=P;n=n+1|0}while((n|0)!=32)n=m+8|0;if(!(n&7))n=0;else n=0-n&7;N=g+-40-n|0;s[1212]=m+n;s[1209]=N;s[m+(n+4)>>2]=N|1;s[m+(g+-36)>>2]=40;s[1213]=s[1328]}while(0)n=s[1209]|0;if(n>>>0>e>>>0){P=n-e|0;s[1209]=P;N=s[1212]|0;s[1212]=N+e;s[N+(e+4)>>2]=P|1;s[N+4>>2]=e|3;N=N+8|0;h=t;return N|0}}s[(eG()|0)>>2]=12;N=0;h=t;return N|0}function ic(e){e=e|0;var t=0,n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0;t=h;if(!e){h=t;return}g=e+-8|0;v=s[1210]|0;if(g>>>0<v>>>0)eZ();d=s[e+-4>>2]|0;f=d&3;if((f|0)==1)eZ();l=d&-8;o=e+(l+-8)|0;do if(!(d&1)){x=s[g>>2]|0;if(!f){h=t;return}g=-8-x|0;d=e+g|0;f=x+l|0;if(d>>>0<v>>>0)eZ();if((d|0)==(s[1211]|0)){i=e+(l+-4)|0;p=s[i>>2]|0;if((p&3|0)!=3){i=d;p=f;break}s[1208]=f;s[i>>2]=p&-2;s[e+(g+4)>>2]=f|1;s[o>>2]=f;h=t;return}y=x>>>3;if(x>>>0<256){i=s[e+(g+8)>>2]|0;p=s[e+(g+12)>>2]|0;m=4864+(y<<1<<2)|0;if((i|0)!=(m|0)){if(i>>>0<v>>>0)eZ();if((s[i+12>>2]|0)!=(d|0))eZ()}if((p|0)==(i|0)){s[1206]=s[1206]&~(1<<y);i=d;p=f;break}if((p|0)!=(m|0)){if(p>>>0<v>>>0)eZ();m=p+8|0;if((s[m>>2]|0)==(d|0))_=m;else eZ()}else _=p+8|0;s[i+12>>2]=p;s[_>>2]=i;i=d;p=f;break}_=s[e+(g+24)>>2]|0;y=s[e+(g+12)>>2]|0;do if((y|0)==(d|0)){x=e+(g+20)|0;y=s[x>>2]|0;if(!y){x=e+(g+16)|0;y=s[x>>2]|0;if(!y){m=0;break}}while(true){b=y+20|0;w=s[b>>2]|0;if(w){y=w;x=b;continue}b=y+16|0;w=s[b>>2]|0;if(!w)break;else{y=w;x=b}}if(x>>>0<v>>>0)eZ();else{s[x>>2]=0;m=y;break}}else{x=s[e+(g+8)>>2]|0;if(x>>>0<v>>>0)eZ();v=x+12|0;if((s[v>>2]|0)!=(d|0))eZ();b=y+8|0;if((s[b>>2]|0)==(d|0)){s[v>>2]=y;s[b>>2]=x;m=y;break}else eZ()}while(0)if(_){v=s[e+(g+28)>>2]|0;y=5128+(v<<2)|0;if((d|0)==(s[y>>2]|0)){s[y>>2]=m;if(!m){s[1207]=s[1207]&~(1<<v);i=d;p=f;break}}else{if(_>>>0<(s[1210]|0)>>>0)eZ();v=_+16|0;if((s[v>>2]|0)==(d|0))s[v>>2]=m;else s[_+20>>2]=m;if(!m){i=d;p=f;break}}v=s[1210]|0;if(m>>>0<v>>>0)eZ();s[m+24>>2]=_;_=s[e+(g+16)>>2]|0;do if(_){if(_>>>0<v>>>0)eZ();else{s[m+16>>2]=_;s[_+24>>2]=m;break}}while(0)g=s[e+(g+20)>>2]|0;if(g){if(g>>>0<(s[1210]|0)>>>0)eZ();else{s[m+20>>2]=g;s[g+24>>2]=m;i=d;p=f;break}}else{i=d;p=f}}else{i=d;p=f}}else{i=g;p=l}while(0)if(i>>>0>=o>>>0)eZ();f=e+(l+-4)|0;d=s[f>>2]|0;if(!(d&1))eZ();if(!(d&2)){if((o|0)==(s[1212]|0)){w=(s[1209]|0)+p|0;s[1209]=w;s[1212]=i;s[i+4>>2]=w|1;if((i|0)!=(s[1211]|0)){h=t;return}s[1211]=0;s[1208]=0;h=t;return}if((o|0)==(s[1211]|0)){w=(s[1208]|0)+p|0;s[1208]=w;s[1211]=i;s[i+4>>2]=w|1;s[i+w>>2]=w;h=t;return}p=(d&-8)+p|0;f=d>>>3;do if(d>>>0>=256){c=s[e+(l+16)>>2]|0;f=s[e+(l|4)>>2]|0;do if((f|0)==(o|0)){d=e+(l+12)|0;f=s[d>>2]|0;if(!f){d=e+(l+8)|0;f=s[d>>2]|0;if(!f){u=0;break}}while(true){g=f+20|0;m=s[g>>2]|0;if(m){f=m;d=g;continue}m=f+16|0;g=s[m>>2]|0;if(!g)break;else{f=g;d=m}}if(d>>>0<(s[1210]|0)>>>0)eZ();else{s[d>>2]=0;u=f;break}}else{d=s[e+l>>2]|0;if(d>>>0<(s[1210]|0)>>>0)eZ();m=d+12|0;if((s[m>>2]|0)!=(o|0))eZ();g=f+8|0;if((s[g>>2]|0)==(o|0)){s[m>>2]=f;s[g>>2]=d;u=f;break}else eZ()}while(0)if(c){f=s[e+(l+20)>>2]|0;d=5128+(f<<2)|0;if((o|0)==(s[d>>2]|0)){s[d>>2]=u;if(!u){s[1207]=s[1207]&~(1<<f);break}}else{if(c>>>0<(s[1210]|0)>>>0)eZ();f=c+16|0;if((s[f>>2]|0)==(o|0))s[f>>2]=u;else s[c+20>>2]=u;if(!u)break}o=s[1210]|0;if(u>>>0<o>>>0)eZ();s[u+24>>2]=c;c=s[e+(l+8)>>2]|0;do if(c){if(c>>>0<o>>>0)eZ();else{s[u+16>>2]=c;s[c+24>>2]=u;break}}while(0)o=s[e+(l+12)>>2]|0;if(o){if(o>>>0<(s[1210]|0)>>>0)eZ();else{s[u+20>>2]=o;s[o+24>>2]=u;break}}}}else{u=s[e+l>>2]|0;l=s[e+(l|4)>>2]|0;e=4864+(f<<1<<2)|0;if((u|0)!=(e|0)){if(u>>>0<(s[1210]|0)>>>0)eZ();if((s[u+12>>2]|0)!=(o|0))eZ()}if((l|0)==(u|0)){s[1206]=s[1206]&~(1<<f);break}if((l|0)!=(e|0)){if(l>>>0<(s[1210]|0)>>>0)eZ();e=l+8|0;if((s[e>>2]|0)==(o|0))c=e;else eZ()}else c=l+8|0;s[u+12>>2]=l;s[c>>2]=u}while(0)s[i+4>>2]=p|1;s[i+p>>2]=p;if((i|0)==(s[1211]|0)){s[1208]=p;h=t;return}}else{s[f>>2]=d&-2;s[i+4>>2]=p|1;s[i+p>>2]=p}o=p>>>3;if(p>>>0<256){l=o<<1;n=4864+(l<<2)|0;u=s[1206]|0;o=1<<o;if(u&o){l=4864+(l+2<<2)|0;o=s[l>>2]|0;if(o>>>0<(s[1210]|0)>>>0)eZ();else{r=l;a=o}}else{s[1206]=u|o;r=4864+(l+2<<2)|0;a=n}s[r>>2]=i;s[a+12>>2]=i;s[i+8>>2]=a;s[i+12>>2]=n;h=t;return}r=p>>>8;if(r){if(p>>>0>16777215)r=31;else{b=(r+1048320|0)>>>16&8;w=r<<b;x=(w+520192|0)>>>16&4;w=w<<x;r=(w+245760|0)>>>16&2;r=14-(x|b|r)+(w<<r>>>15)|0;r=p>>>(r+7|0)&1|r<<1}}else r=0;a=5128+(r<<2)|0;s[i+28>>2]=r;s[i+20>>2]=0;s[i+16>>2]=0;l=s[1207]|0;o=1<<r;a:do if(l&o){a=s[a>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;o:do if((s[a+4>>2]&-8|0)!=(p|0)){r=p<<r;while(true){l=a+(r>>>31<<2)+16|0;o=s[l>>2]|0;if(!o)break;if((s[o+4>>2]&-8|0)==(p|0)){n=o;break o}else{r=r<<1;a=o}}if(l>>>0<(s[1210]|0)>>>0)eZ();else{s[l>>2]=i;s[i+24>>2]=a;s[i+12>>2]=i;s[i+8>>2]=i;break a}}else n=a;while(0)a=n+8|0;r=s[a>>2]|0;w=s[1210]|0;if(n>>>0>=w>>>0&r>>>0>=w>>>0){s[r+12>>2]=i;s[a>>2]=i;s[i+8>>2]=r;s[i+12>>2]=n;s[i+24>>2]=0;break}else eZ()}else{s[1207]=l|o;s[a>>2]=i;s[i+24>>2]=a;s[i+12>>2]=i;s[i+8>>2]=i}while(0)w=(s[1214]|0)+-1|0;s[1214]=w;if(!w)n=5280;else{h=t;return}while(true){n=s[n>>2]|0;if(!n)break;else n=n+8|0}s[1214]=-1;h=t;return}function ih(e,t){e=e|0;t=t|0;var n=0,i=0,r=0;n=h;do if(e){if(t>>>0>4294967231){s[(eG()|0)>>2]=12;i=0;break}if(t>>>0<11)i=16;else i=t+11&-8;i=iT(e+-8|0,i)|0;if(i){i=i+8|0;break}i=iu(t)|0;if(!i)i=0;else{r=s[e+-4>>2]|0;r=(r&-8)-((r&3|0)==0?8:4)|0;iI(i|0,e|0,(r>>>0<t>>>0?r:t)|0);ic(e)}}else i=iu(t)|0;while(0)h=n;return i|0}function id(e){e=e|0;if((e|0)==32)e=1;else e=(e+-9|0)>>>0<5;return e&1|0}function ip(e,t,n,r,o){e=e|0;t=t|0;n=n|0;r=r|0;o=o|0;var l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0;l=h;if(t>>>0>36){s[(eG()|0)>>2]=22;_=0;y=0;O=_;h=l;return y|0}u=e+4|0;c=e+100|0;do{f=s[u>>2]|0;if(f>>>0<(s[c>>2]|0)>>>0){s[u>>2]=f+1;p=a[f>>0]|0}else p=iv(e)|0}while((id(p)|0)!=0)do if((p|0)==43|(p|0)==45){f=((p|0)==45)<<31>>31;d=s[u>>2]|0;if(d>>>0<(s[c>>2]|0)>>>0){s[u>>2]=d+1;p=a[d>>0]|0;break}else{p=iv(e)|0;break}}else f=0;while(0)d=(t|0)==0;do if((t&-17|0)==0&(p|0)==48){p=s[u>>2]|0;if(p>>>0<(s[c>>2]|0)>>>0){s[u>>2]=p+1;p=a[p>>0]|0}else p=iv(e)|0;if((p|32)!=120){if(d){t=8;n=46;break}else{n=32;break}}t=s[u>>2]|0;if(t>>>0<(s[c>>2]|0)>>>0){s[u>>2]=t+1;p=a[t>>0]|0}else p=iv(e)|0;if((a[p+5321>>0]|0)>15){r=(s[c>>2]|0)==0;if(!r)s[u>>2]=(s[u>>2]|0)+-1;if(!n){ig(e,0);_=0;y=0;O=_;h=l;return y|0}if(r){_=0;y=0;O=_;h=l;return y|0}s[u>>2]=(s[u>>2]|0)+-1;_=0;y=0;O=_;h=l;return y|0}else{t=16;n=46}}else{t=d?10:t;if((a[p+5321>>0]|0)>>>0<t>>>0)n=32;else{if(s[c>>2]|0)s[u>>2]=(s[u>>2]|0)+-1;ig(e,0);s[(eG()|0)>>2]=22;_=0;y=0;O=_;h=l;return y|0}}while(0)if((n|0)==32){if((t|0)==10){t=p+-48|0;if(t>>>0<10){d=0;do{d=(d*10|0)+t|0;t=s[u>>2]|0;if(t>>>0<(s[c>>2]|0)>>>0){s[u>>2]=t+1;p=a[t>>0]|0}else p=iv(e)|0;t=p+-48|0}while(t>>>0<10&d>>>0<429496729)m=0}else{d=0;m=0}t=p+-48|0;if(t>>>0<10){do{g=iH(d|0,m|0,10,0)|0;v=O;_=((t|0)<0)<<31>>31;y=~_;if(v>>>0>y>>>0|(v|0)==(y|0)&g>>>0>~t>>>0)break;d=iN(g|0,v|0,t|0,_|0)|0;m=O;t=s[u>>2]|0;if(t>>>0<(s[c>>2]|0)>>>0){s[u>>2]=t+1;p=a[t>>0]|0}else p=iv(e)|0;t=p+-48|0}while(t>>>0<10&(m>>>0<429496729|(m|0)==429496729&d>>>0<2576980378))if(t>>>0<=9){t=10;n=72}}}else n=46}a:do if((n|0)==46){if(!(t+-1&t)){n=i[5584+((t*23|0)>>>5&7)>>0]|0;v=i[p+5321>>0]|0;d=v&255;if(d>>>0<t>>>0){p=d;d=0;do{d=p|d<<n;p=s[u>>2]|0;if(p>>>0<(s[c>>2]|0)>>>0){s[u>>2]=p+1;_=a[p>>0]|0}else _=iv(e)|0;v=i[_+5321>>0]|0;p=v&255}while(p>>>0<t>>>0&d>>>0<134217728)m=0}else{m=0;d=0;_=p}p=iO(-1,-1,n|0)|0;g=O;if((v&255)>>>0>=t>>>0|(m>>>0>g>>>0|(m|0)==(g|0)&d>>>0>p>>>0)){p=_;n=72;break}while(true){d=iD(d|0,m|0,n|0)|0;m=O;d=v&255|d;v=s[u>>2]|0;if(v>>>0<(s[c>>2]|0)>>>0){s[u>>2]=v+1;_=a[v>>0]|0}else _=iv(e)|0;v=i[_+5321>>0]|0;if((v&255)>>>0>=t>>>0|(m>>>0>g>>>0|(m|0)==(g|0)&d>>>0>p>>>0)){p=_;n=72;break a}}}v=i[p+5321>>0]|0;n=v&255;if(n>>>0<t>>>0){d=0;do{d=n+(er(d,t)|0)|0;n=s[u>>2]|0;if(n>>>0<(s[c>>2]|0)>>>0){s[u>>2]=n+1;g=a[n>>0]|0}else g=iv(e)|0;v=i[g+5321>>0]|0;n=v&255}while(n>>>0<t>>>0&d>>>0<119304647)m=0}else{d=0;m=0;g=p}if((v&255)>>>0<t>>>0){n=iG(-1,-1,t|0,0)|0;p=O;while(true){if(m>>>0>p>>>0|(m|0)==(p|0)&d>>>0>n>>>0){p=g;n=72;break a}_=iH(d|0,m|0,t|0,0)|0;y=O;v=v&255;if(y>>>0>4294967295|(y|0)==-1&_>>>0>~v>>>0){p=g;n=72;break a}d=iN(v|0,0,_|0,y|0)|0;m=O;g=s[u>>2]|0;if(g>>>0<(s[c>>2]|0)>>>0){s[u>>2]=g+1;g=a[g>>0]|0}else g=iv(e)|0;v=i[g+5321>>0]|0;if((v&255)>>>0>=t>>>0){p=g;n=72;break}}}else{p=g;n=72}}while(0)if((n|0)==72){if((a[p+5321>>0]|0)>>>0<t>>>0){do{n=s[u>>2]|0;if(n>>>0<(s[c>>2]|0)>>>0){s[u>>2]=n+1;n=a[n>>0]|0}else n=iv(e)|0}while((a[n+5321>>0]|0)>>>0<t>>>0)s[(eG()|0)>>2]=34;m=o;d=r}}if(s[c>>2]|0)s[u>>2]=(s[u>>2]|0)+-1;if(!(m>>>0<o>>>0|(m|0)==(o|0)&d>>>0<r>>>0)){if(!((r&1|0)!=0|false|(f|0)!=0)){s[(eG()|0)>>2]=34;y=iN(r|0,o|0,-1,-1)|0;_=O;O=_;h=l;return y|0}if(m>>>0>o>>>0|(m|0)==(o|0)&d>>>0>r>>>0){s[(eG()|0)>>2]=34;_=o;y=r;O=_;h=l;return y|0}}y=((f|0)<0)<<31>>31;y=iL(d^f|0,m^y|0,f|0,y|0)|0;_=O;O=_;h=l;return y|0}function im(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0,w=0,T=0,E=0,A=0,C=0,L=0,R=0,D=0,P=0,N=0,I=0,k=0,U=0;r=h;h=h+512|0;u=r;if(!t){t=24;l=-149}else if((t|0)==2){t=53;l=-1074}else if((t|0)==1){t=53;l=-1074}else{I=0;h=r;return+I}d=e+4|0;p=e+100|0;do{o=s[d>>2]|0;if(o>>>0<(s[p>>2]|0)>>>0){s[d>>2]=o+1;x=a[o>>0]|0}else x=iv(e)|0}while((id(x)|0)!=0)do if((x|0)==43|(x|0)==45){o=1-(((x|0)==45&1)<<1)|0;f=s[d>>2]|0;if(f>>>0<(s[p>>2]|0)>>>0){s[d>>2]=f+1;x=a[f>>0]|0;break}else{x=iv(e)|0;break}}else o=1;while(0)v=0;do{if((x|32)!=(i[5600+v>>0]|0))break;do if(v>>>0<7){f=s[d>>2]|0;if(f>>>0<(s[p>>2]|0)>>>0){s[d>>2]=f+1;x=a[f>>0]|0;break}else{x=iv(e)|0;break}}while(0)v=v+1|0}while(v>>>0<8)do if((v|0)==3)m=23;else if((v|0)!=8){f=(n|0)!=0;if(v>>>0>3&f){if((v|0)==8)break;else{m=23;break}}a:do if(!v){v=0;do{if((x|32)!=(i[5616+v>>0]|0))break a;do if(v>>>0<2){_=s[d>>2]|0;if(_>>>0<(s[p>>2]|0)>>>0){s[d>>2]=_+1;x=a[_>>0]|0;break}else{x=iv(e)|0;break}}while(0)v=v+1|0}while(v>>>0<3)}while(0)if(!v){do if((x|0)==48){f=s[d>>2]|0;if(f>>>0<(s[p>>2]|0)>>>0){s[d>>2]=f+1;f=a[f>>0]|0}else f=iv(e)|0;if((f|32)!=120){if(!(s[p>>2]|0)){x=48;break}s[d>>2]=(s[d>>2]|0)+-1;x=48;break}u=s[d>>2]|0;if(u>>>0<(s[p>>2]|0)>>>0){s[d>>2]=u+1;T=a[u>>0]|0;b=0}else{T=iv(e)|0;b=0}while(true){if((T|0)==46){m=70;break}else if((T|0)!=48){u=0;f=0;_=0;v=0;x=0;w=0;D=1;y=0;g=0;break}u=s[d>>2]|0;if(u>>>0<(s[p>>2]|0)>>>0){s[d>>2]=u+1;T=a[u>>0]|0;b=1;continue}else{T=iv(e)|0;b=1;continue}}if((m|0)==70){u=s[d>>2]|0;if(u>>>0<(s[p>>2]|0)>>>0){s[d>>2]=u+1;T=a[u>>0]|0}else T=iv(e)|0;if((T|0)==48){_=0;v=0;do{u=s[d>>2]|0;if(u>>>0<(s[p>>2]|0)>>>0){s[d>>2]=u+1;T=a[u>>0]|0}else T=iv(e)|0;_=iN(_|0,v|0,-1,-1)|0;v=O}while((T|0)==48)u=0;f=0;b=1;x=1;w=0;D=1;y=0;g=0}else{u=0;f=0;_=0;v=0;x=1;w=0;D=1;y=0;g=0}}o:while(true){A=T+-48|0;do if(A>>>0>=10){E=T|32;C=(T|0)==46;if(!((E+-97|0)>>>0<6|C))break o;if(C){if(!x){_=f;v=u;x=1;break}else{T=46;break o}}else{A=(T|0)>57?E+-87|0:A;m=83;break}}else m=83;while(0)if((m|0)==83){m=0;do if(!((u|0)<0|(u|0)==0&f>>>0<8)){if((u|0)<0|(u|0)==0&f>>>0<14){I=D*.0625;N=I;g=g+I*+(A|0);break}if((A|0)==0|(w|0)!=0)N=D;else{w=1;N=D;g=g+D*.5}}else{N=D;y=A+(y<<4)|0}while(0)f=iN(f|0,u|0,1,0)|0;u=O;b=1;D=N}T=s[d>>2]|0;if(T>>>0<(s[p>>2]|0)>>>0){s[d>>2]=T+1;T=a[T>>0]|0;continue}else{T=iv(e)|0;continue}}if(!b){t=(s[p>>2]|0)==0;if(!t)s[d>>2]=(s[d>>2]|0)+-1;if(n){if(!t?(c=s[d>>2]|0,s[d>>2]=c+-1,(x|0)!=0):0)s[d>>2]=c+-2}else ig(e,0);I=+(o|0)*0;h=r;return+I}m=(x|0)==0;c=m?f:_;m=m?u:v;if((u|0)<0|(u|0)==0&f>>>0<8)do{y=y<<4;f=iN(f|0,u|0,1,0)|0;u=O}while((u|0)<0|(u|0)==0&f>>>0<8)do if((T|32)==112){f=iA(e,n)|0;u=O;if((f|0)==0&(u|0)==-2147483648){if(!n){ig(e,0);I=0;h=r;return+I}else{if(!(s[p>>2]|0)){f=0;u=0;break}s[d>>2]=(s[d>>2]|0)+-1;f=0;u=0;break}}}else if(!(s[p>>2]|0)){f=0;u=0}else{s[d>>2]=(s[d>>2]|0)+-1;f=0;u=0}while(0)c=iD(c|0,m|0,2)|0;c=iN(c|0,O|0,-32,-1)|0;u=iN(c|0,O|0,f|0,u|0)|0;c=O;if(!y){I=+(o|0)*0;h=r;return+I}if((c|0)>0|(c|0)==0&u>>>0>(0-l|0)>>>0){s[(eG()|0)>>2]=34;I=+(o|0)*Infinity;h=r;return+I}P=l+-106|0;R=((P|0)<0)<<31>>31;if((c|0)<(R|0)|(c|0)==(R|0)&u>>>0<P>>>0){s[(eG()|0)>>2]=34;I=+(o|0)*0;h=r;return+I}if((y|0)>-1)do{y=y<<1;if(!(g>=.5))D=g;else{D=g+-1;y=y|1}g=g+D;u=iN(u|0,c|0,-1,-1)|0;c=O}while((y|0)>-1)l=iL(32,0,l|0,((l|0)<0)<<31>>31|0)|0;l=iN(u|0,c|0,l|0,O|0)|0;P=O;if(0>(P|0)|0==(P|0)&t>>>0>l>>>0){if((l|0)<0){t=0;m=126}else{t=l;m=124}}else m=124;if((m|0)==124){if((t|0)<53)m=126;else{l=t;D=+(o|0);N=0}}if((m|0)==126){N=+(o|0);l=t;D=N;N=+eJ(+ +i_(1,84-t|0),+N)}P=(l|0)<32&g!=0&(y&1|0)==0;g=D*(P?0:g)+(N+D*+(((P&1)+y|0)>>>0))-N;if(!(g!=0))s[(eG()|0)>>2]=34;I=+iy(g,u);h=r;return+I}while(0)f=l+t|0;c=0-f|0;A=0;while(true){if((x|0)==46){m=137;break}else if((x|0)!=48){L=0;C=0;E=0;break}v=s[d>>2]|0;if(v>>>0<(s[p>>2]|0)>>>0){s[d>>2]=v+1;x=a[v>>0]|0;A=1;continue}else{x=iv(e)|0;A=1;continue}}if((m|0)==137){m=s[d>>2]|0;if(m>>>0<(s[p>>2]|0)>>>0){s[d>>2]=m+1;x=a[m>>0]|0}else x=iv(e)|0;if((x|0)==48){L=0;C=0;do{L=iN(L|0,C|0,-1,-1)|0;C=O;m=s[d>>2]|0;if(m>>>0<(s[p>>2]|0)>>>0){s[d>>2]=m+1;x=a[m>>0]|0}else x=iv(e)|0}while((x|0)==48)A=1;E=1}else{L=0;C=0;E=1}}s[u>>2]=0;T=x+-48|0;R=(x|0)==46;l:do if(T>>>0<10|R){m=u+496|0;w=0;b=0;y=0;_=0;v=0;u:while(true){do if(R){if(!E){L=w;C=b;E=1}else break u}else{R=iN(w|0,b|0,1,0)|0;b=O;P=(x|0)!=48;if((_|0)>=125){if(!P){w=R;break}s[m>>2]=s[m>>2]|1;w=R;break}w=u+(_<<2)|0;if(y)T=x+-48+((s[w>>2]|0)*10|0)|0;s[w>>2]=T;y=y+1|0;T=(y|0)==9;w=R;A=1;y=T?0:y;_=(T&1)+_|0;v=P?R:v}while(0)x=s[d>>2]|0;if(x>>>0<(s[p>>2]|0)>>>0){s[d>>2]=x+1;x=a[x>>0]|0}else x=iv(e)|0;T=x+-48|0;R=(x|0)==46;if(!(T>>>0<10|R)){m=160;break l}}T=(A|0)!=0;m=168}else{w=0;b=0;y=0;_=0;v=0;m=160}while(0)do if((m|0)==160){T=(E|0)==0;L=T?w:L;C=T?b:C;T=(A|0)!=0;if(!(T&(x|32)==101)){if((x|0)>-1){m=168;break}else{m=170;break}}T=iA(e,n)|0;x=O;do if((T|0)==0&(x|0)==-2147483648){if(!n){ig(e,0);I=0;h=r;return+I}else{if(!(s[p>>2]|0)){T=0;x=0;break}s[d>>2]=(s[d>>2]|0)+-1;T=0;x=0;break}}while(0)e=iN(T|0,x|0,L|0,C|0)|0;C=O}while(0)if((m|0)==168){if(s[p>>2]|0){s[d>>2]=(s[d>>2]|0)+-1;if(T)e=L;else m=171}else m=170}if((m|0)==170){if(T)e=L;else m=171}if((m|0)==171){s[(eG()|0)>>2]=22;ig(e,0);I=0;h=r;return+I}d=s[u>>2]|0;if(!d){I=+(o|0)*0;h=r;return+I}if((e|0)==(w|0)&(C|0)==(b|0)&((b|0)<0|(b|0)==0&w>>>0<10)?t>>>0>30|(d>>>t|0)==0:0){I=+(o|0)*+(d>>>0);h=r;return+I}P=(l|0)/-2|0;R=((P|0)<0)<<31>>31;if((C|0)>(R|0)|(C|0)==(R|0)&e>>>0>P>>>0){s[(eG()|0)>>2]=34;I=+(o|0)*Infinity;h=r;return+I}P=l+-106|0;R=((P|0)<0)<<31>>31;if((C|0)<(R|0)|(C|0)==(R|0)&e>>>0<P>>>0){s[(eG()|0)>>2]=34;I=+(o|0)*0;h=r;return+I}if(y){if((y|0)<9){d=u+(_<<2)|0;p=s[d>>2]|0;do{p=p*10|0;y=y+1|0}while((y|0)!=9)s[d>>2]=p}_=_+1|0}if((v|0)<9?(v|0)<=(e|0)&(e|0)<18:0){if((e|0)==9){I=+(o|0)*+((s[u>>2]|0)>>>0);h=r;return+I}if((e|0)<9){I=+(o|0)*+((s[u>>2]|0)>>>0)/+(s[5632+(8-e<<2)>>2]|0);h=r;return+I}P=t+27+(er(e,-3)|0)|0;d=s[u>>2]|0;if((P|0)>30|(d>>>P|0)==0){I=+(o|0)*+(d>>>0)*+(s[5632+(e+-10<<2)>>2]|0);h=r;return+I}}d=(e|0)%9|0;if(!d){d=0;p=0}else{n=(e|0)>-1?d:d+9|0;m=s[5632+(8-n<<2)>>2]|0;if(_){v=1e9/(m|0)|0;d=0;p=0;y=0;do{L=u+(y<<2)|0;R=s[L>>2]|0;P=((R>>>0)/(m>>>0)|0)+p|0;s[L>>2]=P;p=er((R>>>0)%(m>>>0)|0,v)|0;R=y;y=y+1|0;if((R|0)==(d|0)&(P|0)==0){d=y&127;e=e+-9|0}}while((y|0)!=(_|0))if(p){s[u+(_<<2)>>2]=p;_=_+1|0}}else{d=0;_=0}p=0;e=9-n+e|0}c:while(true){n=u+(d<<2)|0;if((e|0)<18)do{v=0;n=_+127|0;while(true){n=n&127;m=u+(n<<2)|0;y=iD(s[m>>2]|0,0,29)|0;y=iN(y|0,O|0,v|0,0)|0;v=O;if(v>>>0>0|(v|0)==0&y>>>0>1e9){P=iG(y|0,v|0,1e9,0)|0;y=iW(y|0,v|0,1e9,0)|0;v=P}else v=0;s[m>>2]=y;m=(n|0)==(d|0);if(!((n|0)!=(_+127&127|0)|m))_=(y|0)==0?n:_;if(m)break;else n=n+-1|0}p=p+-29|0}while((v|0)==0)else{if((e|0)!=18)break;do{if((s[n>>2]|0)>>>0>=9007199){e=18;break c}v=0;m=_+127|0;while(true){m=m&127;y=u+(m<<2)|0;x=iD(s[y>>2]|0,0,29)|0;x=iN(x|0,O|0,v|0,0)|0;v=O;if(v>>>0>0|(v|0)==0&x>>>0>1e9){P=iG(x|0,v|0,1e9,0)|0;x=iW(x|0,v|0,1e9,0)|0;v=P}else v=0;s[y>>2]=x;y=(m|0)==(d|0);if(!((m|0)!=(_+127&127|0)|y))_=(x|0)==0?m:_;if(y)break;else m=m+-1|0}p=p+-29|0}while((v|0)==0)}d=d+127&127;if((d|0)==(_|0)){P=_+127&127;_=u+((_+126&127)<<2)|0;s[_>>2]=s[_>>2]|s[u+(P<<2)>>2];_=P}s[u+(d<<2)>>2]=v;e=e+9|0}h:while(true){n=_+1&127;m=u+((_+127&127)<<2)|0;while(true){y=(e|0)==18;v=(e|0)>27?9:1;while(true){x=0;while(true){b=x+d&127;if((b|0)==(_|0)){x=2;break}w=s[u+(b<<2)>>2]|0;T=s[5624+(x<<2)>>2]|0;if(w>>>0<T>>>0){x=2;break}b=x+1|0;if(w>>>0>T>>>0)break;if((b|0)<2)x=b;else{x=b;break}}if((x|0)==2&y)break h;p=v+p|0;if((d|0)==(_|0))d=_;else break}y=(1<<v)+-1|0;x=1e9>>>v;b=d;w=0;do{L=u+(d<<2)|0;R=s[L>>2]|0;P=(R>>>v)+w|0;s[L>>2]=P;w=er(R&y,x)|0;P=(d|0)==(b|0)&(P|0)==0;d=d+1&127;e=P?e+-9|0:e;b=P?d:b}while((d|0)!=(_|0))if(!w){d=b;continue}if((n|0)!=(b|0))break;s[m>>2]=s[m>>2]|1;d=b}s[u+(_<<2)>>2]=w;d=b;_=n}e=d&127;if((e|0)==(_|0)){s[u+(n+-1<<2)>>2]=0;_=n}D=+((s[u+(e<<2)>>2]|0)>>>0);e=d+1&127;if((e|0)==(_|0)){_=_+1&127;s[u+(_+-1<<2)>>2]=0}g=+(o|0);N=g*(D*1e9+ +((s[u+(e<<2)>>2]|0)>>>0));o=p+53|0;l=o-l|0;if((l|0)<(t|0)){if((l|0)<0){t=0;e=1;m=244}else{t=l;e=1;m=243}}else{e=0;m=243}if((m|0)==243){if((t|0)<53)m=244;else{D=0;I=0}}if((m|0)==244){U=+eJ(+ +i_(1,105-t|0),+N);k=+e5(+N,+ +i_(1,53-t|0));D=U;I=k;N=U+(N-k)}n=d+2&127;do if((n|0)!=(_|0)){u=s[u+(n<<2)>>2]|0;do if(u>>>0>=5e8){if(u>>>0>5e8){I=g*.75+I;break}if((d+3&127|0)==(_|0)){I=g*.5+I;break}else{I=g*.75+I;break}}else{if((u|0)==0?(d+3&127|0)==(_|0):0)break;I=g*.25+I}while(0)if((53-t|0)<=1)break;if(+e5(+I,1)!=0)break;I=I+1}while(0)g=N+I-D;do if((o&2147483647|0)>(-2-f|0)){if(+j(+g)>=9007199254740992){e=(e|0)!=0&(t|0)==(l|0)?0:e;p=p+1|0;g=g*.5}if((p+50|0)<=(c|0)?!((e|0)!=0&I!=0):0)break;s[(eG()|0)>>2]=34}while(0)U=+iy(g,p);h=r;return+U}else if((v|0)==3){t=s[d>>2]|0;if(t>>>0<(s[p>>2]|0)>>>0){s[d>>2]=t+1;t=a[t>>0]|0}else t=iv(e)|0;if((t|0)==40)t=1;else{if(!(s[p>>2]|0)){U=M;h=r;return+U}s[d>>2]=(s[d>>2]|0)+-1;U=M;h=r;return+U}while(true){o=s[d>>2]|0;if(o>>>0<(s[p>>2]|0)>>>0){s[d>>2]=o+1;o=a[o>>0]|0}else o=iv(e)|0;if(!((o+-48|0)>>>0<10|(o+-65|0)>>>0<26)?!((o+-97|0)>>>0<26|(o|0)==95):0)break;t=t+1|0}if((o|0)==41){U=M;h=r;return+U}o=(s[p>>2]|0)==0;if(!o)s[d>>2]=(s[d>>2]|0)+-1;if(!f){s[(eG()|0)>>2]=22;ig(e,0);U=0;h=r;return+U}if((t|0)==0|o){U=M;h=r;return+U}do{t=t+-1|0;s[d>>2]=(s[d>>2]|0)+-1}while((t|0)!=0)g=M;h=r;return+g}else{if(s[p>>2]|0)s[d>>2]=(s[d>>2]|0)+-1;s[(eG()|0)>>2]=22;ig(e,0);U=0;h=r;return+U}}while(0)if((m|0)==23){t=(s[p>>2]|0)==0;if(!t)s[d>>2]=(s[d>>2]|0)+-1;if(!(v>>>0<4|(n|0)==0|t))do{s[d>>2]=(s[d>>2]|0)+-1;v=v+-1|0}while(v>>>0>3)}U=+(o|0)*S;h=r;return+U}function ig(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0;n=h;s[e+104>>2]=t;r=s[e+8>>2]|0;i=s[e+4>>2]|0;a=r-i|0;s[e+108>>2]=a;if((t|0)!=0&(a|0)>(t|0)){s[e+100>>2]=i+t;h=n;return}else{s[e+100>>2]=r;h=n;return}}function iv(e){e=e|0;var t=0,n=0,r=0,o=0,l=0,u=0,c=0;n=h;l=e+104|0;c=s[l>>2]|0;if(!((c|0)!=0?(s[e+108>>2]|0)>=(c|0):0))u=3;if((u|0)==3?(t=ib(e)|0,(t|0)>=0):0){u=s[l>>2]|0;l=s[e+8>>2]|0;if((u|0)!=0?(r=s[e+4>>2]|0,o=u-(s[e+108>>2]|0)+-1|0,(l-r|0)>(o|0)):0)s[e+100>>2]=r+o;else s[e+100>>2]=l;r=s[e+4>>2]|0;if(l){c=e+108|0;s[c>>2]=l+1-r+(s[c>>2]|0)}e=r+-1|0;if((a[e>>0]|0)==(t|0)){c=t;h=n;return c|0}i[e>>0]=t;c=t;h=n;return c|0}s[e+100>>2]=0;c=-1;h=n;return c|0}function i_(e,t){e=+e;t=t|0;var n=0,i=0;n=h;if((t|0)>1023){e=e*898846567431158e293;i=t+-1023|0;if((i|0)>1023){t=t+-2046|0;t=(t|0)>1023?1023:t;e=e*898846567431158e293}else t=i}else if((t|0)<-1022){e=e*22250738585072014e-324;i=t+1022|0;if((i|0)<-1022){t=t+2044|0;t=(t|0)<-1022?-1022:t;e=e*22250738585072014e-324}else t=i}t=iD(t+1023|0,0,52)|0;i=O;s[d>>2]=t;s[d+4>>2]=i;e=e*+c[d>>3];h=n;return+e}function iy(e,t){e=+e;t=t|0;var n=0;n=h;e=+i_(e,t);h=n;return+e}function ix(e){e=e|0;var t=0,n=0,r=0;n=h;r=e+74|0;t=i[r>>0]|0;i[r>>0]=t+255|t;r=e+20|0;t=e+44|0;if((s[r>>2]|0)>>>0>(s[t>>2]|0)>>>0)rt[s[e+36>>2]&1](e,0,0);s[e+16>>2]=0;s[e+28>>2]=0;s[r>>2]=0;r=s[e>>2]|0;if(!(r&20)){r=s[t>>2]|0;s[e+8>>2]=r;s[e+4>>2]=r;r=0;h=n;return r|0}if(!(r&4)){r=-1;h=n;return r|0}s[e>>2]=r|32;r=-1;h=n;return r|0}function ib(e){e=e|0;var t=0,n=0;t=h;h=h+16|0;n=t;if((s[e+8>>2]|0)==0?(ix(e)|0)!=0:0)e=-1;else if((rt[s[e+32>>2]&1](e,n,1)|0)==1)e=a[n>>0]|0;else e=-1;h=t;return e|0}function iw(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0;n=h;h=h+112|0;i=n;o=i+0|0;a=o+112|0;do{s[o>>2]=0;o=o+4|0}while((o|0)<(a|0))a=i+4|0;s[a>>2]=e;o=i+8|0;s[o>>2]=-1;s[i+44>>2]=e;s[i+76>>2]=-1;ig(i,0);r=+im(i,1,1);i=(s[a>>2]|0)-(s[o>>2]|0)+(s[i+108>>2]|0)|0;if(!t){h=n;return+r}if(i)e=e+i|0;s[t>>2]=e;h=n;return+r}function iM(e,t,n){e=e|0;t=t|0;n=n|0;var i=0,r=0,a=0;i=h;h=h+112|0;a=i;s[a>>2]=0;r=a+4|0;s[r>>2]=e;s[a+44>>2]=e;if((e|0)<0)s[a+8>>2]=-1;else s[a+8>>2]=e+2147483647;s[a+76>>2]=-1;ig(a,0);n=ip(a,n,1,-2147483648,0)|0;if(!t){h=i;return n|0}s[t>>2]=e+((s[r>>2]|0)+(s[a+108>>2]|0)-(s[a+8>>2]|0));h=i;return n|0}function iS(e,t){e=e|0;t=t|0;var n=0,r=0,s=0;n=h;s=i[e>>0]|0;r=i[t>>0]|0;if(s<<24>>24==0?1:s<<24>>24!=r<<24>>24)t=s;else{do{e=e+1|0;t=t+1|0;s=i[e>>0]|0;r=i[t>>0]|0}while(!(s<<24>>24==0?1:s<<24>>24!=r<<24>>24))t=s}h=n;return(t&255)-(r&255)|0}function iT(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0;n=h;r=e+4|0;i=s[r>>2]|0;c=i&-8;l=e+c|0;f=s[1210]|0;o=i&3;if(!((o|0)!=1&e>>>0>=f>>>0&e>>>0<l>>>0))eZ();a=e+(c|4)|0;m=s[a>>2]|0;if(!(m&1))eZ();if(!o){if(t>>>0<256){v=0;h=n;return v|0}if(c>>>0>=(t+4|0)>>>0?(c-t|0)>>>0<=s[1326]<<1>>>0:0){v=e;h=n;return v|0}v=0;h=n;return v|0}if(c>>>0>=t>>>0){o=c-t|0;if(o>>>0<=15){v=e;h=n;return v|0}s[r>>2]=i&1|t|2;s[e+(t+4)>>2]=o|3;s[a>>2]=s[a>>2]|1;iE(e+t|0,o);v=e;h=n;return v|0}if((l|0)==(s[1212]|0)){a=(s[1209]|0)+c|0;if(a>>>0<=t>>>0){v=0;h=n;return v|0}v=a-t|0;s[r>>2]=i&1|t|2;s[e+(t+4)>>2]=v|1;s[1212]=e+t;s[1209]=v;v=e;h=n;return v|0}if((l|0)==(s[1211]|0)){o=(s[1208]|0)+c|0;if(o>>>0<t>>>0){v=0;h=n;return v|0}a=o-t|0;if(a>>>0>15){s[r>>2]=i&1|t|2;s[e+(t+4)>>2]=a|1;s[e+o>>2]=a;i=e+(o+4)|0;s[i>>2]=s[i>>2]&-2;i=e+t|0}else{s[r>>2]=i&1|o|2;i=e+(o+4)|0;s[i>>2]=s[i>>2]|1;i=0;a=0}s[1208]=a;s[1211]=i;v=e;h=n;return v|0}if(m&2){v=0;h=n;return v|0}a=(m&-8)+c|0;if(a>>>0<t>>>0){v=0;h=n;return v|0}o=a-t|0;p=m>>>3;do if(m>>>0>=256){d=s[e+(c+24)>>2]|0;p=s[e+(c+12)>>2]|0;do if((p|0)==(l|0)){m=e+(c+20)|0;p=s[m>>2]|0;if(!p){m=e+(c+16)|0;p=s[m>>2]|0;if(!p){u=0;break}}while(true){v=p+20|0;g=s[v>>2]|0;if(g){p=g;m=v;continue}g=p+16|0;v=s[g>>2]|0;if(!v)break;else{p=v;m=g}}if(m>>>0<f>>>0)eZ();else{s[m>>2]=0;u=p;break}}else{m=s[e+(c+8)>>2]|0;if(m>>>0<f>>>0)eZ();f=m+12|0;if((s[f>>2]|0)!=(l|0))eZ();g=p+8|0;if((s[g>>2]|0)==(l|0)){s[f>>2]=p;s[g>>2]=m;u=p;break}else eZ()}while(0)if(d){f=s[e+(c+28)>>2]|0;p=5128+(f<<2)|0;if((l|0)==(s[p>>2]|0)){s[p>>2]=u;if(!u){s[1207]=s[1207]&~(1<<f);break}}else{if(d>>>0<(s[1210]|0)>>>0)eZ();f=d+16|0;if((s[f>>2]|0)==(l|0))s[f>>2]=u;else s[d+20>>2]=u;if(!u)break}l=s[1210]|0;if(u>>>0<l>>>0)eZ();s[u+24>>2]=d;f=s[e+(c+16)>>2]|0;do if(f){if(f>>>0<l>>>0)eZ();else{s[u+16>>2]=f;s[f+24>>2]=u;break}}while(0)l=s[e+(c+20)>>2]|0;if(l){if(l>>>0<(s[1210]|0)>>>0)eZ();else{s[u+20>>2]=l;s[l+24>>2]=u;break}}}}else{u=s[e+(c+8)>>2]|0;c=s[e+(c+12)>>2]|0;m=4864+(p<<1<<2)|0;if((u|0)!=(m|0)){if(u>>>0<f>>>0)eZ();if((s[u+12>>2]|0)!=(l|0))eZ()}if((c|0)==(u|0)){s[1206]=s[1206]&~(1<<p);break}if((c|0)!=(m|0)){if(c>>>0<f>>>0)eZ();f=c+8|0;if((s[f>>2]|0)==(l|0))d=f;else eZ()}else d=c+8|0;s[u+12>>2]=c;s[d>>2]=u}while(0)if(o>>>0<16){s[r>>2]=a|i&1|2;v=e+(a|4)|0;s[v>>2]=s[v>>2]|1;v=e;h=n;return v|0}else{s[r>>2]=i&1|t|2;s[e+(t+4)>>2]=o|3;v=e+(a|4)|0;s[v>>2]=s[v>>2]|1;iE(e+t|0,o);v=e;h=n;return v|0}return 0}function iE(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,a=0,o=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,v=0,_=0,y=0,x=0,b=0;n=h;o=e+t|0;c=s[e+4>>2]|0;do if(!(c&1)){m=s[e>>2]|0;if(!(c&3)){h=n;return}c=e+(0-m)|0;f=m+t|0;v=s[1210]|0;if(c>>>0<v>>>0)eZ();if((c|0)==(s[1211]|0)){i=e+(t+4)|0;d=s[i>>2]|0;if((d&3|0)!=3){i=c;d=f;break}s[1208]=f;s[i>>2]=d&-2;s[e+(4-m)>>2]=f|1;s[o>>2]=f;h=n;return}_=m>>>3;if(m>>>0<256){i=s[e+(8-m)>>2]|0;d=s[e+(12-m)>>2]|0;p=4864+(_<<1<<2)|0;if((i|0)!=(p|0)){if(i>>>0<v>>>0)eZ();if((s[i+12>>2]|0)!=(c|0))eZ()}if((d|0)==(i|0)){s[1206]=s[1206]&~(1<<_);i=c;d=f;break}if((d|0)!=(p|0)){if(d>>>0<v>>>0)eZ();p=d+8|0;if((s[p>>2]|0)==(c|0))g=p;else eZ()}else g=d+8|0;s[i+12>>2]=d;s[g>>2]=i;i=c;d=f;break}g=s[e+(24-m)>>2]|0;_=s[e+(12-m)>>2]|0;do if((_|0)==(c|0)){x=16-m|0;y=e+(x+4)|0;_=s[y>>2]|0;if(!_){y=e+x|0;_=s[y>>2]|0;if(!_){p=0;break}}while(true){b=_+20|0;x=s[b>>2]|0;if(x){_=x;y=b;continue}x=_+16|0;b=s[x>>2]|0;if(!b)break;else{_=b;y=x}}if(y>>>0<v>>>0)eZ();else{s[y>>2]=0;p=_;break}}else{y=s[e+(8-m)>>2]|0;if(y>>>0<v>>>0)eZ();v=y+12|0;if((s[v>>2]|0)!=(c|0))eZ();x=_+8|0;if((s[x>>2]|0)==(c|0)){s[v>>2]=_;s[x>>2]=y;p=_;break}else eZ()}while(0)if(g){_=s[e+(28-m)>>2]|0;v=5128+(_<<2)|0;if((c|0)==(s[v>>2]|0)){s[v>>2]=p;if(!p){s[1207]=s[1207]&~(1<<_);i=c;d=f;break}}else{if(g>>>0<(s[1210]|0)>>>0)eZ();v=g+16|0;if((s[v>>2]|0)==(c|0))s[v>>2]=p;else s[g+20>>2]=p;if(!p){i=c;d=f;break}}v=s[1210]|0;if(p>>>0<v>>>0)eZ();s[p+24>>2]=g;m=16-m|0;g=s[e+m>>2]|0;do if(g){if(g>>>0<v>>>0)eZ();else{s[p+16>>2]=g;s[g+24>>2]=p;break}}while(0)m=s[e+(m+4)>>2]|0;if(m){if(m>>>0<(s[1210]|0)>>>0)eZ();else{s[p+20>>2]=m;s[m+24>>2]=p;i=c;d=f;break}}else{i=c;d=f}}else{i=c;d=f}}else{i=e;d=t}while(0)c=s[1210]|0;if(o>>>0<c>>>0)eZ();f=e+(t+4)|0;p=s[f>>2]|0;if(!(p&2)){if((o|0)==(s[1212]|0)){b=(s[1209]|0)+d|0;s[1209]=b;s[1212]=i;s[i+4>>2]=b|1;if((i|0)!=(s[1211]|0)){h=n;return}s[1211]=0;s[1208]=0;h=n;return}if((o|0)==(s[1211]|0)){b=(s[1208]|0)+d|0;s[1208]=b;s[1211]=i;s[i+4>>2]=b|1;s[i+b>>2]=b;h=n;return}d=(p&-8)+d|0;f=p>>>3;do if(p>>>0>=256){u=s[e+(t+24)>>2]|0;p=s[e+(t+12)>>2]|0;do if((p|0)==(o|0)){p=e+(t+20)|0;f=s[p>>2]|0;if(!f){p=e+(t+16)|0;f=s[p>>2]|0;if(!f){l=0;break}}while(true){m=f+20|0;g=s[m>>2]|0;if(g){f=g;p=m;continue}g=f+16|0;m=s[g>>2]|0;if(!m)break;else{f=m;p=g}}if(p>>>0<c>>>0)eZ();else{s[p>>2]=0;l=f;break}}else{f=s[e+(t+8)>>2]|0;if(f>>>0<c>>>0)eZ();m=f+12|0;if((s[m>>2]|0)!=(o|0))eZ();c=p+8|0;if((s[c>>2]|0)==(o|0)){s[m>>2]=p;s[c>>2]=f;l=p;break}else eZ()}while(0)if(u){f=s[e+(t+28)>>2]|0;c=5128+(f<<2)|0;if((o|0)==(s[c>>2]|0)){s[c>>2]=l;if(!l){s[1207]=s[1207]&~(1<<f);break}}else{if(u>>>0<(s[1210]|0)>>>0)eZ();c=u+16|0;if((s[c>>2]|0)==(o|0))s[c>>2]=l;else s[u+20>>2]=l;if(!l)break}o=s[1210]|0;if(l>>>0<o>>>0)eZ();s[l+24>>2]=u;u=s[e+(t+16)>>2]|0;do if(u){if(u>>>0<o>>>0)eZ();else{s[l+16>>2]=u;s[u+24>>2]=l;break}}while(0)o=s[e+(t+20)>>2]|0;if(o){if(o>>>0<(s[1210]|0)>>>0)eZ();else{s[l+20>>2]=o;s[o+24>>2]=l;break}}}}else{l=s[e+(t+8)>>2]|0;e=s[e+(t+12)>>2]|0;t=4864+(f<<1<<2)|0;if((l|0)!=(t|0)){if(l>>>0<c>>>0)eZ();if((s[l+12>>2]|0)!=(o|0))eZ()}if((e|0)==(l|0)){s[1206]=s[1206]&~(1<<f);break}if((e|0)!=(t|0)){if(e>>>0<c>>>0)eZ();t=e+8|0;if((s[t>>2]|0)==(o|0))u=t;else eZ()}else u=e+8|0;s[l+12>>2]=e;s[u>>2]=l}while(0)s[i+4>>2]=d|1;s[i+d>>2]=d;if((i|0)==(s[1211]|0)){s[1208]=d;h=n;return}}else{s[f>>2]=p&-2;s[i+4>>2]=d|1;s[i+d>>2]=d}t=d>>>3;if(d>>>0<256){e=t<<1;o=4864+(e<<2)|0;l=s[1206]|0;t=1<<t;if(l&t){e=4864+(e+2<<2)|0;l=s[e>>2]|0;if(l>>>0<(s[1210]|0)>>>0)eZ();else{a=e;r=l}}else{s[1206]=l|t;a=4864+(e+2<<2)|0;r=o}s[a>>2]=i;s[r+12>>2]=i;s[i+8>>2]=r;s[i+12>>2]=o;h=n;return}r=d>>>8;if(r){if(d>>>0>16777215)r=31;else{x=(r+1048320|0)>>>16&8;b=r<<x;y=(b+520192|0)>>>16&4;b=b<<y;r=(b+245760|0)>>>16&2;r=14-(y|x|r)+(b<<r>>>15)|0;r=d>>>(r+7|0)&1|r<<1}}else r=0;a=5128+(r<<2)|0;s[i+28>>2]=r;s[i+20>>2]=0;s[i+16>>2]=0;e=s[1207]|0;o=1<<r;if(!(e&o)){s[1207]=e|o;s[a>>2]=i;s[i+24>>2]=a;s[i+12>>2]=i;s[i+8>>2]=i;h=n;return}a=s[a>>2]|0;if((r|0)==31)r=0;else r=25-(r>>>1)|0;a:do if((s[a+4>>2]&-8|0)!=(d|0)){r=d<<r;e=a;while(true){o=e+(r>>>31<<2)+16|0;a=s[o>>2]|0;if(!a)break;if((s[a+4>>2]&-8|0)==(d|0))break a;else{r=r<<1;e=a}}if(o>>>0<(s[1210]|0)>>>0)eZ();s[o>>2]=i;s[i+24>>2]=e;s[i+12>>2]=i;s[i+8>>2]=i;h=n;return}while(0)r=a+8|0;o=s[r>>2]|0;b=s[1210]|0;if(!(a>>>0>=b>>>0&o>>>0>=b>>>0))eZ();s[o+12>>2]=i;s[r>>2]=i;s[i+8>>2]=o;s[i+12>>2]=a;s[i+24>>2]=0;h=n;return}function iA(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,o=0,l=0,u=0;n=h;r=e+4|0;o=s[r>>2]|0;i=e+100|0;if(o>>>0<(s[i>>2]|0)>>>0){s[r>>2]=o+1;l=a[o>>0]|0}else l=iv(e)|0;if((l|0)==43|(l|0)==45){u=s[r>>2]|0;o=(l|0)==45&1;if(u>>>0<(s[i>>2]|0)>>>0){s[r>>2]=u+1;l=a[u>>0]|0}else l=iv(e)|0;if((l+-48|0)>>>0>9&(t|0)!=0?(s[i>>2]|0)!=0:0)s[r>>2]=(s[r>>2]|0)+-1}else o=0;if((l+-48|0)>>>0>9){if(!(s[i>>2]|0)){l=-2147483648;u=0;O=l;h=n;return u|0}s[r>>2]=(s[r>>2]|0)+-1;l=-2147483648;u=0;O=l;h=n;return u|0}else t=0;do{t=l+-48+(t*10|0)|0;l=s[r>>2]|0;if(l>>>0<(s[i>>2]|0)>>>0){s[r>>2]=l+1;l=a[l>>0]|0}else l=iv(e)|0}while((l+-48|0)>>>0<10&(t|0)<214748364)u=((t|0)<0)<<31>>31;if((l+-48|0)>>>0<10)do{u=iH(t|0,u|0,10,0)|0;t=O;l=iN(l|0,((l|0)<0)<<31>>31|0,-48,-1)|0;t=iN(l|0,O|0,u|0,t|0)|0;u=O;l=s[r>>2]|0;if(l>>>0<(s[i>>2]|0)>>>0){s[r>>2]=l+1;l=a[l>>0]|0}else l=iv(e)|0}while((l+-48|0)>>>0<10&((u|0)<21474836|(u|0)==21474836&t>>>0<2061584302))if((l+-48|0)>>>0<10)do{l=s[r>>2]|0;if(l>>>0<(s[i>>2]|0)>>>0){s[r>>2]=l+1;l=a[l>>0]|0}else l=iv(e)|0}while((l+-48|0)>>>0<10)if(s[i>>2]|0)s[r>>2]=(s[r>>2]|0)+-1;r=(o|0)!=0;o=iL(0,0,t|0,u|0)|0;l=r?O:u;u=r?o:t;O=l;h=n;return u|0}function iC(){}function iL(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;t=t-i-(n>>>0>e>>>0|0)>>>0;return(O=t,e-n>>>0|0)|0}function iR(e,t,n){e=e|0;t=t|0;n=n|0;var r=0,a=0,o=0,l=0;r=e+n|0;if((n|0)>=20){t=t&255;l=e&3;o=t|t<<8|t<<16|t<<24;a=r&-4;if(l){l=e+4-l|0;while((e|0)<(l|0)){i[e>>0]=t;e=e+1|0}}while((e|0)<(a|0)){s[e>>2]=o;e=e+4|0}}while((e|0)<(r|0)){i[e>>0]=t;e=e+1|0}return e-n|0}function iD(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t<<n|(e&(1<<n)-1<<32-n)>>>32-n;return e<<n}O=e<<n-32;return 0}function iP(e){e=e|0;var t=0;t=e;while(i[t>>0]|0)t=t+1|0;return t-e|0}function iN(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;n=e+n>>>0;return(O=t+i+(n>>>0<e>>>0|0)>>>0,n|0)|0}function iO(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t>>>n;return e>>>n|(t&(1<<n)-1)<<32-n}O=0;return t>>>n-32|0}function iI(e,t,n){e=e|0;t=t|0;n=n|0;var r=0;if((n|0)>=4096)return eD(e|0,t|0,n|0)|0;r=e|0;if((e&3)==(t&3)){while(e&3){if(!n)return r|0;i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}while((n|0)>=4){s[e>>2]=s[t>>2];e=e+4|0;t=t+4|0;n=n-4|0}}while((n|0)>0){i[e>>0]=i[t>>0]|0;e=e+1|0;t=t+1|0;n=n-1|0}return r|0}function ik(e,t,n){e=e|0;t=t|0;n=n|0;if((n|0)<32){O=t>>n;return e>>>n|(t&(1<<n)-1)<<32-n}O=(t|0)<0?-1:0;return t>>n-32|0}function iU(e){e=e|0;var t=0;t=i[g+(e>>>24)>>0]|0;if((t|0)<8)return t|0;t=i[g+(e>>16&255)>>0]|0;if((t|0)<8)return t+8|0;t=i[g+(e>>8&255)>>0]|0;if((t|0)<8)return t+16|0;return(i[g+(e&255)>>0]|0)+24|0}function iF(e){e=e|0;var t=0;t=i[m+(e&255)>>0]|0;if((t|0)<8)return t|0;t=i[m+(e>>8&255)>>0]|0;if((t|0)<8)return t+8|0;t=i[m+(e>>16&255)>>0]|0;if((t|0)<8)return t+16|0;return(i[m+(e>>>24)>>0]|0)+24|0}function iz(e,t){e=e|0;t=t|0;var n=0,i=0,r=0,s=0;s=e&65535;i=t&65535;n=er(i,s)|0;r=e>>>16;i=(n>>>16)+(er(i,r)|0)|0;t=t>>>16;e=er(t,s)|0;return(O=(i>>>16)+(er(t,r)|0)+(((i&65535)+e|0)>>>16)|0,i+e<<16|n&65535|0)|0}function iB(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,s=0,a=0,o=0,l=0,u=0;u=t>>31|((t|0)<0?-1:0)<<1;l=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;s=i>>31|((i|0)<0?-1:0)<<1;r=((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1;o=iL(u^e,l^t,u,l)|0;a=O;t=s^u;e=r^l;e=iL((ij(o,a,iL(s^n,r^i,s,r)|0,O,0)|0)^t,O^e,t,e)|0;return e|0}function iV(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,a=0,o=0,l=0,u=0,c=0;r=h;h=h+8|0;l=r|0;o=t>>31|((t|0)<0?-1:0)<<1;a=((t|0)<0?-1:0)>>31|((t|0)<0?-1:0)<<1;c=i>>31|((i|0)<0?-1:0)<<1;u=((i|0)<0?-1:0)>>31|((i|0)<0?-1:0)<<1;t=iL(o^e,a^t,o,a)|0;e=O;ij(t,e,iL(c^n,u^i,c,u)|0,O,l);e=iL(s[l>>2]^o,s[l+4>>2]^a,o,a)|0;t=O;h=r;return(O=t,e)|0}function iH(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,s=0;r=e;s=n;e=iz(r,s)|0;n=O;return(O=(er(t,s)|0)+(er(i,r)|0)+n|n&0,e|0)|0}function iG(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;e=ij(e,t,n,i,0)|0;return e|0}function iW(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;var r=0,a=0;a=h;h=h+8|0;r=a|0;ij(e,t,n,i,r);h=a;return(O=s[r+4>>2]|0,s[r>>2]|0)|0}function ij(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;var a=0,o=0,l=0,u=0,c=0,h=0,f=0,d=0,p=0,m=0;o=e;u=t;l=u;h=n;a=i;c=a;if(!l){a=(r|0)!=0;if(!c){if(a){s[r>>2]=(o>>>0)%(h>>>0);s[r+4>>2]=0}c=0;f=(o>>>0)/(h>>>0)>>>0;return(O=c,f)|0}else{if(!a){h=0;f=0;return(O=h,f)|0}s[r>>2]=e|0;s[r+4>>2]=t&0;h=0;f=0;return(O=h,f)|0}}f=(c|0)==0;do if(h){if(!f){c=(iU(c|0)|0)-(iU(l|0)|0)|0;if(c>>>0<=31){f=c+1|0;h=31-c|0;e=c-31>>31;u=f;t=o>>>(f>>>0)&e|l<<h;e=l>>>(f>>>0)&e;c=0;h=o<<h;break}if(!r){h=0;f=0;return(O=h,f)|0}s[r>>2]=e|0;s[r+4>>2]=u|t&0;h=0;f=0;return(O=h,f)|0}c=h-1|0;if(c&h){h=(iU(h|0)|0)+33-(iU(l|0)|0)|0;m=64-h|0;f=32-h|0;d=f>>31;p=h-32|0;e=p>>31;u=h;t=f-1>>31&l>>>(p>>>0)|(l<<f|o>>>(h>>>0))&e;e=e&l>>>(h>>>0);c=o<<m&d;h=(l<<m|o>>>(p>>>0))&d|o<<f&h-33>>31;break}if(r){s[r>>2]=c&o;s[r+4>>2]=0}if((h|0)==1){p=u|t&0;m=e|0;return(O=p,m)|0}else{m=iF(h|0)|0;p=l>>>(m>>>0)|0;m=l<<32-m|o>>>(m>>>0)|0;return(O=p,m)|0}}else{if(f){if(r){s[r>>2]=(l>>>0)%(h>>>0);s[r+4>>2]=0}p=0;m=(l>>>0)/(h>>>0)>>>0;return(O=p,m)|0}if(!o){if(r){s[r>>2]=0;s[r+4>>2]=(l>>>0)%(c>>>0)}p=0;m=(l>>>0)/(c>>>0)>>>0;return(O=p,m)|0}h=c-1|0;if(!(h&c)){if(r){s[r>>2]=e|0;s[r+4>>2]=h&l|t&0}p=0;m=l>>>((iF(c|0)|0)>>>0);return(O=p,m)|0}c=(iU(c|0)|0)-(iU(l|0)|0)|0;if(c>>>0<=30){e=c+1|0;h=31-c|0;u=e;t=l<<h|o>>>(e>>>0);e=l>>>(e>>>0);c=0;h=o<<h;break}if(!r){p=0;m=0;return(O=p,m)|0}s[r>>2]=e|0;s[r+4>>2]=u|t&0;p=0;m=0;return(O=p,m)|0}while(0)if(!u){a=h;i=0;l=0}else{o=n|0;a=a|i&0;i=iN(o,a,-1,-1)|0;n=O;l=0;do{f=h;h=c>>>31|h<<1;c=l|c<<1;f=t<<1|f>>>31|0;d=t>>>31|e<<1|0;iL(i,n,f,d);m=O;p=m>>31|((m|0)<0?-1:0)<<1;l=p&1;t=iL(f,d,p&o,(((m|0)<0?-1:0)>>31|((m|0)<0?-1:0)<<1)&a)|0;e=O;u=u-1|0}while((u|0)!=0)a=h;i=0}o=0;if(r){s[r>>2]=t;s[r+4>>2]=e}p=(c|0)>>>31|(a|o)<<1|(o<<1|c>>>31)&0|i;m=(c<<1|0)&-2|l;return(O=p,m)|0}function iq(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;return rt[e&1](t|0,n|0,i|0)|0}function iX(e,t,n,i,r,s){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;rn[e&3](t|0,n|0,i|0,r|0,s|0)}function i$(e,t){e=e|0;t=t|0;ri[e&31](t|0)}function iY(e,t,n){e=e|0;t=t|0;n=n|0;rr[e&3](t|0,n|0)}function iJ(e,t){e=e|0;t=t|0;return rs[e&1](t|0)|0}function iZ(e){e=e|0;ra[e&3]()}function iK(e,t,n,i,r,s,a){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;a=a|0;ro[e&3](t|0,n|0,i|0,r|0,s|0,a|0)}function iQ(e,t,n){e=e|0;t=t|0;n=n|0;return rl[e&3](t|0,n|0)|0}function i0(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;ru[e&3](t|0,n|0,i|0,r|0)}function i1(e,t,n){e=e|0;t=t|0;n=n|0;es(0);return 0}function i2(e,t,n,i,r){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;es(1)}function i3(e){e=e|0;es(2)}function i4(e,t){e=e|0;t=t|0;es(3)}function i5(e){e=e|0;es(4);return 0}function i6(){es(5)}function i8(){e4()}function i9(e,t,n,i,r,s){e=e|0;t=t|0;n=n|0;i=i|0;r=r|0;s=s|0;es(6)}function i7(e,t){e=e|0;t=t|0;es(7);return 0}function re(e,t,n,i){e=e|0;t=t|0;n=n|0;i=i|0;es(8)}var rt=[i1,n3];var rn=[i2,ie,n7,i2];var ri=[i3,ta,tl,tc,td,t_,tv,tz,tV,t7,t9,np,nj,nW,nK,n1,nQ,n0,n2,tu,il,i3,i3,i3,i3,i3,i3,i3,i3,i3,i3,i3];var rr=[i4,tf,tm,tG];var rs=[i5,nq];var ra=[i6,i8,ia,io];var ro=[i9,ii,it,i9];var rl=[i7,th,tp,tH];var ru=[re,n5,n6,re];return{_yo:nA,_strlen:iP,_retireVar:nk,_bitshift64Lshr:iO,_unyo:nC,_solve:nP,_bitshift64Shl:iD,_getSolution:nN,___cxa_is_pointer_type:is,_memset:iR,_getNumVars:nO,_memcpy:iI,_getConflictClauseSize:nU,_addClause:nD,_i64Subtract:iL,_createTheSolver:nL,_realloc:ih,_i64Add:iN,_solveAssuming:nI,___cxa_can_catch:ir,_ensureVar:nR,_getConflictClause:nF,_free:ic,_malloc:iu,__GLOBAL__I_a:tB,__GLOBAL__I_a127:nm,runPostSets:iC,stackAlloc:e8,stackSave:e9,stackRestore:e7,setThrew:te,setTempRet0:ti,getTempRet0:tr,dynCall_iiii:iq,dynCall_viiiii:iX,dynCall_vi:i$,dynCall_vii:iY,dynCall_ii:iJ,dynCall_v:iZ,dynCall_viiiiii:iK,dynCall_iii:iQ,dynCall_viiii:i0}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_yo=Module._yo=asm._yo,_strlen=Module._strlen=asm._strlen,_retireVar=Module._retireVar=asm._retireVar,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_unyo=Module._unyo=asm._unyo,_solve=Module._solve=asm._solve,_bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl,_getSolution=Module._getSolution=asm._getSolution,___cxa_is_pointer_type=Module.___cxa_is_pointer_type=asm.___cxa_is_pointer_type,_memset=Module._memset=asm._memset,_getNumVars=Module._getNumVars=asm._getNumVars,_memcpy=Module._memcpy=asm._memcpy,_getConflictClauseSize=Module._getConflictClauseSize=asm._getConflictClauseSize,_addClause=Module._addClause=asm._addClause,_i64Subtract=Module._i64Subtract=asm._i64Subtract,_createTheSolver=Module._createTheSolver=asm._createTheSolver,_realloc=Module._realloc=asm._realloc,_i64Add=Module._i64Add=asm._i64Add,_solveAssuming=Module._solveAssuming=asm._solveAssuming,___cxa_can_catch=Module.___cxa_can_catch=asm.___cxa_can_catch,_ensureVar=Module._ensureVar=asm._ensureVar,_getConflictClause=Module._getConflictClause=asm._getConflictClause,_free=Module._free=asm._free,_malloc=Module._malloc=asm._malloc,__GLOBAL__I_a=Module.__GLOBAL__I_a=asm.__GLOBAL__I_a,__GLOBAL__I_a127=Module.__GLOBAL__I_a127=asm.__GLOBAL__I_a127,runPostSets=Module.runPostSets=asm.runPostSets,dynCall_iiii=Module.dynCall_iiii=asm.dynCall_iiii,dynCall_viiiii=Module.dynCall_viiiii=asm.dynCall_viiiii,dynCall_vi=Module.dynCall_vi=asm.dynCall_vi,dynCall_vii=Module.dynCall_vii=asm.dynCall_vii,dynCall_ii=Module.dynCall_ii=asm.dynCall_ii,dynCall_v=Module.dynCall_v=asm.dynCall_v,dynCall_viiiiii=Module.dynCall_viiiiii=asm.dynCall_viiiiii,dynCall_iii=Module.dynCall_iii=asm.dynCall_iii,dynCall_viiii=Module.dynCall_viiii=asm.dynCall_viiii;Runtime.stackAlloc=asm.stackAlloc,Runtime.stackSave=asm.stackSave,Runtime.stackRestore=asm.stackRestore,Runtime.setTempRet0=asm.setTempRet0,Runtime.getTempRet0=asm.getTempRet0;var i64Math=function(){var e,t,n,i={math:{}};i.math.Long=function(e,t){this.low_=0|e,this.high_=0|t},i.math.Long.IntCache_={},i.math.Long.fromInt=function(e){if(-128<=e&&e<128){var t=i.math.Long.IntCache_[e];if(t)return t}var n=new i.math.Long(0|e,e<0?-1:0);return -128<=e&&e<128&&(i.math.Long.IntCache_[e]=n),n},i.math.Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?i.math.Long.ZERO:e<=-i.math.Long.TWO_PWR_63_DBL_?i.math.Long.MIN_VALUE:e+1>=i.math.Long.TWO_PWR_63_DBL_?i.math.Long.MAX_VALUE:e<0?i.math.Long.fromNumber(-e).negate():new i.math.Long(e%i.math.Long.TWO_PWR_32_DBL_|0,e/i.math.Long.TWO_PWR_32_DBL_|0)},i.math.Long.fromBits=function(e,t){return new i.math.Long(e,t)},i.math.Long.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var n=t||10;if(n<2||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return i.math.Long.fromString(e.substring(1),n).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var r=i.math.Long.fromNumber(Math.pow(n,8)),s=i.math.Long.ZERO,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+o),n);if(o<8){var u=i.math.Long.fromNumber(Math.pow(n,o));s=s.multiply(u).add(i.math.Long.fromNumber(l))}else s=(s=s.multiply(r)).add(i.math.Long.fromNumber(l))}return s},i.math.Long.TWO_PWR_16_DBL_=65536,i.math.Long.TWO_PWR_24_DBL_=16777216,i.math.Long.TWO_PWR_32_DBL_=i.math.Long.TWO_PWR_16_DBL_*i.math.Long.TWO_PWR_16_DBL_,i.math.Long.TWO_PWR_31_DBL_=i.math.Long.TWO_PWR_32_DBL_/2,i.math.Long.TWO_PWR_48_DBL_=i.math.Long.TWO_PWR_32_DBL_*i.math.Long.TWO_PWR_16_DBL_,i.math.Long.TWO_PWR_64_DBL_=i.math.Long.TWO_PWR_32_DBL_*i.math.Long.TWO_PWR_32_DBL_,i.math.Long.TWO_PWR_63_DBL_=i.math.Long.TWO_PWR_64_DBL_/2,i.math.Long.ZERO=i.math.Long.fromInt(0),i.math.Long.ONE=i.math.Long.fromInt(1),i.math.Long.NEG_ONE=i.math.Long.fromInt(-1),i.math.Long.MAX_VALUE=i.math.Long.fromBits(-1,2147483647),i.math.Long.MIN_VALUE=i.math.Long.fromBits(0,-2147483648),i.math.Long.TWO_PWR_24_=i.math.Long.fromInt(16777216),i.math.Long.prototype.toInt=function(){return this.low_},i.math.Long.prototype.toNumber=function(){return this.high_*i.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},i.math.Long.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(!this.equals(i.math.Long.MIN_VALUE))return"-"+this.negate().toString(t);var n=i.math.Long.fromNumber(t),r=this.div(n),s=r.multiply(n).subtract(this);return r.toString(t)+s.toInt().toString(t)}for(var a=i.math.Long.fromNumber(Math.pow(t,6)),s=this,o="";;){var l=s.div(a),u=s.subtract(l.multiply(a)).toInt().toString(t);if((s=l).isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}},i.math.Long.prototype.getHighBits=function(){return this.high_},i.math.Long.prototype.getLowBits=function(){return this.low_},i.math.Long.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:i.math.Long.TWO_PWR_32_DBL_+this.low_},i.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(i.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high_?t+33:t+1},i.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},i.math.Long.prototype.isNegative=function(){return this.high_<0},i.math.Long.prototype.isOdd=function(){return(1&this.low_)==1},i.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},i.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},i.math.Long.prototype.lessThan=function(e){return 0>this.compare(e)},i.math.Long.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},i.math.Long.prototype.greaterThan=function(e){return this.compare(e)>0},i.math.Long.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},i.math.Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},i.math.Long.prototype.negate=function(){return this.equals(i.math.Long.MIN_VALUE)?i.math.Long.MIN_VALUE:this.not().add(i.math.Long.ONE)},i.math.Long.prototype.add=function(e){var t,n,r=this.high_>>>16,s=65535&this.high_,a=this.low_>>>16,o=65535&this.low_,l=e.high_>>>16,u=65535&e.high_,c=e.low_>>>16,h=65535&e.low_,f=0,d=0;return t=0+((n=0+(o+h))>>>16),n&=65535,t+=a+c,d+=t>>>16,t&=65535,d+=s+u,f+=d>>>16,d&=65535,f+=r+l,f&=65535,i.math.Long.fromBits(t<<16|n,f<<16|d)},i.math.Long.prototype.subtract=function(e){return this.add(e.negate())},i.math.Long.prototype.multiply=function(e){if(this.isZero()||e.isZero())return i.math.Long.ZERO;if(this.equals(i.math.Long.MIN_VALUE))return e.isOdd()?i.math.Long.MIN_VALUE:i.math.Long.ZERO;if(e.equals(i.math.Long.MIN_VALUE))return this.isOdd()?i.math.Long.MIN_VALUE:i.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(i.math.Long.TWO_PWR_24_)&&e.lessThan(i.math.Long.TWO_PWR_24_))return i.math.Long.fromNumber(this.toNumber()*e.toNumber());var t,n,r=this.high_>>>16,s=65535&this.high_,a=this.low_>>>16,o=65535&this.low_,l=e.high_>>>16,u=65535&e.high_,c=e.low_>>>16,h=65535&e.low_,f=0,d=0;return t=0+((n=0+o*h)>>>16),n&=65535,t+=a*h,d+=t>>>16,t&=65535,t+=o*c,d+=t>>>16,t&=65535,d+=s*h,f+=d>>>16,d&=65535,d+=a*c,f+=d>>>16,d&=65535,d+=o*u,f+=d>>>16,d&=65535,f+=r*h+s*c+a*u+o*l,f&=65535,i.math.Long.fromBits(t<<16|n,f<<16|d)},i.math.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return i.math.Long.ZERO;if(this.equals(i.math.Long.MIN_VALUE)){if(e.equals(i.math.Long.ONE)||e.equals(i.math.Long.NEG_ONE))return i.math.Long.MIN_VALUE;if(e.equals(i.math.Long.MIN_VALUE))return i.math.Long.ONE;var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(i.math.Long.ZERO))return e.isNegative()?i.math.Long.ONE:i.math.Long.NEG_ONE;var n=this.subtract(e.multiply(t));return t.add(n.div(e))}if(e.equals(i.math.Long.MIN_VALUE))return i.math.Long.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var r=i.math.Long.ZERO,n=this;n.greaterThanOrEqual(e);){for(var t=Math.max(1,Math.floor(n.toNumber()/e.toNumber())),s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:Math.pow(2,s-48),o=i.math.Long.fromNumber(t),l=o.multiply(e);l.isNegative()||l.greaterThan(n);)t-=a,l=(o=i.math.Long.fromNumber(t)).multiply(e);o.isZero()&&(o=i.math.Long.ONE),r=r.add(o),n=n.subtract(l)}return r},i.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},i.math.Long.prototype.not=function(){return i.math.Long.fromBits(~this.low_,~this.high_)},i.math.Long.prototype.and=function(e){return i.math.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},i.math.Long.prototype.or=function(e){return i.math.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},i.math.Long.prototype.xor=function(e){return i.math.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},i.math.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var t=this.low_;if(!(e<32))return i.math.Long.fromBits(0,t<<e-32);var n=this.high_;return i.math.Long.fromBits(t<<e,n<<e|t>>>32-e)},i.math.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var t=this.high_;if(!(e<32))return i.math.Long.fromBits(t>>e-32,t>=0?0:-1);var n=this.low_;return i.math.Long.fromBits(n>>>e|t<<32-e,t>>e)},i.math.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var t=this.high_;if(e<32){var n=this.low_;return i.math.Long.fromBits(n>>>e|t<<32-e,t>>>e)}return 32==e?i.math.Long.fromBits(t,0):i.math.Long.fromBits(t>>>e-32,0)};var r={appName:"Modern Browser"},s=!0;function a(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new a(null)}function l(e,t,n,i,r,s){for(;--s>=0;){var a=t*this[e++]+n[i]+r;r=Math.floor(a/67108864),n[i++]=67108863&a}return r}function u(e,t,n,i,r,s){for(var a=32767&t,o=t>>15;--s>=0;){var l=32767&this[e],u=this[e++]>>15,c=o*l+u*a;r=((l=a*l+((32767&c)<<15)+n[i]+(1073741823&r))>>>30)+(c>>>15)+o*u+(r>>>30),n[i++]=1073741823&l}return r}function c(e,t,n,i,r,s){for(var a=16383&t,o=t>>14;--s>=0;){var l=16383&this[e],u=this[e++]>>14,c=o*l+u*a;r=((l=a*l+((16383&c)<<14)+n[i]+r)>>28)+(c>>14)+o*u,n[i++]=268435455&l}return r}"Microsoft Internet Explorer"==r.appName?(a.prototype.am=u,e=30):s&&"Netscape"!=r.appName?(a.prototype.am=l,e=26):(a.prototype.am=c,e=28),a.prototype.DB=e,a.prototype.DM=(1<<e)-1,a.prototype.DV=1<<e;var h=52;a.prototype.FV=Math.pow(2,h),a.prototype.F1=h-e,a.prototype.F2=2*e-h;var f="0123456789abcdefghijklmnopqrstuvwxyz",d=[];for(n=0,t=48;n<=9;++n)d[t++]=n;for(n=10,t=97;n<36;++n)d[t++]=n;for(n=10,t=65;n<36;++n)d[t++]=n;function p(e){return f.charAt(e)}function m(e,t){var n=d[e.charCodeAt(t)];return null==n?-1:n}function g(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function v(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function _(e){var t=o();return t.fromInt(e),t}function y(e,t){if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else if(4==t)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n,i=e.length,r=!1,s=0;--i>=0;){var o=8==n?255&e[i]:m(e,i);if(o<0){"-"==e.charAt(i)&&(r=!0);continue}r=!1,0==s?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=n)>=this.DB&&(s-=this.DB)}8==n&&(128&e[0])!=0&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&a.ZERO.subTo(this,this)}function x(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function b(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var t,n,i=(1<<t)-1,r=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(n=this[a]>>o)>0&&(r=!0,s=p(n));a>=0;)o<t?n=(this[a]&(1<<o)-1)<<t-o|this[--a]>>(o+=this.DB-t):(n=this[a]>>(o-=t)&i,o<=0&&(o+=this.DB,--a)),n>0&&(r=!0),r&&(s+=p(n));return r?s:"0"}function w(){var e=o();return a.ZERO.subTo(this,e),e}function M(){return this.s<0?this.negate():this}function S(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function T(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function E(){return this.t<=0?0:this.DB*(this.t-1)+T(this[this.t-1]^this.s&this.DM)}function A(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function C(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function L(e,t){var n,i=e%this.DB,r=this.DB-i,s=(1<<r)-1,a=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>r|o,o=(this[n]&s)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()}function R(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var i=e%this.DB,r=this.DB-i,s=(1<<i)-1;t[0]=this[n]>>i;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&s)<<r,t[a-n]=this[a]>>i;i>0&&(t[this.t-n-1]|=(this.s&s)<<r),t.t=this.t-n,t.clamp()}function D(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function P(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)}function N(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function O(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t){null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);return}null==n&&(n=o());var s=o(),l=this.s,u=e.s,c=this.DB-T(i[i.t-1]);c>0?(i.lShiftTo(c,s),r.lShiftTo(c,n)):(i.copyTo(s),r.copyTo(n));var h=s.t,f=s[h-1];if(0!=f){var d=f*(1<<this.F1)+(h>1?s[h-2]>>this.F2:0),p=this.FV/d,m=(1<<this.F1)/d,g=1<<this.F2,v=n.t,_=v-h,y=null==t?o():t;for(s.dlShiftTo(_,y),n.compareTo(y)>=0&&(n[n.t++]=1,n.subTo(y,n)),a.ONE.dlShiftTo(h,y),y.subTo(s,s);s.t<h;)s[s.t++]=0;for(;--_>=0;){var x=n[--v]==f?this.DM:Math.floor(n[v]*p+(n[v-1]+g)*m);if((n[v]+=s.am(0,x,n,_,0,h))<x)for(s.dlShiftTo(_,y),n.subTo(y,n);n[v]<--x;)n.subTo(y,n)}null!=t&&(n.drShiftTo(h,t),l!=u&&a.ZERO.subTo(t,t)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),l<0&&a.ZERO.subTo(n,n)}}}function I(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t}function k(e){this.m=e}function U(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function F(e){return e}function z(e){e.divRemTo(this.m,null,e)}function B(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function V(e,t){e.squareTo(t),this.reduce(t)}function H(){if(this.t<1)return 0;var e=this[0];if((1&e)==0)return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function G(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function W(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t}function j(e){var t=o();return e.copyTo(t),this.reduce(t),t}function q(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function X(e,t){e.squareTo(t),this.reduce(t)}function $(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Y(){return(this.t>0?1&this[0]:this.s)==0}function J(e,t){if(e>4294967295||e<1)return a.ONE;var n=o(),i=o(),r=t.convert(this),s=T(e)-1;for(r.copyTo(n);--s>=0;)if(t.sqrTo(n,i),(e&1<<s)>0)t.mulTo(i,r,n);else{var l=n;n=i,i=l}return t.revert(n)}function Z(e,t){var n;return n=e<256||t.isEven()?new k(t):new G(t),this.exp(e,n)}function K(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),i=Math.pow(t,n),r=!1,s=0,o=0,l=0;l<e.length;++l){var u=m(e,l);if(u<0){"-"==e.charAt(l)&&0==this.signum()&&(r=!0);continue}o=t*o+u,++s>=n&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),r&&a.ZERO.subTo(this,this)}function Q(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ee(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function et(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function en(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function ei(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),i=_(n),r=o(),s=o(),a="";for(this.divRemTo(i,r,s);r.signum()>0;)a=(n+s.intValue()).toString(e).substr(1)+a,r.divRemTo(i,r,s);return s.intValue().toString(e)+a}function er(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else if(1==this.t)return this[0];else if(0==this.t)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function es(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()}k.prototype.convert=U,k.prototype.revert=F,k.prototype.reduce=z,k.prototype.mulTo=B,k.prototype.sqrTo=V,G.prototype.convert=W,G.prototype.revert=j,G.prototype.reduce=q,G.prototype.mulTo=$,G.prototype.sqrTo=X,a.prototype.copyTo=g,a.prototype.fromInt=v,a.prototype.fromString=y,a.prototype.clamp=x,a.prototype.dlShiftTo=A,a.prototype.drShiftTo=C,a.prototype.lShiftTo=L,a.prototype.rShiftTo=R,a.prototype.subTo=D,a.prototype.multiplyTo=P,a.prototype.squareTo=N,a.prototype.divRemTo=O,a.prototype.invDigit=H,a.prototype.isEven=Y,a.prototype.exp=J,a.prototype.toString=b,a.prototype.negate=w,a.prototype.abs=M,a.prototype.compareTo=S,a.prototype.bitLength=E,a.prototype.mod=I,a.prototype.modPowInt=Z,a.ZERO=_(0),a.ONE=_(1),a.prototype.fromRadix=K,a.prototype.chunkSize=Q,a.prototype.signum=ee,a.prototype.dMultiply=et,a.prototype.dAddOffset=en,a.prototype.toRadix=ei,a.prototype.intValue=er,a.prototype.addTo=es;var ea={abs:function(e,t){var n,r=new i.math.Long(e,t);n=r.isNegative()?r.negate():r,HEAP32[tempDoublePtr>>2]=n.low_,HEAP32[tempDoublePtr+4>>2]=n.high_},ensureTemps:function(){ea.ensuredTemps||(ea.ensuredTemps=!0,ea.two32=new a,ea.two32.fromString("4294967296",10),ea.two64=new a,ea.two64.fromString("18446744073709551616",10),ea.temp1=new a,ea.temp2=new a)},lh2bignum:function(e,t){var n=new a;n.fromString(t.toString(),10);var i=new a;n.multiplyTo(ea.two32,i);var r=new a;r.fromString(e.toString(),10);var s=new a;return r.addTo(i,s),s},stringify:function(e,t,n){var r=new i.math.Long(e,t).toString();if(n&&"-"==r[0]){ea.ensureTemps();var s=new a;s.fromString(r,10),r=new a,ea.two64.addTo(s,r),r=r.toString(10)}return r},fromString:function(e,t,n,r,s){ea.ensureTemps();var o=new a;o.fromString(e,t);var l=new a;l.fromString(n,10);var u=new a;if(u.fromString(r,10),s&&0>o.compareTo(a.ZERO)){var c=new a;o.addTo(ea.two64,c),o=c}var h=!1;0>o.compareTo(l)?(o=l,h=!0):o.compareTo(u)>0&&(o=u,h=!0);var f=i.math.Long.fromString(o.toString());if(HEAP32[tempDoublePtr>>2]=f.low_,HEAP32[tempDoublePtr+4>>2]=f.high_,h)throw"range error"}};return ea}();if(memoryInitializer){if("function"==typeof Module.locateFile?memoryInitializer=Module.locateFile(memoryInitializer):Module.memoryInitializerPrefixURL&&(memoryInitializer=Module.memoryInitializerPrefixURL+memoryInitializer),ENVIRONMENT_IS_NODE||ENVIRONMENT_IS_SHELL){var data=Module.readBinary(memoryInitializer);HEAPU8.set(data,STATIC_BASE)}else addRunDependency("memory initializer"),Browser.asyncLoad(memoryInitializer,function(e){HEAPU8.set(e,STATIC_BASE),removeRunDependency("memory initializer")},function(e){throw"could not load memory initializer "+memoryInitializer})}function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ExitStatus.prototype=Error(),ExitStatus.prototype.constructor=ExitStatus;var preloadStartTime=null,calledMain=!1;function run(e){e=e||Module.arguments,null===preloadStartTime&&(preloadStartTime=Date.now()),!(runDependencies>0)&&(preRun(),!(runDependencies>0)&&(Module.calledRun||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),t()},1)):t())));function t(){!Module.calledRun&&(Module.calledRun=!0,ABORT||(ensureInitRuntime(),preMain(),ENVIRONMENT_IS_WEB&&null!==preloadStartTime&&Module.printErr("pre-main prep time: "+(Date.now()-preloadStartTime)+" ms"),Module._main&&shouldRunNow&&Module.callMain(e),postRun()))}}function exit(e){if(!Module.noExitRuntime)throw ABORT=!0,EXITSTATUS=e,STACKTOP=initialStackTop,exitRuntime(),ENVIRONMENT_IS_NODE?(process.stdout.once("drain",function(){process.exit(e)}),console.log(" "),setTimeout(function(){process.exit(e)},500)):ENVIRONMENT_IS_SHELL&&"function"==typeof quit&&quit(e),new ExitStatus(e)}function abort(e){e&&(Module.print(e),Module.printErr(e)),ABORT=!0,EXITSTATUS=1;var t="\nIf this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.";throw"abort() at "+stackTrace()+t}if(dependenciesFulfilled=function e(){!Module.calledRun&&shouldRunNow&&run(),Module.calledRun||(dependenciesFulfilled=e)},Module.callMain=Module.callMain=function(e){assert(0==runDependencies,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called"),e=e||[],ensureInitRuntime();var t=e.length+1;function n(){for(var e=0;e<3;e++)i.push(0)}var i=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];n();for(var r=0;r<t-1;r+=1)i.push(allocate(intArrayFromString(e[r]),"i8",ALLOC_NORMAL)),n();i.push(0),i=allocate(i,"i32",ALLOC_NORMAL),initialStackTop=STACKTOP;try{var s=Module._main(t,i,0);exit(s)}catch(e){if(e instanceof ExitStatus)return;if("SimulateInfiniteLoop"==e){Module.noExitRuntime=!0;return}throw e&&"object"==typeof e&&e.stack&&Module.printErr("exception thrown: "+[e,e.stack]),e}finally{calledMain=!0}},Module.run=Module.run=run,Module.exit=Module.exit=exit,Module.abort=Module.abort=abort,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();var origMalloc=Module._malloc,origFree=Module._free,MEMSTATS={totalMemory:Module.HEAPU8.length,heapUsed:0},MEMSTATS_DATA={pointerToSizeMap:{},getSizeOfPointer:function(e){return MEMSTATS_DATA.pointerToSizeMap[e]}};Module.MEMSTATS=MEMSTATS,Module.MEMSTATS_DATA=MEMSTATS_DATA;var hookedMalloc=function(e){var t=origMalloc(e);return t?(MEMSTATS.heapUsed+=e,MEMSTATS_DATA.pointerToSizeMap[t]=e,t):0},hookedFree=function(e){return e&&(MEMSTATS.heapUsed-=MEMSTATS_DATA.getSizeOfPointer(e)||0,delete MEMSTATS_DATA.pointerToSizeMap[e]),origFree(e)};return Module._malloc=hookedMalloc,Module._free=hookedFree,_malloc=hookedMalloc,_free=hookedFree,setInnerMalloc&&(setInnerMalloc(hookedMalloc),setInnerFree(hookedFree)),module1.exports},module.exports=C_MINISAT}),parcelRegister("jDp01",function(e,t){$parcel$export(e.exports,"SVG",()=>nn);let n={},i=[];function r(e,t){if(Array.isArray(e)){for(let n of e)r(n,t);return}if("object"==typeof e){for(let t in e)r(t,e[t]);return}o(Object.getOwnPropertyNames(t)),n[e]=Object.assign(n[e]||{},t)}function s(e){return n[e]||{}}function a(){return[...new Set(i)]}function o(e){i.push(...e)}function l(e,t){let n;let i=e.length,r=[];for(n=0;n<i;n++)r.push(t(e[n]));return r}function u(e,t){let n;let i=e.length,r=[];for(n=0;n<i;n++)t(e[n])&&r.push(e[n]);return r}function c(e){return e%360*Math.PI/180}function h(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function f(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t,n,i){return(null==t||null==n)&&(i=i||e.bbox(),null==t?t=i.width/i.height*n:null==n&&(n=i.height/i.width*t)),{width:t,height:n}}function m(e,t){let n=e.origin,i=null!=e.ox?e.ox:null!=e.originX?e.originX:"center",r=null!=e.oy?e.oy:null!=e.originY?e.originY:"center";null!=n&&([i,r]=Array.isArray(n)?n:"object"==typeof n?[n.x,n.y]:[n,n]);let s="string"==typeof i,a="string"==typeof r;if(s||a){let{height:e,width:n,x:o,y:l}=t.bbox();s&&(i=i.includes("left")?o:i.includes("right")?o+n:o+n/2),a&&(r=r.includes("top")?l:r.includes("bottom")?l+e:l+e/2)}return[i,r]}let g="http://www.w3.org/2000/svg",v="http://www.w3.org/1999/xhtml",_="http://www.w3.org/2000/xmlns/",y="http://www.w3.org/1999/xlink",x="http://svgjs.dev/svgjs",b={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class w{}let M={},S="___SYMBOL___ROOT___";function T(e,t=g){return b.document.createElementNS(t,e)}function E(e,t=!1){if(e instanceof w)return e;if("object"==typeof e)return L(e);if(null==e)return new M[S];if("string"==typeof e&&"<"!==e.charAt(0))return L(b.document.querySelector(e));let n=t?b.document.createElement("div"):T("svg");return n.innerHTML=e,e=L(n.firstChild),n.removeChild(n.firstChild),e}function A(e,t){return t&&t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node?t:T(e)}function C(e){if(!e)return null;if(e.instance instanceof w)return e.instance;if("#document-fragment"===e.nodeName)return new M.Fragment(e);let t=d(e.nodeName||"Dom");return"LinearGradient"===t||"RadialGradient"===t?t="Gradient":M[t]||(t="Dom"),new M[t](e)}let L=C;function R(e,t=e.name,n=!1){return M[t]=e,n&&(M[S]=e),o(Object.getOwnPropertyNames(e.prototype)),e}function D(e){return M[e]}let P=1e3;function N(e){return"Svgjs"+d(e)+P++}function O(e){for(let t=e.children.length-1;t>=0;t--)O(e.children[t]);return e.id&&(e.id=N(e.nodeName)),e}function I(e,t){let n,i;for(i=(e=Array.isArray(e)?e:[e]).length-1;i>=0;i--)for(n in t)e[i].prototype[n]=t[n]}function k(e){return function(...t){let n=t[t.length-1];return!n||n.constructor!==Object||n instanceof Array?e.apply(this,t):e.apply(this,t.slice(0,-1)).attr(n)}}r("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){let e=this.position();return this.parent().add(this.remove(),e+1),this},backward:function(){let e=this.position();return this.parent().add(this.remove(),e?e-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(e){(e=E(e)).remove();let t=this.position();return this.parent().add(e,t),this},after:function(e){(e=E(e)).remove();let t=this.position();return this.parent().add(e,t+1),this},insertBefore:function(e){return(e=E(e)).before(this),this},insertAfter:function(e){return(e=E(e)).after(this),this}});let U=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,F=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,z=/rgb\((\d+),(\d+),(\d+)\)/,B=/(#[a-z_][a-z0-9\-_]*)/i,V=/\)\s*,?\s*/,H=/\s/g,G=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,W=/^rgb\(/,j=/^(\s+)?$/,q=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,X=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,$=/[\s,]+/,Y=/[MLHVCSQTAZ]/i;function J(e){return 4===e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function Z(e){let t=Math.max(0,Math.min(255,Math.round(e))).toString(16);return 1===t.length?"0"+t:t}function K(e,t){for(let n=t.length;n--;)if(null==e[t[n]])return!1;return!0}function Q(e,t){let n=K(e,"rgb")?{_a:e.r,_b:e.g,_c:e.b,_d:0,space:"rgb"}:K(e,"xyz")?{_a:e.x,_b:e.y,_c:e.z,_d:0,space:"xyz"}:K(e,"hsl")?{_a:e.h,_b:e.s,_c:e.l,_d:0,space:"hsl"}:K(e,"lab")?{_a:e.l,_b:e.a,_c:e.b,_d:0,space:"lab"}:K(e,"lch")?{_a:e.l,_b:e.c,_c:e.h,_d:0,space:"lch"}:K(e,"cmyk")?{_a:e.c,_b:e.m,_c:e.y,_d:e.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=t||n.space,n}function ee(e){return"lab"===e||"xyz"===e||"lch"===e}function et(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}r("Dom",{classes:function(){let e=this.attr("class");return null==e?[]:e.trim().split($)},hasClass:function(e){return -1!==this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){let t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}}),r("Dom",{css:function(e,t){let n={};if(0==arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(e){return!!e.length}).forEach(function(e){let t=e.split(/\s*:\s*/);n[t[0]]=t[1]}),n;if(arguments.length<2){if(Array.isArray(e)){for(let t of e){let e=h(t);n[t]=this.node.style[e]}return n}if("string"==typeof e)return this.node.style[h(e)];if("object"==typeof e)for(let t in e)this.node.style[h(t)]=null==e[t]||j.test(e[t])?"":e[t]}return 2==arguments.length&&(this.node.style[h(e)]=null==t||j.test(t)?"":t),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),r("Dom",{data:function(e,t,n){if(null==e)return this.data(l(u(this.node.attributes,e=>0===e.nodeName.indexOf("data-")),e=>e.nodeName.slice(5)));if(e instanceof Array){let t={};for(let n of e)t[n]=this.data(n);return t}if("object"==typeof e)for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(t){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:!0===n||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),r("Dom",{remember:function(e,t){if("object"==typeof arguments[0])for(let t in e)this.remember(t,e[t]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(let e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory=this._memory||{}}});class en{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof en||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b}static random(e="vibrant",t,n){let{random:i,round:r,sin:s,PI:a}=Math;if("vibrant"===e)return new en(24*i()+57,38*i()+45,360*i(),"lch");if("sine"===e)return new en(r(80*s(2*a*(t=null==t?i():t)/.5+.01)+150),r(50*s(2*a*t/.5+4.6)+200),r(100*s(2*a*t/.5+2.3)+150));if("pastel"===e)return new en(8*i()+86,17*i()+9,360*i(),"lch");if("dark"===e)return new en(10+10*i(),50*i()+86,360*i(),"lch");if("rgb"===e)return new en(255*i(),255*i(),255*i());if("lab"===e)return new en(100*i(),256*i()-128,256*i()-128,"lab");if("grey"===e){let e=255*i();return new en(e,e,e)}else throw Error("Unsupported random color mode")}static test(e){return"string"==typeof e&&(G.test(e)||W.test(e))}cmyk(){let{_a:e,_b:t,_c:n}=this.rgb(),[i,r,s]=[e,t,n].map(e=>e/255),a=Math.min(1-i,1-r,1-s);return 1===a?new en(0,0,0,1,"cmyk"):new en((1-i-a)/(1-a),(1-r-a)/(1-a),(1-s-a)/(1-a),a,"cmyk")}hsl(){let{_a:e,_b:t,_c:n}=this.rgb(),[i,r,s]=[e,t,n].map(e=>e/255),a=Math.max(i,r,s),o=Math.min(i,r,s),l=(a+o)/2,u=a===o,c=a-o,h=u?0:l>.5?c/(2-a-o):c/(a+o);return new en(360*(u?0:a===i?((r-s)/c+(r<s?6:0))/6:a===r?((s-i)/c+2)/6:a===s?((i-r)/c+4)/6:0),100*h,100*l,"hsl")}init(e=0,t=0,n=0,i=0,r="rgb"){if(e=e||0,this.space)for(let e in this.space)delete this[this.space[e]];if("number"==typeof e)r="string"==typeof i?i:r,Object.assign(this,{_a:e,_b:t,_c:n,_d:i="string"==typeof i?0:i,space:r});else if(e instanceof Array)this.space=t||("string"==typeof e[3]?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object)Object.assign(this,Q(e,t));else if("string"==typeof e){if(W.test(e)){let t=e.replace(H,""),[n,i,r]=z.exec(t).slice(1,4).map(e=>parseInt(e));Object.assign(this,{_a:n,_b:i,_c:r,_d:0,space:"rgb"})}else if(G.test(e)){let t=e=>parseInt(e,16),[,n,i,r]=F.exec(J(e)).map(t);Object.assign(this,{_a:n,_b:i,_c:r,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color")}let{_a:s,_b:a,_c:o,_d:l}=this;Object.assign(this,"rgb"===this.space?{r:s,g:a,b:o}:"xyz"===this.space?{x:s,y:a,z:o}:"hsl"===this.space?{h:s,s:a,l:o}:"lab"===this.space?{l:s,a:a,b:o}:"lch"===this.space?{l:s,c:a,h:o}:"cmyk"===this.space?{c:s,m:a,y:o,k:l}:{})}lab(){let{x:e,y:t,z:n}=this.xyz();return new en(116*t-16,500*(e-t),200*(t-n),"lab")}lch(){let{l:e,a:t,b:n}=this.lab(),i=Math.sqrt(t**2+n**2),r=180*Math.atan2(n,t)/Math.PI;return r<0&&(r*=-1,r=360-r),new en(e,i,r,"lch")}rgb(){if("rgb"===this.space)return this;if(ee(this.space)){let{x:e,y:t,z:n}=this;if("lab"===this.space||"lch"===this.space){let{l:i,a:r,b:s}=this;if("lch"===this.space){let{c:e,h:t}=this,n=Math.PI/180;r=e*Math.cos(n*t),s=e*Math.sin(n*t)}let a=(i+16)/116,o=r/500+a,l=a-s/200,u=16/116,c=.008856,h=7.787;e=.95047*(o**3>.008856?o**3:(o-u)/h),t=1*(a**3>c?a**3:(a-u)/h),n=1.08883*(l**3>c?l**3:(l-u)/h)}let i=3.2406*e+-1.5372*t+-.4986*n,r=-.9689*e+1.8758*t+.0415*n,s=.0557*e+-.204*t+1.057*n,a=Math.pow,o=.0031308;return new en(255*(i>.0031308?1.055*a(i,1/2.4)-.055:12.92*i),255*(r>o?1.055*a(r,1/2.4)-.055:12.92*r),255*(s>o?1.055*a(s,1/2.4)-.055:12.92*s))}if("hsl"===this.space){let{h:e,s:t,l:n}=this;if(e/=360,n/=100,0==(t/=100))return new en(n*=255,n,n);let i=n<.5?n*(1+t):n+t-n*t,r=2*n-i;return new en(255*et(r,i,e+1/3),255*et(r,i,e),255*et(r,i,e-1/3))}{if("cmyk"!==this.space)return this;let{c:e,m:t,y:n,k:i}=this;return new en(255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)))}}toArray(){let{_a:e,_b:t,_c:n,_d:i,space:r}=this;return[e,t,n,i,r]}toHex(){let[e,t,n]=this._clamped().map(Z);return`#${e}${t}${n}`}toRgb(){let[e,t,n]=this._clamped();return`rgb(${e},${t},${n})`}toString(){return this.toHex()}xyz(){let{_a:e,_b:t,_c:n}=this.rgb(),[i,r,s]=[e,t,n].map(e=>e/255),a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,o=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,u=(.4124*a+.3576*o+.1805*l)/.95047,c=(.2126*a+.7152*o+.0722*l)/1,h=(.0193*a+.1192*o+.9505*l)/1.08883;return new en(u>.008856?Math.pow(u,1/3):7.787*u+16/116,c>.008856?Math.pow(c,1/3):7.787*c+16/116,h>.008856?Math.pow(h,1/3):7.787*h+16/116,"xyz")}_clamped(){let{_a:e,_b:t,_c:n}=this.rgb(),{max:i,min:r,round:s}=Math;return[e,t,n].map(e=>i(0,r(s(e),255)))}}class ei{constructor(...e){this.init(...e)}clone(){return new ei(this)}init(e,t){let n={x:0,y:0},i=Array.isArray(e)?{x:e[0],y:e[1]}:"object"==typeof e?{x:e.x,y:e.y}:{x:e,y:t};return this.x=null==i.x?n.x:i.x,this.y=null==i.y?n.y:i.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){ea.isMatrixLike(e)||(e=new ea(e));let{x:t,y:n}=this;return this.x=e.a*t+e.c*n+e.e,this.y=e.b*t+e.d*n+e.f,this}}function er(e,t){return new ei(e,t).transformO(this.screenCTM().inverseO())}function es(e,t,n){return Math.abs(t-e)<(n||1e-6)}class ea{constructor(...e){this.init(...e)}static formatTransforms(e){let t="both"===e.flip||!0===e.flip,n=e.flip&&(t||"x"===e.flip)?-1:1,i=e.flip&&(t||"y"===e.flip)?-1:1,r=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,s=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,a=e.scale&&e.scale.length?e.scale[0]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleX)?e.scaleX*n:n,o=e.scale&&e.scale.length?e.scale[1]*i:isFinite(e.scale)?e.scale*i:isFinite(e.scaleY)?e.scaleY*i:i,l=e.shear||0,u=e.rotate||e.theta||0,c=new ei(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),h=c.x,f=c.y,d=new ei(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),p=d.x,m=d.y,g=new ei(e.translate||e.tx||e.translateX,e.ty||e.translateY),v=g.x,_=g.y,y=new ei(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:a,scaleY:o,skewX:r,skewY:s,shear:l,theta:u,rx:y.x,ry:y.y,tx:v,ty:_,ox:h,oy:f,px:p,py:m}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return null!=e.a||null!=e.b||null!=e.c||null!=e.d||null!=e.e||null!=e.f}static matrixMultiply(e,t,n){let i=e.a*t.a+e.c*t.b,r=e.b*t.a+e.d*t.b,s=e.a*t.c+e.c*t.d,a=e.b*t.c+e.d*t.d,o=e.e+e.a*t.e+e.c*t.f,l=e.f+e.b*t.e+e.d*t.f;return n.a=i,n.b=r,n.c=s,n.d=a,n.e=o,n.f=l,n}around(e,t,n){return this.clone().aroundO(e,t,n)}aroundO(e,t,n){let i=e||0,r=t||0;return this.translateO(-i,-r).lmultiplyO(n).translateO(i,r)}clone(){return new ea(this)}decompose(e=0,t=0){let n=this.a,i=this.b,r=this.c,s=this.d,a=this.e,o=this.f,l=n*s-i*r,u=l>0?1:-1,c=u*Math.sqrt(n*n+i*i),h=Math.atan2(u*i,u*n),f=180/Math.PI*h,d=Math.cos(h),p=Math.sin(h),m=(n*r+i*s)/l,g=r*c/(m*n-i)||s*c/(m*i+n),v=a-e+e*d*c+t*(m*d*c-p*g),_=o-t+e*p*c+t*(m*p*c+d*g);return{scaleX:c,scaleY:g,shear:m,rotate:f,translateX:v,translateY:_,originX:e,originY:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;let t=new ea(e);return es(this.a,t.a)&&es(this.b,t.b)&&es(this.c,t.c)&&es(this.d,t.d)&&es(this.e,t.e)&&es(this.f,t.f)}flip(e,t){return this.clone().flipO(e,t)}flipO(e,t){return"x"===e?this.scaleO(-1,1,t,0):"y"===e?this.scaleO(1,-1,0,t):this.scaleO(-1,-1,e,t||e)}init(e){let t=ea.fromArray([1,0,0,1,0,0]);return e=e instanceof eB?e.matrixify():"string"==typeof e?ea.fromArray(e.split($).map(parseFloat)):Array.isArray(e)?ea.fromArray(e):"object"==typeof e&&ea.isMatrixLike(e)?e:"object"==typeof e?new ea().transform(e):6==arguments.length?ea.fromArray([].slice.call(arguments)):t,this.a=null!=e.a?e.a:t.a,this.b=null!=e.b?e.b:t.b,this.c=null!=e.c?e.c:t.c,this.d=null!=e.d?e.d:t.d,this.e=null!=e.e?e.e:t.e,this.f=null!=e.f?e.f:t.f,this}inverse(){return this.clone().inverseO()}inverseO(){let e=this.a,t=this.b,n=this.c,i=this.d,r=this.e,s=this.f,a=e*i-t*n;if(!a)throw Error("Cannot invert "+this);let o=i/a,l=-t/a,u=-n/a,c=e/a,h=-(o*r+u*s),f=-(l*r+c*s);return this.a=o,this.b=l,this.c=u,this.d=c,this.e=h,this.f=f,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){let t=this,n=e instanceof ea?e:new ea(e);return ea.matrixMultiply(n,t,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){let t=this,n=e instanceof ea?e:new ea(e);return ea.matrixMultiply(t,n,this)}rotate(e,t,n){return this.clone().rotateO(e,t,n)}rotateO(e,t=0,n=0){let i=Math.cos(e=c(e)),r=Math.sin(e),{a:s,b:a,c:o,d:l,e:u,f:h}=this;return this.a=s*i-a*r,this.b=a*i+s*r,this.c=o*i-l*r,this.d=l*i+o*r,this.e=u*i-h*r+n*r-t*i+t,this.f=h*i+u*r-t*r-n*i+n,this}scale(e,t,n,i){return this.clone().scaleO(...arguments)}scaleO(e,t=e,n=0,i=0){3==arguments.length&&(i=n,n=t,t=e);let{a:r,b:s,c:a,d:o,e:l,f:u}=this;return this.a=r*e,this.b=s*t,this.c=a*e,this.d=o*t,this.e=l*e-n*e+n,this.f=u*t-i*t+i,this}shear(e,t,n){return this.clone().shearO(e,t,n)}shearO(e,t=0,n=0){let{a:i,b:r,c:s,d:a,e:o,f:l}=this;return this.a=i+r*e,this.c=s+a*e,this.e=o+l*e-n*e,this}skew(e,t,n,i){return this.clone().skewO(...arguments)}skewO(e,t=e,n=0,i=0){3==arguments.length&&(i=n,n=t,t=e),e=c(e),t=c(t);let r=Math.tan(e),s=Math.tan(t),{a,b:o,c:l,d:u,e:h,f}=this;return this.a=a+o*r,this.b=o+a*s,this.c=l+u*r,this.d=u+l*s,this.e=h+f*r-i*r,this.f=f+h*s-n*s,this}skewX(e,t,n){return this.skew(e,0,t,n)}skewY(e,t,n){return this.skew(0,e,t,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(ea.isMatrixLike(e))return new ea(e).multiplyO(this);let t=ea.formatTransforms(e),n=this,{x:i,y:r}=new ei(t.ox,t.oy).transform(n),s=new ea().translateO(t.rx,t.ry).lmultiplyO(n).translateO(-i,-r).scaleO(t.scaleX,t.scaleY).skewO(t.skewX,t.skewY).shearO(t.shear).rotateO(t.theta).translateO(i,r);if(isFinite(t.px)||isFinite(t.py)){let e=new ei(i,r).transform(s),n=isFinite(t.px)?t.px-e.x:0,a=isFinite(t.py)?t.py-e.y:0;s.translateO(n,a)}return s.translateO(t.tx,t.ty),s}translate(e,t){return this.clone().translateO(e,t)}translateO(e,t){return this.e+=e||0,this.f+=t||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function eo(){return new ea(this.node.getCTM())}function el(){if("function"==typeof this.isRoot&&!this.isRoot()){let e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new ea(t)}return new ea(this.node.getScreenCTM())}function eu(){if(!eu.nodes){let e=E().size(2,0);e.node.style.cssText="opacity: 0;position: absolute;left: -100%;top: -100%;overflow: hidden",e.attr("focusable","false"),e.attr("aria-hidden","true");let t=e.path().node;eu.nodes={svg:e,path:t}}if(!eu.nodes.svg.node.parentNode){let e=b.document.body||b.document.documentElement;eu.nodes.svg.addTo(e)}return eu.nodes}function ec(e){return!e.width&&!e.height&&!e.x&&!e.y}function eh(e){return e===b.document||(b.document.documentElement.contains||function(e){for(;e.parentNode;)e=e.parentNode;return e===b.document}).call(b.document.documentElement,e)}R(ea,"Matrix");class ef{constructor(...e){this.init(...e)}addOffset(){return this.x+=b.window.pageXOffset,this.y+=b.window.pageYOffset,new ef(this)}init(e){let t=[0,0,0,0];return e="string"==typeof e?e.split($).map(parseFloat):Array.isArray(e)?e:"object"==typeof e?[null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height]:4==arguments.length?[].slice.call(arguments):t,this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return ec(this)}merge(e){let t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width)-t,r=Math.max(this.y+this.height,e.y+e.height)-n;return new ef(t,n,i,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof ea||(e=new ea(e));let t=1/0,n=-1/0,i=1/0,r=-1/0;return[new ei(this.x,this.y),new ei(this.x2,this.y),new ei(this.x,this.y2),new ei(this.x2,this.y2)].forEach(function(s){s=s.transform(e),t=Math.min(t,s.x),n=Math.max(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.y)}),new ef(t,i,n-t,r-i)}}function ed(e,t,n){let i;try{if(i=t(e.node),ec(i)&&!eh(e.node))throw Error("Element not in the dom")}catch(t){i=n(e)}return i}function ep(){return new ef(ed(this,e=>e.getBBox(),e=>{try{let t=e.clone().addTo(eu().svg).show(),n=t.node.getBBox();return t.remove(),n}catch(t){throw Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${t.toString()}`)}}))}function em(e){let t=new ef(ed(this,e=>e.getBoundingClientRect(),e=>{throw Error(`Getting rbox of element "${e.node.nodeName}" is not possible`)}));return e?t.transform(e.screenCTM().inverseO()):t.addOffset()}function eg(e,t){let n=this.bbox();return e>n.x&&t>n.y&&e<n.x+n.width&&t<n.y+n.height}r({viewbox:{viewbox(e,t,n,i){return null==e?new ef(this.attr("viewBox")):this.attr("viewBox",new ef(e,t,n,i))},zoom(e,t){let{width:n,height:i}=this.attr(["width","height"]);if((n||i)&&"string"!=typeof n&&"string"!=typeof i||(n=this.node.clientWidth,i=this.node.clientHeight),!n||!i)throw Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");let r=this.viewbox(),s=n/r.width,a=i/r.height,o=Math.min(s,a);if(null==e)return o;let l=o/e;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),t=t||new ei(n/2/s+r.x,i/2/a+r.y);let u=new ef(r).transform(new ea({scale:l,origin:t}));return this.viewbox(u)}}}),R(ef,"Box");class ev extends Array{constructor(e=[],...t){if(super(e,...t),"number"==typeof e)return this;this.length=0,this.push(...e)}}I([ev],{each(e,...t){return"function"==typeof e?this.map((t,n,i)=>e.call(t,t,n,i)):this.map(n=>n[e](...t))},toArray(){return Array.prototype.concat.apply([],this)}});let e_=["toArray","constructor","each"];function ey(e,t){return new ev(l((t||b.document).querySelectorAll(e),function(e){return C(e)}))}function ex(e){return ey(e,this.node)}function eb(e){return C(this.node.querySelector(e))}ev.extend=function(e){I([ev],e=e.reduce((e,t)=>(e_.includes(t)||"_"===t[0]||(e[t]=function(...e){return this.each(t,...e)}),e),{}))};let ew=0,eM={};function eS(e){let t=e.getEventHolder();return t===b.window&&(t=eM),t.events||(t.events={}),t.events}function eT(e){return e.getEventTarget()}function eE(e){let t=e.getEventHolder();t===b.window&&(t=eM),t.events&&(t.events={})}function eA(e,t,n,i,r){let s=n.bind(i||e),a=E(e),o=eS(a),l=eT(a);t=Array.isArray(t)?t:t.split($),n._svgjsListenerId||(n._svgjsListenerId=++ew),t.forEach(function(e){let t=e.split(".")[0],i=e.split(".")[1]||"*";o[t]=o[t]||{},o[t][i]=o[t][i]||{},o[t][i][n._svgjsListenerId]=s,l.addEventListener(t,s,r||!1)})}function eC(e,t,n,i){let r=E(e),s=eS(r),a=eT(r);("function"!=typeof n||(n=n._svgjsListenerId))&&(t=Array.isArray(t)?t:(t||"").split($)).forEach(function(e){let t,o;let l=e&&e.split(".")[0],u=e&&e.split(".")[1];if(n)s[l]&&s[l][u||"*"]&&(a.removeEventListener(l,s[l][u||"*"][n],i||!1),delete s[l][u||"*"][n]);else if(l&&u){if(s[l]&&s[l][u]){for(o in s[l][u])eC(a,[l,u].join("."),o);delete s[l][u]}}else if(u)for(e in s)for(t in s[e])u===t&&eC(a,[e,u].join("."));else if(l){if(s[l]){for(t in s[l])eC(a,[l,t].join("."));delete s[l]}}else{for(e in s)eC(a,e);eE(r)}})}function eL(e,t,n,i){let r=eT(e);return t instanceof b.window.Event||(t=new b.window.CustomEvent(t,{detail:n,cancelable:!0,...i})),r.dispatchEvent(t),t}class eR extends w{addEventListener(){}dispatch(e,t,n){return eL(this,e,t,n)}dispatchEvent(e){let t=this.getEventHolder().events;if(!t)return!0;let n=t[e.type];for(let t in n)for(let i in n[t])n[t][i](e);return!e.defaultPrevented}fire(e,t,n){return this.dispatch(e,t,n),this}getEventHolder(){return this}getEventTarget(){return this}off(e,t,n){return eC(this,e,t,n),this}on(e,t,n,i){return eA(this,e,t,n,i),this}removeEventListener(){}}function eD(){}R(eR,"EventTarget");let eP={duration:400,ease:">",delay:0},eN={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class eO extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return"number"==typeof e||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split($).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){let e=[];return e.push(...this),e}}class eI{constructor(...e){this.init(...e)}convert(e){return new eI(this.value,e)}divide(e){return e=new eI(e),new eI(this/e,this.unit||e.unit)}init(e,t){return t=Array.isArray(e)?e[1]:t,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(U))&&(this.value=parseFloat(t[1]),"%"===t[5]?this.value/=100:"s"===t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof eI&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new eI(e),new eI(this-e,this.unit||e.unit)}plus(e){return e=new eI(e),new eI(this+e,this.unit||e.unit)}times(e){return e=new eI(e),new eI(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}let ek=[];function eU(e){ek.push(e)}function eF(e,t,n){if(null==e){for(let n of(e={},t=this.node.attributes))e[n.nodeName]=q.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return e}if(e instanceof Array)return e.reduce((e,t)=>(e[t]=this.attr(t),e),{});if("object"==typeof e&&e.constructor===Object)for(t in e)this.attr(t,e[t]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?eN[e]:q.test(t)?parseFloat(t):t;"number"==typeof(t=ek.reduce((t,n)=>n(e,t,this),t))?t=new eI(t):en.isColor(t)?t=new en(t):t.constructor===Array&&(t=new eO(t)),"leading"===e?this.leading&&this.leading(t):"string"==typeof n?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),this.rebuild&&("font-size"===e||"x"===e)&&this.rebuild()}return this}class ez extends eR{constructor(e,t){super(),this.node=e,this.type=e.nodeName,t&&e!==t&&this.attr(t)}add(e,t){return(e=E(e)).removeNamespace&&this.node instanceof b.window.SVGElement&&e.removeNamespace(),null==t?this.node.appendChild(e.node):e.node!==this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this}addTo(e,t){return E(e).put(this,t)}children(){return new ev(l(this.node.children,function(e){return C(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,t=!0){this.writeDataToDom();let n=this.node.cloneNode(e);return t&&(n=O(n)),new this.constructor(n)}each(e,t){let n,i;let r=this.children();for(n=0,i=r.length;n<i;n++)e.apply(r[n],[n,r]),t&&r[n].each(e,t);return this}element(e,t){return this.put(new ez(T(e),t))}first(){return C(this.node.firstChild)}get(e){return C(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,t){return this.xml(e,t,v)}id(e){return void 0!==e||this.node.id||(this.node.id=N(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return C(this.node.lastChild)}matches(e){let t=this.node,n=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return n&&n.call(t,e)}parent(e){let t=this;if(!t.node.parentNode)return null;if(t=C(t.node.parentNode),!e)return t;do if("string"==typeof e?t.matches(e):t instanceof e)break;while(t=C(t.node.parentNode))return t}put(e,t){return e=E(e),this.add(e,t),e}putIn(e,t){return E(e).add(this,t)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=E(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,t=null){let n=10**e,i=this.attr(t);for(let e in i)"number"==typeof i[e]&&(i[e]=Math.round(i[e]*n)/n);return this.attr(i),this}svg(e,t){return this.xml(e,t,g)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){let t=this.parent();if(!t)return this.addTo(e);let n=t.index(this);return t.put(e,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,t,n){if("boolean"==typeof e&&(n=t,t=e,e=null),null==e||"function"==typeof e){t=null==t||t,this.writeDataToDom();let n=this;if(null!=e){if(n=C(n.node.cloneNode(!0)),t){let t=e(n);if(n=t||n,!1===t)return""}n.each(function(){let t=e(this),n=t||this;!1===t?this.remove():t&&this!==n&&this.replace(n)},!0)}return t?n.node.outerHTML:n.node.innerHTML}t=null!=t&&t;let i=T("wrapper",n),r=b.document.createDocumentFragment();i.innerHTML=e;for(let e=i.children.length;e--;)r.appendChild(i.firstElementChild);let s=this.parent();return t?this.replace(r)&&s:this.add(r)}}I(ez,{attr:eF,find:ex,findOne:eb}),R(ez,"Dom");class eB extends ez{constructor(e,t){super(e,t),this.dom={},this.node.instance=this,e.hasAttribute("svgjs:data")&&this.setData(JSON.parse(e.getAttribute("svgjs:data"))||{})}center(e,t){return this.cx(e).cy(t)}cx(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)}cy(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)}defs(){let e=this.root();return e&&e.defs()}dmove(e,t){return this.dx(e).dy(t)}dx(e=0){return this.x(new eI(e).plus(this.x()))}dy(e=0){return this.y(new eI(e).plus(this.y()))}getEventHolder(){return this}height(e){return this.attr("height",e)}move(e,t){return this.x(e).y(t)}parents(e=this.root()){let t="string"==typeof e;t||(e=E(e));let n=new ev,i=this;for(;(i=i.parent())&&i.node!==b.document&&"#document-fragment"!==i.nodeName&&(n.push(i),!(!t&&i.node===e.node||t&&i.matches(e)));)if(i.node===this.root().node)return null;return n}reference(e){if(!(e=this.attr(e)))return null;let t=(e+"").match(B);return t?E(t[1]):null}root(){let e=this.parent(D(S));return e&&e.root()}setData(e){return this.dom=e,this}size(e,t){let n=p(this,e,t);return this.width(new eI(n.width)).height(new eI(n.height))}width(e){return this.attr("width",e)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(e){return this.attr("x",e)}y(e){return this.attr("y",e)}}I(eB,{bbox:ep,rbox:em,inside:eg,point:er,ctm:eo,screenCTM:el}),R(eB,"Element");let eV={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"===t?e:e+"-"+t}};["fill","stroke"].forEach(function(e){let t;let n={};n[e]=function(n){if(void 0===n)return this.attr(e);if("string"==typeof n||n instanceof en||en.isRgb(n)||n instanceof eB)this.attr(e,n);else for(t=eV[e].length-1;t>=0;t--)null!=n[eV[e][t]]&&this.attr(eV.prefix(e,eV[e][t]),n[eV[e][t]]);return this},r(["Element","Runner"],n)}),r(["Element","Runner"],{matrix:function(e,t,n,i,r,s){return null==e?new ea(this):this.attr("transform",new ea(e,t,n,i,r,s))},rotate:function(e,t,n){return this.transform({rotate:e,ox:t,oy:n},!0)},skew:function(e,t,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:e,ox:t,oy:n},!0):this.transform({skew:[e,t],ox:n,oy:i},!0)},shear:function(e,t,n){return this.transform({shear:e,ox:t,oy:n},!0)},scale:function(e,t,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:e,ox:t,oy:n},!0):this.transform({scale:[e,t],ox:n,oy:i},!0)},translate:function(e,t){return this.transform({translate:[e,t]},!0)},relative:function(e,t){return this.transform({relative:[e,t]},!0)},flip:function(e="both",t="center"){return -1==="xybothtrue".indexOf(e)&&(t=e,e="both"),this.transform({flip:e,origin:t},!0)},opacity:function(e){return this.attr("opacity",e)}}),r("radius",{radius:function(e,t=e){return"radialGradient"===(this._element||this).type?this.attr("r",new eI(e)):this.rx(e).ry(t)}}),r("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(e){return new ei(this.node.getPointAtLength(e))}}),r(["Element","Runner"],{font:function(e,t){if("object"==typeof e){for(t in e)this.font(t,e[t]);return this}return"leading"===e?this.leading(t):"anchor"===e?this.attr("text-anchor",t):"size"===e||"family"===e||"weight"===e||"stretch"===e||"variant"===e||"style"===e?this.attr("font-"+e,t):this.attr(e,t)}}),r("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce(function(e,t){let n=function(e){return null===e?this.off(t):this.on(t,e),this};return e[t]=n,e},{})),r("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(V).slice(0,-1).map(function(e){let t=e.trim().split("(");return[t[0],t[1].split($).map(function(e){return parseFloat(e)})]}).reverse().reduce(function(e,t){return"matrix"===t[0]?e.lmultiply(ea.fromArray(t[1])):e[t[0]].apply(e,t[1])},new ea)},toParent:function(e,t){if(this===e)return this;let n=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e,t).untransform().transform(i.multiply(n)),this},toRoot:function(e){return this.toParent(this.root(),e)},transform:function(e,t){if(null==e||"string"==typeof e){let t=new ea(this).decompose();return null==e?t:t[e]}ea.isMatrixLike(e)||(e={...e,origin:m(e,this)});let n=new ea(!0===t?this:t||!1).transform(e);return this.attr("transform",n)}});class eH extends eB{flatten(e=this,t){return this.each(function(){if(this instanceof eH)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),t=e.index(this)){return t=-1===t?e.children().length:t,this.each(function(n,i){return i[i.length-n-1].toParent(e,t)}),this.remove()}}R(eH,"Container");class eG extends eH{constructor(e,t=e){super(A("defs",e),t)}flatten(){return this}ungroup(){return this}}R(eG,"Defs");class eW extends eB{}function ej(e){return this.attr("rx",e)}function eq(e){return this.attr("ry",e)}function eX(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())}function e$(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())}function eY(e){return this.attr("cx",e)}function eJ(e){return this.attr("cy",e)}function eZ(e){return null==e?2*this.rx():this.rx(new eI(e).divide(2))}function eK(e){return null==e?2*this.ry():this.ry(new eI(e).divide(2))}R(eW,"Shape");var eQ={__proto__:null,rx:ej,ry:eq,x:eX,y:e$,cx:eY,cy:eJ,width:eZ,height:eK};class e0 extends eW{constructor(e,t=e){super(A("ellipse",e),t)}size(e,t){let n=p(this,e,t);return this.rx(new eI(n.width).divide(2)).ry(new eI(n.height).divide(2))}}I(e0,eQ),r("Container",{ellipse:k(function(e=0,t=e){return this.put(new e0).size(e,t).move(0,0)})}),R(e0,"Ellipse");class e1 extends ez{constructor(e=b.document.createDocumentFragment()){super(e)}xml(e,t,n){if("boolean"==typeof e&&(n=t,t=e,e=null),null==e||"function"==typeof e){let e=new ez(T("wrapper",n));return e.add(this.node.cloneNode(!0)),e.xml(!1,n)}return super.xml(e,!1,n)}}function e2(e,t){return"radialGradient"===(this._element||this).type?this.attr({fx:new eI(e),fy:new eI(t)}):this.attr({x1:new eI(e),y1:new eI(t)})}function e3(e,t){return"radialGradient"===(this._element||this).type?this.attr({cx:new eI(e),cy:new eI(t)}):this.attr({x2:new eI(e),y2:new eI(t)})}R(e1,"Fragment");var e4={__proto__:null,from:e2,to:e3};class e5 extends eH{constructor(e,t){super(A(e+"Gradient","string"==typeof e?null:e),t)}attr(e,t,n){return"transform"===e&&(e="gradientTransform"),super.attr(e,t,n)}bbox(){return new ef}targets(){return ey("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}I(e5,e4),r({Container:{gradient(...e){return this.defs().gradient(...e)}},Defs:{gradient:k(function(e,t){return this.put(new e5(e)).update(t)})}}),R(e5,"Gradient");class e6 extends eH{constructor(e,t=e){super(A("pattern",e),t)}attr(e,t,n){return"transform"===e&&(e="patternTransform"),super.attr(e,t,n)}bbox(){return new ef}targets(){return ey("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}r({Container:{pattern(...e){return this.defs().pattern(...e)}},Defs:{pattern:k(function(e,t,n){return this.put(new e6).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})})}}),R(e6,"Pattern");class e8 extends eW{constructor(e,t=e){super(A("image",e),t)}load(e,t){if(!e)return this;let n=new b.window.Image;return eA(n,"load",function(e){let i=this.parent(e6);0===this.width()&&0===this.height()&&this.size(n.width,n.height),i instanceof e6&&0===i.width()&&0===i.height()&&i.size(this.width(),this.height()),"function"==typeof t&&t.call(this,e)},this),eA(n,"load error",function(){eC(n)}),this.attr("href",n.src=e,y)}}eU(function(e,t,n){return("fill"===e||"stroke"===e)&&X.test(t)&&(t=n.root().defs().image(t)),t instanceof e8&&(t=n.root().defs().pattern(0,0,e=>{e.add(t)})),t}),r({Container:{image:k(function(e,t){return this.put(new e8).size(0,0).load(e,t)})}}),R(e8,"Image");class e9 extends eO{bbox(){let e=-1/0,t=-1/0,n=1/0,i=1/0;return this.forEach(function(r){e=Math.max(r[0],e),t=Math.max(r[1],t),n=Math.min(r[0],n),i=Math.min(r[1],i)}),new ef(n,i,e-n,t-i)}move(e,t){let n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+e,this[n][1]+t];return this}parse(e=[0,0]){let t=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split($).map(parseFloat)).length%2!=0&&e.pop();for(let n=0,i=e.length;n<i;n+=2)t.push([e[n],e[n+1]]);return t}size(e,t){let n;let i=this.bbox();for(n=this.length-1;n>=0;n--)i.width&&(this[n][0]=(this[n][0]-i.x)*e/i.width+i.x),i.height&&(this[n][1]=(this[n][1]-i.y)*t/i.height+i.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){let e=[];for(let t=0,n=this.length;t<n;t++)e.push(this[t].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){ea.isMatrixLike(e)||(e=new ea(e));for(let t=this.length;t--;){let[n,i]=this[t];this[t][0]=e.a*n+e.c*i+e.e,this[t][1]=e.b*n+e.d*i+e.f}return this}}var e7={__proto__:null,MorphArray:e9,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){let t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){let t=this.bbox();return null==e?t.height:this.size(t.width,e)}};class te extends eW{constructor(e,t=e){super(A("line",e),t)}array(){return new e9([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(e,t){return this.attr(this.array().move(e,t).toLine())}plot(e,t,n,i){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:n,y2:i}:new e9(e).toLine(),this.attr(e))}size(e,t){let n=p(this,e,t);return this.attr(this.array().size(n.width,n.height).toLine())}}I(te,e7),r({Container:{line:k(function(...e){return te.prototype.plot.apply(this.put(new te),null!=e[0]?e:[0,0,0,0])})}}),R(te,"Line");class tt extends eH{constructor(e,t=e){super(A("marker",e),t)}height(e){return this.attr("markerHeight",e)}orient(e){return this.attr("orient",e)}ref(e,t){return this.attr("refX",e).attr("refY",t)}toString(){return"url(#"+this.id()+")"}update(e){return this.clear(),"function"==typeof e&&e.call(this,this),this}width(e){return this.attr("markerWidth",e)}}function tn(e,t){return function(n){return null==n?this[e]:(this[e]=n,t&&t.call(this),this)}}r({Container:{marker(...e){return this.defs().marker(...e)}},Defs:{marker:k(function(e,t,n){return this.put(new tt).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(n)})},marker:{marker(e,t,n,i){let r=["marker"];return"all"!==e&&r.push(e),r=r.join("-"),e=arguments[1]instanceof tt?arguments[1]:this.defs().marker(t,n,i),this.attr(r,e)}}}),R(tt,"Marker");let ti={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return-Math.cos(e*Math.PI/2)+1},bezier:function(e,t,n,i){return function(r){return r<0?e>0?t/e*r:n>0?i/n*r:0:r>1?n<1?(1-i)/(1-n)*r+(i-n)/(1-n):e<1?(1-t)/(1-e)*r+(t-e)/(1-e):1:3*r*(1-r)**2*t+3*r**2*(1-r)*i+r**3}},steps:function(e,t="end"){t=t.split("-").reverse()[0];let n=e;return"none"===t?--n:"both"===t&&++n,(i,r=!1)=>{let s=Math.floor(i*e),a=i*s%1==0;return("start"===t||"both"===t)&&++s,r&&a&&--s,i>=0&&s<0&&(s=0),i<=1&&s>n&&(s=n),s/n}}};class tr{done(){return!1}}class ts extends tr{constructor(e=eP.ease){super(),this.ease=ti[e]||e}step(e,t,n){return"number"!=typeof e?n<1?e:t:e+(t-e)*this.ease(n)}}class ta extends tr{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,t,n,i){return this.stepper(e,t,n,i)}}function to(){let e=(this._duration||500)/1e3,t=this._overshoot||0,n=Math.PI,i=Math.log(t/100+1e-10),r=-i/Math.sqrt(n*n+i*i),s=3.9/(r*e);this.d=2*r*s,this.k=s*s}class tl extends ta{constructor(e=500,t=0){super(),this.duration(e).overshoot(t)}step(e,t,n,i){if("string"==typeof e)return e;if(i.done=n===1/0,n===1/0)return t;if(0===n)return e;n>100&&(n=16),n/=1e3;let r=i.velocity||0,s=-this.d*r-this.k*(e-t),a=e+r*n+s*n*n/2;return i.velocity=r+s*n,i.done=Math.abs(t-a)+Math.abs(r)<.002,i.done?t:a}}I(tl,{duration:tn("_duration",to),overshoot:tn("_overshoot",to)});class tu extends ta{constructor(e=.1,t=.01,n=0,i=1e3){super(),this.p(e).i(t).d(n).windup(i)}step(e,t,n,i){if("string"==typeof e)return e;if(i.done=n===1/0,n===1/0)return t;if(0===n)return e;let r=t-e,s=(i.integral||0)+r*n,a=(r-(i.error||0))/n,o=this._windup;return!1!==o&&(s=Math.max(-o,Math.min(s,o))),i.error=r,i.integral=s,i.done=.001>Math.abs(r),i.done?t:e+(this.P*r+this.I*s+this.D*a)}}I(tu,{windup:tn("_windup"),p:tn("P"),i:tn("I"),d:tn("D")});let tc={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},th={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},tf="mlhvqtcsaz".split("");for(let e=0,t=tf.length;e<t;++e)th[tf[e]]=function(e){return function(t,n,i){if("H"===e)t[0]=t[0]+n.x;else if("V"===e)t[0]=t[0]+n.y;else if("A"===e)t[5]=t[5]+n.x,t[6]=t[6]+n.y;else for(let e=0,i=t.length;e<i;++e)t[e]=t[e]+(e%2?n.y:n.x);return th[e](t,n,i)}}(tf[e].toUpperCase());function td(e){return th[e.segment[0]](e.segment.slice(1),e.p,e.p0)}function tp(e){return e.segment.length&&e.segment.length-1===tc[e.segment[0].toUpperCase()]}function tm(e,t){e.inNumber&&tg(e,!1);let n=Y.test(t);if(n)e.segment=[t];else{let t=e.lastCommand,n=t.toLowerCase(),i=t===n;e.segment=["m"===n?i?"l":"L":t]}return e.inSegment=!0,e.lastCommand=e.segment[0],n}function tg(e,t){if(!e.inNumber)throw Error("Parser Error");e.number&&e.segment.push(parseFloat(e.number)),e.inNumber=t,e.number="",e.pointSeen=!1,e.hasExponent=!1,tp(e)&&tv(e)}function tv(e){e.inSegment=!1,e.absolute&&(e.segment=td(e)),e.segments.push(e.segment)}function t_(e){if(!e.segment.length)return!1;let t="A"===e.segment[0].toUpperCase(),n=e.segment.length;return t&&(4===n||5===n)}function ty(e){return"E"===e.lastToken.toUpperCase()}function tx(e,t=!0){let n=0,i="",r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new ei,p:new ei};for(;r.lastToken=i,i=e.charAt(n++);)if(!(!r.inSegment&&tm(r,i))){if("."===i){if(r.pointSeen||r.hasExponent){tg(r,!1),--n;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=i;continue}if(!isNaN(parseInt(i))){if("0"===r.number||t_(r)){r.inNumber=!0,r.number=i,tg(r,!0);continue}r.inNumber=!0,r.number+=i;continue}if(" "===i||","===i){r.inNumber&&tg(r,!1);continue}if("-"===i){if(r.inNumber&&!ty(r)){tg(r,!1),--n;continue}r.number+=i,r.inNumber=!0;continue}if("E"===i.toUpperCase()){r.number+=i,r.hasExponent=!0;continue}if(Y.test(i)){if(r.inNumber)tg(r,!1);else if(tp(r))tv(r);else throw Error("parser Error");--n}}return r.inNumber&&tg(r,!1),r.inSegment&&tp(r)&&tv(r),r.segments}function tb(e){let t="";for(let n=0,i=e.length;n<i;n++)t+=e[n][0],null!=e[n][1]&&(t+=e[n][1],null!=e[n][2]&&(t+=" "+e[n][2],null!=e[n][3]&&(t+=" "+e[n][3]+" "+e[n][4],null!=e[n][5]&&(t+=" "+e[n][5]+" "+e[n][6],null!=e[n][7]&&(t+=" "+e[n][7])))));return t+" "}class tw extends eO{bbox(){return eu().path.setAttribute("d",this.toString()),new ef(eu.nodes.path.getBBox())}move(e,t){let n=this.bbox();if(e-=n.x,t-=n.y,!isNaN(e)&&!isNaN(t))for(let n,i=this.length-1;i>=0;i--)"M"===(n=this[i][0])||"L"===n||"T"===n?(this[i][1]+=e,this[i][2]+=t):"H"===n?this[i][1]+=e:"V"===n?this[i][1]+=t:"C"===n||"S"===n||"Q"===n?(this[i][1]+=e,this[i][2]+=t,this[i][3]+=e,this[i][4]+=t,"C"===n&&(this[i][5]+=e,this[i][6]+=t)):"A"===n&&(this[i][6]+=e,this[i][7]+=t);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),tx(e)}size(e,t){let n,i;let r=this.bbox();for(r.width=0===r.width?1:r.width,r.height=0===r.height?1:r.height,n=this.length-1;n>=0;n--)"M"===(i=this[n][0])||"L"===i||"T"===i?(this[n][1]=(this[n][1]-r.x)*e/r.width+r.x,this[n][2]=(this[n][2]-r.y)*t/r.height+r.y):"H"===i?this[n][1]=(this[n][1]-r.x)*e/r.width+r.x:"V"===i?this[n][1]=(this[n][1]-r.y)*t/r.height+r.y:"C"===i||"S"===i||"Q"===i?(this[n][1]=(this[n][1]-r.x)*e/r.width+r.x,this[n][2]=(this[n][2]-r.y)*t/r.height+r.y,this[n][3]=(this[n][3]-r.x)*e/r.width+r.x,this[n][4]=(this[n][4]-r.y)*t/r.height+r.y,"C"===i&&(this[n][5]=(this[n][5]-r.x)*e/r.width+r.x,this[n][6]=(this[n][6]-r.y)*t/r.height+r.y)):"A"===i&&(this[n][1]=this[n][1]*e/r.width,this[n][2]=this[n][2]*t/r.height,this[n][6]=(this[n][6]-r.x)*e/r.width+r.x,this[n][7]=(this[n][7]-r.y)*t/r.height+r.y);return this}toString(){return tb(this)}}let tM=e=>{let t=typeof e;return"number"===t?eI:"string"===t?en.isColor(e)?en:$.test(e)?Y.test(e)?tw:eO:U.test(e)?eI:tT:tL.indexOf(e.constructor)>-1?e.constructor:Array.isArray(e)?eO:"object"===t?tC:tT};class tS{constructor(e){this._stepper=e||new ts("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,t){return e&&t},!0)}from(e){return null==e?this._from:(this._from=this._set(e),this)}stepper(e){return null==e?this._stepper:(this._stepper=e,this)}to(e){return null==e?this._to:(this._to=this._set(e),this)}type(e){return null==e?this._type:(this._type=e,this)}_set(e){this._type||this.type(tM(e));let t=new this._type(e);return this._type===en&&(t=this._to?t[this._to[4]]():this._from?t[this._from[4]]():t),this._type===tC&&(t=this._to?t.align(this._to):this._from?t.align(this._from):t),t=t.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(t.length)).map(Object).map(function(e){return e.done=!0,e}),t}}class tT{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class tE{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,tE.defaults,e),this}toArray(){let e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}tE.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};let tA=(e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0;class tC{constructor(...e){this.init(...e)}align(e){let t=this.values;for(let n=0,i=t.length;n<i;++n){if(t[n+1]===e[n+1]){if(t[n+1]===en&&e[n+7]!==t[n+7]){let t=e[n+7],i=new en(this.values.splice(n+3,5))[t]().toArray();this.values.splice(n+3,0,...i)}n+=t[n+2]+2;continue}if(!e[n+1])break;let i=new e[n+1]().toArray(),r=t[n+2]+3;t.splice(n,r,e[n],e[n+1],e[n+2],...i),n+=t[n+2]+2}return this}init(e){if(this.values=[],Array.isArray(e)){this.values=e.slice();return}let t=[];for(let n in e=e||{}){let i=tM(e[n]),r=new i(e[n]).toArray();t.push([n,i,r.length,...r])}return t.sort(tA),this.values=t.reduce((e,t)=>e.concat(t),[]),this}toArray(){return this.values}valueOf(){let e={},t=this.values;for(;t.length;){let n=t.shift(),i=t.shift(),r=t.shift(),s=t.splice(0,r);e[n]=new i(s)}return e}}let tL=[tT,tE,tC];function tR(e=[]){tL.push(...[].concat(e))}function tD(){I(tL,{to(e){return new tS().type(this.constructor).from(this.toArray()).to(e)},fromArray(e){return this.init(e),this},toConsumable(){return this.toArray()},morph(e,t,n,i,r){let s=function(e,s){return i.step(e,t[s],n,r[s],r)};return this.fromArray(e.map(s))}})}class tP extends eW{constructor(e,t=e){super(A("path",e),t)}array(){return this._array||(this._array=new tw(this.attr("d")))}clear(){return delete this._array,this}height(e){return null==e?this.bbox().height:this.size(this.bbox().width,e)}move(e,t){return this.attr("d",this.array().move(e,t))}plot(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new tw(e))}size(e,t){let n=p(this,e,t);return this.attr("d",this.array().size(n.width,n.height))}width(e){return null==e?this.bbox().width:this.size(e,this.bbox().height)}x(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)}y(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)}}tP.prototype.MorphArray=tw,r({Container:{path:k(function(e){return this.put(new tP).plot(e||new tw)})}}),R(tP,"Path");var tN={__proto__:null,array:function(){return this._array||(this._array=new e9(this.attr("points")))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new e9(e))},size:function(e,t){let n=p(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}};class tO extends eW{constructor(e,t=e){super(A("polygon",e),t)}}r({Container:{polygon:k(function(e){return this.put(new tO).plot(e||new e9)})}}),I(tO,e7),I(tO,tN),R(tO,"Polygon");class tI extends eW{constructor(e,t=e){super(A("polyline",e),t)}}r({Container:{polyline:k(function(e){return this.put(new tI).plot(e||new e9)})}}),I(tI,e7),I(tI,tN),R(tI,"Polyline");class tk extends eW{constructor(e,t=e){super(A("rect",e),t)}}I(tk,{rx:ej,ry:eq}),r({Container:{rect:k(function(e,t){return this.put(new tk).size(e,t)})}}),R(tk,"Rect");class tU{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){let t=void 0!==e.next?e:{value:e,next:null,prev:null};return this._last?(t.prev=this._last,this._last.next=t,this._last=t):(this._last=t,this._first=t),t}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){let e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}let tF={nextDraw:null,frames:new tU,timeouts:new tU,immediates:new tU,timer:()=>b.window.performance||b.window.Date,transforms:[],frame(e){let t=tF.frames.push({run:e});return null===tF.nextDraw&&(tF.nextDraw=b.window.requestAnimationFrame(tF._draw)),t},timeout(e,t){t=t||0;let n=tF.timer().now()+t,i=tF.timeouts.push({run:e,time:n});return null===tF.nextDraw&&(tF.nextDraw=b.window.requestAnimationFrame(tF._draw)),i},immediate(e){let t=tF.immediates.push(e);return null===tF.nextDraw&&(tF.nextDraw=b.window.requestAnimationFrame(tF._draw)),t},cancelFrame(e){null!=e&&tF.frames.remove(e)},clearTimeout(e){null!=e&&tF.timeouts.remove(e)},cancelImmediate(e){null!=e&&tF.immediates.remove(e)},_draw(e){let t=null,n=tF.timeouts.last();for(;(t=tF.timeouts.shift())&&(e>=t.time?t.run():tF.timeouts.push(t),t!==n););let i=null,r=tF.frames.last();for(;i!==r&&(i=tF.frames.shift());)i.run(e);let s=null;for(;s=tF.immediates.shift();)s();tF.nextDraw=tF.timeouts.first()||tF.frames.first()?b.window.requestAnimationFrame(tF._draw):null}},tz=function(e){let t=e.start,n=e.runner.duration(),i=t+n;return{start:t,duration:n,end:i,runner:e.runner}},tB=function(){let e=b.window;return(e.performance||e.Date).now()};class tV extends eR{constructor(e=tB){super(),this._timeSource=e,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){let e=this.getLastRunnerInfo(),t=e?e.runner.duration():0;return(e?e.start:this._time)+t}getEndTimeOfTimeline(){return Math.max(0,...this._runners.map(e=>e.start+e.runner.duration()))}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return null==e?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){let t=this.speed();if(null==e)return this.speed(-t);let n=Math.abs(t);return this.speed(e?-n:n)}schedule(e,t,n){if(null==e)return this._runners.map(tz);let i=0,r=this.getEndTime();if(t=t||0,null==n||"last"===n||"after"===n)i=r;else if("absolute"===n||"start"===n)i=t,t=0;else if("now"===n)i=this._time;else if("relative"===n){let n=this.getRunnerInfoById(e.id);n&&(i=n.start+t,t=0)}else if("with-last"===n){let e=this.getLastRunnerInfo();i=e?e.start:this._time}else throw Error('Invalid value for the "when" parameter');e.unschedule(),e.timeline(this);let s=e.persist(),a={persist:null===s?this._persist:s,start:i+t,runner:e};return this._lastRunnerId=e.id,this._runners.push(a),this._runners.sort((e,t)=>e.start-t.start),this._runnerIds=this._runners.map(e=>e.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return null==e?this._timeSource:(this._timeSource=e,this)}speed(e){return null==e?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return null==e?this._time:(this._time=e,this._continue(!0))}unschedule(e){let t=this._runnerIds.indexOf(e.id);return t<0||(this._runners.splice(t,1),this._runnerIds.splice(t,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return(tF.cancelFrame(this._nextFrame),this._nextFrame=null,e)?this._stepImmediate():(this._paused||(this._nextFrame=tF.frame(this._step)),this)}_stepFn(e=!1){let t=this._timeSource(),n=t-this._lastSourceTime;e&&(n=0);let i=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=t,e||(this._time+=i,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let e=this._runners.length;e--;){let t=this._runners[e],n=t.runner;this._time-t.start<=0&&n.reset()}let r=!1;for(let e=0,t=this._runners.length;e<t;e++){let n=this._runners[e],s=n.runner,a=i,o=this._time-n.start;if(o<=0){r=!0;continue}o<a&&(a=o),s.active()&&(s.step(a).done?!0!==n.persist&&s.duration()-s.time()+this._time+n.persist<this._time&&(s.unschedule(),--e,--t):r=!0)}return r&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}r({Element:{timeline:function(e){return null==e?(this._timeline=this._timeline||new tV,this._timeline):(this._timeline=e,this)}}});class tH extends eR{constructor(e){super(),this.id=tH.id++,e="function"==typeof(e=null==e?eP.duration:e)?new ta(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof e&&e,this._isDeclarative=e instanceof ta,this._stepper=this._isDeclarative?e:new ts,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new ea,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,t,n){let i=1,r=!1,s=0;return e=e||eP.duration,t=t||eP.delay,n=n||"last","object"!=typeof e||e instanceof tr||(t=e.delay||t,n=e.when||n,r=e.swing||r,i=e.times||i,s=e.wait||s,e=e.duration||eP.duration),{duration:e,delay:t,swing:r,times:i,wait:s,when:n}}active(e){return null==e?this.enabled:(this.enabled=e,this)}addTransform(e,t){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,t,n){let i=tH.sanitise(e,t,n),r=new tH(i.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(i).schedule(i.delay,i.when)}clearTransform(){return this.transforms=new ea,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new ts(e),this}element(e){return null==e?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,t,n){return"object"==typeof e&&(t=e.swing,n=e.wait,e=e.times),this._times=e||1/0,this._swing=t||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}loops(e){let t=this._duration+this._wait;if(null==e){let e=Math.floor(this._time/t),n=(this._time-e*t)/this._duration;return Math.min(e+n,this._times)}let n=Math.floor(e),i=e%1,r=t*n+this._duration*i;return this.time(r)}persist(e){return null==e?this._persist:(this._persist=e,this)}position(e){let t;let n=this._time,i=this._duration,r=this._wait,s=this._times,a=this._swing,o=this._reverse;if(null==e){let e=function(e){let t=a*Math.floor(e%(2*(r+i))/(r+i)),n=t&&!o||!t&&o;return Math.max(Math.min(e%(r+i)*Math.pow(-1,n)/i+n,1),0)},t=s*(r+i)-r;return n<=0?Math.round(e(1e-5)):n<t?e(n):Math.round(e(t-1e-5))}let l=Math.floor(this.loops()),u=a&&l%2==0;return t=l+(u&&!o||o&&u?e:1-e),this.loops(t)}progress(e){return null==e?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,t,n,i){return this._queue.push({initialiser:e||eD,runner:t||eD,retarget:n,isTransform:i,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=null==e?!this._reverse:e,this}schedule(e,t,n){if(e instanceof tV||(n=t,t=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,t,n),this}step(e){if(!this.enabled)return this;e=null==e?16:e,this._time+=e;let t=this.position(),n=this._lastPosition!==t&&this._time>=0;this._lastPosition=t;let i=this.duration(),r=this._lastTime<=0&&this._time>0,s=this._lastTime<i&&this._time>=i;this._lastTime=this._time,r&&this.fire("start",this);let a=this._isDeclarative;this.done=!a&&!s&&this._time>=i,this._reseted=!1;let o=!1;return(n||a)&&(this._initialise(n),this.transforms=new ea,o=this._run(a?e:t),this.fire("step",this)),this.done=this.done||o&&a,s&&this.fire("finished",this),this}time(e){if(null==e)return this._time;let t=e-this._time;return this.step(t),this}timeline(e){return void 0===e?this._timeline:(this._timeline=e,this)}unschedule(){let e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let t=0,n=this._queue.length;t<n;++t){let n=this._queue[t],i=this._isDeclarative||!n.initialised&&e;e=!n.finished,i&&e&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(e,t){if(this._history[e]={morpher:t,caller:this._queue[this._queue.length-1]},this._isDeclarative){let e=this.timeline();e&&e.play()}}_run(e){let t=!0;for(let n=0,i=this._queue.length;n<i;++n){let i=this._queue[n],r=i.runner.call(this,e);i.finished=i.finished||!0===r,t=t&&i.finished}return t}_tryRetarget(e,t,n){if(this._history[e]){if(!this._history[e].caller.initialised){let t=this._queue.indexOf(this._history[e].caller);return this._queue.splice(t,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,t,n):this._history[e].morpher.to(t),this._history[e].caller.finished=!1;let i=this.timeline();return i&&i.play(),!0}return!1}}tH.id=0;class tG{constructor(e=new ea,t=-1,n=!0){this.transforms=e,this.id=t,this.done=n}clearTransformsFromQueue(){}}I([tH,tG],{mergeWith(e){return new tG(e.transforms.lmultiply(this.transforms),e.id)}});let tW=(e,t)=>e.lmultiplyO(t),tj=e=>e.transforms;function tq(){let e=this._transformationRunners.runners.map(tj).reduce(tW,new ea);this.transform(e),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class tX{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;let t=e.id+1;return this.runners.push(e),this.ids.push(t),this}clearBefore(e){let t=this.ids.indexOf(e+1)||1;return this.ids.splice(0,t,0),this.runners.splice(0,t,new tG).forEach(e=>e.clearTransformsFromQueue()),this}edit(e,t){let n=this.ids.indexOf(e+1);return this.ids.splice(n,1,e+1),this.runners.splice(n,1,t),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let t=0;t<this.runners.length;++t){let n=this.runners[t];if(!e||!n.done||!e.done||n._timeline&&n._timeline._runnerIds.includes(n.id)||e._timeline&&e._timeline._runnerIds.includes(e.id))e=n;else{this.remove(n.id);let i=n.mergeWith(e);this.edit(e.id,i),e=i,--t}}return this}remove(e){let t=this.ids.indexOf(e+1);return this.ids.splice(t,1),this.runners.splice(t,1),this}}r({Element:{animate(e,t,n){let i=tH.sanitise(e,t,n),r=this.timeline();return new tH(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay(e,t){return this.animate(0,e,t)},_clearTransformRunnersBefore(e){this._transformationRunners.clearBefore(e.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(tj).reduce(tW,new ea)},_addRunner(e){this._transformationRunners.add(e),tF.cancelImmediate(this._frameId),this._frameId=tF.immediate(tq.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=new tX().add(new tG(new ea(this))))}}});let t$=(e,t)=>e.filter(e=>!t.includes(e));I(tH,{attr(e,t){return this.styleAttr("attr",e,t)},css(e,t){return this.styleAttr("css",e,t)},styleAttr(e,t,n){if("string"==typeof t)return this.styleAttr(e,{[t]:n});let i=t;if(this._tryRetarget(e,i))return this;let r=new tS(this._stepper).to(i),s=Object.keys(i);return this.queue(function(){r=r.from(this.element()[e](s))},function(t){return this.element()[e](r.at(t).valueOf()),r.done()},function(t){let n=Object.keys(t),a=t$(n,s);if(a.length){let t=this.element()[e](a),n=new tC(r.from()).valueOf();Object.assign(n,t),r.from(n)}let o=new tC(r.to()).valueOf();Object.assign(o,t),r.to(o),s=n,i=t}),this._rememberMorpher(e,r),this},zoom(e,t){if(this._tryRetarget("zoom",e,t))return this;let n=new tS(this._stepper).to(new eI(e));return this.queue(function(){n=n.from(this.element().zoom())},function(e){return this.element().zoom(n.at(e),t),n.done()},function(e,i){t=i,n.to(e)}),this._rememberMorpher("zoom",n),this},transform(e,t,n){let i,r,s,a,o;if(t=e.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",e))return this;let l=ea.isMatrixLike(e);n=null!=e.affine?e.affine:null!=n?n:!l;let u=new tS(this._stepper).type(n?tE:ea);function c(){r=r||this.element(),i=i||m(e,r),o=new ea(t?void 0:r),r._addRunner(this),t||r._clearTransformRunnersBefore(this)}function h(c){t||this.clearTransform();let{x:h,y:f}=new ei(i).transform(r._currentTransform(this)),d=new ea({...e,origin:[h,f]}),p=this._isDeclarative&&s?s:o;if(n){d=d.decompose(h,f),p=p.decompose(h,f);let e=d.rotate,t=p.rotate,n=[e-360,e,e+360],i=n.map(e=>Math.abs(e-t)),r=Math.min(...i),s=i.indexOf(r);d.rotate=n[s]}t&&(l||(d.rotate=e.rotate||0),this._isDeclarative&&a&&(p.rotate=a)),u.from(p),u.to(d);let m=u.at(c);return a=m.rotate,s=new ea(m),this.addTransform(s),r._addRunner(this),u.done()}function f(t){(t.origin||"center").toString()!==(e.origin||"center").toString()&&(i=m(t,r)),e={...t,origin:i}}return this.queue(c,h,f,!0),this._isDeclarative&&this._rememberMorpher("transform",u),this},x(e,t){return this._queueNumber("x",e)},y(e){return this._queueNumber("y",e)},dx(e=0){return this._queueNumberDelta("x",e)},dy(e=0){return this._queueNumberDelta("y",e)},dmove(e,t){return this.dx(e).dy(t)},_queueNumberDelta(e,t){if(t=new eI(t),this._tryRetarget(e,t))return this;let n=new tS(this._stepper).to(t),i=null;return this.queue(function(){i=this.element()[e](),n.from(i),n.to(i+t)},function(t){return this.element()[e](n.at(t)),n.done()},function(e){n.to(i+new eI(e))}),this._rememberMorpher(e,n),this},_queueObject(e,t){if(this._tryRetarget(e,t))return this;let n=new tS(this._stepper).to(t);return this.queue(function(){n.from(this.element()[e]())},function(t){return this.element()[e](n.at(t)),n.done()}),this._rememberMorpher(e,n),this},_queueNumber(e,t){return this._queueObject(e,new eI(t))},cx(e){return this._queueNumber("cx",e)},cy(e){return this._queueNumber("cy",e)},move(e,t){return this.x(e).y(t)},center(e,t){return this.cx(e).cy(t)},size(e,t){let n;return e&&t||(n=this._element.bbox()),e||(e=n.width/n.height*t),t||(t=n.height/n.width*e),this.width(e).height(t)},width(e){return this._queueNumber("width",e)},height(e){return this._queueNumber("height",e)},plot(e,t,n,i){if(4==arguments.length)return this.plot([e,t,n,i]);if(this._tryRetarget("plot",e))return this;let r=new tS(this._stepper).type(this._element.MorphArray).to(e);return this.queue(function(){r.from(this._element.array())},function(e){return this._element.plot(r.at(e)),r.done()}),this._rememberMorpher("plot",r),this},leading(e){return this._queueNumber("leading",e)},viewbox(e,t,n,i){return this._queueObject("viewbox",new ef(e,t,n,i))},update(e){return"object"!=typeof e?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",e.offset),this)}}),I(tH,{rx:ej,ry:eq,from:e2,to:e3}),R(tH,"Runner");class tY extends eH{constructor(e,t=e){super(A("svg",e),t),this.namespace()}defs(){return this.isRoot()?C(this.node.querySelector("defs"))||this.put(new eG):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof b.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:g,version:"1.1"}).attr("xmlns:xlink",y,_).attr("xmlns:svgjs",x,_):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,_).attr("xmlns:svgjs",null,_)}root(){return this.isRoot()?this:super.root()}}r({Container:{nested:k(function(){return this.put(new tY)})}}),R(tY,"Svg",!0);class tJ extends eH{constructor(e,t=e){super(A("symbol",e),t)}}r({Container:{symbol:k(function(){return this.put(new tJ)})}}),R(tJ,"Symbol");var tZ={__proto__:null,plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(b.document.createTextNode(e)),this},length:function(){return this.node.getComputedTextLength()},x:function(e,t=this.bbox()){return null==e?t.x:this.attr("x",this.attr("x")+e-t.x)},y:function(e,t=this.bbox()){return null==e?t.y:this.attr("y",this.attr("y")+e-t.y)},move:function(e,t,n=this.bbox()){return this.x(e,n).y(t,n)},cx:function(e,t=this.bbox()){return null==e?t.cx:this.attr("x",this.attr("x")+e-t.cx)},cy:function(e,t=this.bbox()){return null==e?t.cy:this.attr("y",this.attr("y")+e-t.cy)},center:function(e,t,n=this.bbox()){return this.cx(e,n).cy(t,n)},ax:function(e){return this.attr("x",e)},ay:function(e){return this.attr("y",e)},amove:function(e,t){return this.ax(e).ay(t)},build:function(e){return this._build=!!e,this}};class tK extends eW{constructor(e,t=e){super(A("text",e),t),this.dom.leading=new eI(1.3),this._rebuild=!0,this._build=!1}leading(e){return null==e?this.dom.leading:(this.dom.leading=new eI(e),this.rebuild())}rebuild(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){let e=this,t=0,n=this.dom.leading;this.each(function(i){let r=n*new eI(b.window.getComputedStyle(this.node).getPropertyValue("font-size"));this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?t+=r:(this.attr("dy",i?r+t:0),t=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new eI(e.leading||1.3),this}text(e){if(void 0===e){let t=this.node.childNodes,n=0;e="";for(let i=0,r=t.length;i<r;++i){if("textPath"===t[i].nodeName){0===i&&(n=1);continue}i!==n&&3!==t[i].nodeType&&!0===C(t[i]).dom.newLined&&(e+="\n"),e+=t[i].textContent}return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{e=(e+"").split("\n");for(let t=0,n=e.length;t<n;t++)this.newLine(e[t])}return this.build(!1).rebuild()}}I(tK,tZ),r({Container:{text:k(function(e=""){return this.put(new tK).text(e)}),plain:k(function(e=""){return this.put(new tK).plain(e)})}}),R(tK,"Text");class tQ extends eW{constructor(e,t=e){super(A("tspan",e),t),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;let e=this.parent();if(!(e instanceof tK))return this;let t=e.index(this),n=b.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=e.dom.leading*new eI(n);return this.dy(t?i:0).attr("x",e.x())}text(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}I(tQ,tZ),r({Tspan:{tspan:k(function(e=""){let t=new tQ;return this._build||this.clear(),this.put(t).text(e)})},Text:{newLine:function(e=""){return this.tspan(e).newLine()}}}),R(tQ,"Tspan");class t0 extends eW{constructor(e,t=e){super(A("circle",e),t)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new eI(e).divide(2))}}I(t0,{x:eX,y:e$,cx:eY,cy:eJ,width:eZ,height:eK}),r({Container:{circle:k(function(e=0){return this.put(new t0).size(e).move(0,0)})}}),R(t0,"Circle");class t1 extends eH{constructor(e,t=e){super(A("clipPath",e),t)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return ey("svg [clip-path*="+this.id()+"]")}}r({Container:{clip:k(function(){return this.defs().put(new t1)})},Element:{clipper(){return this.reference("clip-path")},clipWith(e){let t=e instanceof t1?e:this.parent().clip().add(e);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}}),R(t1,"ClipPath");class t2 extends eB{constructor(e,t=e){super(A("foreignObject",e),t)}}r({Container:{foreignObject:k(function(e,t){return this.put(new t2).size(e,t)})}}),R(t2,"ForeignObject");var t3={__proto__:null,dmove:function(e,t){return this.children().forEach((n,i)=>{let r;try{r=n.bbox()}catch(e){return}let s=new ea(n),a=s.translate(e,t).transform(s.inverse()),o=new ei(r.x,r.y).transform(a);n.move(o.x,o.y)}),this},dx:function(e){return this.dmove(e,0)},dy:function(e){return this.dmove(0,e)},height:function(e,t=this.bbox()){return null==e?t.height:this.size(t.width,e,t)},move:function(e=0,t=0,n=this.bbox()){let i=e-n.x,r=t-n.y;return this.dmove(i,r)},size:function(e,t,n=this.bbox()){let i=p(this,e,t,n),r=i.width/n.width,s=i.height/n.height;return this.children().forEach((e,t)=>{let i=new ei(n).transform(new ea(e).inverse());e.scale(r,s,i.x,i.y)}),this},width:function(e,t=this.bbox()){return null==e?t.width:this.size(e,t.height,t)},x:function(e,t=this.bbox()){return null==e?t.x:this.move(e,t.y,t)},y:function(e,t=this.bbox()){return null==e?t.y:this.move(t.x,e,t)}};class t4 extends eH{constructor(e,t=e){super(A("g",e),t)}}I(t4,t3),r({Container:{group:k(function(){return this.put(new t4)})}}),R(t4,"G");class t5 extends eH{constructor(e,t=e){super(A("a",e),t)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,y)}}I(t5,t3),r({Container:{link:k(function(e){return this.put(new t5).to(e)})},Element:{unlink(){let e=this.linker();if(!e)return this;let t=e.parent();if(!t)return this.remove();let n=t.index(e);return t.add(this,n),e.remove(),this},linkTo(e){let t=this.linker();return t||(t=new t5,this.wrap(t)),"function"==typeof e?e.call(t,t):t.to(e),this},linker(){let e=this.parent();return e&&"a"===e.node.nodeName.toLowerCase()?e:null}}}),R(t5,"A");class t6 extends eH{constructor(e,t=e){super(A("mask",e),t)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return ey("svg [mask*="+this.id()+"]")}}r({Container:{mask:k(function(){return this.defs().put(new t6)})},Element:{masker(){return this.reference("mask")},maskWith(e){let t=e instanceof t6?e:this.parent().mask().add(e);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}}),R(t6,"Mask");class t8 extends eB{constructor(e,t=e){super(A("stop",e),t)}update(e){return("number"==typeof e||e instanceof eI)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new eI(e.offset)),this}}function t9(e,t){if(!e)return"";if(!t)return e;let n=e+"{";for(let e in t)n+=f(e)+":"+t[e]+";";return n+"}"}r({Gradient:{stop:function(e,t,n){return this.put(new t8).update(e,t,n)}}}),R(t8,"Stop");class t7 extends eB{constructor(e,t=e){super(A("style",e),t)}addText(e=""){return this.node.textContent+=e,this}font(e,t,n={}){return this.rule("@font-face",{fontFamily:e,src:t,...n})}rule(e,t){return this.addText(t9(e,t))}}r("Dom",{style(e,t){return this.put(new t7).rule(e,t)},fontface(e,t,n){return this.put(new t7).font(e,t,n)}}),R(t7,"Style");class ne extends tK{constructor(e,t=e){super(A("textPath",e),t)}array(){let e=this.track();return e?e.array():null}plot(e){let t=this.track(),n=null;return t&&(n=t.plot(e)),null==e?n:this}track(){return this.reference("href")}}r({Container:{textPath:k(function(e,t){return e instanceof tK||(e=this.text(e)),e.path(t)})},Text:{path:k(function(e,t=!0){let n;let i=new ne;if(e instanceof tP||(e=this.defs().path(e)),i.attr("href","#"+e,y),t)for(;n=this.node.firstChild;)i.node.appendChild(n);return this.put(i)}),textPath(){return this.findOne("textPath")}},Path:{text:k(function(e){return e instanceof tK||(e=new tK().addTo(this.parent()).text(e)),e.path(this)}),targets(){return ey("svg textPath").filter(e=>(e.attr("href")||"").includes(this.id()))}}}),ne.prototype.MorphArray=tw,R(ne,"TextPath");class nt extends eW{constructor(e,t=e){super(A("use",e),t)}use(e,t){return this.attr("href",(t||"")+"#"+e,y)}}r({Container:{use:k(function(e,t){return this.put(new nt).use(e,t)})}}),R(nt,"Use");let nn=E;I([tY,tJ,e8,e6,tt],s("viewbox")),I([te,tI,tO,tP],s("marker")),I(tK,s("Text")),I(tP,s("Path")),I(eG,s("Defs")),I([tK,tQ],s("Tspan")),I([tk,e0,e5,tH],s("radius")),I(eR,s("EventTarget")),I(ez,s("Dom")),I(eB,s("Element")),I(eW,s("Shape")),I([eH,e1],s("Container")),I(e5,s("Gradient")),I(tH,s("Runner")),ev.extend(a()),tR([eI,en,ef,ea,eO,e9,tw,ei]),tD()});var $ilwiq=parcelRequire("ilwiq"),$4eae0a726ab50395$exports={};!/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */function(e,t){"object"==typeof $4eae0a726ab50395$exports?$4eae0a726ab50395$exports=e.document?t(e,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:$4eae0a726ab50395$exports,function(e,t){var n=[],i=Object.getPrototypeOf,r=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,o=n.indexOf,l={},u=l.toString,c=l.hasOwnProperty,h=c.toString,f=h.call(Object),d={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var i,r,s=(n=n||g).createElement("script");if(s.text=e,t)for(i in v)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function y(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[u.call(e)]||"object":typeof e}var x="3.7.1",b=/HTML$/i,w=function(e,t){return new w.fn.init(e,t)};function M(e){var t=!!e&&"length"in e&&e.length,n=y(e);return!(p(e)||m(e))&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}w.fn=w.prototype={jquery:x,constructor:w,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,i,r,s,a=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[o]||{},o++),"object"==typeof a||p(a)||(a={}),o===l&&(a=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(u&&i&&(w.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],s=r&&!Array.isArray(n)?[]:r||w.isPlainObject(n)?n:{},r=!1,a[t]=w.extend(u,s,i)):void 0!==i&&(a[t]=i));return a},w.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!!e&&"[object Object]"===u.call(e)&&(!(t=i(e))||"function"==typeof(n=c.call(t,"constructor")&&t.constructor)&&h.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(M(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(!r)for(;t=e[i++];)n+=w.text(t);return 1===r||11===r?e.textContent:9===r?e.documentElement.textContent:3===r||4===r?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?w.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:o.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!b.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,s=e.length,a=!n;r<s;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,o=[];if(M(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&o.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&o.push(r);return s(o)},guid:1,support:d}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var T=n.pop,E=n.sort,A=n.splice,C="[\\x20\\t\\r\\n\\f]",L=RegExp("^"+C+"+|((?:^|[^\\\\])(?:\\\\.)*)"+C+"+$","g");w.contains=function(e,t){var n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}w.escapeSelector=function(e){return(e+"").replace(R,D)};var P=g,N=a;!function(){var t,i,s,a,l,u,h,f,p,m,g=N,v=w.expando,_=0,y=0,x=et(),b=et(),M=et(),R=et(),D=function(e,t){return e===t&&(l=!0),0},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+C+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",k="\\["+C+"*("+I+")(?:"+C+"*([*^$|!~]?=)"+C+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+C+"*\\]",U=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+k+")*)|.*)\\)|)",F=RegExp(C+"+","g"),z=RegExp("^"+C+"*,"+C+"*"),B=RegExp("^"+C+"*([>+~]|"+C+")"+C+"*"),V=RegExp(C+"|>"),H=new RegExp(U),G=RegExp("^"+I+"$"),W={ID:RegExp("^#("+I+")"),CLASS:RegExp("^\\.("+I+")"),TAG:RegExp("^("+I+"|[*])"),ATTR:RegExp("^"+k),PSEUDO:RegExp("^"+U),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+C+"*(even|odd|(([+-]|)(\\d*)n|)"+C+"*(?:([+-]|)"+C+"*(\\d+)|))"+C+"*\\)|)","i"),bool:RegExp("^(?:"+O+")$","i"),needsContext:RegExp("^"+C+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+C+"*((?:-\\d)?\\d*)"+C+"*\\)|)(?=[^-]|$)","i")},j=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,Y=RegExp("\\\\[\\da-fA-F]{1,6}"+C+"?|\\\\([^\\r\\n\\f])","g"),J=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=function(){eu()},K=ed(function(e){return!0===e.disabled&&S(e,"fieldset")},{dir:"parentNode",next:"legend"});function Q(){try{return u.activeElement}catch(e){}}try{g.apply(n=r.call(P.childNodes),P.childNodes),n[P.childNodes.length].nodeType}catch(e){g={apply:function(e,t){N.apply(e,r.call(t))},call:function(e){N.apply(e,r.call(arguments,1))}}}function ee(e,t,n,i){var r,s,a,o,l,c,h,m=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!i&&(eu(t),t=t||u,f)){if(11!==_&&(l=X.exec(e))){if(r=l[1]){if(9===_){if(!(a=t.getElementById(r)))return n;if(a.id===r)return g.call(n,a),n}else if(m&&(a=m.getElementById(r))&&ee.contains(t,a)&&a.id===r)return g.call(n,a),n}else if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;else if((r=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(r)),n}if(!R[e+" "]&&(!p||!p.test(e))){if(h=e,m=t,1===_&&(V.test(e)||B.test(e))){for((m=$.test(e)&&el(t.parentNode)||t)==t&&d.scope||((o=t.getAttribute("id"))?o=w.escapeSelector(o):t.setAttribute("id",o=v)),s=(c=eh(e)).length;s--;)c[s]=(o?"#"+o:":scope")+" "+ef(c[s]);h=c.join(",")}try{return g.apply(n,m.querySelectorAll(h)),n}catch(t){R(e,!0)}finally{o===v&&t.removeAttribute("id")}}}return eb(e.replace(L,"$1"),t,n,i)}function et(){var e=[];function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}return t}function en(e){return e[v]=!0,e}function ei(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function er(e){return function(t){return S(t,"input")&&t.type===e}}function es(e){return function(t){return(S(t,"input")||S(t,"button"))&&t.type===e}}function ea(e){return function(t){if("form"in t)return t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||!e!==t.isDisabled&&K(t)===e:t.disabled===e;return"label"in t&&t.disabled===e}}function eo(e){return en(function(t){return t=+t,en(function(n,i){for(var r,s=e([],n.length,t),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function el(e){return e&&void 0!==e.getElementsByTagName&&e}function eu(e){var t,n=e?e.ownerDocument||e:P;return n!=u&&9===n.nodeType&&n.documentElement&&(h=(u=n).documentElement,f=!w.isXMLDoc(u),m=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&P!=u&&(t=u.defaultView)&&t.top!==t&&t.addEventListener("unload",Z),d.getById=ei(function(e){return h.appendChild(e).id=w.expando,!u.getElementsByName||!u.getElementsByName(w.expando).length}),d.disconnectedMatch=ei(function(e){return m.call(e,"*")}),d.scope=ei(function(){return u.querySelectorAll(":scope")}),d.cssHas=ei(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}}),d.getById?(i.filter.ID=function(e){var t=e.replace(Y,J);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(Y,J);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&f){var n,i,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),i.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},i.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&f)return t.getElementsByClassName(e)},p=[],ei(function(e){var t;h.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||p.push("\\["+C+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+v+"-]").length||p.push("~="),e.querySelectorAll("a#"+v+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll(":checked").length||p.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+C+"*name"+C+"*="+C+"*(?:''|\"\")")}),d.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),D=function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==P&&ee.contains(P,e)?-1:t===u||t.ownerDocument==P&&ee.contains(P,t)?1:a?o.call(a,e)-o.call(a,t):0:4&n?-1:1)}),u}for(t in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(eu(e),f&&!R[t+" "]&&(!p||!p.test(t)))try{var n=m.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){R(t,!0)}return ee(t,u,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=u&&eu(e),w.contains(e,t)},ee.attr=function(e,t){(e.ownerDocument||e)!=u&&eu(e);var n=i.attrHandle[t.toLowerCase()],r=n&&c.call(i.attrHandle,t.toLowerCase())?n(e,t,!f):void 0;return void 0!==r?r:e.getAttribute(t)},ee.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],i=0,s=0;if(l=!d.sortStable,a=!d.sortStable&&r.call(e,0),E.call(e,D),l){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)A.call(e,n[i],1)}return a=null,e},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(r.apply(this)))},(i=w.expr={cacheLength:50,createPseudo:en,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,J),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,J),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=eh(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,J).toLowerCase();return"*"===e?function(){return!0}:function(e){return S(e,t)}},CLASS:function(e){var t=x[e+" "];return t||(t=RegExp("(^|"+C+")"+e+"("+C+"|$)"),x(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=ee.attr(i,e);return null==r?"!="===t:!t||((r+="","="===t)?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,f,d,p=s!==a?"nextSibling":"previousSibling",m=t.parentNode,g=o&&t.nodeName.toLowerCase(),y=!l&&!o,x=!1;if(m){if(s){for(;p;){for(h=t;h=h[p];)if(o?S(h,g):1===h.nodeType)return!1;d=p="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(x=(f=(u=(c=m[v]||(m[v]={}))[e]||[])[0]===_&&u[1])&&u[2],h=f&&m.childNodes[f];h=++f&&h&&h[p]||(x=f=0)||d.pop();)if(1===h.nodeType&&++x&&h===t){c[e]=[_,f,x];break}}else if(y&&(x=f=(u=(c=t[v]||(t[v]={}))[e]||[])[0]===_&&u[1]),!1===x)for(;(h=++f&&h&&h[p]||(x=f=0)||d.pop())&&(!((o?S(h,g):1===h.nodeType)&&++x)||(y&&((c=h[v]||(h[v]={}))[e]=[_,x]),h!==t)););return(x-=r)===i||x%i==0&&x/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return r[v]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?en(function(e,n){for(var i,s=r(e,t),a=s.length;a--;)i=o.call(e,s[a]),e[i]=!(n[i]=s[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:en(function(e){var t=[],n=[],i=ex(e.replace(L,"$1"));return i[v]?en(function(e,t,n,r){for(var s,a=i(e,null,r,[]),o=e.length;o--;)(s=a[o])&&(e[o]=!(t[o]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}}),has:en(function(e){return function(t){return ee(e,t).length>0}}),contains:en(function(e){return e=e.replace(Y,J),function(t){return(t.textContent||w.text(t)).indexOf(e)>-1}}),lang:en(function(e){return G.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(Y,J).toLowerCase(),function(t){var n;do if(n=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType)return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===Q()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ea(!1),disabled:ea(!0),checked:function(e){return S(e,"input")&&!!e.checked||S(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return j.test(e.nodeName)},button:function(e){return S(e,"input")&&"button"===e.type||S(e,"button")},text:function(e){var t;return S(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:eo(function(){return[0]}),last:eo(function(e,t){return[t-1]}),eq:eo(function(e,t,n){return[n<0?n+t:n]}),even:eo(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:eo(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:eo(function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e}),gt:eo(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=er(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=es(t);function ec(){}function eh(e,t){var n,r,s,a,o,l,u,c=b[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=i.preFilter;o;){for(a in(!n||(r=z.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),n=!1,(r=B.exec(o))&&(n=r.shift(),s.push({value:n,type:r[0].replace(L," ")}),o=o.slice(n.length)),i.filter)(r=W[a].exec(o))&&(!u[a]||(r=u[a](r)))&&(n=r.shift(),s.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?ee.error(e):b(e,l).slice(0)}function ef(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ed(e,t,n){var i=t.dir,r=t.next,s=r||i,a=n&&"parentNode"===s,o=y++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,l){var u,c,h=[_,o];if(l){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||a){if(c=t[v]||(t[v]={}),r&&S(t,r))t=t[i]||t;else{if((u=c[s])&&u[0]===_&&u[1]===o)return h[2]=u[2];if(c[s]=h,h[2]=e(t,n,l))return!0}}return!1}}function ep(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function em(e,t,n){for(var i=0,r=t.length;i<r;i++)ee(e,t[i],n);return n}function eg(e,t,n,i,r){for(var s,a=[],o=0,l=e.length,u=null!=t;o<l;o++)(s=e[o])&&(!n||n(s,i,r))&&(a.push(s),u&&t.push(o));return a}function ev(e,t,n,i,r,s){return i&&!i[v]&&(i=ev(i)),r&&!r[v]&&(r=ev(r,s)),en(function(s,a,l,u){var c,h,f,d,p=[],m=[],v=a.length,_=s||em(t||"*",l.nodeType?[l]:l,[]),y=e&&(s||!t)?eg(_,p,e,l,u):_;if(n?n(y,d=r||(s?e:v||i)?[]:a,l,u):d=y,i)for(c=eg(d,m),i(c,[],l,u),h=c.length;h--;)(f=c[h])&&(d[m[h]]=!(y[m[h]]=f));if(s){if(r||e){if(r){for(c=[],h=d.length;h--;)(f=d[h])&&c.push(y[h]=f);r(null,d=[],c,u)}for(h=d.length;h--;)(f=d[h])&&(c=r?o.call(s,f):p[h])>-1&&(s[c]=!(a[c]=f))}}else d=eg(d===a?d.splice(v,d.length):d),r?r(null,a,d,u):g.apply(a,d)})}function e_(e){for(var t,n,r,a=e.length,l=i.relative[e[0].type],u=l||i.relative[" "],c=l?1:0,h=ed(function(e){return e===t},u,!0),f=ed(function(e){return o.call(t,e)>-1},u,!0),d=[function(e,n,i){var r=!l&&(i||n!=s)||((t=n).nodeType?h(e,n,i):f(e,n,i));return t=null,r}];c<a;c++)if(n=i.relative[e[c].type])d=[ed(ep(d),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[v]){for(r=++c;r<a&&!i.relative[e[r].type];r++);return ev(c>1&&ep(d),c>1&&ef(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(L,"$1"),n,c<r&&e_(e.slice(c,r)),r<a&&e_(e=e.slice(r)),r<a&&ef(e))}d.push(n)}return ep(d)}function ey(e,t){var n=t.length>0,r=e.length>0,a=function(a,o,l,c,h){var d,p,m,v=0,y="0",x=a&&[],b=[],M=s,S=a||r&&i.find.TAG("*",h),E=_+=null==M?1:Math.random()||.1,A=S.length;for(h&&(s=o==u||o||h);y!==A&&null!=(d=S[y]);y++){if(r&&d){for(p=0,o||d.ownerDocument==u||(eu(d),l=!f);m=e[p++];)if(m(d,o||u,l)){g.call(c,d);break}h&&(_=E)}n&&((d=!m&&d)&&v--,a&&x.push(d))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(x,b,o,l);if(a){if(v>0)for(;y--;)x[y]||b[y]||(b[y]=T.call(c));b=eg(b)}g.apply(c,b),h&&!a&&b.length>0&&v+t.length>1&&w.uniqueSort(c)}return h&&(_=E,s=M),x};return n?en(a):a}function ex(e,t){var n,i=[],r=[],s=M[e+" "];if(!s){for(t||(t=eh(e)),n=t.length;n--;)(s=e_(t[n]))[v]?i.push(s):r.push(s);(s=M(e,ey(r,i))).selector=e}return s}function eb(e,t,n,r){var s,a,o,l,u,c="function"==typeof e&&e,h=!r&&eh(e=c.selector||e);if(n=n||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&9===t.nodeType&&f&&i.relative[a[1].type]){if(!(t=(i.find.ID(o.matches[0].replace(Y,J),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(s=W.needsContext.test(e)?0:a.length;s--&&(o=a[s],!i.relative[l=o.type]);)if((u=i.find[l])&&(r=u(o.matches[0].replace(Y,J),$.test(a[0].type)&&el(t.parentNode)||t))){if(a.splice(s,1),!(e=r.length&&ef(a)))return g.apply(n,r),n;break}}return(c||ex(e,h))(r,t,!f,n,!t||$.test(e)&&el(t.parentNode)||t),n}ec.prototype=i.filters=i.pseudos,i.setFilters=new ec,d.sortStable=v.split("").sort(D).join("")===v,eu(),d.sortDetached=ei(function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))}),w.find=ee,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,ee.compile=ex,ee.select=eb,ee.setDocument=eu,ee.tokenize=eh,ee.escape=w.escapeSelector,ee.getText=w.text,ee.isXML=w.isXMLDoc,ee.selectors=w.expr,ee.support=w.support,ee.uniqueSort=w.uniqueSort}();var O=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&w(e).is(n))break;i.push(e)}return i},I=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=w.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function F(e,t,n){return p(t)?w.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return o.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var i=t[0];return(n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType)?w.find.matchesSelector(i,e)?[i]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<i;t++)if(w.contains(r[t],this))return!0}));for(t=0,n=this.pushStack([]);t<i;t++)w.find(e,r[t],n);return i>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(F(this,e||[],!1))},not:function(e){return this.pushStack(F(this,e||[],!0))},is:function(e){return!!F(this,"string"==typeof e&&k.test(e)?w(e):e||[],!1).length}});var z,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||z,"string"==typeof e){if((i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:B.exec(e))&&(i[1]||!t)){if(!i[1])return(r=g.getElementById(i[2]))&&(this[0]=r,this.length=1),this;if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),U.test(i[1])&&w.isPlainObject(t))for(i in t)p(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,z=w(g);var V=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,s=[],a="string"!=typeof e&&w(e);if(!k.test(e)){for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){s.push(n);break}}return this.pushStack(s.length>1?w.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?o.call(w(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return I((e.parentNode||{}).firstChild,e)},children:function(e){return I(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(S(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,i){var r=w.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=w.filter(i,r)),this.length>1&&(H[e]||w.uniqueSort(r),V.test(e)&&r.reverse()),this.pushStack(r)}});var W=/[^\x20\t\r\n\f]+/g;function j(e){var t={};return w.each(e.match(W)||[],function(e,n){t[n]=!0}),t}function q(e){return e}function X(e){throw e}function $(e,t,n,i){var r;try{e&&p(r=e.promise)?r.call(e).done(t).fail(n):e&&p(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}w.Callbacks=function(e){e="string"==typeof e?j(e):w.extend({},e);var t,n,i,r,s=[],a=[],o=-1,l=function(){for(r=r||e.once,i=t=!0;a.length;o=-1)for(n=a.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(o=s.length-1,a.push(n)),function t(n){w.each(n,function(n,i){p(i)?e.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==y(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,s,n))>-1;)s.splice(n,1),n<=o&&o--}),this},has:function(e){return e?w.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,i){var r=p(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=r&&r.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){var s=0;function a(t,n,i,r){return function(){var o=this,l=arguments,u=function(){var e,u;if(!(t<s)){if(e=i.apply(o,l),e===n.promise())throw TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(u)?r?u.call(e,a(s,n,q,r),a(s,n,X,r)):(s++,u.call(e,a(s,n,q,r),a(s,n,X,r),a(s,n,q,n.notifyWith))):(i!==q&&(o=void 0,l=[e]),(r||n.resolveWith)(o,l))}},c=r?u:function(){try{u()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.error),t+1>=s&&(i!==X&&(o=void 0,l=[e]),n.rejectWith(o,l))}};t?c():(w.Deferred.getErrorHook?c.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(c.error=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,p(r)?r:q,e.notifyWith)),n[1][3].add(a(0,e,p(t)?t:q)),n[2][3].add(a(0,e,p(i)?i:X))}).promise()},promise:function(e){return null!=e?w.extend(e,r):r}},s={};return w.each(n,function(e,t){var a=t[2],o=t[5];r[t[1]]=a.add,o&&a.add(function(){i=o},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=a.fireWith}),r.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),s=r.call(arguments),a=w.Deferred(),o=function(e){return function(n){i[e]=this,s[e]=arguments.length>1?r.call(arguments):n,--t||a.resolveWith(i,s)}};if(t<=1&&($(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||p(s[n]&&s[n].then)))return a.then();for(;n--;)$(s[n],o(n),a.reject);return a.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Y.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var J=w.Deferred();function Z(){g.removeEventListener("DOMContentLoaded",Z),e.removeEventListener("load",Z),w.ready()}w.fn.ready=function(e){return J.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){!(!0===e?--w.readyWait:w.isReady)&&(w.isReady=!0,!0!==e&&--w.readyWait>0||J.resolveWith(g,[w]))}}),w.ready.then=J.then,"complete"!==g.readyState&&("loading"===g.readyState||g.documentElement.doScroll)?(g.addEventListener("DOMContentLoaded",Z),e.addEventListener("load",Z)):e.setTimeout(w.ready);var K=function(e,t,n,i,r,s,a){var o=0,l=e.length,u=null==n;if("object"===y(n))for(o in r=!0,n)K(e,t,o,n[o],!0,s,a);else if(void 0!==i&&(r=!0,p(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(w(e),n)})),t))for(;o<l;o++)t(e[o],n,a?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):s},Q=/^-ms-/,ee=/-([a-z])/g;function et(e,t){return t.toUpperCase()}function en(e){return e.replace(Q,"ms-").replace(ee,et)}var ei=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function er(){this.expando=w.expando+er.uid++}er.uid=1,er.prototype={cache:function(e){var t=e[this.expando];return!t&&(t={},ei(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[en(t)]=n;else for(i in t)r[en(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][en(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t)for(n=(t=Array.isArray(t)?t.map(en):((t=en(t))in i)?[t]:t.match(W)||[]).length;n--;)delete i[t[n]];(void 0===t||w.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var es=new er,ea=new er,eo=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,el=/[A-Z]/g;function eu(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:eo.test(e)?JSON.parse(e):e)}function ec(e,t,n){var i;if(void 0===n&&1===e.nodeType){if(i="data-"+t.replace(el,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=eu(n)}catch(e){}ea.set(e,t,n)}else n=void 0}return n}w.extend({hasData:function(e){return ea.hasData(e)||es.hasData(e)},data:function(e,t,n){return ea.access(e,t,n)},removeData:function(e,t){ea.remove(e,t)},_data:function(e,t,n){return es.access(e,t,n)},_removeData:function(e,t){es.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(r=ea.get(s),1===s.nodeType&&!es.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&ec(s,i=en(i.slice(5)),r[i]);es.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ea.set(this,e)}):K(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=ea.get(s,e))||void 0!==(n=ec(s,e))?n:void 0;this.each(function(){ea.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ea.remove(this,e)})}}),w.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=es.get(e,t),n&&(!i||Array.isArray(n)?i=es.access(e,t,w.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),i=n.length,r=n.shift(),s=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return es.get(e,n)||es.access(e,n,{empty:w.Callbacks("once memory").add(function(){es.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return("string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n)?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=w.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=es.get(s[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var eh=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ef=RegExp("^(?:([+-])=|)("+eh+")([a-z%]*)$","i"),ed=["Top","Right","Bottom","Left"],ep=g.documentElement,em=function(e){return w.contains(e.ownerDocument,e)},eg={composed:!0};ep.getRootNode&&(em=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(eg)===e.ownerDocument});var ev=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&em(e)&&"none"===w.css(e,"display")};function e_(e,t,n,i){var r,s,a=20,o=i?function(){return i.cur()}:function(){return w.css(e,t,"")},l=o(),u=n&&n[3]||(w.cssNumber[t]?"":"px"),c=e.nodeType&&(w.cssNumber[t]||"px"!==u&&+l)&&ef.exec(w.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)w.style(e,t,c+u),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),c/=s;c*=2,w.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}var ey={};function ex(e){var t,n=e.ownerDocument,i=e.nodeName,r=ey[i];return r||(t=n.body.appendChild(n.createElement(i)),r=w.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ey[i]=r),r}function eb(e,t){for(var n,i,r=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(n=i.style.display,t?("none"!==n||(r[s]=es.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ev(i)&&(r[s]=ex(i))):"none"!==n&&(r[s]="none",es.set(i,"display",n)));for(s=0;s<a;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}w.fn.extend({show:function(){return eb(this,!0)},hide:function(){return eb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ev(this)?w(this).show():w(this).hide()})}});var ew=/^(?:checkbox|radio)$/i,eM=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,eS=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=g.createDocumentFragment().appendChild(g.createElement("div")),t=g.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),d.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",d.option=!!e.lastChild}();var eT={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function eE(e,t){var n;return(n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t))?w.merge([e],n):n}function eA(e,t){for(var n=0,i=e.length;n<i;n++)es.set(e[n],"globalEval",!t||es.get(t[n],"globalEval"))}eT.tbody=eT.tfoot=eT.colgroup=eT.caption=eT.thead,eT.th=eT.td,d.option||(eT.optgroup=eT.option=[1,"<select multiple='multiple'>","</select>"]);var eC=/<|&#?\w+;/;function eL(e,t,n,i,r){for(var s,a,o,l,u,c=t.createDocumentFragment(),h=[],f=0,d=e.length;f<d;f++)if((s=e[f])||0===s){if("object"===y(s))w.merge(h,s.nodeType?[s]:s);else if(eC.test(s)){for(a=a||c.appendChild(t.createElement("div")),o=eT[(eM.exec(s)||["",""])[1].toLowerCase()]||eT._default,a.innerHTML=o[1]+w.htmlPrefilter(s)+o[2],u=o[0];u--;)a=a.lastChild;w.merge(h,a.childNodes),(a=c.firstChild).textContent=""}else h.push(t.createTextNode(s))}for(c.textContent="",f=0;s=h[f++];){if(i&&w.inArray(s,i)>-1){r&&r.push(s);continue}if(l=em(s),a=eE(c.appendChild(s),"script"),l&&eA(a),n)for(u=0;s=a[u++];)eS.test(s.type||"")&&n.push(s)}return c}var eR=/^([^.]*)(?:\.(.+)|)/;function eD(){return!0}function eP(){return!1}function eN(e,t,n,i,r,s){var a,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)eN(e,o,n,i,t[o],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=eP;else if(!r)return e;return 1===s&&(a=r,(r=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,r,i,n)})}function eO(e,t,n){if(!n){void 0===es.get(e,t)&&w.event.add(e,t,eD);return}es.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var n,i=es.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=r.call(arguments),es.set(this,t,i),this[t](),n=es.get(this,t),es.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(es.set(this,t,w.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=eD)}})}w.event={global:{},add:function(e,t,n,i,r){var s,a,o,l,u,c,h,f,d,p,m,g=es.get(e);if(ei(e))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&w.find.matchesSelector(ep,r),n.guid||(n.guid=w.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(W)||[""]).length;u--;)d=m=(o=eR.exec(t[u])||[])[1],p=(o[2]||"").split(".").sort(),d&&(h=w.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=w.event.special[d]||{},c=w.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&w.expr.match.needsContext.test(r),namespace:p.join(".")},s),(f=l[d])||((f=l[d]=[]).delegateCount=0,(!h.setup||!1===h.setup.call(e,i,p,a))&&e.addEventListener&&e.addEventListener(d,a)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),w.event.global[d]=!0)},remove:function(e,t,n,i,r){var s,a,o,l,u,c,h,f,d,p,m,g=es.hasData(e)&&es.get(e);if(g&&(l=g.events)){for(t=(t||"").match(W)||[""],u=t.length;u--;){if(d=m=(o=eR.exec(t[u])||[])[1],p=(o[2]||"").split(".").sort(),!d){for(d in l)w.event.remove(e,d+t[u],n,i,!0);continue}for(h=w.event.special[d]||{},f=l[d=(i?h.delegateType:h.bindType)||d]||[],o=o[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=f.length;s--;)c=f[s],(r||m===c.origType)&&(!n||n.guid===c.guid)&&(!o||o.test(c.namespace))&&(!i||i===c.selector||"**"===i&&c.selector)&&(f.splice(s,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||w.removeEvent(e,d,g.handle),delete l[d])}w.isEmptyObject(l)&&es.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,a,o=Array(arguments.length),l=w.event.fix(e),u=(es.get(this,"events")||Object.create(null))[l.type]||[],c=w.event.special[l.type]||{};for(t=1,o[0]=l;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=w.event.handlers.call(this,l,u),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)(!l.rnamespace||!1===s.namespace||l.rnamespace.test(s.namespace))&&(l.handleObj=s,l.data=s.data,void 0!==(i=((w.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,s,a,o=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1)){for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&!("click"===e.type&&!0===u.disabled)){for(n=0,s=[],a={};n<l;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?w(r,this).index(u)>-1:w.find(r,this,null,[u]).length),a[r]&&s.push(i);s.length&&o.push({elem:u,handlers:s})}}return u=this,l<t.length&&o.push({elem:u,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ew.test(t.type)&&t.click&&S(t,"input")&&eO(t,"click",!0),!1},trigger:function(e){var t=this||e;return ew.test(t.type)&&t.click&&S(t,"input")&&eO(t,"click"),!0},_default:function(e){var t=e.target;return ew.test(t.type)&&t.click&&S(t,"input")&&es.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?eD:eP,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:eP,isPropagationStopped:eP,isImmediatePropagationStopped:eP,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=eD,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=eD,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=eD,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(g.documentMode){var n=es.get(this,"handle"),i=w.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else w.event.simulate(t,e.target,w.event.fix(e))}w.event.special[e]={setup:function(){var i;if(eO(this,e,!0),!g.documentMode)return!1;(i=es.get(this,t))||this.addEventListener(t,n),es.set(this,t,(i||0)+1)},trigger:function(){return eO(this,e),!0},teardown:function(){var e;if(!g.documentMode)return!1;(e=es.get(this,t)-1)?es.set(this,t,e):(this.removeEventListener(t,n),es.remove(this,t))},_default:function(t){return es.get(t.target,e)},delegateType:t},w.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,s=es.get(r,t);s||(g.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),es.set(r,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=g.documentMode?this:i,s=es.get(r,t)-1;s?es.set(r,t,s):(g.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),es.remove(r,t))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===i||w.contains(i,r))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,i){return eN(this,e,t,n,i)},one:function(e,t,n,i){return eN(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,w(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=eP),this.each(function(){w.event.remove(this,e,n,t)})}});var eI=/<script|<style|<link/i,ek=/checked\s*(?:[^=]|=\s*.checked.)/i,eU=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function eF(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function ez(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function eB(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function eV(e,t){var n,i,r,s,a,o;if(1===t.nodeType){if(es.hasData(e)&&(o=es.get(e).events))for(r in es.remove(t,"handle events"),o)for(n=0,i=o[r].length;n<i;n++)w.event.add(t,r,o[r][n]);ea.hasData(e)&&(s=ea.access(e),a=w.extend({},s),ea.set(t,a))}}function eH(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ew.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function eG(e,t,n,i){t=s(t);var r,a,o,l,u,c,h=0,f=e.length,m=f-1,g=t[0],v=p(g);if(v||f>1&&"string"==typeof g&&!d.checkClone&&ek.test(g))return e.each(function(r){var s=e.eq(r);v&&(t[0]=g.call(this,r,s.html())),eG(s,t,n,i)});if(f&&(a=(r=eL(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(l=(o=w.map(eE(r,"script"),ez)).length;h<f;h++)u=r,h!==m&&(u=w.clone(u,!0,!0),l&&w.merge(o,eE(u,"script"))),n.call(e[h],u,h);if(l)for(c=o[o.length-1].ownerDocument,w.map(o,eB),h=0;h<l;h++)u=o[h],eS.test(u.type||"")&&!es.access(u,"globalEval")&&w.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?w._evalUrl&&!u.noModule&&w._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):_(u.textContent.replace(eU,""),u,c))}return e}function eW(e,t,n){for(var i,r=t?w.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||w.cleanData(eE(i)),i.parentNode&&(n&&em(i)&&eA(eE(i,"script")),i.parentNode.removeChild(i));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,s,a,o=e.cloneNode(!0),l=em(e);if(!d.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!w.isXMLDoc(e))for(i=0,a=eE(o),r=(s=eE(e)).length;i<r;i++)eH(s[i],a[i]);if(t){if(n)for(i=0,s=s||eE(e),a=a||eE(o),r=s.length;i<r;i++)eV(s[i],a[i]);else eV(e,o)}return(a=eE(o,"script")).length>0&&eA(a,!l&&eE(e,"script")),o},cleanData:function(e){for(var t,n,i,r=w.event.special,s=0;void 0!==(n=e[s]);s++)if(ei(n)){if(t=n[es.expando]){if(t.events)for(i in t.events)r[i]?w.event.remove(n,i):w.removeEvent(n,i,t.handle);n[es.expando]=void 0}n[ea.expando]&&(n[ea.expando]=void 0)}}}),w.fn.extend({detach:function(e){return eW(this,e,!0)},remove:function(e){return eW(this,e)},text:function(e){return K(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return eG(this,arguments,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&eF(this,e).appendChild(e)})},prepend:function(){return eG(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=eF(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return eG(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return eG(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(eE(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return K(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!eI.test(e)&&!eT[(eM.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(w.cleanData(eE(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return eG(this,arguments,function(t){var n=this.parentNode;0>w.inArray(this,e)&&(w.cleanData(eE(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,i=[],r=w(e),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),w(r[o])[t](n),a.apply(i,n.get());return this.pushStack(i)}});var ej=RegExp("^("+eh+")(?!px)[a-z%]+$","i"),eq=/^--/,eX=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},e$=function(e,t,n){var i,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=s[r];return i},eY=RegExp(ed.join("|"),"i");function eJ(e,t,n){var i,r,s,a,o=eq.test(t),l=e.style;return(n=n||eX(e))&&(a=n.getPropertyValue(t)||n[t],o&&a&&(a=a.replace(L,"$1")||void 0),""!==a||em(e)||(a=w.style(e,t)),!d.pixelBoxStyles()&&ej.test(a)&&eY.test(t)&&(i=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=i,l.minWidth=r,l.maxWidth=s)),void 0!==a?a+"":a}function eZ(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ep.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,l=12===n(t.marginLeft),c.style.right="60%",a=36===n(t.right),r=36===n(t.width),c.style.position="absolute",s=12===n(c.offsetWidth/3),ep.removeChild(u),c=null}}function n(e){return Math.round(parseFloat(e))}var i,r,s,a,o,l,u=g.createElement("div"),c=g.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(d,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,i,r;return null==o&&(t=g.createElement("table"),n=g.createElement("tr"),i=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",ep.appendChild(t).appendChild(n).appendChild(i),o=parseInt((r=e.getComputedStyle(n)).height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,ep.removeChild(t)),o}}))}();var eK=["Webkit","Moz","ms"],eQ=g.createElement("div").style,e0={};function e1(e){for(var t=e[0].toUpperCase()+e.slice(1),n=eK.length;n--;)if((e=eK[n]+t)in eQ)return e}function e2(e){return w.cssProps[e]||e0[e]||(e in eQ?e:e0[e]=e1(e)||e)}var e3=/^(none|table(?!-c[ea]).+)/,e4={position:"absolute",visibility:"hidden",display:"block"},e5={letterSpacing:"0",fontWeight:"400"};function e6(e,t,n){var i=ef.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function e8(e,t,n,i,r,s){var a="width"===t?1:0,o=0,l=0,u=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+ed[a],!0,r)),i?("content"===n&&(l-=w.css(e,"padding"+ed[a],!0,r)),"margin"!==n&&(l-=w.css(e,"border"+ed[a]+"Width",!0,r))):(l+=w.css(e,"padding"+ed[a],!0,r),"padding"!==n?l+=w.css(e,"border"+ed[a]+"Width",!0,r):o+=w.css(e,"border"+ed[a]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-o-.5))||0),l+u}function e9(e,t,n){var i=eX(e),r=(!d.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,i),s=r,a=eJ(e,t,i),o="offset"+t[0].toUpperCase()+t.slice(1);if(ej.test(a)){if(!n)return a;a="auto"}return(!d.boxSizingReliable()&&r||!d.reliableTrDimensions()&&S(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===w.css(e,"boxSizing",!1,i),(s=o in e)&&(a=e[o])),(a=parseFloat(a)||0)+e8(e,t,n||(r?"border":"content"),s,i,a)+"px"}function e7(e,t,n,i,r){return new e7.prototype.init(e,t,n,i,r)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=eJ(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,o=en(t),l=eq.test(t),u=e.style;if(l||(t=e2(o)),a=w.cssHooks[t]||w.cssHooks[o],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t];"string"==(s=typeof n)&&(r=ef.exec(n))&&r[1]&&(n=e_(e,t,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(w.cssNumber[o]?"":"px")),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,s,a,o=en(t);return(eq.test(t)||(t=e2(o)),(a=w.cssHooks[t]||w.cssHooks[o])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=eJ(e,t,i)),"normal"===r&&t in e5&&(r=e5[t]),""===n||n)?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,i){if(n)return!e3.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?e9(e,t,i):e$(e,e4,function(){return e9(e,t,i)})},set:function(e,n,i){var r,s=eX(e),a=!d.scrollboxSize()&&"absolute"===s.position,o=(a||i)&&"border-box"===w.css(e,"boxSizing",!1,s),l=i?e8(e,t,i,o,s):0;return o&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-e8(e,t,"border",!1,s)-.5)),l&&(r=ef.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),e6(e,n,l)}}}),w.cssHooks.marginLeft=eZ(d.reliableMarginLeft,function(e,t){if(t)return(parseFloat(eJ(e,"marginLeft"))||e.getBoundingClientRect().left-e$(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+ed[i]+t]=s[i]||s[i-2]||s[0];return r}},"margin"!==e&&(w.cssHooks[e+t].set=e6)}),w.fn.extend({css:function(e,t){return K(this,function(e,t,n){var i,r,s={},a=0;if(Array.isArray(t)){for(i=eX(e),r=t.length;a<r;a++)s[t[a]]=w.css(e,t[a],!1,i);return s}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=e7,e7.prototype={constructor:e7,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=e7.propHooks[this.prop];return e&&e.get?e.get(this):e7.propHooks._default.get(this)},run:function(e){var t,n=e7.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):e7.propHooks._default.set(this),this}},e7.prototype.init.prototype=e7.prototype,e7.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1===e.elem.nodeType&&(w.cssHooks[e.prop]||null!=e.elem.style[e2(e.prop)])?w.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},e7.propHooks.scrollTop=e7.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=e7.prototype.init,w.fx.step={};var te,tt,tn=/^(?:toggle|show|hide)$/,ti=/queueHooks$/;function tr(){tt&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(tr):e.setTimeout(tr,w.fx.interval),w.fx.tick())}function ts(){return e.setTimeout(function(){te=void 0}),te=Date.now()}function ta(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ed[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function to(e,t,n){for(var i,r=(tc.tweeners[t]||[]).concat(tc.tweeners["*"]),s=0,a=r.length;s<a;s++)if(i=r[s].call(n,t,e))return i}function tl(e,t,n){var i,r,s,a,o,l,u,c,h="width"in t||"height"in t,f=this,d={},p=e.style,m=e.nodeType&&ev(e),g=es.get(e,"fxshow");for(i in n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[i],tn.test(r)){if(delete t[i],s=s||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}d[i]=g&&g[i]||w.style(e,i)}if(!(!(l=!w.isEmptyObject(t))&&w.isEmptyObject(d)))for(i in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=es.get(e,"display")),"none"===(c=w.css(e,"display"))&&(u?c=u:(eb([e],!0),u=e.style.display||u,c=w.css(e,"display"),eb([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===w.css(e,"float")&&(l||(f.done(function(){p.display=u}),null!=u||(u="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,d)l||(g?"hidden"in g&&(m=g.hidden):g=es.access(e,"fxshow",{display:u}),s&&(g.hidden=!m),m&&eb([e],!0),f.done(function(){for(i in m||eb([e]),es.remove(e,"fxshow"),d)w.style(e,i,d[i])})),l=to(m?g[i]:0,i,f),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}function tu(e,t){var n,i,r,s,a;for(n in e)if(r=t[i=en(n)],Array.isArray(s=e[n])&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(a=w.cssHooks[i])&&"expand"in a)for(n in s=a.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=r);else t[i]=r}function tc(e,t,n){var i,r,s=0,a=tc.prefilters.length,o=w.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=te||ts(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),s=0,a=u.tweens.length;s<a;s++)u.tweens[s].run(i);return(o.notifyWith(e,[u,i,n]),i<1&&a)?n:(a||o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:te||ts(),duration:n.duration,tweens:[],createTween:function(t,n){var i=w.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),c=u.props;for(tu(c,u.opts.specialEasing);s<a;s++)if(i=tc.prefilters[s].call(u,e,c,u.opts))return p(i.stop)&&(w._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return w.map(c,to,u),p(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}w.Animation=w.extend(tc,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return e_(n.elem,e,ef.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(W);for(var n,i=0,r=e.length;i<r;i++)n=e[i],tc.tweeners[n]=tc.tweeners[n]||[],tc.tweeners[n].unshift(t)},prefilters:[tl],prefilter:function(e,t){t?tc.prefilters.unshift(e):tc.prefilters.push(e)}}),w.speed=function(e,t,n){var i=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return w.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in w.fx.speeds?i.duration=w.fx.speeds[i.duration]:i.duration=w.fx.speeds._default),(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){p(i.old)&&i.old.call(this),i.queue&&w.dequeue(this,i.queue)},i},w.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ev).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=w.isEmptyObject(e),s=w.speed(t,n,i),a=function(){var t=tc(this,w.extend({},e),s);(r||es.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=w.timers,a=es.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ti.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem===this&&(null==e||s[r].queue===e)&&(s[r].anim.stop(n),t=!1,s.splice(r,1));(t||!n)&&w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=es.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=w.timers,a=i?i.length:0;for(n.finish=!0,w.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ta(t,!0),e,i,r)}}),w.each({slideDown:ta("show"),slideUp:ta("hide"),slideToggle:ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(te=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),te=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){tt||(tt=!0,tr())},w.fx.stop=function(){tt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=g.createElement("input"),t=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=t.selected,(e=g.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var th,tf=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return K(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s){if(void 0===e.getAttribute)return w.prop(e,t,n);if(1===s&&w.isXMLDoc(e)||(r=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?th:void 0)),void 0!==n){if(null===n){w.removeAttr(e,t);return}return r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n)}return r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=w.find.attr(e,t),null==i?void 0:i)}},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&S(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(W);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),th={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=tf[t]||w.find.attr;tf[t]=function(e,t,i){var r,s,a=t.toLowerCase();return i||(s=tf[a],tf[a]=r,r=null!=n(e,t,i)?a:null,tf[a]=s),r}});var td=/^(?:input|select|textarea|button)$/i,tp=/^(?:a|area)$/i;function tm(e){return(e.match(W)||[]).join(" ")}function tg(e){return e.getAttribute&&e.getAttribute("class")||""}function tv(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(W)||[]}w.fn.extend({prop:function(e,t){return K(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return(1===s&&w.isXMLDoc(e)||(t=w.propFix[t]||t,r=w.propHooks[t]),void 0!==n)?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):td.test(e.nodeName)||tp.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,i,r,s,a;return p(e)?this.each(function(t){w(this).addClass(e.call(this,t,tg(this)))}):(t=tv(e)).length?this.each(function(){if(i=tg(this),n=1===this.nodeType&&" "+tm(i)+" "){for(s=0;s<t.length;s++)r=t[s],0>n.indexOf(" "+r+" ")&&(n+=r+" ");i!==(a=tm(n))&&this.setAttribute("class",a)}}):this},removeClass:function(e){var t,n,i,r,s,a;return p(e)?this.each(function(t){w(this).removeClass(e.call(this,t,tg(this)))}):arguments.length?(t=tv(e)).length?this.each(function(){if(i=tg(this),n=1===this.nodeType&&" "+tm(i)+" "){for(s=0;s<t.length;s++)for(r=t[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");i!==(a=tm(n))&&this.setAttribute("class",a)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,i,r,s,a=typeof e,o="string"===a||Array.isArray(e);return p(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,tg(this),t),t)}):"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):(n=tv(e),this.each(function(){if(o)for(r=0,s=w(this);r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else(void 0===e||"boolean"===a)&&((i=tg(this))&&es.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":es.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+tm(tg(n))+" ").indexOf(t)>-1)return!0;return!1}});var t_=/\r/g;w.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=p(e),this.each(function(n){var r;1!==this.nodeType||(null==(r=i?e.call(this,n,w(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=w.map(r,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=w.valHooks[r.type]||w.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(t_,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:tm(w.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,a="select-one"===e.type,o=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,s=w.makeArray(t),a=r.length;a--;)((i=r[a]).selected=w.inArray(w.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},d.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ty=e.location,tx={guid:Date.now()},tb=/\?/;w.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{n=new e.DOMParser().parseFromString(t,"text/xml")}catch(e){}return i=n&&n.getElementsByTagName("parsererror")[0],(!n||i)&&w.error("Invalid XML: "+(i?w.map(i.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var tw=/^(?:focusinfocus|focusoutblur)$/,tM=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,r){var s,a,o,l,u,h,f,d,v=[i||g],_=c.call(t,"type")?t.type:t,y=c.call(t,"namespace")?t.namespace.split("."):[];if(a=d=o=i=i||g,!(3===i.nodeType||8===i.nodeType||tw.test(_+w.event.triggered))&&(_.indexOf(".")>-1&&(_=(y=_.split(".")).shift(),y.sort()),u=0>_.indexOf(":")&&"on"+_,(t=t[w.expando]?t:new w.Event(_,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),f=w.event.special[_]||{},r||!f.trigger||!1!==f.trigger.apply(i,n))){if(!r&&!f.noBubble&&!m(i)){for(l=f.delegateType||_,tw.test(l+_)||(a=a.parentNode);a;a=a.parentNode)v.push(a),o=a;o===(i.ownerDocument||g)&&v.push(o.defaultView||o.parentWindow||e)}for(s=0;(a=v[s++])&&!t.isPropagationStopped();)d=a,t.type=s>1?l:f.bindType||_,(h=(es.get(a,"events")||Object.create(null))[t.type]&&es.get(a,"handle"))&&h.apply(a,n),(h=u&&a[u])&&h.apply&&ei(a)&&(t.result=h.apply(a,n),!1===t.result&&t.preventDefault());return t.type=_,!r&&!t.isDefaultPrevented()&&(!f._default||!1===f._default.apply(v.pop(),n))&&ei(i)&&u&&p(i[_])&&!m(i)&&((o=i[u])&&(i[u]=null),w.event.triggered=_,t.isPropagationStopped()&&d.addEventListener(_,tM),i[_](),t.isPropagationStopped()&&d.removeEventListener(_,tM),w.event.triggered=void 0,o&&(i[u]=o)),t.result}},simulate:function(e,t,n){var i=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(i,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var tS=/\[\]$/,tT=/\r?\n/g,tE=/^(?:submit|button|image|reset|file)$/i,tA=/^(?:input|select|textarea|keygen)/i;function tC(e,t,n,i){var r;if(Array.isArray(t))w.each(t,function(t,r){n||tS.test(e)?i(e,r):tC(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==y(t))i(e,t);else for(r in t)tC(e+"["+r+"]",t[r],n,i)}w.param=function(e,t){var n,i=[],r=function(e,t){var n=p(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){r(this.name,this.value)});else for(n in e)tC(n,e[n],t,r);return i.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&tA.test(this.nodeName)&&!tE.test(e)&&(this.checked||!ew.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(tT,"\r\n")}}):{name:t.name,value:n.replace(tT,"\r\n")}}).get()}});var tL=/%20/g,tR=/#.*$/,tD=/([?&])_=[^&]*/,tP=/^(.*?):[ \t]*([^\r\n]*)$/mg,tN=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tO=/^(?:GET|HEAD)$/,tI=/^\/\//,tk={},tU={},tF="*/".concat("*"),tz=g.createElement("a");function tB(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(W)||[];if(p(n))for(;i=s[r++];)"+"===i[0]?(e[i=i.slice(1)||"*"]=e[i]||[]).unshift(n):(e[i]=e[i]||[]).push(n)}}function tV(e,t,n,i){var r={},s=e===tU;function a(o){var l;return r[o]=!0,w.each(e[o]||[],function(e,o){var u=o(t,n,i);return"string"!=typeof u||s||r[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),a(u),!1)}),l}return a(t.dataTypes[0])||!r["*"]&&a("*")}function tH(e,t){var n,i,r=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&w.extend(!0,e,i),e}function tG(e,t,n){for(var i,r,s,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i){for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}if(s)return s!==l[0]&&l.unshift(s),n[s]}function tW(e,t,n,i){var r,s,a,o,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(s=c.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift()){if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=u[l+" "+s]||u["* "+s])){for(r in u)if((o=r.split(" "))[1]===s&&(a=u[l+" "+o[0]]||u["* "+o[0]])){!0===a?a=u[r]:!0!==u[r]&&(s=o[0],c.unshift(o[1]));break}}if(!0!==a){if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+s}}}}}return{state:"success",data:t}}tz.href=ty.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ty.href,type:"GET",isLocal:tN.test(ty.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tF,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?tH(tH(e,w.ajaxSettings),t):tH(w.ajaxSettings,e)},ajaxPrefilter:tB(tk),ajaxTransport:tB(tU),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,r,s,a,o,l,u,c,h,f,d=w.ajaxSetup({},n),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?w(p):w.event,v=w.Deferred(),_=w.Callbacks("once memory"),y=d.statusCode||{},x={},b={},M="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=tP.exec(s);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(x[e=b[e.toLowerCase()]=b[e.toLowerCase()]||e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e){if(u)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]]}return this},abort:function(e){var t=e||M;return i&&i.abort(t),T(0,t),this}};if(v.promise(S),d.url=((t||d.url||ty.href)+"").replace(tI,ty.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(W)||[""],null==d.crossDomain){l=g.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=tz.protocol+"//"+tz.host!=l.protocol+"//"+l.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=w.param(d.data,d.traditional)),tV(tk,d,n,S),u)return S;for(h in(c=w.event&&d.global)&&0==w.active++&&w.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!tO.test(d.type),r=d.url.replace(tR,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(tL,"+")):(f=d.url.slice(r.length),d.data&&(d.processData||"string"==typeof d.data)&&(r+=(tb.test(r)?"&":"?")+d.data,delete d.data),!1===d.cache&&(r=r.replace(tD,"$1"),f=(tb.test(r)?"&":"?")+"_="+tx.guid+++f),d.url=r+f),d.ifModified&&(w.lastModified[r]&&S.setRequestHeader("If-Modified-Since",w.lastModified[r]),w.etag[r]&&S.setRequestHeader("If-None-Match",w.etag[r])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+tF+"; q=0.01":""):d.accepts["*"]),d.headers)S.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,S,d)||u))return S.abort();if(M="abort",_.add(d.complete),S.done(d.success),S.fail(d.error),i=tV(tU,d,n,S)){if(S.readyState=1,c&&m.trigger("ajaxSend",[S,d]),u)return S;d.async&&d.timeout>0&&(o=e.setTimeout(function(){S.abort("timeout")},d.timeout));try{u=!1,i.send(x,T)}catch(e){if(u)throw e;T(-1,e)}}else T(-1,"No Transport");function T(t,n,a,l){var h,f,g,x,b,M=n;u||(u=!0,o&&e.clearTimeout(o),i=void 0,s=l||"",S.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(x=tG(d,S,a)),!h&&w.inArray("script",d.dataTypes)>-1&&0>w.inArray("json",d.dataTypes)&&(d.converters["text script"]=function(){}),x=tW(d,x,S,h),h?(d.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(w.lastModified[r]=b),(b=S.getResponseHeader("etag"))&&(w.etag[r]=b)),204===t||"HEAD"===d.type?M="nocontent":304===t?M="notmodified":(M=x.state,f=x.data,h=!(g=x.error))):(g=M,(t||!M)&&(M="error",t<0&&(t=0))),S.status=t,S.statusText=(n||M)+"",h?v.resolveWith(p,[f,M,S]):v.rejectWith(p,[S,M,g]),S.statusCode(y),y=void 0,c&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,d,h?f:g]),_.fireWith(p,[S,M]),!c||(m.trigger("ajaxComplete",[S,d]),--w.active||w.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,i,r){return p(n)&&(r=r||i,i=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:r,data:n,success:i},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return p(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var tj={0:200,1223:204},tq=w.ajaxSettings.xhr();d.cors=!!tq&&"withCredentials"in tq,d.ajax=tq=!!tq,w.ajaxTransport(function(t){var n,i;if(d.cors||tq&&!t.crossDomain)return{send:function(r,s){var a,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)o[a]=t.xhrFields[a];for(a in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(tj[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{o.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(i,r){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}}});var tX=[],t$=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tX.pop()||w.expando+"_"+tx.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,i){var r,s,a,o=!1!==t.jsonp&&(t$.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&t$.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(t$,"$1"+r):!1!==t.jsonp&&(t.url+=(tb.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||w.error(r+" was not called"),a[0]},t.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===s?w(e).removeProp(r):e[r]=s,t[r]&&(t.jsonpCallback=n.jsonpCallback,tX.push(r)),a&&p(s)&&s(a[0]),a=s=void 0}),"script"}),d.createHTMLDocument=function(){var e=g.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){var i,r,s;return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(d.createHTMLDocument?((i=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(i)):t=g),r=U.exec(e),s=!n&&[],r)?[t.createElement(r[1])]:(r=eL([e],t,s),s&&s.length&&w(s).remove(),w.merge([],r.childNodes))},w.fn.load=function(e,t,n){var i,r,s,a=this,o=e.indexOf(" ");return o>-1&&(i=tm(e.slice(o)),e=e.slice(0,o)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&w.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,a.html(i?w("<div>").append(w.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var i,r,s,a,o,l,u=w.css(e,"position"),c=w(e),h={};"static"===u&&(e.style.position="relative"),o=c.offset(),s=w.css(e,"top"),l=w.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(a=(i=c.position()).top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),p(t)&&(t=t.call(e,n,w.extend({},o))),null!=t.top&&(h.top=t.top-o.top+a),null!=t.left&&(h.left=t.left-o.left+r),"using"in t?t.using.call(e,h):c.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,i=this[0];if(i)return i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===w.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&(r=w(e).offset(),r.top+=w.css(e,"borderTopWidth",!0),r.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-w.css(i,"marginTop",!0),left:t.left-r.left-w.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||ep})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(i){return K(this,function(e,i,r){var s;if(m(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r},e,i,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=eZ(d.pixelPosition,function(e,n){if(n)return n=eJ(e,t),ej.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){w.fn[i]=function(r,s){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===s?"margin":"border");return K(this,function(t,n,r){var s;return m(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?w.css(t,n,o):w.style(t,n,r,o)},t,a?r:void 0,a)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var tY=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,i,s;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return i=r.call(arguments,2),(s=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||w.guid++,s},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=p,w.isWindow=m,w.camelCase=en,w.type=y,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(tY,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var tJ=e.jQuery,tZ=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=tZ),t&&e.jQuery===w&&(e.jQuery=tJ),w},void 0===t&&(e.jQuery=e.$=w),w});var $kUBvx=parcelRequire("kUBvx"),$7UxrJ=parcelRequire("7UxrJ"),$c971b71faaf36555$exports={};$c971b71faaf36555$exports=new URL("delete.2ee86d8f.svg",import.meta.url).toString();var $8095ba9ff5d67952$exports={};$8095ba9ff5d67952$exports=new URL("warning.ffd1b768.svg",import.meta.url).toString();var $ilwiq=parcelRequire("ilwiq"),$crxWL=parcelRequire("crxWL"),$kUBvx=parcelRequire("kUBvx"),$ilwiq=parcelRequire("ilwiq");class $08157b6a0804d7dd$export$c32c7942a3d4b7c1{constructor(){this.pluginCallbacks=[],this.register(function(e){return new $08157b6a0804d7dd$var$GLTFLightExtension(e)}),this.register(function(e){return new $08157b6a0804d7dd$var$GLTFMaterialsUnlitExtension(e)}),this.register(function(e){return new $08157b6a0804d7dd$var$GLTFMaterialsTransmissionExtension(e)}),this.register(function(e){return new $08157b6a0804d7dd$var$GLTFMaterialsVolumeExtension(e)}),this.register(function(e){return new $08157b6a0804d7dd$var$GLTFMaterialsClearcoatExtension(e)}),this.register(function(e){return new $08157b6a0804d7dd$var$GLTFMaterialsIridescenceExtension(e)})}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r=new $08157b6a0804d7dd$var$GLTFWriter,s=[];for(let e=0,t=this.pluginCallbacks.length;e<t;e++)s.push(this.pluginCallbacks[e](r));r.setPlugins(s),r.write(e,t,i).catch(n)}parseAsync(e,t){let n=this;return new Promise(function(i,r){n.parse(e,i,r,t)})}}const $08157b6a0804d7dd$var$WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},$08157b6a0804d7dd$var$THREE_TO_WEBGL={};$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.NearestFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.NEAREST,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.NearestMipmapNearestFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.NearestMipmapLinearFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.LinearFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINEAR,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.LinearMipmapNearestFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.LinearMipmapLinearFilter]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.ClampToEdgeWrapping]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.CLAMP_TO_EDGE,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.RepeatWrapping]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.REPEAT,$08157b6a0804d7dd$var$THREE_TO_WEBGL[$ilwiq.MirroredRepeatWrapping]=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.MIRRORED_REPEAT;const $08157b6a0804d7dd$var$PATH_PROPERTIES={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},$08157b6a0804d7dd$var$GLB_HEADER_BYTES=12,$08157b6a0804d7dd$var$GLB_HEADER_MAGIC=1179937895,$08157b6a0804d7dd$var$GLB_VERSION=2,$08157b6a0804d7dd$var$GLB_CHUNK_PREFIX_BYTES=8,$08157b6a0804d7dd$var$GLB_CHUNK_TYPE_JSON=1313821514,$08157b6a0804d7dd$var$GLB_CHUNK_TYPE_BIN=5130562;function $08157b6a0804d7dd$var$equalArray(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function $08157b6a0804d7dd$var$stringToArrayBuffer(e){return new TextEncoder().encode(e).buffer}function $08157b6a0804d7dd$var$isIdentityMatrix(e){return $08157b6a0804d7dd$var$equalArray(e.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function $08157b6a0804d7dd$var$getMinMax(e,t,n){let i={min:Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=t;r<t+n;r++)for(let t=0;t<e.itemSize;t++){let n;e.itemSize>4?n=e.array[r*e.itemSize+t]:0===t?n=e.getX(r):1===t?n=e.getY(r):2===t?n=e.getZ(r):3===t&&(n=e.getW(r)),i.min[t]=Math.min(i.min[t],n),i.max[t]=Math.max(i.max[t],n)}return i}function $08157b6a0804d7dd$var$getPaddedBufferSize(e){return 4*Math.ceil(e/4)}function $08157b6a0804d7dd$var$getPaddedArrayBuffer(e,t=0){let n=$08157b6a0804d7dd$var$getPaddedBufferSize(e.byteLength);if(n!==e.byteLength){let i=new Uint8Array(n);if(i.set(new Uint8Array(e)),0!==t)for(let r=e.byteLength;r<n;r++)i[r]=t;return i.buffer}return e}function $08157b6a0804d7dd$var$getCanvas(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function $08157b6a0804d7dd$var$getToBlobPromise(e,t){let n;return void 0!==e.toBlob?new Promise(n=>e.toBlob(n,t)):("image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n}))}class $08157b6a0804d7dd$var$GLTFWriter{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);let i=this,r=i.buffers,s=i.json;n=i.options;let a=i.extensionsUsed,o=new Blob(r,{type:"application/octet-stream"}),l=Object.keys(a);if(l.length>0&&(s.extensionsUsed=l),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=o.size),!0===n.binary){let e=new FileReader;e.readAsArrayBuffer(o),e.onloadend=function(){let n=$08157b6a0804d7dd$var$getPaddedArrayBuffer(e.result),i=new DataView(new ArrayBuffer($08157b6a0804d7dd$var$GLB_CHUNK_PREFIX_BYTES));i.setUint32(0,n.byteLength,!0),i.setUint32(4,$08157b6a0804d7dd$var$GLB_CHUNK_TYPE_BIN,!0);let r=$08157b6a0804d7dd$var$getPaddedArrayBuffer($08157b6a0804d7dd$var$stringToArrayBuffer(JSON.stringify(s)),32),a=new DataView(new ArrayBuffer($08157b6a0804d7dd$var$GLB_CHUNK_PREFIX_BYTES));a.setUint32(0,r.byteLength,!0),a.setUint32(4,$08157b6a0804d7dd$var$GLB_CHUNK_TYPE_JSON,!0);let o=new ArrayBuffer($08157b6a0804d7dd$var$GLB_HEADER_BYTES),l=new DataView(o);l.setUint32(0,$08157b6a0804d7dd$var$GLB_HEADER_MAGIC,!0),l.setUint32(4,$08157b6a0804d7dd$var$GLB_VERSION,!0);let u=$08157b6a0804d7dd$var$GLB_HEADER_BYTES+a.byteLength+r.byteLength+i.byteLength+n.byteLength;l.setUint32(8,u,!0);let c=new Blob([o,a,r,i,n],{type:"application/octet-stream"}),h=new FileReader;h.readAsArrayBuffer(c),h.onloadend=function(){t(h.result)}}}else if(s.buffers&&s.buffers.length>0){let e=new FileReader;e.readAsDataURL(o),e.onloadend=function(){let n=e.result;s.buffers[0].uri=n,t(s)}}else t(s)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;let n=this.options,i=this.extensionsUsed;try{let r=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&r.gltfExtensions){for(let e in void 0===t.extensions&&(t.extensions={}),r.gltfExtensions)t.extensions[e]=r.gltfExtensions[e],i[e]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){let t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let t=new $ilwiq.Vector3;for(let n=0,i=e.count;n<i;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let n=e.clone(),i=new $ilwiq.Vector3;for(let e=0,t=n.count;e<t;e++)i.fromBufferAttribute(n,e),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),n.setXYZ(e,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1,i={};(0!==t.offset.x||0!==t.offset.y)&&(i.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(i.rotation=t.rotation,n=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(i.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(e){return e.encoding===$ilwiq.sRGBEncoding?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");let i=e?.image,r=t?.image,s=Math.max(i?.width||0,r?.width||0),a=Math.max(i?.height||0,r?.height||0),o=$08157b6a0804d7dd$var$getCanvas();o.width=s,o.height=a;let l=o.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,s,a);let u=l.getImageData(0,0,s,a);if(i){l.drawImage(i,0,0,s,a);let t=n(e),r=l.getImageData(0,0,s,a).data;for(let e=2;e<r.length;e+=4)u.data[e]=256*t(r[e]/256)}if(r){l.drawImage(r,0,0,s,a);let e=n(t),i=l.getImageData(0,0,s,a).data;for(let t=1;t<i.length;t+=4)u.data[t]=256*e(i[t]/256)}l.putImageData(u,0,0);let c=(e||t).clone();return c.source=new $ilwiq.Source(o),c.encoding=$ilwiq.LinearEncoding,c}processBuffer(e){let t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,i,r){let s;let a=this.json;a.bufferViews||(a.bufferViews=[]),s=t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_BYTE?1:t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_SHORT?2:4;let o=$08157b6a0804d7dd$var$getPaddedBufferSize(i*e.itemSize*s),l=new DataView(new ArrayBuffer(o)),u=0;for(let r=n;r<n+i;r++)for(let n=0;n<e.itemSize;n++){let i;e.itemSize>4?i=e.array[r*e.itemSize+n]:0===n?i=e.getX(r):1===n?i=e.getY(r):2===n?i=e.getZ(r):3===n&&(i=e.getW(r)),t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.FLOAT?l.setFloat32(u,i,!0):t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_INT?l.setUint32(u,i,!0):t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_SHORT?l.setUint16(u,i,!0):t===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_BYTE&&l.setUint8(u,i),u+=s}let c={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:o};return void 0!==r&&(c.target=r),r===$08157b6a0804d7dd$var$WEBGL_CONSTANTS.ARRAY_BUFFER&&(c.byteStride=e.itemSize*s),this.byteOffset+=o,a.bufferViews.push(c),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(i){let r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){let e=$08157b6a0804d7dd$var$getPaddedArrayBuffer(r.result),s={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,i(n.bufferViews.push(s)-1)}})}processAccessor(e,t,n,i){let r,s;let a=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};if(e.array.constructor===Float32Array)r=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.FLOAT;else if(e.array.constructor===Uint32Array)r=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)r=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)r=$08157b6a0804d7dd$var$WEBGL_CONSTANTS.UNSIGNED_BYTE;else throw Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(void 0===n&&(n=0),void 0===i&&(i=e.count),0===i)return null;let l=$08157b6a0804d7dd$var$getMinMax(e,n,i);void 0!==t&&(s=e===t.index?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER:$08157b6a0804d7dd$var$WEBGL_CONSTANTS.ARRAY_BUFFER);let u=this.processBufferView(e,r,n,i,s),c={bufferView:u.id,byteOffset:u.byteOffset,componentType:r,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return!0===e.normalized&&(c.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(c)-1}processImage(e,t,n,i="image/png"){let r=this,s=r.cache,a=r.json,o=r.options,l=r.pending;s.images.has(e)||s.images.set(e,{});let u=s.images.get(e),c=i+":flipY/"+n.toString();if(void 0!==u[c])return u[c];a.images||(a.images=[]);let h={mimeType:i},f=$08157b6a0804d7dd$var$getCanvas();f.width=Math.min(e.width,o.maxTextureSize),f.height=Math.min(e.height,o.maxTextureSize);let d=f.getContext("2d");if(!0===n&&(d.translate(0,f.height),d.scale(1,-1)),void 0!==e.data){t!==$ilwiq.RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>o.maxTextureSize||e.height>o.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let n=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<n.length;t+=4)n[t+0]=e.data[t+0],n[t+1]=e.data[t+1],n[t+2]=e.data[t+2],n[t+3]=e.data[t+3];d.putImageData(new ImageData(n,e.width,e.height),0,0)}else d.drawImage(e,0,0,f.width,f.height);!0===o.binary?l.push($08157b6a0804d7dd$var$getToBlobPromise(f,i).then(e=>r.processBufferViewImage(e)).then(e=>{h.bufferView=e})):void 0!==f.toDataURL?h.uri=f.toDataURL(i):l.push($08157b6a0804d7dd$var$getToBlobPromise(f,i).then(e=>new FileReader().readAsDataURL(e)).then(e=>{h.uri=e}));let p=a.images.push(h)-1;return u[c]=p,p}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let n={magFilter:$08157b6a0804d7dd$var$THREE_TO_WEBGL[e.magFilter],minFilter:$08157b6a0804d7dd$var$THREE_TO_WEBGL[e.minFilter],wrapS:$08157b6a0804d7dd$var$THREE_TO_WEBGL[e.wrapS],wrapT:$08157b6a0804d7dd$var$THREE_TO_WEBGL[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){let t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);let i=e.userData.mimeType;"image/webp"===i&&(i="image/png");let r={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(r.name=e.name),this._invokeAll(function(t){t.writeTexture&&t.writeTexture(e,r)});let s=n.textures.push(r)-1;return t.textures.set(e,s),s}processMaterial(e){let t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);let i={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let r=e.color.toArray().concat([e.opacity]);if($08157b6a0804d7dd$var$equalArray(r,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){let t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),n={index:this.processTexture(t)};this.applyTextureTransform(n,t),i.pbrMetallicRoughness.metallicRoughnessTexture=n}if(e.map){let t={index:this.processTexture(e.map)};this.applyTextureTransform(t,e.map),i.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){let t=e.emissive.clone().multiplyScalar(e.emissiveIntensity),n=Math.max(t.r,t.g,t.b);if(n>1&&(t.multiplyScalar(1/n),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),n>0&&(i.emissiveFactor=t.toArray()),e.emissiveMap){let t={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(t,e.emissiveMap),i.emissiveTexture=t}}if(e.normalMap){let t={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),i.normalTexture=t}if(e.aoMap){let t={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),i.occlusionTexture=t}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===$ilwiq.DoubleSide&&(i.doubleSided=!0),""!==e.name&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(t){t.writeMaterial&&t.writeMaterial(e,i)});let s=n.materials.push(i)-1;return t.materials.set(e,s),s}processMesh(e){let t;let n=this.cache,i=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)r.push(e.material[t].uuid);else r.push(e.material.uuid);let s=r.join(":");if(n.meshes.has(s))return n.meshes.get(s);let a=e.geometry;t=e.isLineSegments?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINES:e.isLineLoop?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINE_LOOP:e.isLine?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINE_STRIP:e.isPoints?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.POINTS:e.material.wireframe?$08157b6a0804d7dd$var$WEBGL_CONSTANTS.LINES:$08157b6a0804d7dd$var$WEBGL_CONSTANTS.TRIANGLES;let o={},l={},u=[],c=[],h={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=a.getAttribute("normal");void 0===f||this.isNormalizedNormalAttribute(f)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(f)));let d=null;for(let e in a.attributes){if("morph"===e.slice(0,5))continue;let t=a.attributes[e];if(e=h[e]||e.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e)||(e="_"+e),n.attributes.has(this.getUID(t))){l[e]=n.attributes.get(this.getUID(t));continue}d=null;let i=t.array;"JOINTS_0"!==e||i instanceof Uint16Array||i instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),d=new $ilwiq.BufferAttribute(new Uint16Array(i),t.itemSize,t.normalized));let r=this.processAccessor(d||t,a);null!==r&&(l[e]=r,n.attributes.set(this.getUID(t),r))}if(void 0!==f&&a.setAttribute("normal",f),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){let t=[],i=[],r={};if(void 0!==e.morphTargetDictionary)for(let t in e.morphTargetDictionary)r[e.morphTargetDictionary[t]]=t;for(let s=0;s<e.morphTargetInfluences.length;++s){let o={},l=!1;for(let e in a.morphAttributes){if("position"!==e&&"normal"!==e){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}let t=a.morphAttributes[e][s],i=e.toUpperCase(),r=a.attributes[e];if(n.attributes.has(this.getUID(t,!0))){o[i]=n.attributes.get(this.getUID(t,!0));continue}let u=t.clone();if(!a.morphTargetsRelative)for(let e=0,n=t.count;e<n;e++)u.setXYZ(e,t.getX(e)-r.getX(e),t.getY(e)-r.getY(e),t.getZ(e)-r.getZ(e));o[i]=this.processAccessor(u,a),n.attributes.set(this.getUID(r,!0),o[i])}c.push(o),t.push(e.morphTargetInfluences[s]),void 0!==e.morphTargetDictionary&&i.push(r[s])}o.weights=t,i.length>0&&(o.extras={},o.extras.targetNames=i)}let p=Array.isArray(e.material);if(p&&0===a.groups.length)return null;let m=p?e.material:[e.material],g=p?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,i=g.length;e<i;e++){let i={mode:t,attributes:l};if(this.serializeUserData(a,i),c.length>0&&(i.targets=c),null!==a.index){let t=this.getUID(a.index);(void 0!==g[e].start||void 0!==g[e].count)&&(t+=":"+g[e].start+":"+g[e].count),n.attributes.has(t)?i.indices=n.attributes.get(t):(i.indices=this.processAccessor(a.index,a,g[e].start,g[e].count),n.attributes.set(t,i.indices)),null===i.indices&&delete i.indices}let r=this.processMaterial(m[g[e].materialIndex]);null!==r&&(i.material=r),u.push(i)}o.primitives=u,i.meshes||(i.meshes=[]),this._invokeAll(function(t){t.writeMesh&&t.writeMesh(e,o)});let v=i.meshes.push(o)-1;return n.meshes.set(s,v),v}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:(0,$ilwiq.MathUtils).degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){let n=this.json,i=this.nodeMap;n.animations||(n.animations=[]);let r=(e=$08157b6a0804d7dd$export$c32c7942a3d4b7c1.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,s=[],a=[];for(let e=0;e<r.length;++e){let n;let o=r[e],l=(0,$ilwiq.PropertyBinding).parseTrackName(o.name),u=(0,$ilwiq.PropertyBinding).findNode(t,l.nodeName),c=$08157b6a0804d7dd$var$PATH_PROPERTIES[l.propertyName];if("bones"===l.objectName&&(u=!0===u.isSkinnedMesh?u.skeleton.getBoneByName(l.objectIndex):void 0),!u||!c)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',o.name),null;let h=1,f=o.values.length/o.times.length;c===$08157b6a0804d7dd$var$PATH_PROPERTIES.morphTargetInfluences&&(f/=u.morphTargetInfluences.length),!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(n="CUBICSPLINE",f/=3):n=o.getInterpolation()===$ilwiq.InterpolateDiscrete?"STEP":"LINEAR",a.push({input:this.processAccessor(new $ilwiq.BufferAttribute(o.times,h)),output:this.processAccessor(new $ilwiq.BufferAttribute(o.values,f)),interpolation:n}),s.push({sampler:a.length-1,target:{node:i.get(u),path:c}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:s}),n.animations.length-1}processSkin(e){let t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],r=e.skeleton;if(void 0===r)return null;let s=e.skeleton.bones[0];if(void 0===s)return null;let a=[],o=new Float32Array(16*r.bones.length),l=new $ilwiq.Matrix4;for(let t=0;t<r.bones.length;++t)a.push(n.get(r.bones[t])),l.copy(r.boneInverses[t]),l.multiply(e.bindMatrix).toArray(o,16*t);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new $ilwiq.BufferAttribute(o,16)),joints:a,skeleton:n.get(s)}),i.skin=t.skins.length-1}processNode(e){let t=this.json,n=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);let r={};if(n.trs){let t=e.quaternion.toArray(),n=e.position.toArray(),i=e.scale.toArray();$08157b6a0804d7dd$var$equalArray(t,[0,0,0,1])||(r.rotation=t),$08157b6a0804d7dd$var$equalArray(n,[0,0,0])||(r.translation=n),$08157b6a0804d7dd$var$equalArray(i,[1,1,1])||(r.scale=i)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===$08157b6a0804d7dd$var$isIdentityMatrix(e.matrix)&&(r.matrix=e.matrix.elements);if(""!==e.name&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){let t=this.processMesh(e);null!==t&&(r.mesh=t)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){let t=[];for(let i=0,r=e.children.length;i<r;i++){let r=e.children[i];if(r.visible||!1===n.onlyVisible){let e=this.processNode(r);null!==e&&t.push(e)}}t.length>0&&(r.children=t)}this._invokeAll(function(t){t.writeNode&&t.writeNode(e,r)});let s=t.nodes.push(r)-1;return i.set(e,s),s}processScene(e){let t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);let i={};""!==e.name&&(i.name=e.name),t.scenes.push(i);let r=[];for(let t=0,i=e.children.length;t<i;t++){let i=e.children[t];if(i.visible||!1===n.onlyVisible){let e=this.processNode(i);null!==e&&r.push(e)}}r.length>0&&(i.nodes=r),this.serializeUserData(e,i)}processObjects(e){let t=new $ilwiq.Scene;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){let t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(t){t.beforeParse&&t.beforeParse(e)});let n=[];for(let t=0;t<e.length;t++)e[t]instanceof $ilwiq.Scene?this.processScene(e[t]):n.push(e[t]);n.length>0&&this.processObjects(n);for(let e=0;e<this.skins.length;++e)this.processSkin(this.skins[e]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll(function(t){t.afterParse&&t.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class $08157b6a0804d7dd$var$GLTFLightExtension{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let n=this.writer,i=n.json,r=n.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=-((e.penumbra-1)*e.angle*1),s.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},r[this.name]=!0);let a=i.extensions[this.name].lights;a.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class $08157b6a0804d7dd$var$GLTFMaterialsUnlitExtension{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;let n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class $08157b6a0804d7dd$var$GLTFMaterialsClearcoatExtension{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let n=this.writer,i=n.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){let t={index:n.processTexture(e.clearcoatMap)};n.applyTextureTransform(t,e.clearcoatMap),r.clearcoatTexture=t}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){let t={index:n.processTexture(e.clearcoatRoughnessMap)};n.applyTextureTransform(t,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){let t={index:n.processTexture(e.clearcoatNormalMap)};n.applyTextureTransform(t,e.clearcoatNormalMap),r.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,i[this.name]=!0}}class $08157b6a0804d7dd$var$GLTFMaterialsIridescenceExtension{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;let n=this.writer,i=n.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){let t={index:n.processTexture(e.iridescenceMap)};n.applyTextureTransform(t,e.iridescenceMap),r.iridescenceTexture=t}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){let t={index:n.processTexture(e.iridescenceThicknessMap)};n.applyTextureTransform(t,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,i[this.name]=!0}}class $08157b6a0804d7dd$var$GLTFMaterialsTransmissionExtension{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let n=this.writer,i=n.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){let t={index:n.processTexture(e.transmissionMap)};n.applyTextureTransform(t,e.transmissionMap),r.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=r,i[this.name]=!0}}class $08157b6a0804d7dd$var$GLTFMaterialsVolumeExtension{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;let n=this.writer,i=n.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){let t={index:n.processTexture(e.thicknessMap)};n.applyTextureTransform(t,e.thicknessMap),r.thicknessTexture=t}r.attenuationDistance=e.attenuationDistance,r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,i[this.name]=!0}}function $0f65b03f8c953577$export$d06353ef6aaff617(){let e=window.system.export();(0,$crxWL.saveAs)(new Blob([e],{type:"text/plain;charset=utf-8"}),"ruleset.json")}$08157b6a0804d7dd$export$c32c7942a3d4b7c1.Utils={insertKeyframe:function(e,t){let n;let i=.001,r=e.getValueSize(),s=new e.TimeBufferType(e.times.length+1),a=new e.ValueBufferType(e.values.length+r),o=e.createInterpolant(new e.ValueBufferType(r));if(0===e.times.length){s[0]=t;for(let e=0;e<r;e++)a[e]=0;n=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<i)return 0;s[0]=t,s.set(e.times,1),a.set(o.evaluate(t),0),a.set(e.values,r),n=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<i)return e.times.length-1;s[s.length-1]=t,s.set(e.times,0),a.set(e.values,0),a.set(o.evaluate(t),e.values.length),n=s.length-1}else for(let l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<i)return l;if(e.times[l]<t&&e.times[l+1]>t){s.set(e.times.slice(0,l+1),0),s[l+1]=t,s.set(e.times.slice(l+1),l+2),a.set(e.values.slice(0,(l+1)*r),0),a.set(o.evaluate(t),(l+1)*r),a.set(e.values.slice((l+1)*r),(l+2)*r),n=l+1;break}}return e.times=s,e.values=a,n},mergeMorphTargetTracks:function(e,t){let n=[],i={},r=e.tracks;for(let e=0;e<r.length;++e){let s,a=r[e],o=(0,$ilwiq.PropertyBinding).parseTrackName(a.name),l=(0,$ilwiq.PropertyBinding).findNode(t,o.nodeName);if("morphTargetInfluences"!==o.propertyName||void 0===o.propertyIndex){n.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(a=a.clone()).setInterpolation($ilwiq.InterpolateLinear)}let u=l.morphTargetInfluences.length,c=l.morphTargetDictionary[o.propertyIndex];if(void 0===c)throw Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);if(void 0===i[l.uuid]){let e=new(s=a.clone()).ValueBufferType(u*s.times.length);for(let t=0;t<s.times.length;t++)e[t*u+c]=s.values[t];s.name=(o.nodeName||"")+".morphTargetInfluences",s.values=e,i[l.uuid]=s,n.push(s);continue}let h=a.createInterpolant(new a.ValueBufferType(1));s=i[l.uuid];for(let e=0;e<s.times.length;e++)s.values[e*u+c]=h.evaluate(s.times[e]);for(let e=0;e<a.times.length;e++){let t=this.insertKeyframe(s,a.times[e]);s.values[t*u+c]=a.values[e]}}return e.tracks=n,e}};var $ilwiq=parcelRequire("ilwiq"),$3mnBW=parcelRequire("3mnBW"),$7UxrJ=parcelRequire("7UxrJ"),$kUBvx=parcelRequire("kUBvx"),$kUBvx=parcelRequire("kUBvx");!function(e){e[e.Stochastic=0]="Stochastic",e[e.StepwiseStaging=1]="StepwiseStaging"}($72efb86545d0c3db$export$457c04524e13d553||($72efb86545d0c3db$export$457c04524e13d553={}));class $72efb86545d0c3db$export$4788438da1317bbe{[Symbol.iterator](){let e=0;return{next:()=>e<this._items.length?{done:!1,value:this._items[e++]}:{done:!0,value:void 0}}}index;_items;constructor(e,t=[]){this.index=e,this._items=t}r(e){return this._items[Math.floor(e()*this.size())]}add(e){this._items.push(e)}in(e){return this._items.some(t=>e==t)}removeItem(e){this._items=this._items.filter(t=>t!==e)}size(){return this._items.length}forEach(e){this._items.forEach(e)}copy(){return new $72efb86545d0c3db$export$4788438da1317bbe(this.index,[...this._items])}pop(){return this._items.pop()}shuffled(e){let t=[...this._items];return(0,$kUBvx.shuffleArray)(t,e),new $72efb86545d0c3db$export$4788438da1317bbe(this.index,t)}get(e){return console.assert(e>=0),console.assert(e<this.size()),this._items[e]}options(){return[...this._items]}}class $72efb86545d0c3db$export$9de073a655f27a93 extends $72efb86545d0c3db$export$4788438da1317bbe{colormap;all_pieces;constructor(e){super(e),this.colormap=new Map,this.all_pieces=new $72efb86545d0c3db$export$4788438da1317bbe(e)}add(e){console.assert(void 0!==this),e.forEachMove((t,n)=>{e.getMoveCell((0,$kUBvx.strToVec)(n)).forEachFace(t=>{t&&(-t.color in this.colormap||(this.colormap[-t.color]=new $72efb86545d0c3db$export$4788438da1317bbe(this.index)),this.colormap[-t.color].add(e))})}),this.all_pieces.add(e)}contains(e){return this.all_pieces.in(e)}hasColor(e){return e in this.colormap}addAll(e){e.forEach(e=>this.add(e))}}function $72efb86545d0c3db$export$c9699ca608066a85(e){let t=new Map;return e.forEach(e=>{e.patches.forEach(n=>{n.color&&(t.has(n.color)||t.set(n.color,[]),t.get(n.color).push(e))})}),t}var $ilwiq=parcelRequire("ilwiq"),$kUBvx=parcelRequire("kUBvx");class $b0be126be29a19fb$export$e49a5ad3dd6df925{pos;color;direction;alignDir;constructor(e,t,n,i){this.pos=e,this.color=t,this.direction=n,this.alignDir=i}}class $b0be126be29a19fb$export$fa16b06434583a7b{pos;speciesFit;constructor(e,t=[null,null,null,null,null,null]){this.pos=e instanceof $ilwiq.Vector3?e:(0,$kUBvx.strToVec)(e),this.speciesFit=t}clone(){return new $b0be126be29a19fb$export$fa16b06434583a7b(this.pos.clone(),this.speciesFit.map(e=>e?{color:e.color,alignDir:e.alignDir.clone()}:null))}transform(e){let t=this.pos.clone().applyMatrix4(e).round();(0,$kUBvx.vecToStr)(t);let n=this.clone();return this.forEachFace((t,i)=>{let r=(0,$kUBvx.RULE_ORDER)[i].clone().applyMatrix3(new $ilwiq.Matrix3().setFromMatrix4(e)).round();if((0,$kUBvx.RULE_ORDER).indexOf(r),t){let i=t.alignDir.clone().applyMatrix3(new $ilwiq.Matrix3().setFromMatrix4(e)).round();n.setFace(r,t.color,i)}}),n}isEmpty(){return 0==this.getMoves().length}setFace(e,t,n){e instanceof $ilwiq.Vector3&&(e=(0,$kUBvx.RULE_ORDER).indexOf(e)),this.speciesFit[e]?(this.speciesFit[e].color=t,this.speciesFit[e].alignDir=n):this.speciesFit[e]={color:t,alignDir:n}}clearFace(e){return e instanceof $ilwiq.Vector3&&(e=(0,$kUBvx.RULE_ORDER).indexOf(e)),this.speciesFit[e]=null,this.speciesFit.every(e=>e)}forEachFace(e){this.speciesFit.forEach(e)}allMoves(){return this.speciesFit.map((e,t)=>null!=e?new $b0be126be29a19fb$export$e49a5ad3dd6df925(this.pos,e.color,$kUBvx.RULE_ORDER[t],e.alignDir):new $b0be126be29a19fb$export$e49a5ad3dd6df925(this.pos,0,$kUBvx.RULE_ORDER[t],$kUBvx.FACE_ROTATIONS[t]))}getMoves(){return this.allMoves().filter(e=>e.color)}}var $7UxrJ=parcelRequire("7UxrJ"),$ilwiq=parcelRequire("ilwiq"),$kUBvx=parcelRequire("kUBvx"),$ilwiq=parcelRequire("ilwiq"),$7UxrJ=parcelRequire("7UxrJ"),$kUBvx=parcelRequire("kUBvx"),$4075ddc1ab0773a3$exports={};$4075ddc1ab0773a3$exports=new URL("face.21f16f20.svg",import.meta.url).toString();class $e398ed39f4b4b574$export$5f6bde0cbf9a0af1{cube_type;position;rotation;personalName;connections;state;constructor(e,t,n,i){console.assert(void 0!=e),this.cube_type=e,this.position=t,this.rotation=n,this.personalName=i,this.state=Array(this.cube_type.state_size()).map(e=>!1),this.state[0]=!0,this.connections=Array($kUBvx.RULE_ORDER.length).map(e=>!1)}getPersonalName(){return this.personalName}getState(){return this.state}getType(){return this.cube_type}set_patch_bound(e){this.state[this.patch_by_local(e).state_var]=!0}type_id(){return this.cube_type.type_id}patch_from_cube_type(e){return e instanceof $ilwiq.Vector3?this.patch_from_cube_type((0,$kUBvx.RULE_ORDER).indexOf(e)):this.cube_type.patches[e]}patch(e){if(!(e instanceof $ilwiq.Vector3))return console.assert("number"==typeof e),this.patch($kUBvx.RULE_ORDER[e]);{let t=e.clone().applyQuaternion(this.rotation.clone().invert());t.round(),console.assert(1==t.length());let n=this.patch_from_cube_type(t);return this.correct_patch(n).patch}}patch_by_local(e){return e instanceof $ilwiq.Vector3?this.patch_by_local((0,$kUBvx.RULE_ORDER).indexOf(e)):this.correct_patch(this.patch_from_cube_type(e)).patch}get_patch_map(){let e=new Map;return this.cube_type.patches.forEach((t,n)=>{t.color&&e.set(n,this.correct_patch(t))}),e}correct_patch(e){return{patch:e.rotate(this.rotation),srcdiridx:e.direction}}iter_patches(e){[...this.get_patch_map().values()].forEach(e)}clone(){return new $e398ed39f4b4b574$export$5f6bde0cbf9a0af1(this.getType(),this.position.clone(),this.rotation.clone(),this.getPersonalName())}rotate(e){console.assert(void 0!==e),console.assert(void 0!==this.rotation),this.rotation=e.multiply(this.rotation)}patch_is_active(e){return!this.cube_type.patch_allosterically_controlled(e)||(this.get_patch_map().get(e).patch.activation_var>0?this.state[this.get_patch_map().get(e).patch.activation_var]:!this.state[this.get_patch_map().get(e).patch.activation_var])}hasPatch(e){let t=(0,$kUBvx.RULE_ORDER)[e].clone().applyQuaternion(this.rotation.clone().invert());return t.round(),0!=this.cube_type.patches[(0,$kUBvx.RULE_ORDER).indexOf(t)].color}rotateInstanceFromTo(e,t){let n=new $ilwiq.Quaternion;return n.setFromUnitVectors(e,t),this.rotate(n),this}rotateInstanceAroundAxis(e,t){let n=new $ilwiq.Quaternion;return n.setFromAxisAngle(e,t),this.rotate(n),this}updateState(){let e;return[e,this.state]=this.cube_type.reeval_conditionals(this.state),e.reduce((e,t)=>e||t)}}class $e398ed39f4b4b574$export$1fd3152c3b8a98ef extends $e398ed39f4b4b574$export$5f6bde0cbf9a0af1{envvis;cube_vis;patch_instances;constructor(e,t,n,i){super(e,t,n,i),this.patch_instances=new Map,this.getType().patches.filter(e=>e.color).forEach(e=>{this.patch_instances.set(e.direction,{big:void 0,small:void 0,material:void 0,env_vis_rep:void 0})})}correct_patch(e){return console.assert(!this.is_drawn()||0==e.color||this.patch_instances.has(e.direction)&&void 0!==this.patch_instances.get(e.direction).big),{patch:super.correct_patch(e).patch,srcdiridx:e.direction,vis:this.patch_instances.get(e.direction)}}rotate(e){console.assert(!this.is_drawn(),"Please do not rotate a cube which has been drawn!!!"),super.rotate(e)}is_drawn(){return void 0!==this.cube_vis}draw(e,t,n){let i,r,s=new $ilwiq.Group;s.position.copy(this.position),s.name="Cube",this.envvis=$4eae0a726ab50395$exports("<table class='env-vis-box'>"),this.envvis.attr("name",this.personalName),this.cube_type.hasAllostery()?(i=2,r=3):(i=1,r=1);let a=$4eae0a726ab50395$exports("<tr>");return this.envvis.append(a),a.append($4eae0a726ab50395$exports(`<td colspan="${i}"><b>Cube Type</b>:</td>`)),a.append($4eae0a726ab50395$exports(`<td colspan="${r}">${this.cube_type.typeName}</td>`)),a=$4eae0a726ab50395$exports("<tr>"),this.envvis.append(a),a.append($4eae0a726ab50395$exports(`<td colspan="${i}"><b>Cube Name</b>:</td>`)),a.append($4eae0a726ab50395$exports(`<td colspan="${r}">${this.personalName}</td>`)),a=$4eae0a726ab50395$exports("<tr>"),this.envvis.append(a),a.append($4eae0a726ab50395$exports(`<td colspan="${i}"><b>Position</b>:</td>`)),a.append($4eae0a726ab50395$exports(`<td colspan="${r}"> ${(0,$kUBvx.vecToStr)(this.position)}</td>`)),a=$4eae0a726ab50395$exports("<tr>"),this.envvis.append(a),a.append('<td style="border-bottom: 2px solid black;">Dir.</td>'),a.append('<td style="border-bottom: 2px solid black;">Ori.</td>'),a.append('<td style="border-bottom: 2px solid black;">Color</td>'),this.getType().hasAllostery()&&(a.append('<td style="border-bottom: 2px solid black;">State Var.</td>'),a.append('<td style="border-bottom: 2px solid black;">Act. Var.</td>')),this.iter_patches(t=>{if(t.patch.has_color()){let n=(0,$7UxrJ.patchColor)(t.patch.color),i=$4eae0a726ab50395$exports(`<tr class='face-label' name='${$7UxrJ.FACE_NAMES[t.patch.direction]}'>`);i.append($4eae0a726ab50395$exports(`<td style="font-weight: bold;">${$7UxrJ.FACE_NAMES[t.patch.direction]}:</td>`));let r=(0,$kUBvx.FACE_ROTATIONS)[t.patch.direction].angleTo(t.patch.alignDir)*(2/Math.PI);i.append($4eae0a726ab50395$exports(`<td style="width: 35px;"><img src=${$parcel$interopDefault($4075ddc1ab0773a3$exports)} class="face-img rot${r}" style="cursor: auto;"/></td>`)),i.append($4eae0a726ab50395$exports(`<td>${t.patch.color}</td>`)),this.getType().hasAllostery()&&(i.append($4eae0a726ab50395$exports(`<td>${t.patch.state_var}</td>`)),i.append($4eae0a726ab50395$exports(`<td>${t.patch.activation_var}</td>`))),this.envvis.append(i);let a=new $ilwiq.MeshLambertMaterial({color:n});t.vis={material:a,big:new $ilwiq.Mesh(e,a),small:new $ilwiq.Mesh(e,a),env_vis_rep:i},t.vis.material.transparent=!0,t.vis.material.opacity=this.state[t.patch.activation_var]?1:.5,t.patch.color>=0?t.vis.material.emissive=t.vis.material.color.clone().addScalar(-.5):t.vis.material.color.addScalar(-.1),s.add(t.vis.small),s.add(t.vis.big),t.vis.big.position.add((0,$kUBvx.RULE_ORDER)[t.patch.direction].clone().multiplyScalar(.4));let o=(0,$kUBvx.RULE_ORDER)[t.patch.direction].clone();o.setX(Math.abs(o.x)).setY(Math.abs(o.y)).setZ(Math.abs(o.z)),t.vis.big.scale.copy(new $ilwiq.Vector3(1,1,1).sub(o.multiplyScalar(.65))),t.vis.small.scale.copy(t.vis.big.scale),t.vis.small.position.copy(t.vis.big.position),t.vis.small.position.add(t.patch.alignDir.clone().multiplyScalar(.2)),t.vis.small.scale.multiplyScalar(.5)}console.assert(this.patch_instances.has(t.srcdiridx)),this.patch_instances.set(t.srcdiridx,t.vis)}),this.envvis.append($4eae0a726ab50395$exports(`<tr>
			<td style="border-bottom: 2px solid black;">Index</td>
			<td style="border-bottom: 2px solid black;">Value</td>
			<td colspan="2" style="border-bottom: 2px solid black;">Conditional</td>
		</tr>`)),this.envvis.css("border-color",(0,$7UxrJ.cubeTypeColor)(this.type_id())),this.cube_type instanceof $7UxrJ.DynamicPolycubeCubeType&&this.state.forEach((e,t)=>{let n=$4eae0a726ab50395$exports("<tr class='state-label'>");n.append($4eae0a726ab50395$exports(`<td>${t}</td>`)),n.append($4eae0a726ab50395$exports(`<td name="state${t}">${e}</td>`)),0!=t?n.append($4eae0a726ab50395$exports('<td colspan="2">Dynamic Effect</td>')):n.append($4eae0a726ab50395$exports("<td>")),this.envvis.append(n)}),this.cube_vis=new $ilwiq.Mesh(n,t),s.add(this.cube_vis),s}refresh_patch_active_visual(e){if(this.patch_is_active(e.patch.direction))e.vis.env_vis_rep.css("background-image",""),e.vis.env_vis_rep.css("background-color",(0,$7UxrJ.patchColor)(e.patch.color)),e.vis.big.material.opacity=1;else{let t=`repeating-linear-gradient(45deg, ${(0,$7UxrJ.patchColor)(e.patch.color)}, ${(0,$kUBvx.selectColor)(e.patch.color)} 1%, white 1%, white 2%)`;e.vis.env_vis_rep.css("background-image",t),e.vis.env_vis_rep.css("background-color",""),e.vis.big.material.opacity=.5}}clone(){return console.assert(!this.is_drawn()),new $e398ed39f4b4b574$export$1fd3152c3b8a98ef(this.getType(),this.position.clone(),this.rotation.clone(),this.getPersonalName())}set_state(e){this.state=e}}class $e398ed39f4b4b574$export$55bbb17aa509a652{cube_1;cube_2;color;constructor(e,t,n){this.cube_1=e,this.cube_2=t,this.color=Math.abs(n)}}class $f9685cde60a38f7c$export$347a9dcb4cd986a4{moves;cubes;cube_name_map;currMinCoord;currMaxCoord;cube_types;cubeTypeCount;connections;torsion;matches;mismatches;constructor(){this.moves=new Map,this.cubes=new Map,this.cube_types=[],this.cubeTypeCount=new Map,this.cube_name_map=new Map,this.currMinCoord=0,this.currMaxCoord=0,this.connections=[],this.matches=0,this.mismatches=0}clone(){let e=new $f9685cde60a38f7c$export$347a9dcb4cd986a4;return e.set_rule(this.cube_types),[...this.cubes.values()].forEach(t=>{e.cubes.set((0,$kUBvx.vecToStr)(t.position),t.clone())}),[...this.moves.keys()].forEach((t,n)=>{e.moves.set(t,this.getMoveCell(t).clone())}),e}set_rule(e=[]){this.cubes=new Map,this.cube_types=[],e.forEach(e=>{this.addCubeType(e)}),this.cubeTypeCount=new Map,this.cube_types.forEach(e=>{this.cubeTypeCount.set(e.type_id,0)})}hasTorsion(){return this.torsion}numMismatches(){return this.mismatches}compatibleColors(e,t){return e==-t}addCubeType(e){this.cube_types.push(e)}forEachMove(e){this.moves.forEach(e)}numMovePositions(){return this.moves.size}getCubeType(e){return this.cube_types[e]}listCubeTypes(){return this.cube_types.map(e=>e.clone(e.type_id))}getCubeCoords(){return[...this.cubes.keys()].map(e=>(0,$kUBvx.strToVec)(e))}cubeCoordsStrs(){return[...this.cubes.keys()]}allMoves(){return[...this.moves.values()].map(e=>e.getMoves()).reduce((e,t)=>e.concat(t),[])}removeMove(e){if(e instanceof $b0be126be29a19fb$export$e49a5ad3dd6df925){let t=this.moves.get((0,$kUBvx.vecToStr)(e.pos));if(t.clearFace(e.direction),t.isEmpty())return this.moves.delete((0,$kUBvx.vecToStr)(e.pos))}else this.moves.delete((0,$kUBvx.vecToStr)(e))}moveFromIdx(e){let t=this.allMoves();return console.assert(e<t.length),t[e]}numMoves(){return this.allMoves().length}hasMove(e){return e instanceof $ilwiq.Vector3&&e.isVector3?this.moves.has((0,$kUBvx.vecToStr)(e)):e instanceof $b0be126be29a19fb$export$e49a5ad3dd6df925?this.hasMove(e.pos):(console.assert(e instanceof String),this.moves.has(e))}forEachCube(e){this.cubes.forEach(e)}getMoveCell(e){if(e instanceof Object&&e.isVector3)return this.getMoveCell((0,$kUBvx.vecToStr)(e));if("string"==typeof e)return this.moves.get(e);throw console.assert("number"==typeof e),Error()}hasCube(e){return e instanceof Object&&e.isVector3?this.cubes.has((0,$kUBvx.vecToStr)(e)):(console.assert("string"==typeof e),this.cubes.has(e))}getCube(e){let t;return e instanceof Object&&e.isVector3?t=this.cubes.get((0,$kUBvx.vecToStr)(e)):"string"==typeof e?t=this.cubes.get(e):(console.assert(e instanceof Number),t=this.cubes.get(this.cubes.keys()[e])),console.assert(void 0!=t,`Invalid position type ${typeof e}`),t}numCubes(){return this.cubes.size}numCubeTypes(){return this.cube_types.length}getCubes(){return[...this.cubes.values()]}getRuleStr(){return(0,$7UxrJ.ruleToDec)(this.cube_types)}addConnection(e,t,n){let i=new $e398ed39f4b4b574$export$55bbb17aa509a652(e,t,n);this.connections.push(i);let r=(0,$kUBvx.RULE_ORDER).indexOf(t.position.clone().sub(e.position));e.connections[r]=i,e.set_patch_bound(r);let s=(0,$kUBvx.RULE_ORDER).indexOf(e.position.clone().sub(t.position));for(let n of(t.connections[s]=i,t.set_patch_bound(s),[e,t]))n.updateState()&&this.updateMoves(n)}countConnections(e){let t=0,n=0;return(0,$kUBvx.RULE_ORDER).forEach((i,r)=>{if(!e.hasPatch(r)||!e.patch_is_active(r))return;let s=e.position.clone().add(i);if(this.hasCube(s)){let a=this.getCube(s),o=a.patch(i.clone().negate());if(0==o.color||!a.patch_is_active((0,$kUBvx.RULE_ORDER).indexOf(i.clone().negate())))return;this.compatibleColors(o.color,e.patch(r).color)&&(!this.torsion||o.alignDir.equals(e.patch(r).alignDir))?t++:n++}}),[t,n]}instantiateCube(e,t,n=new $ilwiq.Vector3(0,0,0)){return new $e398ed39f4b4b574$export$5f6bde0cbf9a0af1(e,n,(0,$ilwiq.Quaternion).prototype.identity(),t)}addParticle(e){let t=e.position,[n,i]=this.countConnections(e);this.cubes.set((0,$kUBvx.vecToStr)(t),e),this.currMinCoord=Math.min(this.currMinCoord,...t.toArray()),this.currMaxCoord=Math.max(this.currMaxCoord,...t.toArray()),this.updateMoves(e),this.cubeTypeCount.set(e.type_id(),this.cubeTypeCount.get(e.type_id())+1),this.mismatches+=i,this.matches+=n}updateMoves(e){e.iter_patches(t=>this.updateMove(e,t.patch)),console.assert(0==this.numMoves()==(0==this.numMovePositions()))}updateMove(e,t){if(!t.has_color())return;let n=e.position.clone().add($kUBvx.RULE_ORDER[t.direction]);if(this.hasCube(n))return;let i=(0,$kUBvx.RULE_ORDER)[t.direction].clone().negate();console.assert(1==i.length(),"Distance between cube and connected cube should always be 1 unit.");let r=(0,$kUBvx.RULE_ORDER).indexOf(i);if(console.assert(r>=0),!e.patch_is_active(t.direction)){this.hasMove(n)&&this.getMoveCell(n).speciesFit[r]&&(this.getMoveCell(n).speciesFit[r]=null);return}this.getMoveCell(n)||this.moves.set((0,$kUBvx.vecToStr)(n),new $b0be126be29a19fb$export$fa16b06434583a7b(n));let s=this.getMoveCell(n);null!=s.speciesFit[r]&&console.assert(s.speciesFit[r].color==t.color&&1e-5>s.speciesFit[r].alignDir.distanceTo(t.alignDir),`There's somehow already a move in position ${(0,$kUBvx.vecToStr)(n)} facing direction ${r}`),this.getMoveCell(n).setFace(i,t.color,t.alignDir)}getReasonableOverlapTransforms(){let e=[];for(let t=this.currMinCoord;t<=this.currMaxCoord;t++)for(let n=this.currMinCoord;n<=this.currMaxCoord;n++)for(let i=this.currMinCoord;i<=this.currMaxCoord;i++)e.push(new $ilwiq.Vector3(t,n,i));return e}isEquivelent(e){if(this.cubes.size!=e.cubes.size||this.cubeTypeCount.size==e.cubeTypeCount.size&&this.cubeTypeCount.toString()!=e.cubeTypeCount.toString())return!1;let t=(0,$kUBvx.allRotations)(),n=this.getReasonableOverlapTransforms();return t.length,n.length,t.some(t=>n.some(n=>{let i=new $ilwiq.Matrix4;return i.setFromMatrix3(t),i.setPosition(n),this.forEachCube((t,n)=>{let r=t.position.clone().applyMatrix4(i);if(!e.hasCube(r))return!1;let s=e.getCube(r);if(s.type_id!=t.type_id||t.rotation.clone().multiply(new(0,$ilwiq.Quaternion)().setFromRotationMatrix(i)).equals(s.rotation))return!1}),!0}))}}class $2d8e6f533f833ed5$export$da9897e690d269b extends $f9685cde60a38f7c$export$347a9dcb4cd986a4{nMaxCubes;maxCoord;maxPieceSize;staging;piecewise_staging;current_stage;assembly_method;steps;objGroup;confMap;mismatches_allowed;rng_seed;rng;constructor(e=1e3,t=100,n=!0,i=!0,r=1,s="abcd"){super(),this.nMaxCubes=e,this.maxCoord=t,this.current_stage=0,this.torsion=i,this.staging=[new $72efb86545d0c3db$export$4788438da1317bbe(0)],this.maxPieceSize=r,this.mismatches_allowed=!0,this.maxPieceSize>1&&(this.piecewise_staging=[new $72efb86545d0c3db$export$9de073a655f27a93(0)]),this.steps=0,n&&(this.confMap=new Map),this.reset_rng(s)}addCubeType(e,t=!0){super.addCubeType(e),1==this.staging.length&&this.staging[0].add(e),this.isPiecewise()&&t&&this.refresh_piecewise_staging()}toggleCubeType(e){let t=this.cube_types[e];this.staging[0].in(t)?this.staging[0].removeItem(t):this.staging[0].add(t)}cube_type_allowed(e,t){return void 0===t&&(t=this.current_stage),e in this.staging[t]}countAllowedCubeTypes(){let e=new Set;for(let t of this.staging)t.forEach(t=>e.add(t));return console.assert(e.size<=this.numCubeTypes()),e.size}allowedCubeTypes(e){return void 0===e&&(e=this.current_stage),this.staging[e].copy()}numStages(){return this.staging.length}cubeTypeIndex(e){for(let t=0;t<this.cube_types.length;t++)if(this.cube_types[t].typeName==e.typeName)return t;return -1}removeCubeType(e){if("number"==typeof e)this.removeCubeType(this.getCubeType(e));else{for(let t=0;t<this.cube_types.length;t++)if(this.cube_types[t].equals(e)){let e=[...this.cube_types.slice(0,t),...this.cube_types.slice(t+1,this.cube_types.length)];this.set_rule(e);break}for(let t=0;t<this.staging.length;t++)for(let n=0;n<this.staging[t].size();n++){let i=this.staging[t].get(n);if(i.equals(e)){this.staging[t].removeItem(i);break}}this.cube_types.length>0&&this.cube_types.map(e=>e.hasAllostery()).reduce((e,t)=>e||t)&&this.refresh_piecewise_staging()}}getAssemblyMethod(){return this.assembly_method}setAssemblyMethod(e){if("string"==typeof e)switch(e){case"Ordered":case"Stepwise":this.assembly_method=$72efb86545d0c3db$export$457c04524e13d553.StepwiseStaging;break;case"Stochastic":this.assembly_method=$72efb86545d0c3db$export$457c04524e13d553.Stochastic}else this.assembly_method=e}setMisMatchesAllowed(e){this.mismatches_allowed=e}clone(){let e=super.clone();return e.nMaxCubes=this.nMaxCubes,e.maxCoord=this.maxCoord,void 0!==this.confMap&&(e.confMap=new Map),e.torsion=this.torsion,e.maxPieceSize=this.maxPieceSize,e.steps=this.steps,void 0===this.piecewise_staging?e.piecewise_staging=void 0:e.staging=this.staging.map(e=>e.copy()),e.mismatches_allowed=this.mismatches_allowed,e}isPolycubeSystem(){return!0}isPiecewise(){return this.maxPieceSize>1&&this.cube_types.some(e=>e.hasAllostery())}setMaxPieceSize(e){this.maxPieceSize=e}clear_staging(){this.staging=[new $72efb86545d0c3db$export$4788438da1317bbe(0,[...this.cube_types])]}seed(){if(0==this.cube_types.length||0==this.countAllowedCubeTypes()){console.error("No cube types!!!");return}if(this.countAllowedCubeTypes()>0){if(this.isPiecewise()){let e=this.piecewise_staging[0].all_pieces.r(this.rng);e.forEachCube((e,t)=>{this.addParticle(e.instantiate(e.position,this.genCubeName()))}),this.steps+=e.numCubes(),console.assert(0==this.numMoves()==(0==this.numMovePositions()))}else{let e=this.staging[0].r(this.rng),t=this.instantiateCube(e,this.genCubeName()),n=Math.floor((0,$kUBvx.allRotations)().length*this.rng()),i=new $ilwiq.Matrix4;i.setFromMatrix3((0,$kUBvx.allRotations)()[n]);let r=new $ilwiq.Quaternion;r.setFromRotationMatrix(i),t.rotate(r),this.addParticle(t),this.steps++,console.assert(0==this.numMoves()==(0==this.numMovePositions()))}}else console.log("No rule!")}reset_rng(e){void 0!=e&&(this.rng_seed=e),this.rng=$parcel$interopDefault($3mnBW)(this.rng_seed)}reset(e=!0){e&&this.reset_rng(),this.steps=0,this.current_stage=0,this.cubes=new Map,this.moves=new Map,this.confMap&&(this.confMap=new Map),this.matches=0,this.mismatches=0,this.connections=[]}regenerate(){this.reset(),this.seed()}set_rule(e=[],t=!0){(0,$7UxrJ.ruleToDec)(e)!=(0,$7UxrJ.ruleToDec)(this.cube_types)&&(super.set_rule(e),this.isPiecewise()&&this.refresh_piecewise_staging())}refresh_piecewise_staging(){this.piecewise_staging=this.staging.map(e=>new $72efb86545d0c3db$export$9de073a655f27a93(e.index));for(let e=0;e<this.numStages();e++){let t=[];for(let n of this.allowedCubeTypes(e)){let e=new $2d8e6f533f833ed5$export$da9897e690d269b(null,1,!1,!0,1,(0,$kUBvx.randstr)(8,this.rng));e.set_rule([n]),e.seed(),t.push(e)}console.assert(this.maxPieceSize>1),t=this.iterPiecewiseAssembly(t,this.allowedCubeTypes(e).options(),this.maxPieceSize),this.addPieces(e,...t)}this.reset_rng()}numSteps(){return this.steps}addPiece(e,t=0){this.piecewise_staging[t].add(e)}addPieces(e=0,...t){this.piecewise_staging[e].addAll(t)}iterPiecewiseAssembly(e,t,n){console.assert(e.length>0),console.assert(t.length>0);let i=$72efb86545d0c3db$export$c9699ca608066a85(t),r=[];return(e.map(e=>{e.allMoves().map(t=>{let n=this.matchingColors(t.color);if(!n.some(e=>i.has(e)))return[];n.forEach(n=>{i.get(n).forEach(n=>{let i=[];n.patches.forEach((e,r)=>{if(e.color&&this.compatibleColors(t.color,e.color)){let r=this.instantiateCube(n,this.genCubeName(),t.pos).rotateInstanceFromTo($kUBvx.RULE_ORDER[e.direction],t.direction),s=(0,$kUBvx.RULE_ORDER).indexOf(t.direction);if(this.torsion){let e=(0,$kUBvx.getSignedAngle)(t.alignDir,r.patch_by_local(s).alignDir,$kUBvx.RULE_ORDER[s]);r.rotateInstanceAroundAxis(t.direction,e),console.assert(this.compatibleColors(t.color,r.patch(t.direction).color),"Incompatible colors"),console.assert(!this.torsion||1e-5>t.alignDir.distanceTo(r.patch_by_local(s).alignDir),`Angle mismatch between ${(0,$kUBvx.vecToStr)(t.alignDir)} and ${(0,$kUBvx.vecToStr)(r.patch_by_local(s).alignDir)}`),this.canPlaceCube(r)&&(console.assert(this.compatibleColors(t.color,r.patch_by_local(s).color)),i.push(r))}else[...[,,,,].keys()].forEach(e=>{let n=Math.floor(e)*Math.PI/2;r.rotateInstanceAroundAxis(t.direction,n),console.assert(!this.torsion||1e-5>t.alignDir.distanceTo(r.patch_by_local(s).alignDir),`Angle mismatch between ${t.alignDir} and ${r.patch_by_local(s).alignDir}`),r.position=t.pos,this.canPlaceCube(r)&&(console.assert(this.compatibleColors(t.color,r.patch_by_local(s).color)),i.push(r))})}}),i.forEach(t=>{let n=e.clone();n.addParticle(t),r.some(n.isEquivelent)||r.push(n)})})})})}),Math.max(...e.map(e=>e.numCubes()))>=n)?r:[...r,...e]}setMaxCubes(e){this.nMaxCubes=e}matchingColors(e){return[-e]}countColors(){return this.listColors().length}listColors(e=!0){let t=[].concat.apply([],this.cube_types.map(e=>e.patch_colors()));return[...new Set(t)]}nameNewCubeType(){let e=1;for(;;){if(!this.cube_types.some(t=>t.typeName==`CT${e}`))return`CT${e}`;e++}}fitCube(e,t){for(let n of(console.assert(!this.hasCube(e.pos),"Already a cube here!!!"),(0,$kUBvx.randOrdering)($kUBvx.RULE_ORDER.length,this.rng)))if(t.patch_by_local(n).color&&t.patch_is_active(n)&&(console.assert(n==t.patch_by_local(n).direction,"Invalid patch somehow"),this.compatibleColors(e.color,t.patch_by_local(n).color))){let i=this.fitCubeFace(e,t,n);if(i)return i}return!1}fitCubeFace(e,t,n){let i;t=t.clone(),console.assert(this.compatibleColors(e.color,t.patch(n).color),`Move color ${e.color} does not match patch color ${t.patch(e.direction).color}`),t.rotateInstanceFromTo($kUBvx.RULE_ORDER[n],e.direction),console.assert(1e-5>e.direction.distanceTo($kUBvx.RULE_ORDER[t.patch(e.direction).direction])),console.assert(this.compatibleColors(e.color,t.patch(e.direction).color),`Move color ${e.color} does not match patch color ${t.patch(e.direction).color}`);let r=e.direction;if(this.torsion){var s=t.patch(e.direction).alignDir;i=(0,$kUBvx.getSignedAngle)(s,e.alignDir,r)}else i=Math.floor(4*this.rng())*Math.PI/2;console.assert($kUBvx.RULE_ORDER[t.patch(e.direction).direction]==e.direction),t=t.rotateInstanceAroundAxis(r,i),console.assert(this.compatibleColors(e.color,t.patch(e.direction).color),`Move color ${e.color} does not match patch color ${t.patch(e.direction).color}`),console.assert($kUBvx.RULE_ORDER[t.patch(e.direction).direction]==e.direction);let a=t.patch(e.direction).alignDir;return console.assert(!this.torsion||1e-5>e.alignDir.distanceTo(a),`Angle mismatch between ${(0,$kUBvx.vecToStr)(e.alignDir)} and ${(0,$kUBvx.vecToStr)(a)}`),t.position=e.pos,!!this.canPlaceCube(t)&&(console.assert(this.compatibleColors(e.color,t.patch(e.direction).color)),t)}canPlaceCube(e){let[t,n]=this.countConnections(e);return t>0&&(this.mismatches_allowed||0==n)}pieceFits(e,t){t.allMoves();let n=(0,$kUBvx.randOrdering)(t.moves.size,this.rng);for(let i=0;i<t.moves.size;i++){let r=n[i],s=t.moveFromIdx(r),a=this.testPieceMove(e,t,s);if(a)return a}return!1}testPieceMove(e,t,n){let i;if(!this.compatibleColors(e.color,n.color))return!1;let r=e.pos.clone(),s=n.pos.clone().add(n.direction).negate(),a=t.translate(s),o=new $ilwiq.Quaternion;o.setFromUnitVectors(n.direction,e.direction.clone().negate());let l=new $ilwiq.Matrix4().makeRotationFromQuaternion(o),u=a.transform(l),c=n.pos.clone().add(s).applyQuaternion(o).round(),h=u.getMoveCell(c),f=(0,$kUBvx.RULE_ORDER).indexOf(n.direction.clone().applyQuaternion(o).round());return console.assert(void 0!=h),console.assert(this.compatibleColors(e.color,h.speciesFit[f].color)),(i=this.torsion?-(0,$kUBvx.getSignedAngle)(e.alignDir,h.speciesFit[f].alignDir,e.direction):Math.floor(4*this.rng())*Math.PI/2)&&(o=new $ilwiq.Quaternion().setFromAxisAngle(e.direction,i),u=u.rotate(o)),![...(u=u.translate(r)).cubes.keys()].some(e=>this.hasCube(e))&&u}tryProcessSingleCubeMove(e,t){let n=this.instantiateCube(t,this.genCubeName(),e.pos.clone());return!!(n=this.fitCube(e,n))&&(this.addParticle(n),n)}tryProcessPieceMove(e,t){let n=this.pieceFits(e,t);return n&&[...n.cubes.values()].forEach(e=>{let t=this.instantiateCube(e.getType(),this.genCubeName(),e.position);if(t.rotate(e.rotation),this.addParticle(t),this.hasMove(e.position)){for(let n=0;n<$kUBvx.RULE_ORDER.length;n++){let i=this.getMoveCell(e.position).speciesFit[n];if(null!=i){if(this.compatibleColors(i.color,t.patch_from_cube_type(n).color)&&i.alignDir.equals(t.patch_from_cube_type(n).alignDir)){this.matches++;let e=t.position.clone().add($kUBvx.RULE_ORDER[n]);this.addConnection(t,this.getCube(e),i.color)}else this.mismatches++}}this.removeMove(e.position)}}),n}getValidPieces(e,t){void 0==t&&(t=this.current_stage),console.assert(void 0!=e);let n=new $72efb86545d0c3db$export$4788438da1317bbe(t);return e.color in this.piecewise_staging[t].colormap&&this.piecewise_staging[t].colormap[e.color].forEach(e=>{n.in(e)||n.add(e)}),n}run(){let e;do e=this.step();while(e&&this.numCubes()<=this.nMaxCubes)}step(){if(0==this.numMovePositions())return!1;console.assert(this.numMoves()>0);let e=!1,t=this.numMoves(),n=this.moveFromIdx(Math.floor(this.rng()*t));if(console.assert(null!=n),this.isPiecewise()){let t=this.getValidPieces(n);for(t=t.shuffled(this.rng),e=!1;t.size()>0;){let i=t.pop(),r=this.tryProcessPieceMove(n,i);if(r){e=!0,this.steps+=r.numCubes(),this.removeMove(n);break}}this.hasMove(n)&&this.removeMove(n)}else{let t=this.allowedCubeTypes();for(t=t.shuffled(this.rng),e=!1;t.size()>0;){let i=t.pop();if(this.tryProcessSingleCubeMove(n,i)){e=!0,this.steps++;break}}e?this.removeMove(n.pos):this.removeMove(n)}console.assert(0==this.numMoves()==(0==this.numMovePositions()))}isProcessingComplete(){return 0==this.moves.size||this.cubes.size>this.nMaxCubes}resetMoves(){this.moves.clear(),this.cubes.forEach((e,t)=>this.updateMoves(this.cubes.get(t)))}getAllPossibleMoveOrders(e){void 0==e&&(e=0);let t=this.staging[e],n=t.size(),i=n**this.maxPieceSize,r=[...(0,$kUBvx.range)(i)].map(()=>[...(0,$kUBvx.range)(this.maxPieceSize)].map(()=>new $72efb86545d0c3db$export$4788438da1317bbe(e)));for(let e=0;e<this.maxPieceSize;e++){let i=0;for(let s=0;s<Math.pow(this.countAllowedCubeTypes(),this.maxPieceSize);s++)console.assert(0==r[s][e].size()),r[s][e].add(t.get(i)),s%Math.pow(n,e)==0&&i++,i==this.countAllowedCubeTypes()&&(i=0)}return r}transform(e){let t=this.clone();return console.assert(t.cubes.size==this.cubes.size),t.reset(),[...this.cubes.values()].forEach((n,i)=>{let r=n.position.clone().applyMatrix4(e).round(),s=new $ilwiq.Quaternion().setFromRotationMatrix(e);n.rotate(s),t.cubes.set((0,$kUBvx.vecToStr)(r),n),t.cubes.get((0,$kUBvx.vecToStr)(r)).position=r.clone()}),t.moves=new Map,[...this.moves.keys()].forEach((n,i)=>{let r=(0,$kUBvx.strToVec)(n);r=r.applyMatrix4(e).round(),t.moves.set((0,$kUBvx.vecToStr)(r),this.getMoveCell(n).transform(e))}),console.assert(t.numCubes()==this.numCubes()),t}rotate(e){return e instanceof $ilwiq.Quaternion?this.transform(new $ilwiq.Matrix4().makeRotationFromQuaternion(e)):e instanceof $ilwiq.Matrix3?this.transform(new $ilwiq.Matrix4().setFromMatrix3(e)):this.transform(e)}translate(e){return this.transform(new $ilwiq.Matrix4().setPosition(e))}getCurrentTopology(){let e=[],t=[],n=[],i=[...this.confMap.keys()];return i.forEach((r,s)=>{let a=this.cubes[r];a.connections.forEach((r,o)=>{let l;if(!r)return;l=r.cube_1==a?r.cube_2:r.cube_1;let u=i.findIndex(e=>e==l.position);n.includes([s,u].sort().toString())?t.push([s,o]):(e.push([s,o,u,o+(o%2==0?1:-1)]),n.push([s,u].sort().toString()))})}),[e,t]}genCubeName(){let e;do e=(0,$kUBvx.randstr)(4,this.rng);while(this.cube_name_map.has(e))return e}export(){let e={};return e.cube_types=this.cube_types,e.cubes=[...this.cubes.entries()].map(([e,t])=>({position:{x:t.position.x,y:t.position.y,z:t.position.z},rotation:{w:t.rotation.w,x:t.rotation.x,y:t.rotation.y,z:t.rotation.z},type:t.type_id(),personal_name:t.getPersonalName(),state:t.getState()})),e.tstep=this.steps,JSON.stringify(e,null,4)}updateMove(e,t){let n=e.position.clone().add($kUBvx.RULE_ORDER[t.direction]);Math.abs(n.x)>this.maxCoord||Math.abs(n.y)>this.maxCoord||Math.abs(n.z)>this.maxCoord||super.updateMove(e,t)}}var $7UxrJ=parcelRequire("7UxrJ"),$ilwiq=parcelRequire("ilwiq");const $443c013b983d0324$var$_changeEvent={type:"change"},$443c013b983d0324$var$_startEvent={type:"start"},$443c013b983d0324$var$_endEvent={type:"end"};class $443c013b983d0324$export$8ff7788029dfdf52 extends $ilwiq.EventDispatcher{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new $ilwiq.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$ilwiq.MOUSE.ROTATE,MIDDLE:$ilwiq.MOUSE.DOLLY,RIGHT:$ilwiq.MOUSE.PAN},this.touches={ONE:$ilwiq.TOUCH.ROTATE,TWO:$ilwiq.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",en),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent($443c013b983d0324$var$_changeEvent),n.update(),r=i.NONE},this.update=function(){let t=new $ilwiq.Vector3,h=new(0,$ilwiq.Quaternion)().setFromUnitVectors(e.up,new $ilwiq.Vector3(0,1,0)),f=h.clone().invert(),d=new $ilwiq.Vector3,p=new $ilwiq.Quaternion,m=2*Math.PI;return function(){let e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(h),a.setFromVector3(t),n.autoRotate&&r===i.NONE&&S(w()),n.enableDamping?(a.theta+=o.theta*n.dampingFactor,a.phi+=o.phi*n.dampingFactor):(a.theta+=o.theta,a.phi+=o.phi);let g=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(g)&&isFinite(v)&&(g<-Math.PI?g+=m:g>Math.PI&&(g-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),g<=v?a.theta=Math.max(g,Math.min(v,a.theta)):a.theta=a.theta>(g+v)/2?Math.max(g,a.theta):Math.min(v,a.theta)),a.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=l,a.radius=Math.max(n.minDistance,Math.min(n.maxDistance,a.radius)),!0===n.enableDamping?n.target.addScaledVector(u,n.dampingFactor):n.target.add(u),t.setFromSpherical(a),t.applyQuaternion(f),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(o.theta*=1-n.dampingFactor,o.phi*=1-n.dampingFactor,u.multiplyScalar(1-n.dampingFactor)):(o.set(0,0,0),u.set(0,0,0)),l=1,!!(c||d.distanceToSquared(n.object.position)>s||8*(1-p.dot(n.object.quaternion))>s)&&(n.dispatchEvent($443c013b983d0324$var$_changeEvent),d.copy(n.object.position),p.copy(n.object.quaternion),c=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",es),n.domElement.removeEventListener("pointerdown",Y),n.domElement.removeEventListener("pointercancel",K),n.domElement.removeEventListener("wheel",et),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Z),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",en)};let n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},r=i.NONE,s=1e-6,a=new $ilwiq.Spherical,o=new $ilwiq.Spherical,l=1,u=new $ilwiq.Vector3,c=!1,h=new $ilwiq.Vector2,f=new $ilwiq.Vector2,d=new $ilwiq.Vector2,p=new $ilwiq.Vector2,m=new $ilwiq.Vector2,g=new $ilwiq.Vector2,v=new $ilwiq.Vector2,_=new $ilwiq.Vector2,y=new $ilwiq.Vector2,x=[],b={};function w(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function S(e){o.theta-=e}function T(e){o.phi-=e}let E=function(){let e=new $ilwiq.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),u.add(e)}}(),A=function(){let e=new $ilwiq.Vector3;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),u.add(e)}}(),C=function(){let e=new $ilwiq.Vector3;return function(t,i){let r=n.domElement;if(n.object.isPerspectiveCamera){let s=n.object.position;e.copy(s).sub(n.target);let a=e.length();E(2*t*(a*=Math.tan(n.object.fov/2*Math.PI/180))/r.clientHeight,n.object.matrix),A(2*i*a/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(E(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),A(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function L(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),c=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){h.set(e.clientX,e.clientY)}function P(e){v.set(e.clientX,e.clientY)}function N(e){p.set(e.clientX,e.clientY)}function O(e){f.set(e.clientX,e.clientY),d.subVectors(f,h).multiplyScalar(n.rotateSpeed);let t=n.domElement;S(2*Math.PI*d.x/t.clientHeight),T(2*Math.PI*d.y/t.clientHeight),h.copy(f),n.update()}function I(e){_.set(e.clientX,e.clientY),y.subVectors(_,v),y.y>0?L(M()):y.y<0&&R(M()),v.copy(_),n.update()}function k(e){m.set(e.clientX,e.clientY),g.subVectors(m,p).multiplyScalar(n.panSpeed),C(g.x,g.y),p.copy(m),n.update()}function U(e){e.deltaY<0?R(M()):e.deltaY>0&&L(M()),n.update()}function F(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?S(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?S(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}function z(){if(1===x.length)h.set(x[0].pageX,x[0].pageY);else{let e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);h.set(e,t)}}function B(){if(1===x.length)p.set(x[0].pageX,x[0].pageY);else{let e=.5*(x[0].pageX+x[1].pageX),t=.5*(x[0].pageY+x[1].pageY);p.set(e,t)}}function V(){let e=x[0].pageX-x[1].pageX,t=x[0].pageY-x[1].pageY,n=Math.sqrt(e*e+t*t);v.set(0,n)}function H(){n.enableZoom&&V(),n.enablePan&&B()}function G(){n.enableZoom&&V(),n.enableRotate&&z()}function W(e){if(1==x.length)f.set(e.pageX,e.pageY);else{let t=eu(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}d.subVectors(f,h).multiplyScalar(n.rotateSpeed);let t=n.domElement;S(2*Math.PI*d.x/t.clientHeight),T(2*Math.PI*d.y/t.clientHeight),h.copy(f)}function j(e){if(1===x.length)m.set(e.pageX,e.pageY);else{let t=eu(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);m.set(n,i)}g.subVectors(m,p).multiplyScalar(n.panSpeed),C(g.x,g.y),p.copy(m)}function q(e){let t=eu(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);_.set(0,s),y.set(0,Math.pow(_.y/v.y,n.zoomSpeed)),L(y.y),v.copy(_)}function X(e){n.enableZoom&&q(e),n.enablePan&&j(e)}function $(e){n.enableZoom&&q(e),n.enableRotate&&W(e)}function Y(e){!1!==n.enabled&&(0===x.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",J),n.domElement.addEventListener("pointerup",Z)),ea(e),"touch"===e.pointerType?ei(e):Q(e))}function J(e){!1!==n.enabled&&("touch"===e.pointerType?er(e):ee(e))}function Z(e){eo(e),0===x.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Z)),n.dispatchEvent($443c013b983d0324$var$_endEvent),r=i.NONE}function K(e){eo(e)}function Q(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case $ilwiq.MOUSE.DOLLY:if(!1===n.enableZoom)return;P(e),r=i.DOLLY;break;case $ilwiq.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),r=i.PAN}else{if(!1===n.enableRotate)return;D(e),r=i.ROTATE}break;case $ilwiq.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;D(e),r=i.ROTATE}else{if(!1===n.enablePan)return;N(e),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent($443c013b983d0324$var$_startEvent)}function ee(e){switch(r){case i.ROTATE:if(!1===n.enableRotate)return;O(e);break;case i.DOLLY:if(!1===n.enableZoom)return;I(e);break;case i.PAN:if(!1===n.enablePan)return;k(e)}}function et(e){!1!==n.enabled&&!1!==n.enableZoom&&r===i.NONE&&(e.preventDefault(),n.dispatchEvent($443c013b983d0324$var$_startEvent),U(e),n.dispatchEvent($443c013b983d0324$var$_endEvent))}function en(e){!1!==n.enabled&&!1!==n.enablePan&&F(e)}function ei(e){switch(el(e),x.length){case 1:switch(n.touches.ONE){case $ilwiq.TOUCH.ROTATE:if(!1===n.enableRotate)return;z(),r=i.TOUCH_ROTATE;break;case $ilwiq.TOUCH.PAN:if(!1===n.enablePan)return;B(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case $ilwiq.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;H(),r=i.TOUCH_DOLLY_PAN;break;case $ilwiq.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;G(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent($443c013b983d0324$var$_startEvent)}function er(e){switch(el(e),r){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;W(e),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;X(e),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;$(e),n.update();break;default:r=i.NONE}}function es(e){!1!==n.enabled&&e.preventDefault()}function ea(e){x.push(e)}function eo(e){delete b[e.pointerId];for(let t=0;t<x.length;t++)if(x[t].pointerId==e.pointerId){x.splice(t,1);return}}function el(e){let t=b[e.pointerId];void 0===t&&(t=new $ilwiq.Vector2,b[e.pointerId]=t),t.set(e.pageX,e.pageY)}function eu(e){return b[(e.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}n.domElement.addEventListener("contextmenu",es),n.domElement.addEventListener("pointerdown",Y),n.domElement.addEventListener("pointercancel",K),n.domElement.addEventListener("wheel",et,{passive:!1}),this.update()}}var $kUBvx=parcelRequire("kUBvx");const $48f4b0b26fc46dd9$var$GRID_LINE_MAT=new $ilwiq.LineBasicMaterial({color:255,opacity:.1}),[$48f4b0b26fc46dd9$var$YZ_IDX,$48f4b0b26fc46dd9$var$XY_IDX,$48f4b0b26fc46dd9$var$XZ_IDX]=[0,1,2];class $48f4b0b26fc46dd9$export$def098fac4664e42 extends $2d8e6f533f833ed5$export$da9897e690d269b{cubeSize;envbrowser;connectorCubeGeo;centerCubeGeo;connectorLineMaterial;particleColors;centerOfMass;lineGroup;particleMaterials;colorMaterials;connectorPointerGeo;lineViewFactor;gridLines;gridwidth;gridGroup;constructor(e,t=1e3,n=100,i=!0,r=!0,s=$4eae0a726ab50395$exports("<div>"),a=1,o="abcd"){super(t,n,i,r,a,o),this.colorMaterials=[],this.particleColors=[],this.cubeSize=.7,this.objGroup=new $ilwiq.Group,this.lineGroup=new $ilwiq.Group,this.lineGroup.visible=!1,e.add(this.objGroup),e.add(this.lineGroup),this.centerOfMass=new $ilwiq.Vector3(0,0,0);let l=1-this.cubeSize;this.connectorCubeGeo=new $ilwiq.BoxGeometry(l,l,l),this.connectorPointerGeo=new $ilwiq.BoxGeometry(l/2,l/2,l/2),this.centerCubeGeo=new $ilwiq.BoxGeometry(this.cubeSize,this.cubeSize,this.cubeSize),this.envbrowser=s,this.connectorLineMaterial=new $ilwiq.LineBasicMaterial({color:5592405,linewidth:20}),this.particleMaterials=new Map,this.lineViewFactor=2,this.gridLines=[new Map,new Map,new Map],this.gridGroup=new $ilwiq.Group,this.gridGroup.visible=!1,this.gridGroup.translateX(.5),this.gridGroup.translateY(.5),this.gridGroup.translateZ(.5),e.add(this.gridGroup)}clone(){let e=new $48f4b0b26fc46dd9$export$def098fac4664e42(!1,this.nMaxCubes,this.maxCoord,void 0===this.confMap,this.torsion,this.envbrowser,this.maxPieceSize,this.rng_seed);return this.set_rule(this.cube_types),this.forEachCube((t,n)=>{e.cubes.set(n,t.clone(t.personalName))}),[...this.moves.keys()].forEach((t,n)=>{e.moves.set(t,this.getMoveCell(t).clone())}),e.steps=this.steps,e}reset(e=!0){for(super.reset(e),this.centerOfMass=new $ilwiq.Vector3(0,0,0),this.envbrowser.empty(),this.objGroup.children=[],this.lineGroup.visible=!1,this.current_stage=0;this.lineGroup.children.length>0;)this.lineGroup.children.pop();[...this.particleMaterials.values()].forEach(e=>{e.transparent=!1,e.opacity=1})}regenerate(){if(super.regenerate(),"undefined"!=typeof window){let e=this.cube_types.length>0?"?decRule="+this.getRuleStr():"";window.history.pushState(null,null,e)}}addParticle(e){let t=[this.currMinCoord,this.currMaxCoord];console.assert(e instanceof $e398ed39f4b4b574$export$1fd3152c3b8a98ef),this.objGroup.add(e.draw(this.connectorCubeGeo,this.particleMaterials.get(e.type_id()).clone(),this.centerCubeGeo)),this.envbrowser.append(e.envvis),e.envvis.mouseenter(function(t){let n=new $ilwiq.Color($4eae0a726ab50395$exports(t.currentTarget).css("border-color"));e.cube_vis.material.color=n.offsetHSL(0,25,0),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}),e.envvis.mouseleave(function(t){e.cube_vis.material.color=new $ilwiq.Color($4eae0a726ab50395$exports(t.currentTarget).css("border-color")),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}),super.addParticle(e),this.centerOfMass.multiplyScalar(this.numCubes()),this.centerOfMass.add(e.position),this.centerOfMass.divideScalar(this.numCubes()),$4eae0a726ab50395$exports("#mismatchcount").text(`${this.numMismatches()}`),(this.currMinCoord!=t[0]||this.currMaxCoord!=t[1])&&this.updateGrid(e.position),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}updateGrid(e){this.gridGroup.clear();let t=this.currMaxCoord-this.currMinCoord,n=this.currMinCoord-Math.floor(.25*t),i=this.currMaxCoord+Math.ceil(.25*t);for(let e of(0,$kUBvx.range)(n,i))for(let t of(0,$kUBvx.range)(n,i)){let r=new $ilwiq.BufferGeometry().setFromPoints([new $ilwiq.Vector3(e,t,n),new $ilwiq.Vector3(e,t,i)]),s=new $ilwiq.Line(r,$48f4b0b26fc46dd9$var$GRID_LINE_MAT);this.gridGroup.add(s)}for(let e of(0,$kUBvx.range)(n,i))for(let t of(0,$kUBvx.range)(n,i)){let r=new $ilwiq.BufferGeometry().setFromPoints([new $ilwiq.Vector3(n,e,t),new $ilwiq.Vector3(i,e,t)]),s=new $ilwiq.Line(r,$48f4b0b26fc46dd9$var$GRID_LINE_MAT);this.gridGroup.add(s)}for(let e of(0,$kUBvx.range)(n,i))for(let t of(0,$kUBvx.range)(n,i)){let r=new $ilwiq.BufferGeometry().setFromPoints([new $ilwiq.Vector3(e,n,t),new $ilwiq.Vector3(e,i,t)]),s=new $ilwiq.Line(r,$48f4b0b26fc46dd9$var$GRID_LINE_MAT);this.gridGroup.add(s)}}makeLine(e,t,n){e.sub(e.clone().sub(t).setLength(this.cubeSize/3)),t.sub(t.clone().sub(e).setLength(this.cubeSize/3));let i=[];i.push(e),i.push(t);let r=new $ilwiq.BufferGeometry().setFromPoints(i),s=this.connectorLineMaterial.clone(),a=(0,$7UxrJ.patchColor)(n);return s.color.set(a),new $ilwiq.Line(r,s)}instantiateCube(e,t,n=new $ilwiq.Vector3(0,0,0)){return new $e398ed39f4b4b574$export$1fd3152c3b8a98ef(e,n,(0,$ilwiq.Quaternion).prototype.identity(),t)}updateMoves(e){super.updateMoves(e),e.is_drawn()&&e.iter_patches(t=>{t.patch.color&&(console.assert(void 0!==t.vis.big),e.refresh_patch_active_visual(t))})}set_rule(e,t=!0){super.set_rule(e,t),this.particleMaterials=new Map,this.cube_types.forEach(e=>{this.particleMaterials.set(e.type_id,new $ilwiq.MeshLambertMaterial({color:(0,$7UxrJ.cubeTypeColor)(e.type_id),transparent:!1,opacity:1}))}),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}addCubeType(e,t=!0){super.addCubeType(e,t),this.particleMaterials.set(e.type_id,new $ilwiq.MeshLambertMaterial({color:(0,$7UxrJ.cubeTypeColor)(this.cube_types.length-1)}))}toggleLineView(){this.lineGroup.visible?(this.objGroup.visible=!0,this.lineGroup.visible=!1,this.objGroup.children.forEach(e=>{e.scale.multiplyScalar(this.lineViewFactor)}),[...this.particleMaterials.values()].forEach(e=>{e.transparent=!1,e.opacity=1})):(this.lineGroup.visible=!0,0==this.lineGroup.children.length&&this.connections.forEach(e=>{this.lineGroup.add(this.makeLine(e.cube_1.position,e.cube_2.position,e.color))}),this.objGroup.children.forEach(e=>{e.scale.multiplyScalar(1/this.lineViewFactor)}),[...this.particleMaterials.values()].forEach(e=>{e.transparent=!0,e.opacity=.5})),$48f4b0b26fc46dd9$var$fitCamera()}setTorsion(e){this.torsion=e}toggleGrid(){this.gridGroup.visible=!this.gridGroup.visible}}function $48f4b0b26fc46dd9$export$7d20a4bb970d0776(){window.camera.aspect=window.innerWidth/window.innerHeight,window.camera.updateProjectionMatrix(),window.renderer.setSize(window.innerWidth,window.innerHeight),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $48f4b0b26fc46dd9$export$b3890eb0ae9dca99(){window.renderer.render(window.scene,window.camera)}function $48f4b0b26fc46dd9$var$fitCamera(e){if("OrthographicCamera"==window.camera.type)return;e=e||20;let t=1.3,n=new $ilwiq.Box3;n.expandByObject(window.system.objGroup);let i=n.getSize(new $ilwiq.Vector3).addScalar(1.5),r=window.system.centerOfMass,s=Math.max(i.x,i.y,i.z)/(2*Math.atan(Math.PI*window.camera.fov/360)),a=s/window.camera.aspect,o=t*Math.max(s,a),l=window.orbit.target.clone().sub(window.camera.position).normalize().multiplyScalar(o);window.orbit.maxDistance=10*o,window.camera.near=o/100,window.camera.far=100*o;let u=window.orbit.target.clone().sub(l),c=1,h=function(){window.camera.position.lerp(u,Math.pow(c/e,2));let t=window.camera.quaternion.clone();window.camera.lookAt(window.system.centerOfMass);let n=window.camera.quaternion.clone();window.camera.quaternion.copy(t),window.camera.quaternion.slerp(n,c/e),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99(),c<e?(c++,requestAnimationFrame(h.bind(this))):window.orbit.target.copy(r)};h()}function $48f4b0b26fc46dd9$export$70cebd2f263e5940(){let e=window.innerWidth/window.innerHeight;window.cameraPersp=new $ilwiq.PerspectiveCamera(50,e,.01,3e4),window.cameraOrtho=new $ilwiq.OrthographicCamera(-6*e,6*e,6,-6,.01,3e4),window.camera=window.cameraPersp,window.camera.position.set(2,4,6),window.camera.lookAt(0,0,0),window.scene=new $ilwiq.Scene;let t=new $ilwiq.AmbientLight(7368816);window.camera.add(t);let n=new $ilwiq.PointLight(7368816);n.position.set(10,10,5).normalize(),window.camera.add(n),window.scene.add(window.camera),window.canvas=document.getElementById("threeCanvas"),window.renderer=new $ilwiq.WebGLRenderer({antialias:!0,canvas:window.canvas,alpha:!0,preserveDrawingBuffer:!0}),window.renderer.setPixelRatio(window.devicePixelRatio),window.renderer.setSize(window.innerWidth,window.innerHeight),window.renderer.setClearColor(0,0),window.addEventListener("resize",$48f4b0b26fc46dd9$export$7d20a4bb970d0776,!1),window.orbit=new $443c013b983d0324$export$8ff7788029dfdf52(window.camera,window.renderer.domElement),window.orbit.damping=.2,window.orbit.addEventListener("change",$48f4b0b26fc46dd9$export$b3890eb0ae9dca99),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}document.addEventListener("keydown",e=>{"s"==e.key&&e.ctrlKey&&(e.preventDefault(),$0f65b03f8c953577$export$d06353ef6aaff617())}),window.addEventListener("movesProcessed",function(e){$48f4b0b26fc46dd9$var$fitCamera()},!1),$48f4b0b26fc46dd9$export$70cebd2f263e5940();var $kUBvx=parcelRequire("kUBvx");class $2ff5c53210b96d91$export$6c9cc06fe674a4d2{nS;nC;nL;nD;nP;torsion;nO;bindings;nanoparticles;extraConnections;maxAltTries;forbid_self_interact;crystal;constructor(e,t=3,n=!0){this.bindings=$2ff5c53210b96d91$var$compute_topology(e),this.nC=void 0,this.nS=void 0,this.nL=$2ff5c53210b96d91$var$countParticles(e),this.nD=t,this.nP=$kUBvx.RULE_ORDER.length,this.torsion=n,this.torsion&&(this.nO=4),this.extraConnections=[],this.crystal=void 0,this.forbid_self_interact=!1,this.nanoparticles=new Map,this.maxAltTries=10}getEmpties(){let e=new Set;for(let[[t],[n]]of this.bindings.entries())e.add(t),e.add(n);let t=new Set;for(let[[e,n],[i,r]]of this.bindings.entries())t.add([e,n]),t.add([i,r]);let n=[];return e.forEach(e=>{for(let i=0;i<6;i++)t.has([e,i])||n.push([e,i])}),n}setExtraConnections(e){this.extraConnections=e,this.crystal=e.length>0}set_nanoparticles(e){this.nanoparticles=e}set_nanoparticle(e,t){this.nanoparticles.set(e,t)}num_nanoparticle_types(){return new Set(this.nanoparticles.values()).size}has_nanoparticles(){return this.nanoparticles.size>0}assign_nS(e){this.nS=e}assign_nC(e){this.nC=e}toJSON(){let{extraConnections:e,crystal:t,nanoparticles:n,nS:i,nC:r,nL:s,nD:a,nP:o,forbid_self_interact:l,...u}=this;return this.forbid_self_interact&&(u.forbid_self_interact=this.forbid_self_interact),void 0!=this.crystal&&(u.crystal=this.crystal),this.extraConnections.length>0&&(u.extraConnections=this.extraConnections),this.nanoparticles&&(u.nanoparticles=this.nanoparticles),void 0!=this.nC&&(u.nC=this.nC),void 0!=this.nS&&(u.nS=this.nS),u}cpy(){let e=new $2ff5c53210b96d91$export$6c9cc06fe674a4d2([],this.nD,this.torsion);return e.bindings=new Map(this.bindings),e.nS=this.nS,e.nC=this.nC,e.nP=this.nP,e.nO=this.nO,e.nL=this.nL,e.extraConnections=this.extraConnections.map(e=>[...e]),e.crystal=this.crystal,e.forbid_self_interact=this.forbid_self_interact,e.nanoparticles=new Map(this.nanoparticles),e}}function $2ff5c53210b96d91$var$compute_topology(e){let t=new Map;for(let[n,i,r,s]of e)t.set([n,i],[r,s]);return t}function $2ff5c53210b96d91$var$countParticles(e){return Math.max(...e.map(e=>e[0]).concat(e.map(e=>e[2])))+1}var $ilwiq=parcelRequire("ilwiq"),$kUBvx=parcelRequire("kUBvx"),$7UxrJ=parcelRequire("7UxrJ"),$f2e274ef11f87062$exports={},$c885ef874cf44bbc$exports={},$5XX9r=parcelRequire("5XX9r"),$aff2018c308031aa$exports={};$parcel$defineInteropFlag($aff2018c308031aa$exports),$parcel$export($aff2018c308031aa$exports,"VERSION",()=>$2d63c72f11d36dd8$export$a4ad2735b021c132),$parcel$export($aff2018c308031aa$exports,"restArguments",()=>$00091338bb34561a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isObject",()=>$6e3e7d3004a0bd6f$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isNull",()=>$a042320c2c15e613$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isUndefined",()=>$0d2e0eff9b6e26c2$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isBoolean",()=>$5394bc2f01152bbc$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isElement",()=>$cfeb64eb4197347f$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isString",()=>$c60f1c14f06acd60$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isNumber",()=>$8b732457fbe276dc$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isDate",()=>$2e6aeb67ee40470b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isRegExp",()=>$37f38c538158829c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isError",()=>$b100e45f427f9ef6$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isSymbol",()=>$3e5ddff5af045f50$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isArrayBuffer",()=>$12134e4967df2b87$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isDataView",()=>$282d5f466b13837a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isArray",()=>$f9e6c041730fdb31$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isFunction",()=>$ecd89179b736cddb$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isArguments",()=>$a68c3966b61ff959$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isFinite",()=>$debcf2bd172293e4$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isNaN",()=>$5a968955ec4f3425$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isTypedArray",()=>$9077e7ed52c125e5$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isEmpty",()=>$7a89a6b6e948e772$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isMatch",()=>$375387b8b59ffb29$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isEqual",()=>$d7cadaba8ed5bf16$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isMap",()=>$112ab78c61fa9f88$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isWeakMap",()=>$33e36c138b4bf873$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isSet",()=>$ec84b0948615a45b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"isWeakSet",()=>$e8c59ef6a6f4fcee$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"keys",()=>$6fe7302bdcad38ac$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"allKeys",()=>$76c102325be5f353$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"values",()=>$ebb4fbd725ae82a0$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"pairs",()=>$6858269b58b81583$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"invert",()=>$ba8d0fba6632eaff$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"functions",()=>$7e9662b114b4a099$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"methods",()=>$7e9662b114b4a099$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"extend",()=>$cd665a7b16f49314$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"extendOwn",()=>$f40532393fd97aec$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"assign",()=>$f40532393fd97aec$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"defaults",()=>$9225d9bed8720bc5$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"create",()=>$bd444a42534a739d$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"clone",()=>$ac5f44fcda61a289$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"tap",()=>$4386162a0709f5b5$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"get",()=>$80790876ee4b09c1$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"has",()=>$4fb312c1270006dd$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"mapObject",()=>$361a0ec142a97115$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"identity",()=>$34b5571162c34d5a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"constant",()=>$92beb55e5504ffbe$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"noop",()=>$ea593b64ef4e2a8e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"toPath",()=>$100e549c0eece915$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"property",()=>$bcea3364d1615dfa$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"propertyOf",()=>$4a4ca2b2793dbf28$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"matcher",()=>$d488ba5b1a5b1ffd$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"matches",()=>$d488ba5b1a5b1ffd$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"times",()=>$93fb7833cb34acaa$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"random",()=>$f9cdebf5ce2af7ea$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"now",()=>$ff631391d2cf96ac$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"escape",()=>$29bd69dc36818855$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"unescape",()=>$987ff7a55bdcc95b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"templateSettings",()=>$799262f659d00f51$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"template",()=>$78309a1f9f459973$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"result",()=>$e687d77f3e8f8cc0$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"uniqueId",()=>$409640a219323d5c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"chain",()=>$07d178e7c93d3e66$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"iteratee",()=>$37d34a73637a8f26$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"partial",()=>$1a2e147da63105f5$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"bind",()=>$9b82ce32b9f64f95$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"bindAll",()=>$cb918855b9157d53$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"memoize",()=>$4498a1ed71e9fe6a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"delay",()=>$43f004011196acc1$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"defer",()=>$0b0c55fd99270793$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"throttle",()=>$c113ee3e9b3b083d$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"debounce",()=>$daf83e4f50d19913$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"wrap",()=>$0971039d46d98585$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"negate",()=>$4d454b4b64719993$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"compose",()=>$9f03098fdf5e98d2$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"after",()=>$0c0c90fff32f81b8$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"before",()=>$3668e405225021ed$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"once",()=>$82a9d64a1bd25e8f$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"findKey",()=>$79b73215b289181c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"findIndex",()=>$8f47a544aeb08a7e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"findLastIndex",()=>$3ae5e429277e4694$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"sortedIndex",()=>$062e5c7017ea1c58$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"indexOf",()=>$76649ff64c4c112d$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"lastIndexOf",()=>$46b6a951c1416c2e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"find",()=>$a3b993f50683293a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"detect",()=>$a3b993f50683293a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"findWhere",()=>$f424b3ff2217dd6e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"each",()=>$b995362b61cbe134$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"forEach",()=>$b995362b61cbe134$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"map",()=>$c746756a67aa053b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"collect",()=>$c746756a67aa053b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"reduce",()=>$fbfad6943e87d98c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"foldl",()=>$fbfad6943e87d98c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"inject",()=>$fbfad6943e87d98c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"reduceRight",()=>$6821e7cd1cda490c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"foldr",()=>$6821e7cd1cda490c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"filter",()=>$3cab01f560c3a138$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"select",()=>$3cab01f560c3a138$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"reject",()=>$88d462cd31dad735$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"every",()=>$1ed12610b787b54c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"all",()=>$1ed12610b787b54c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"some",()=>$1f6dd4637b6de52e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"any",()=>$1f6dd4637b6de52e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"contains",()=>$47db385fda09988c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"includes",()=>$47db385fda09988c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"include",()=>$47db385fda09988c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"invoke",()=>$1b37fa5b86fe2986$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"pluck",()=>$64b7e156b18644d0$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"where",()=>$4a123abd524cfc92$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"max",()=>$f1fcbb9a3e80ebe3$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"min",()=>$f4b1abaac39e8250$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"shuffle",()=>$126b00d4f3d6622f$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"sample",()=>$006c92d573cf9580$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"sortBy",()=>$764739bcb0503f2e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"groupBy",()=>$fb9e1d043a6fe792$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"indexBy",()=>$ac54a1aed9ba8a72$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"countBy",()=>$85ce7e736ff1427c$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"partition",()=>$1c3202b1cbae054a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"toArray",()=>$af549ed737dbc31a$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"size",()=>$c1f52b9a7c4ef91e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"pick",()=>$3676c3d07a7362ef$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"omit",()=>$9ba5eff4e454bc2e$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"first",()=>$4584a922b20bbe9b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"head",()=>$4584a922b20bbe9b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"take",()=>$4584a922b20bbe9b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"initial",()=>$d0de77978a68d9ea$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"last",()=>$5ea6e92bed107ca3$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"rest",()=>$4b067ce637fc54a6$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"tail",()=>$4b067ce637fc54a6$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"drop",()=>$4b067ce637fc54a6$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"compact",()=>$5fa8fc2d5a95b6b3$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"flatten",()=>$23786b176608059b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"without",()=>$d1923ce94a67b9a2$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"uniq",()=>$f0bec29b96d47a33$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"unique",()=>$f0bec29b96d47a33$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"union",()=>$4cbad72dc0b3402b$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"intersection",()=>$640ee3b4c6854636$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"difference",()=>$ef37b923cabd07c5$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"unzip",()=>$e787e451ed8ddde4$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"transpose",()=>$e787e451ed8ddde4$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"zip",()=>$fe0814bdf6654e7d$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"object",()=>$9a9112ffd6f5d502$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"range",()=>$6fbcf963c33899f9$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"chunk",()=>$6cd4738b38ff6a08$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"mixin",()=>$add98ab171b98313$export$2e2bcd8739ae039),$parcel$export($aff2018c308031aa$exports,"default",()=>$a0b73385c05e176b$export$2e2bcd8739ae039);var $2d63c72f11d36dd8$export$a4ad2735b021c132="1.13.6",$2d63c72f11d36dd8$export$e8e78c978b129247="object"==typeof self&&self.self===self&&self||"object"==typeof $parcel$global&&$parcel$global.global===$parcel$global&&$parcel$global||Function("return this")()||{},$2d63c72f11d36dd8$export$aabeece9448a227a=Array.prototype,$2d63c72f11d36dd8$export$e77bb59b5e655b3d=Object.prototype,$2d63c72f11d36dd8$export$e229dcb397ceea81="undefined"!=typeof Symbol?Symbol.prototype:null,$2d63c72f11d36dd8$export$4cbf152802aa238=$2d63c72f11d36dd8$export$aabeece9448a227a.push,$2d63c72f11d36dd8$export$58adb3bec8346d0f=$2d63c72f11d36dd8$export$aabeece9448a227a.slice,$2d63c72f11d36dd8$export$f84e8e69fd4488a5=$2d63c72f11d36dd8$export$e77bb59b5e655b3d.toString,$2d63c72f11d36dd8$export$5a15a386532a5ea4=$2d63c72f11d36dd8$export$e77bb59b5e655b3d.hasOwnProperty,$2d63c72f11d36dd8$export$20eaf89d899ede58="undefined"!=typeof ArrayBuffer,$2d63c72f11d36dd8$export$a2e478ad34dac33e="undefined"!=typeof DataView,$2d63c72f11d36dd8$export$552cf9b635cef256=Array.isArray,$2d63c72f11d36dd8$export$e676cf06d7fd2114=Object.keys,$2d63c72f11d36dd8$export$5b53dc95b548c58c=Object.create,$2d63c72f11d36dd8$export$35fc70fc5e80d5a7=$2d63c72f11d36dd8$export$20eaf89d899ede58&&ArrayBuffer.isView,$2d63c72f11d36dd8$export$a739ba33a90be0a1=isNaN,$2d63c72f11d36dd8$export$8b48b92f6c9d5ad=isFinite,$2d63c72f11d36dd8$export$7dcea4d27900b116=!({toString:null}).propertyIsEnumerable("toString"),$2d63c72f11d36dd8$export$f8fa596d5e31cb19=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],$2d63c72f11d36dd8$export$63b3abc5cd28bc48=9007199254740991;function $00091338bb34561a$export$2e2bcd8739ae039(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var s=Array(t+1);for(r=0;r<t;r++)s[r]=arguments[r];return s[t]=i,e.apply(this,s)}}function $6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function $a042320c2c15e613$export$2e2bcd8739ae039(e){return null===e}function $0d2e0eff9b6e26c2$export$2e2bcd8739ae039(e){return void 0===e}function $5394bc2f01152bbc$export$2e2bcd8739ae039(e){return!0===e||!1===e||"[object Boolean]"===$2d63c72f11d36dd8$export$f84e8e69fd4488a5.call(e)}function $cfeb64eb4197347f$export$2e2bcd8739ae039(e){return!!(e&&1===e.nodeType)}function $f579a1e3e166bc6c$export$2e2bcd8739ae039(e){var t="[object "+e+"]";return function(e){return $2d63c72f11d36dd8$export$f84e8e69fd4488a5.call(e)===t}}var $c60f1c14f06acd60$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("String"),$8b732457fbe276dc$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Number"),$2e6aeb67ee40470b$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Date"),$37f38c538158829c$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("RegExp"),$b100e45f427f9ef6$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Error"),$3e5ddff5af045f50$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Symbol"),$12134e4967df2b87$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("ArrayBuffer"),$ecd89179b736cddb$var$isFunction=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Function"),$ecd89179b736cddb$var$nodelist=$2d63c72f11d36dd8$export$e8e78c978b129247.document&&$2d63c72f11d36dd8$export$e8e78c978b129247.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof $ecd89179b736cddb$var$nodelist&&($ecd89179b736cddb$var$isFunction=function(e){return"function"==typeof e});var $ecd89179b736cddb$export$2e2bcd8739ae039=$ecd89179b736cddb$var$isFunction,$a870cb15b080e803$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Object"),$77d6d5ed2b916838$export$834f1807c25991c1=$2d63c72f11d36dd8$export$a2e478ad34dac33e&&$a870cb15b080e803$export$2e2bcd8739ae039(new DataView(new ArrayBuffer(8))),$77d6d5ed2b916838$export$f7bad96d83325a34="undefined"!=typeof Map&&$a870cb15b080e803$export$2e2bcd8739ae039(new Map),$282d5f466b13837a$var$isDataView=$f579a1e3e166bc6c$export$2e2bcd8739ae039("DataView");function $282d5f466b13837a$var$ie10IsDataView(e){return null!=e&&$ecd89179b736cddb$export$2e2bcd8739ae039(e.getInt8)&&$12134e4967df2b87$export$2e2bcd8739ae039(e.buffer)}var $282d5f466b13837a$export$2e2bcd8739ae039=$77d6d5ed2b916838$export$834f1807c25991c1?$282d5f466b13837a$var$ie10IsDataView:$282d5f466b13837a$var$isDataView,$f9e6c041730fdb31$export$2e2bcd8739ae039=$2d63c72f11d36dd8$export$552cf9b635cef256||$f579a1e3e166bc6c$export$2e2bcd8739ae039("Array");function $39edb832e07faa22$export$2e2bcd8739ae039(e,t){return null!=e&&$2d63c72f11d36dd8$export$5a15a386532a5ea4.call(e,t)}var $a68c3966b61ff959$var$isArguments=$f579a1e3e166bc6c$export$2e2bcd8739ae039("Arguments");!function(){$a68c3966b61ff959$var$isArguments(arguments)||($a68c3966b61ff959$var$isArguments=function(e){return $39edb832e07faa22$export$2e2bcd8739ae039(e,"callee")})}();var $a68c3966b61ff959$export$2e2bcd8739ae039=$a68c3966b61ff959$var$isArguments;function $debcf2bd172293e4$export$2e2bcd8739ae039(e){return!$3e5ddff5af045f50$export$2e2bcd8739ae039(e)&&$2d63c72f11d36dd8$export$8b48b92f6c9d5ad(e)&&!isNaN(parseFloat(e))}function $5a968955ec4f3425$export$2e2bcd8739ae039(e){return $8b732457fbe276dc$export$2e2bcd8739ae039(e)&&$2d63c72f11d36dd8$export$a739ba33a90be0a1(e)}function $92beb55e5504ffbe$export$2e2bcd8739ae039(e){return function(){return e}}function $61cc4bd77dea34f8$export$2e2bcd8739ae039(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=$2d63c72f11d36dd8$export$63b3abc5cd28bc48}}function $23e52771e26c0d29$export$2e2bcd8739ae039(e){return function(t){return null==t?void 0:t[e]}}var $935303bff590dfe3$export$2e2bcd8739ae039=$23e52771e26c0d29$export$2e2bcd8739ae039("byteLength"),$b0ba036a9e1182f7$export$2e2bcd8739ae039=$61cc4bd77dea34f8$export$2e2bcd8739ae039($935303bff590dfe3$export$2e2bcd8739ae039),$9077e7ed52c125e5$var$typedArrayPattern=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function $9077e7ed52c125e5$var$isTypedArray(e){return $2d63c72f11d36dd8$export$35fc70fc5e80d5a7?$2d63c72f11d36dd8$export$35fc70fc5e80d5a7(e)&&!$282d5f466b13837a$export$2e2bcd8739ae039(e):$b0ba036a9e1182f7$export$2e2bcd8739ae039(e)&&$9077e7ed52c125e5$var$typedArrayPattern.test($2d63c72f11d36dd8$export$f84e8e69fd4488a5.call(e))}var $9077e7ed52c125e5$export$2e2bcd8739ae039=$2d63c72f11d36dd8$export$20eaf89d899ede58?$9077e7ed52c125e5$var$isTypedArray:$92beb55e5504ffbe$export$2e2bcd8739ae039(!1),$d9552e9372db9187$export$2e2bcd8739ae039=$23e52771e26c0d29$export$2e2bcd8739ae039("length");function $9b8218d47529a1ac$var$emulatedSet(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return!0===t[e]},push:function(n){return t[n]=!0,e.push(n)}}}function $9b8218d47529a1ac$export$2e2bcd8739ae039(e,t){t=$9b8218d47529a1ac$var$emulatedSet(t);var n=$2d63c72f11d36dd8$export$f8fa596d5e31cb19.length,i=e.constructor,r=$ecd89179b736cddb$export$2e2bcd8739ae039(i)&&i.prototype||$2d63c72f11d36dd8$export$e77bb59b5e655b3d,s="constructor";for($39edb832e07faa22$export$2e2bcd8739ae039(e,s)&&!t.contains(s)&&t.push(s);n--;)(s=$2d63c72f11d36dd8$export$f8fa596d5e31cb19[n])in e&&e[s]!==r[s]&&!t.contains(s)&&t.push(s)}function $6fe7302bdcad38ac$export$2e2bcd8739ae039(e){if(!$6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e))return[];if($2d63c72f11d36dd8$export$e676cf06d7fd2114)return $2d63c72f11d36dd8$export$e676cf06d7fd2114(e);var t=[];for(var n in e)$39edb832e07faa22$export$2e2bcd8739ae039(e,n)&&t.push(n);return $2d63c72f11d36dd8$export$7dcea4d27900b116&&$9b8218d47529a1ac$export$2e2bcd8739ae039(e,t),t}function $7a89a6b6e948e772$export$2e2bcd8739ae039(e){if(null==e)return!0;var t=$d9552e9372db9187$export$2e2bcd8739ae039(e);return"number"==typeof t&&($f9e6c041730fdb31$export$2e2bcd8739ae039(e)||$c60f1c14f06acd60$export$2e2bcd8739ae039(e)||$a68c3966b61ff959$export$2e2bcd8739ae039(e))?0===t:0===$d9552e9372db9187$export$2e2bcd8739ae039($6fe7302bdcad38ac$export$2e2bcd8739ae039(e))}function $375387b8b59ffb29$export$2e2bcd8739ae039(e,t){var n=$6fe7302bdcad38ac$export$2e2bcd8739ae039(t),i=n.length;if(null==e)return!i;for(var r=Object(e),s=0;s<i;s++){var a=n[s];if(t[a]!==r[a]||!(a in r))return!1}return!0}function $51828dc883981eb1$export$2e2bcd8739ae039(e){return e instanceof $51828dc883981eb1$export$2e2bcd8739ae039?e:this instanceof $51828dc883981eb1$export$2e2bcd8739ae039?void(this._wrapped=e):new $51828dc883981eb1$export$2e2bcd8739ae039(e)}function $3d46d3e4e4eb9906$export$2e2bcd8739ae039(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,$935303bff590dfe3$export$2e2bcd8739ae039(e))}$51828dc883981eb1$export$2e2bcd8739ae039.VERSION=$2d63c72f11d36dd8$export$a4ad2735b021c132,$51828dc883981eb1$export$2e2bcd8739ae039.prototype.value=function(){return this._wrapped},$51828dc883981eb1$export$2e2bcd8739ae039.prototype.valueOf=$51828dc883981eb1$export$2e2bcd8739ae039.prototype.toJSON=$51828dc883981eb1$export$2e2bcd8739ae039.prototype.value,$51828dc883981eb1$export$2e2bcd8739ae039.prototype.toString=function(){return String(this._wrapped)};var $d7cadaba8ed5bf16$var$tagDataView="[object DataView]";function $d7cadaba8ed5bf16$var$eq(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&$d7cadaba8ed5bf16$var$deepEq(e,t,n,i)}function $d7cadaba8ed5bf16$var$deepEq(e,t,n,i){e instanceof $51828dc883981eb1$export$2e2bcd8739ae039&&(e=e._wrapped),t instanceof $51828dc883981eb1$export$2e2bcd8739ae039&&(t=t._wrapped);var r=$2d63c72f11d36dd8$export$f84e8e69fd4488a5.call(e);if(r!==$2d63c72f11d36dd8$export$f84e8e69fd4488a5.call(t))return!1;if($77d6d5ed2b916838$export$834f1807c25991c1&&"[object Object]"==r&&$282d5f466b13837a$export$2e2bcd8739ae039(e)){if(!$282d5f466b13837a$export$2e2bcd8739ae039(t))return!1;r=$d7cadaba8ed5bf16$var$tagDataView}switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!=+e)return+t!=+t;return 0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return $2d63c72f11d36dd8$export$e229dcb397ceea81.valueOf.call(e)===$2d63c72f11d36dd8$export$e229dcb397ceea81.valueOf.call(t);case"[object ArrayBuffer]":case $d7cadaba8ed5bf16$var$tagDataView:return $d7cadaba8ed5bf16$var$deepEq($3d46d3e4e4eb9906$export$2e2bcd8739ae039(e),$3d46d3e4e4eb9906$export$2e2bcd8739ae039(t),n,i)}var s="[object Array]"===r;if(!s&&$9077e7ed52c125e5$export$2e2bcd8739ae039(e)){if($935303bff590dfe3$export$2e2bcd8739ae039(e)!==$935303bff590dfe3$export$2e2bcd8739ae039(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,o=t.constructor;if(a!==o&&!($ecd89179b736cddb$export$2e2bcd8739ae039(a)&&a instanceof a&&$ecd89179b736cddb$export$2e2bcd8739ae039(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!$d7cadaba8ed5bf16$var$eq(e[l],t[l],n,i))return!1}else{var u,c=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e);if(l=c.length,$6fe7302bdcad38ac$export$2e2bcd8739ae039(t).length!==l)return!1;for(;l--;)if(!($39edb832e07faa22$export$2e2bcd8739ae039(t,u=c[l])&&$d7cadaba8ed5bf16$var$eq(e[u],t[u],n,i)))return!1}return n.pop(),i.pop(),!0}function $d7cadaba8ed5bf16$export$2e2bcd8739ae039(e,t){return $d7cadaba8ed5bf16$var$eq(e,t)}function $76c102325be5f353$export$2e2bcd8739ae039(e){if(!$6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e))return[];var t=[];for(var n in e)t.push(n);return $2d63c72f11d36dd8$export$7dcea4d27900b116&&$9b8218d47529a1ac$export$2e2bcd8739ae039(e,t),t}function $5d8a1e0d10a29a99$export$15230eca1f400e40(e){var t=$d9552e9372db9187$export$2e2bcd8739ae039(e);return function(n){if(null==n||$d9552e9372db9187$export$2e2bcd8739ae039($76c102325be5f353$export$2e2bcd8739ae039(n)))return!1;for(var i=0;i<t;i++)if(!$ecd89179b736cddb$export$2e2bcd8739ae039(n[e[i]]))return!1;return e!==$5d8a1e0d10a29a99$export$2f74b890a72cf48||!$ecd89179b736cddb$export$2e2bcd8739ae039(n[$5d8a1e0d10a29a99$var$forEachName])}}var $5d8a1e0d10a29a99$var$forEachName="forEach",$5d8a1e0d10a29a99$var$hasName="has",$5d8a1e0d10a29a99$var$commonInit=["clear","delete"],$5d8a1e0d10a29a99$var$mapTail=["get",$5d8a1e0d10a29a99$var$hasName,"set"],$5d8a1e0d10a29a99$export$de9acb94190bb764=$5d8a1e0d10a29a99$var$commonInit.concat($5d8a1e0d10a29a99$var$forEachName,$5d8a1e0d10a29a99$var$mapTail),$5d8a1e0d10a29a99$export$2f74b890a72cf48=$5d8a1e0d10a29a99$var$commonInit.concat($5d8a1e0d10a29a99$var$mapTail),$5d8a1e0d10a29a99$export$60e14a5e2a057f78=["add"].concat($5d8a1e0d10a29a99$var$commonInit,$5d8a1e0d10a29a99$var$forEachName,$5d8a1e0d10a29a99$var$hasName),$112ab78c61fa9f88$export$2e2bcd8739ae039=$77d6d5ed2b916838$export$f7bad96d83325a34?$5d8a1e0d10a29a99$export$15230eca1f400e40($5d8a1e0d10a29a99$export$de9acb94190bb764):$f579a1e3e166bc6c$export$2e2bcd8739ae039("Map"),$33e36c138b4bf873$export$2e2bcd8739ae039=$77d6d5ed2b916838$export$f7bad96d83325a34?$5d8a1e0d10a29a99$export$15230eca1f400e40($5d8a1e0d10a29a99$export$2f74b890a72cf48):$f579a1e3e166bc6c$export$2e2bcd8739ae039("WeakMap"),$ec84b0948615a45b$export$2e2bcd8739ae039=$77d6d5ed2b916838$export$f7bad96d83325a34?$5d8a1e0d10a29a99$export$15230eca1f400e40($5d8a1e0d10a29a99$export$60e14a5e2a057f78):$f579a1e3e166bc6c$export$2e2bcd8739ae039("Set"),$e8c59ef6a6f4fcee$export$2e2bcd8739ae039=$f579a1e3e166bc6c$export$2e2bcd8739ae039("WeakSet");function $ebb4fbd725ae82a0$export$2e2bcd8739ae039(e){for(var t=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function $6858269b58b81583$export$2e2bcd8739ae039(e){for(var t=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}function $ba8d0fba6632eaff$export$2e2bcd8739ae039(e){for(var t={},n=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function $7e9662b114b4a099$export$2e2bcd8739ae039(e){var t=[];for(var n in e)$ecd89179b736cddb$export$2e2bcd8739ae039(e[n])&&t.push(n);return t.sort()}function $be67da832d3a72cd$export$2e2bcd8739ae039(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],a=e(s),o=a.length,l=0;l<o;l++){var u=a[l];t&&void 0!==n[u]||(n[u]=s[u])}return n}}var $cd665a7b16f49314$export$2e2bcd8739ae039=$be67da832d3a72cd$export$2e2bcd8739ae039($76c102325be5f353$export$2e2bcd8739ae039),$f40532393fd97aec$export$2e2bcd8739ae039=$be67da832d3a72cd$export$2e2bcd8739ae039($6fe7302bdcad38ac$export$2e2bcd8739ae039),$9225d9bed8720bc5$export$2e2bcd8739ae039=$be67da832d3a72cd$export$2e2bcd8739ae039($76c102325be5f353$export$2e2bcd8739ae039,!0);function $b700d0be25024b3f$var$ctor(){return function(){}}function $b700d0be25024b3f$export$2e2bcd8739ae039(e){if(!$6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e))return{};if($2d63c72f11d36dd8$export$5b53dc95b548c58c)return $2d63c72f11d36dd8$export$5b53dc95b548c58c(e);var t=$b700d0be25024b3f$var$ctor();t.prototype=e;var n=new t;return t.prototype=null,n}function $bd444a42534a739d$export$2e2bcd8739ae039(e,t){var n=$b700d0be25024b3f$export$2e2bcd8739ae039(e);return t&&$f40532393fd97aec$export$2e2bcd8739ae039(n,t),n}function $ac5f44fcda61a289$export$2e2bcd8739ae039(e){return $6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e)?$f9e6c041730fdb31$export$2e2bcd8739ae039(e)?e.slice():$cd665a7b16f49314$export$2e2bcd8739ae039({},e):e}function $4386162a0709f5b5$export$2e2bcd8739ae039(e,t){return t(e),e}function $100e549c0eece915$export$2e2bcd8739ae039(e){return $f9e6c041730fdb31$export$2e2bcd8739ae039(e)?e:[e]}function $910c0dff4ed1facf$export$2e2bcd8739ae039(e){return $51828dc883981eb1$export$2e2bcd8739ae039.toPath(e)}function $6df0b60a061e6090$export$2e2bcd8739ae039(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function $80790876ee4b09c1$export$2e2bcd8739ae039(e,t,n){var i=$6df0b60a061e6090$export$2e2bcd8739ae039(e,$910c0dff4ed1facf$export$2e2bcd8739ae039(t));return $0d2e0eff9b6e26c2$export$2e2bcd8739ae039(i)?n:i}function $4fb312c1270006dd$export$2e2bcd8739ae039(e,t){for(var n=(t=$910c0dff4ed1facf$export$2e2bcd8739ae039(t)).length,i=0;i<n;i++){var r=t[i];if(!$39edb832e07faa22$export$2e2bcd8739ae039(e,r))return!1;e=e[r]}return!!n}function $34b5571162c34d5a$export$2e2bcd8739ae039(e){return e}function $d488ba5b1a5b1ffd$export$2e2bcd8739ae039(e){return e=$f40532393fd97aec$export$2e2bcd8739ae039({},e),function(t){return $375387b8b59ffb29$export$2e2bcd8739ae039(t,e)}}function $bcea3364d1615dfa$export$2e2bcd8739ae039(e){return e=$910c0dff4ed1facf$export$2e2bcd8739ae039(e),function(t){return $6df0b60a061e6090$export$2e2bcd8739ae039(t,e)}}function $f32aac1c6eda188b$export$2e2bcd8739ae039(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,s){return e.call(t,n,i,r,s)}}return function(){return e.apply(t,arguments)}}function $7193386dd6feb6cd$export$2e2bcd8739ae039(e,t,n){return null==e?$34b5571162c34d5a$export$2e2bcd8739ae039:$ecd89179b736cddb$export$2e2bcd8739ae039(e)?$f32aac1c6eda188b$export$2e2bcd8739ae039(e,t,n):$6e3e7d3004a0bd6f$export$2e2bcd8739ae039(e)&&!$f9e6c041730fdb31$export$2e2bcd8739ae039(e)?$d488ba5b1a5b1ffd$export$2e2bcd8739ae039(e):$bcea3364d1615dfa$export$2e2bcd8739ae039(e)}function $37d34a73637a8f26$export$2e2bcd8739ae039(e,t){return $7193386dd6feb6cd$export$2e2bcd8739ae039(e,t,1/0)}function $b79b3fe14fe37daf$export$2e2bcd8739ae039(e,t,n){return $51828dc883981eb1$export$2e2bcd8739ae039.iteratee!==$37d34a73637a8f26$export$2e2bcd8739ae039?$51828dc883981eb1$export$2e2bcd8739ae039.iteratee(e,t):$7193386dd6feb6cd$export$2e2bcd8739ae039(e,t,n)}function $361a0ec142a97115$export$2e2bcd8739ae039(e,t,n){t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n);for(var i=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),r=i.length,s={},a=0;a<r;a++){var o=i[a];s[o]=t(e[o],o,e)}return s}function $ea593b64ef4e2a8e$export$2e2bcd8739ae039(){}function $4a4ca2b2793dbf28$export$2e2bcd8739ae039(e){return null==e?$ea593b64ef4e2a8e$export$2e2bcd8739ae039:function(t){return $80790876ee4b09c1$export$2e2bcd8739ae039(e,t)}}function $93fb7833cb34acaa$export$2e2bcd8739ae039(e,t,n){var i=Array(Math.max(0,e));t=$f32aac1c6eda188b$export$2e2bcd8739ae039(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i}function $f9cdebf5ce2af7ea$export$2e2bcd8739ae039(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}$51828dc883981eb1$export$2e2bcd8739ae039.toPath=$100e549c0eece915$export$2e2bcd8739ae039,$51828dc883981eb1$export$2e2bcd8739ae039.iteratee=$37d34a73637a8f26$export$2e2bcd8739ae039;var $ff631391d2cf96ac$export$2e2bcd8739ae039=Date.now||function(){return new Date().getTime()};function $af20ba17f1dfce7b$export$2e2bcd8739ae039(e){var t=function(t){return e[t]},n="(?:"+$6fe7302bdcad38ac$export$2e2bcd8739ae039(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}}var $83fd5a079fe500fb$export$2e2bcd8739ae039={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$29bd69dc36818855$export$2e2bcd8739ae039=$af20ba17f1dfce7b$export$2e2bcd8739ae039($83fd5a079fe500fb$export$2e2bcd8739ae039),$d17a70e2463640c6$export$2e2bcd8739ae039=$ba8d0fba6632eaff$export$2e2bcd8739ae039($83fd5a079fe500fb$export$2e2bcd8739ae039),$987ff7a55bdcc95b$export$2e2bcd8739ae039=$af20ba17f1dfce7b$export$2e2bcd8739ae039($d17a70e2463640c6$export$2e2bcd8739ae039),$799262f659d00f51$export$2e2bcd8739ae039=$51828dc883981eb1$export$2e2bcd8739ae039.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},$78309a1f9f459973$var$noMatch=/(.)^/,$78309a1f9f459973$var$escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$78309a1f9f459973$var$escapeRegExp=/\\|'|\r|\n|\u2028|\u2029/g;function $78309a1f9f459973$var$escapeChar(e){return"\\"+$78309a1f9f459973$var$escapes[e]}var $78309a1f9f459973$var$bareIdentifier=/^\s*(\w|\$)+\s*$/;function $78309a1f9f459973$export$2e2bcd8739ae039(e,t,n){!t&&n&&(t=n);var i,r=RegExp([((t=$9225d9bed8720bc5$export$2e2bcd8739ae039({},t,$51828dc883981eb1$export$2e2bcd8739ae039.templateSettings)).escape||$78309a1f9f459973$var$noMatch).source,(t.interpolate||$78309a1f9f459973$var$noMatch).source,(t.evaluate||$78309a1f9f459973$var$noMatch).source].join("|")+"|$","g"),s=0,a="__p+='";e.replace(r,function(t,n,i,r,o){return a+=e.slice(s,o).replace($78309a1f9f459973$var$escapeRegExp,$78309a1f9f459973$var$escapeChar),s=o+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t}),a+="';\n";var o=t.variable;if(o){if(!$78309a1f9f459973$var$bareIdentifier.test(o))throw Error("variable is not a bare identifier: "+o)}else a="with(obj||{}){\n"+a+"}\n",o="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=Function(o,"_",a)}catch(e){throw e.source=a,e}var l=function(e){return i.call(this,e,$51828dc883981eb1$export$2e2bcd8739ae039)};return l.source="function("+o+"){\n"+a+"}",l}function $e687d77f3e8f8cc0$export$2e2bcd8739ae039(e,t,n){var i=(t=$910c0dff4ed1facf$export$2e2bcd8739ae039(t)).length;if(!i)return $ecd89179b736cddb$export$2e2bcd8739ae039(n)?n.call(e):n;for(var r=0;r<i;r++){var s=null==e?void 0:e[t[r]];void 0===s&&(s=n,r=i),e=$ecd89179b736cddb$export$2e2bcd8739ae039(s)?s.call(e):s}return e}var $409640a219323d5c$var$idCounter=0;function $409640a219323d5c$export$2e2bcd8739ae039(e){var t=++$409640a219323d5c$var$idCounter+"";return e?e+t:t}function $07d178e7c93d3e66$export$2e2bcd8739ae039(e){var t=$51828dc883981eb1$export$2e2bcd8739ae039(e);return t._chain=!0,t}function $d1106616df14cda0$export$2e2bcd8739ae039(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var s=$b700d0be25024b3f$export$2e2bcd8739ae039(e.prototype),a=e.apply(s,r);return $6e3e7d3004a0bd6f$export$2e2bcd8739ae039(a)?a:s}var $1a2e147da63105f5$var$partial=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){var n=$1a2e147da63105f5$var$partial.placeholder,i=function(){for(var r=0,s=t.length,a=Array(s),o=0;o<s;o++)a[o]=t[o]===n?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return $d1106616df14cda0$export$2e2bcd8739ae039(e,i,this,this,a)};return i});$1a2e147da63105f5$var$partial.placeholder=$51828dc883981eb1$export$2e2bcd8739ae039;var $1a2e147da63105f5$export$2e2bcd8739ae039=$1a2e147da63105f5$var$partial,$9b82ce32b9f64f95$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t,n){if(!$ecd89179b736cddb$export$2e2bcd8739ae039(e))throw TypeError("Bind must be called on a function");var i=$00091338bb34561a$export$2e2bcd8739ae039(function(r){return $d1106616df14cda0$export$2e2bcd8739ae039(e,i,t,this,n.concat(r))});return i}),$35c020f3a261c5a1$export$2e2bcd8739ae039=$61cc4bd77dea34f8$export$2e2bcd8739ae039($d9552e9372db9187$export$2e2bcd8739ae039);function $65a64d9b8854b61f$export$2e2bcd8739ae039(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var r=i.length,s=0,a=$d9552e9372db9187$export$2e2bcd8739ae039(e);s<a;s++){var o=e[s];if($35c020f3a261c5a1$export$2e2bcd8739ae039(o)&&($f9e6c041730fdb31$export$2e2bcd8739ae039(o)||$a68c3966b61ff959$export$2e2bcd8739ae039(o))){if(t>1)$65a64d9b8854b61f$export$2e2bcd8739ae039(o,t-1,n,i),r=i.length;else for(var l=0,u=o.length;l<u;)i[r++]=o[l++]}else n||(i[r++]=o)}return i}var $cb918855b9157d53$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){var n=(t=$65a64d9b8854b61f$export$2e2bcd8739ae039(t,!1,!1)).length;if(n<1)throw Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=$9b82ce32b9f64f95$export$2e2bcd8739ae039(e[i],e)}return e});function $4498a1ed71e9fe6a$export$2e2bcd8739ae039(e,t){var n=function(i){var r=n.cache,s=""+(t?t.apply(this,arguments):i);return $39edb832e07faa22$export$2e2bcd8739ae039(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return n.cache={},n}var $43f004011196acc1$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),$0b0c55fd99270793$export$2e2bcd8739ae039=$1a2e147da63105f5$export$2e2bcd8739ae039($43f004011196acc1$export$2e2bcd8739ae039,$51828dc883981eb1$export$2e2bcd8739ae039,1);function $c113ee3e9b3b083d$export$2e2bcd8739ae039(e,t,n){var i,r,s,a,o=0;n||(n={});var l=function(){o=!1===n.leading?0:$ff631391d2cf96ac$export$2e2bcd8739ae039(),i=null,a=e.apply(r,s),i||(r=s=null)},u=function(){var u=$ff631391d2cf96ac$export$2e2bcd8739ae039();o||!1!==n.leading||(o=u);var c=t-(u-o);return r=this,s=arguments,c<=0||c>t?(i&&(clearTimeout(i),i=null),o=u,a=e.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(i),o=0,i=r=s=null},u}function $daf83e4f50d19913$export$2e2bcd8739ae039(e,t,n){var i,r,s,a,o,l=function(){var u=$ff631391d2cf96ac$export$2e2bcd8739ae039()-r;t>u?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(o,s)),i||(s=o=null))},u=$00091338bb34561a$export$2e2bcd8739ae039(function(u){return o=this,s=u,r=$ff631391d2cf96ac$export$2e2bcd8739ae039(),!i&&(i=setTimeout(l,t),n&&(a=e.apply(o,s))),a});return u.cancel=function(){clearTimeout(i),i=s=o=null},u}function $0971039d46d98585$export$2e2bcd8739ae039(e,t){return $1a2e147da63105f5$export$2e2bcd8739ae039(t,e)}function $4d454b4b64719993$export$2e2bcd8739ae039(e){return function(){return!e.apply(this,arguments)}}function $9f03098fdf5e98d2$export$2e2bcd8739ae039(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function $0c0c90fff32f81b8$export$2e2bcd8739ae039(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function $3668e405225021ed$export$2e2bcd8739ae039(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var $82a9d64a1bd25e8f$export$2e2bcd8739ae039=$1a2e147da63105f5$export$2e2bcd8739ae039($3668e405225021ed$export$2e2bcd8739ae039,2);function $79b73215b289181c$export$2e2bcd8739ae039(e,t,n){t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n);for(var i,r=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),s=0,a=r.length;s<a;s++)if(t(e[i=r[s]],i,e))return i}function $e04e7205f71f5f02$export$2e2bcd8739ae039(e){return function(t,n,i){n=$b79b3fe14fe37daf$export$2e2bcd8739ae039(n,i);for(var r=$d9552e9372db9187$export$2e2bcd8739ae039(t),s=e>0?0:r-1;s>=0&&s<r;s+=e)if(n(t[s],s,t))return s;return -1}}var $8f47a544aeb08a7e$export$2e2bcd8739ae039=$e04e7205f71f5f02$export$2e2bcd8739ae039(1),$3ae5e429277e4694$export$2e2bcd8739ae039=$e04e7205f71f5f02$export$2e2bcd8739ae039(-1);function $062e5c7017ea1c58$export$2e2bcd8739ae039(e,t,n,i){for(var r=(n=$b79b3fe14fe37daf$export$2e2bcd8739ae039(n,i,1))(t),s=0,a=$d9552e9372db9187$export$2e2bcd8739ae039(e);s<a;){var o=Math.floor((s+a)/2);n(e[o])<r?s=o+1:a=o}return s}function $d27d9875f79d1e0d$export$2e2bcd8739ae039(e,t,n){return function(i,r,s){var a=0,o=$d9552e9372db9187$export$2e2bcd8739ae039(i);if("number"==typeof s)e>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(n&&s&&o)return s=n(i,r),i[s]===r?s:-1;if(r!=r)return(s=t($2d63c72f11d36dd8$export$58adb3bec8346d0f.call(i,a,o),$5a968955ec4f3425$export$2e2bcd8739ae039))>=0?s+a:-1;for(s=e>0?a:o-1;s>=0&&s<o;s+=e)if(i[s]===r)return s;return -1}}var $76649ff64c4c112d$export$2e2bcd8739ae039=$d27d9875f79d1e0d$export$2e2bcd8739ae039(1,$8f47a544aeb08a7e$export$2e2bcd8739ae039,$062e5c7017ea1c58$export$2e2bcd8739ae039),$46b6a951c1416c2e$export$2e2bcd8739ae039=$d27d9875f79d1e0d$export$2e2bcd8739ae039(-1,$3ae5e429277e4694$export$2e2bcd8739ae039);function $a3b993f50683293a$export$2e2bcd8739ae039(e,t,n){var i=($35c020f3a261c5a1$export$2e2bcd8739ae039(e)?$8f47a544aeb08a7e$export$2e2bcd8739ae039:$79b73215b289181c$export$2e2bcd8739ae039)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function $f424b3ff2217dd6e$export$2e2bcd8739ae039(e,t){return $a3b993f50683293a$export$2e2bcd8739ae039(e,$d488ba5b1a5b1ffd$export$2e2bcd8739ae039(t))}function $b995362b61cbe134$export$2e2bcd8739ae039(e,t,n){if(t=$f32aac1c6eda188b$export$2e2bcd8739ae039(t,n),$35c020f3a261c5a1$export$2e2bcd8739ae039(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var i,r,s=$6fe7302bdcad38ac$export$2e2bcd8739ae039(e);for(i=0,r=s.length;i<r;i++)t(e[s[i]],s[i],e)}return e}function $c746756a67aa053b$export$2e2bcd8739ae039(e,t,n){t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n);for(var i=!$35c020f3a261c5a1$export$2e2bcd8739ae039(e)&&$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),r=(i||e).length,s=Array(r),a=0;a<r;a++){var o=i?i[a]:a;s[a]=t(e[o],o,e)}return s}function $06dd3c43740688f9$export$2e2bcd8739ae039(e){var t=function(t,n,i,r){var s=!$35c020f3a261c5a1$export$2e2bcd8739ae039(t)&&$6fe7302bdcad38ac$export$2e2bcd8739ae039(t),a=(s||t).length,o=e>0?0:a-1;for(r||(i=t[s?s[o]:o],o+=e);o>=0&&o<a;o+=e){var l=s?s[o]:o;i=n(i,t[l],l,t)}return i};return function(e,n,i,r){var s=arguments.length>=3;return t(e,$f32aac1c6eda188b$export$2e2bcd8739ae039(n,r,4),i,s)}}var $fbfad6943e87d98c$export$2e2bcd8739ae039=$06dd3c43740688f9$export$2e2bcd8739ae039(1),$6821e7cd1cda490c$export$2e2bcd8739ae039=$06dd3c43740688f9$export$2e2bcd8739ae039(-1);function $3cab01f560c3a138$export$2e2bcd8739ae039(e,t,n){var i=[];return t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n),$b995362b61cbe134$export$2e2bcd8739ae039(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i}function $88d462cd31dad735$export$2e2bcd8739ae039(e,t,n){return $3cab01f560c3a138$export$2e2bcd8739ae039(e,$4d454b4b64719993$export$2e2bcd8739ae039($b79b3fe14fe37daf$export$2e2bcd8739ae039(t)),n)}function $1ed12610b787b54c$export$2e2bcd8739ae039(e,t,n){t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n);for(var i=!$35c020f3a261c5a1$export$2e2bcd8739ae039(e)&&$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(!t(e[a],a,e))return!1}return!0}function $1f6dd4637b6de52e$export$2e2bcd8739ae039(e,t,n){t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n);for(var i=!$35c020f3a261c5a1$export$2e2bcd8739ae039(e)&&$6fe7302bdcad38ac$export$2e2bcd8739ae039(e),r=(i||e).length,s=0;s<r;s++){var a=i?i[s]:s;if(t(e[a],a,e))return!0}return!1}function $47db385fda09988c$export$2e2bcd8739ae039(e,t,n,i){return $35c020f3a261c5a1$export$2e2bcd8739ae039(e)||(e=$ebb4fbd725ae82a0$export$2e2bcd8739ae039(e)),("number"!=typeof n||i)&&(n=0),$76649ff64c4c112d$export$2e2bcd8739ae039(e,t,n)>=0}var $1b37fa5b86fe2986$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t,n){var i,r;return $ecd89179b736cddb$export$2e2bcd8739ae039(t)?r=t:(i=(t=$910c0dff4ed1facf$export$2e2bcd8739ae039(t)).slice(0,-1),t=t[t.length-1]),$c746756a67aa053b$export$2e2bcd8739ae039(e,function(e){var s=r;if(!s){if(i&&i.length&&(e=$6df0b60a061e6090$export$2e2bcd8739ae039(e,i)),null==e)return;s=e[t]}return null==s?s:s.apply(e,n)})});function $64b7e156b18644d0$export$2e2bcd8739ae039(e,t){return $c746756a67aa053b$export$2e2bcd8739ae039(e,$bcea3364d1615dfa$export$2e2bcd8739ae039(t))}function $4a123abd524cfc92$export$2e2bcd8739ae039(e,t){return $3cab01f560c3a138$export$2e2bcd8739ae039(e,$d488ba5b1a5b1ffd$export$2e2bcd8739ae039(t))}function $f1fcbb9a3e80ebe3$export$2e2bcd8739ae039(e,t,n){var i,r,s=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=$35c020f3a261c5a1$export$2e2bcd8739ae039(e)?e:$ebb4fbd725ae82a0$export$2e2bcd8739ae039(e);for(var o=0,l=e.length;o<l;o++)null!=(i=e[o])&&i>s&&(s=i)}else t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n),$b995362b61cbe134$export$2e2bcd8739ae039(e,function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&s===-1/0)&&(s=e,a=r)});return s}function $f4b1abaac39e8250$export$2e2bcd8739ae039(e,t,n){var i,r,s=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=$35c020f3a261c5a1$export$2e2bcd8739ae039(e)?e:$ebb4fbd725ae82a0$export$2e2bcd8739ae039(e);for(var o=0,l=e.length;o<l;o++)null!=(i=e[o])&&i<s&&(s=i)}else t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n),$b995362b61cbe134$export$2e2bcd8739ae039(e,function(e,n,i){((r=t(e,n,i))<a||r===1/0&&s===1/0)&&(s=e,a=r)});return s}var $af549ed737dbc31a$var$reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function $af549ed737dbc31a$export$2e2bcd8739ae039(e){return e?$f9e6c041730fdb31$export$2e2bcd8739ae039(e)?$2d63c72f11d36dd8$export$58adb3bec8346d0f.call(e):$c60f1c14f06acd60$export$2e2bcd8739ae039(e)?e.match($af549ed737dbc31a$var$reStrSymbol):$35c020f3a261c5a1$export$2e2bcd8739ae039(e)?$c746756a67aa053b$export$2e2bcd8739ae039(e,$34b5571162c34d5a$export$2e2bcd8739ae039):$ebb4fbd725ae82a0$export$2e2bcd8739ae039(e):[]}function $006c92d573cf9580$export$2e2bcd8739ae039(e,t,n){if(null==t||n)return $35c020f3a261c5a1$export$2e2bcd8739ae039(e)||(e=$ebb4fbd725ae82a0$export$2e2bcd8739ae039(e)),e[$f9cdebf5ce2af7ea$export$2e2bcd8739ae039(e.length-1)];var i=$af549ed737dbc31a$export$2e2bcd8739ae039(e),r=$d9552e9372db9187$export$2e2bcd8739ae039(i);t=Math.max(Math.min(t,r),0);for(var s=r-1,a=0;a<t;a++){var o=$f9cdebf5ce2af7ea$export$2e2bcd8739ae039(a,s),l=i[a];i[a]=i[o],i[o]=l}return i.slice(0,t)}function $126b00d4f3d6622f$export$2e2bcd8739ae039(e){return $006c92d573cf9580$export$2e2bcd8739ae039(e,1/0)}function $764739bcb0503f2e$export$2e2bcd8739ae039(e,t,n){var i=0;return t=$b79b3fe14fe37daf$export$2e2bcd8739ae039(t,n),$64b7e156b18644d0$export$2e2bcd8739ae039($c746756a67aa053b$export$2e2bcd8739ae039(e,function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return -1}return e.index-t.index}),"value")}function $884dddfcebade919$export$2e2bcd8739ae039(e,t){return function(n,i,r){var s=t?[[],[]]:{};return i=$b79b3fe14fe37daf$export$2e2bcd8739ae039(i,r),$b995362b61cbe134$export$2e2bcd8739ae039(n,function(t,r){var a=i(t,r,n);e(s,t,a)}),s}}var $fb9e1d043a6fe792$export$2e2bcd8739ae039=$884dddfcebade919$export$2e2bcd8739ae039(function(e,t,n){$39edb832e07faa22$export$2e2bcd8739ae039(e,n)?e[n].push(t):e[n]=[t]}),$ac54a1aed9ba8a72$export$2e2bcd8739ae039=$884dddfcebade919$export$2e2bcd8739ae039(function(e,t,n){e[n]=t}),$85ce7e736ff1427c$export$2e2bcd8739ae039=$884dddfcebade919$export$2e2bcd8739ae039(function(e,t,n){$39edb832e07faa22$export$2e2bcd8739ae039(e,n)?e[n]++:e[n]=1}),$1c3202b1cbae054a$export$2e2bcd8739ae039=$884dddfcebade919$export$2e2bcd8739ae039(function(e,t,n){e[n?0:1].push(t)},!0);function $c1f52b9a7c4ef91e$export$2e2bcd8739ae039(e){return null==e?0:$35c020f3a261c5a1$export$2e2bcd8739ae039(e)?e.length:$6fe7302bdcad38ac$export$2e2bcd8739ae039(e).length}function $d175c33d901c7d33$export$2e2bcd8739ae039(e,t,n){return t in n}var $3676c3d07a7362ef$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){var n={},i=t[0];if(null==e)return n;$ecd89179b736cddb$export$2e2bcd8739ae039(i)?(t.length>1&&(i=$f32aac1c6eda188b$export$2e2bcd8739ae039(i,t[1])),t=$76c102325be5f353$export$2e2bcd8739ae039(e)):(i=$d175c33d901c7d33$export$2e2bcd8739ae039,t=$65a64d9b8854b61f$export$2e2bcd8739ae039(t,!1,!1),e=Object(e));for(var r=0,s=t.length;r<s;r++){var a=t[r],o=e[a];i(o,a,e)&&(n[a]=o)}return n}),$9ba5eff4e454bc2e$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){var n,i=t[0];return $ecd89179b736cddb$export$2e2bcd8739ae039(i)?(i=$4d454b4b64719993$export$2e2bcd8739ae039(i),t.length>1&&(n=t[1])):(t=$c746756a67aa053b$export$2e2bcd8739ae039($65a64d9b8854b61f$export$2e2bcd8739ae039(t,!1,!1),String),i=function(e,n){return!$47db385fda09988c$export$2e2bcd8739ae039(t,n)}),$3676c3d07a7362ef$export$2e2bcd8739ae039(e,i,n)});function $d0de77978a68d9ea$export$2e2bcd8739ae039(e,t,n){return $2d63c72f11d36dd8$export$58adb3bec8346d0f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function $4584a922b20bbe9b$export$2e2bcd8739ae039(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:$d0de77978a68d9ea$export$2e2bcd8739ae039(e,e.length-t)}function $4b067ce637fc54a6$export$2e2bcd8739ae039(e,t,n){return $2d63c72f11d36dd8$export$58adb3bec8346d0f.call(e,null==t||n?1:t)}function $5ea6e92bed107ca3$export$2e2bcd8739ae039(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:$4b067ce637fc54a6$export$2e2bcd8739ae039(e,Math.max(0,e.length-t))}function $5fa8fc2d5a95b6b3$export$2e2bcd8739ae039(e){return $3cab01f560c3a138$export$2e2bcd8739ae039(e,Boolean)}function $23786b176608059b$export$2e2bcd8739ae039(e,t){return $65a64d9b8854b61f$export$2e2bcd8739ae039(e,t,!1)}var $ef37b923cabd07c5$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){return t=$65a64d9b8854b61f$export$2e2bcd8739ae039(t,!0,!0),$3cab01f560c3a138$export$2e2bcd8739ae039(e,function(e){return!$47db385fda09988c$export$2e2bcd8739ae039(t,e)})}),$d1923ce94a67b9a2$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e,t){return $ef37b923cabd07c5$export$2e2bcd8739ae039(e,t)});function $f0bec29b96d47a33$export$2e2bcd8739ae039(e,t,n,i){$5394bc2f01152bbc$export$2e2bcd8739ae039(t)||(i=n,n=t,t=!1),null!=n&&(n=$b79b3fe14fe37daf$export$2e2bcd8739ae039(n,i));for(var r=[],s=[],a=0,o=$d9552e9372db9187$export$2e2bcd8739ae039(e);a<o;a++){var l=e[a],u=n?n(l,a,e):l;t&&!n?(a&&s===u||r.push(l),s=u):n?$47db385fda09988c$export$2e2bcd8739ae039(s,u)||(s.push(u),r.push(l)):$47db385fda09988c$export$2e2bcd8739ae039(r,l)||r.push(l)}return r}var $4cbad72dc0b3402b$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039(function(e){return $f0bec29b96d47a33$export$2e2bcd8739ae039($65a64d9b8854b61f$export$2e2bcd8739ae039(e,!0,!0))});function $640ee3b4c6854636$export$2e2bcd8739ae039(e){for(var t=[],n=arguments.length,i=0,r=$d9552e9372db9187$export$2e2bcd8739ae039(e);i<r;i++){var s,a=e[i];if(!$47db385fda09988c$export$2e2bcd8739ae039(t,a)){for(s=1;s<n&&$47db385fda09988c$export$2e2bcd8739ae039(arguments[s],a);s++);s===n&&t.push(a)}}return t}function $e787e451ed8ddde4$export$2e2bcd8739ae039(e){for(var t=e&&$f1fcbb9a3e80ebe3$export$2e2bcd8739ae039(e,$d9552e9372db9187$export$2e2bcd8739ae039).length||0,n=Array(t),i=0;i<t;i++)n[i]=$64b7e156b18644d0$export$2e2bcd8739ae039(e,i);return n}var $fe0814bdf6654e7d$export$2e2bcd8739ae039=$00091338bb34561a$export$2e2bcd8739ae039($e787e451ed8ddde4$export$2e2bcd8739ae039);function $9a9112ffd6f5d502$export$2e2bcd8739ae039(e,t){for(var n={},i=0,r=$d9552e9372db9187$export$2e2bcd8739ae039(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function $6fbcf963c33899f9$export$2e2bcd8739ae039(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),s=0;s<i;s++,e+=n)r[s]=e;return r}function $6cd4738b38ff6a08$export$2e2bcd8739ae039(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push($2d63c72f11d36dd8$export$58adb3bec8346d0f.call(e,i,i+=t));return n}function $be79f7cccb5c97d6$export$2e2bcd8739ae039(e,t){return e._chain?$51828dc883981eb1$export$2e2bcd8739ae039(t).chain():t}function $add98ab171b98313$export$2e2bcd8739ae039(e){return $b995362b61cbe134$export$2e2bcd8739ae039($7e9662b114b4a099$export$2e2bcd8739ae039(e),function(t){var n=$51828dc883981eb1$export$2e2bcd8739ae039[t]=e[t];$51828dc883981eb1$export$2e2bcd8739ae039.prototype[t]=function(){var e=[this._wrapped];return $2d63c72f11d36dd8$export$4cbf152802aa238.apply(e,arguments),$be79f7cccb5c97d6$export$2e2bcd8739ae039(this,n.apply($51828dc883981eb1$export$2e2bcd8739ae039,e))}}),$51828dc883981eb1$export$2e2bcd8739ae039}$b995362b61cbe134$export$2e2bcd8739ae039(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=$2d63c72f11d36dd8$export$aabeece9448a227a[e];$51828dc883981eb1$export$2e2bcd8739ae039.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),("shift"===e||"splice"===e)&&0===n.length&&delete n[0]),$be79f7cccb5c97d6$export$2e2bcd8739ae039(this,n)}}),$b995362b61cbe134$export$2e2bcd8739ae039(["concat","join","slice"],function(e){var t=$2d63c72f11d36dd8$export$aabeece9448a227a[e];$51828dc883981eb1$export$2e2bcd8739ae039.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),$be79f7cccb5c97d6$export$2e2bcd8739ae039(this,e)}});var $a0b73385c05e176b$export$2e2bcd8739ae039=$51828dc883981eb1$export$2e2bcd8739ae039,$bab366cf4ee55a65$var$_=$add98ab171b98313$export$2e2bcd8739ae039($aff2018c308031aa$exports);$bab366cf4ee55a65$var$_._=$bab366cf4ee55a65$var$_,$c885ef874cf44bbc$var$MiniSat=function(){var e=this._C=$5XX9r();this._native={getStackPointer:function(){return e.Runtime.stackSave()},setStackPointer:function(t){e.Runtime.stackRestore(t)},allocateBytes:function(t){return e.allocate(t,"i8",e.ALLOC_STACK)},pushString:function(t){return this.allocateBytes(e.intArrayFromString(t))},savingStack:function(t){var n=this.getStackPointer();try{return t(this,e)}finally{this.setStackPointer(n)}}},e._createTheSolver(),this._clauses=[]},$c885ef874cf44bbc$var$MiniSat.prototype.ensureVar=function(e){this._C._ensureVar(e)},$c885ef874cf44bbc$var$MiniSat.prototype.addClause=function(e){return this._clauses.push(e),this._native.savingStack(function(t,n){var i=n.allocate((e.length+1)*4,"i32",n.ALLOC_STACK);return $b995362b61cbe134$export$2e2bcd8739ae039(e,function(e,t){n.setValue(i+4*t,e,"i32")}),n.setValue(i+4*e.length,0,"i32"),!!n._addClause(i)})},$c885ef874cf44bbc$var$MiniSat.prototype.solve=function(){return!!this._C._solve()},$c885ef874cf44bbc$var$MiniSat.prototype.solveAssuming=function(e){return!!this._C._solveAssuming(e)},$c885ef874cf44bbc$var$MiniSat.prototype.getSolution=function(){for(var e=[null],t=this._C,n=t._getNumVars(),i=t._getSolution(),r=0;r<n;r++)e[r+1]=0===t.getValue(i+r,"i8");return e},$c885ef874cf44bbc$var$MiniSat.prototype.retireVar=function(e){this._C._retireVar(e)},$c885ef874cf44bbc$var$MiniSat.prototype.getConflictClause=function(){for(var e=this._C,t=e._getConflictClauseSize(),n=e._getConflictClause(),i=[],r=0;r<t;r++){var s=e.getValue(n+4*r,"i32"),a=s>>>1,o=1&s?-1:1;i[r]=a*o}return i},$c885ef874cf44bbc$exports=$c885ef874cf44bbc$var$MiniSat,$f2e274ef11f87062$var$Logic={};var $f2e274ef11f87062$var$withDescription=function(e,t){return t.description=e,t},$f2e274ef11f87062$var$lazyInstanceofTester=function(e,t,n){return $f2e274ef11f87062$var$withDescription(e,function(e){return e instanceof t[n]})};$f2e274ef11f87062$var$Logic.isNumTerm=$f2e274ef11f87062$var$withDescription("a NumTerm (non-zero integer)",function(e){return e===(0|e)&&0!==e}),$f2e274ef11f87062$var$Logic.isNameTerm=$f2e274ef11f87062$var$withDescription("a NameTerm (string)",function(e){return"string"==typeof e&&!/^-*[0-9]*$/.test(e)}),$f2e274ef11f87062$var$Logic.isTerm=$f2e274ef11f87062$var$withDescription("a Term (appropriate string or number)",function(e){return $f2e274ef11f87062$var$Logic.isNumTerm(e)||$f2e274ef11f87062$var$Logic.isNameTerm(e)}),$f2e274ef11f87062$var$Logic.isWholeNumber=$f2e274ef11f87062$var$withDescription("a whole number (integer >= 0)",function(e){return e===(0|e)&&e>=0}),$f2e274ef11f87062$var$Logic.isFormula=$f2e274ef11f87062$var$lazyInstanceofTester("a Formula",$f2e274ef11f87062$var$Logic,"Formula"),$f2e274ef11f87062$var$Logic.isClause=$f2e274ef11f87062$var$lazyInstanceofTester("a Clause",$f2e274ef11f87062$var$Logic,"Clause"),$f2e274ef11f87062$var$Logic.isBits=$f2e274ef11f87062$var$lazyInstanceofTester("a Bits",$f2e274ef11f87062$var$Logic,"Bits"),$f2e274ef11f87062$var$Logic._isInteger=$f2e274ef11f87062$var$withDescription("an integer",function(e){return e===(0|e)}),$f2e274ef11f87062$var$Logic._isFunction=$f2e274ef11f87062$var$withDescription("a Function",function(e){return"function"==typeof e}),$f2e274ef11f87062$var$Logic._isString=$f2e274ef11f87062$var$withDescription("a String",function(e){return"string"==typeof e}),$f2e274ef11f87062$var$Logic._isArrayWhere=function(e){var t="an array";return e.description&&(t+=" of "+e.description),$f2e274ef11f87062$var$withDescription(t,function(t){if(!$f9e6c041730fdb31$export$2e2bcd8739ae039(t))return!1;for(var n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0})},$f2e274ef11f87062$var$Logic._isFormulaOrTerm=$f2e274ef11f87062$var$withDescription("a Formula or Term",function(e){return $f2e274ef11f87062$var$Logic.isFormula(e)||$f2e274ef11f87062$var$Logic.isTerm(e)}),$f2e274ef11f87062$var$Logic._isFormulaOrTermOrBits=$f2e274ef11f87062$var$withDescription("a Formula, Term, or Bits",function(e){return $f2e274ef11f87062$var$Logic.isFormula(e)||$f2e274ef11f87062$var$Logic.isBits(e)||$f2e274ef11f87062$var$Logic.isTerm(e)}),$f2e274ef11f87062$var$Logic._MiniSat=$c885ef874cf44bbc$exports;var $f2e274ef11f87062$var$isInteger=$f2e274ef11f87062$var$Logic._isInteger,$f2e274ef11f87062$var$isFunction=$f2e274ef11f87062$var$Logic._isFunction,$f2e274ef11f87062$var$isString=$f2e274ef11f87062$var$Logic._isString,$f2e274ef11f87062$var$isArrayWhere=$f2e274ef11f87062$var$Logic._isArrayWhere,$f2e274ef11f87062$var$isFormulaOrTerm=$f2e274ef11f87062$var$Logic._isFormulaOrTerm,$f2e274ef11f87062$var$isFormulaOrTermOrBits=$f2e274ef11f87062$var$Logic._isFormulaOrTermOrBits;$f2e274ef11f87062$var$Logic._assert=function(e,t,n){if(!t(e))throw Error(("string"==typeof e?JSON.stringify(e):e)+" is not "+(t.description||n))};var $f2e274ef11f87062$var$assertNumArgs=function(e,t,n){if(e!==t)throw Error("Expected "+t+" args in "+n+", got "+e)},$f2e274ef11f87062$var$assert=$f2e274ef11f87062$var$Logic._assert;$f2e274ef11f87062$var$Logic._assertIfEnabled=function(e,t,n){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,t,n)},$f2e274ef11f87062$var$Logic.disablingAssertions=function(e){var t=$f2e274ef11f87062$var$assert;try{return $f2e274ef11f87062$var$assert=null,e()}finally{$f2e274ef11f87062$var$assert=t}},$f2e274ef11f87062$var$Logic._disablingTypeChecks=$f2e274ef11f87062$var$Logic.disablingAssertions,$f2e274ef11f87062$var$Logic.not=function(e){return($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),e instanceof $f2e274ef11f87062$var$Logic.Formula)?new $f2e274ef11f87062$var$Logic.NotFormula(e):"number"==typeof e?-e:"-"===e.charAt(0)?e.slice(1):"-"+e},$f2e274ef11f87062$var$Logic.NAME_FALSE="$F",$f2e274ef11f87062$var$Logic.NAME_TRUE="$T",$f2e274ef11f87062$var$Logic.NUM_FALSE=1,$f2e274ef11f87062$var$Logic.NUM_TRUE=2,$f2e274ef11f87062$var$Logic.TRUE=$f2e274ef11f87062$var$Logic.NAME_TRUE,$f2e274ef11f87062$var$Logic.FALSE=$f2e274ef11f87062$var$Logic.NAME_FALSE,$f2e274ef11f87062$var$Logic.Formula=function(){},$f2e274ef11f87062$var$Logic._defineFormula=function(e,t,n){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFunction),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isString),e.prototype=new $f2e274ef11f87062$var$Logic.Formula,e.prototype.type=t,n&&$cd665a7b16f49314$export$2e2bcd8739ae039(e.prototype,n)},$f2e274ef11f87062$var$Logic.Formula.prototype.generateClauses=function(e,t){throw Error("Cannot generate this Formula; it must be expanded")},$f2e274ef11f87062$var$Logic.Formula._nextGuid=1,$f2e274ef11f87062$var$Logic.Formula.prototype._guid=null,$f2e274ef11f87062$var$Logic.Formula.prototype.guid=function(){return null===this._guid&&(this._guid=$f2e274ef11f87062$var$Logic.Formula._nextGuid++),this._guid},$f2e274ef11f87062$var$Logic.Clause=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$Logic.isNumTerm)),this.terms=e},$f2e274ef11f87062$var$Logic.Clause.prototype.append=function(){return new $f2e274ef11f87062$var$Logic.Clause(this.terms.concat($23786b176608059b$export$2e2bcd8739ae039(arguments)))};var $f2e274ef11f87062$var$FormulaInfo=function(){this.varName=null,this.varNum=null,this.occursPositively=!1,this.occursNegatively=!1,this.isRequired=!1,this.isForbidden=!1};$f2e274ef11f87062$var$Logic.Termifier=function(e){this.solver=e},$f2e274ef11f87062$var$Logic.Termifier.prototype.clause=function(){var e=this,t=$23786b176608059b$export$2e2bcd8739ae039(arguments);return $f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),new $f2e274ef11f87062$var$Logic.Clause($c746756a67aa053b$export$2e2bcd8739ae039(t,function(t){return e.term(t)}))},$f2e274ef11f87062$var$Logic.Termifier.prototype.term=function(e){return this.solver._formulaToTerm(e)},$f2e274ef11f87062$var$Logic.Termifier.prototype.generate=function(e,t){return this.solver._generateFormula(e,t,this)},$f2e274ef11f87062$var$Logic.Solver=function(){var e=this;e.clauses=[],e._num2name=[null],e._name2num={};var t=e.getVarNum($f2e274ef11f87062$var$Logic.NAME_FALSE,!1,!0),n=e.getVarNum($f2e274ef11f87062$var$Logic.NAME_TRUE,!1,!0);if(t!==$f2e274ef11f87062$var$Logic.NUM_FALSE||n!==$f2e274ef11f87062$var$Logic.NUM_TRUE)throw Error("Assertion failure: $T and $F have wrong numeric value");e._F_used=!1,e._T_used=!1,e.clauses.push(new $f2e274ef11f87062$var$Logic.Clause(-$f2e274ef11f87062$var$Logic.NUM_FALSE)),e.clauses.push(new $f2e274ef11f87062$var$Logic.Clause($f2e274ef11f87062$var$Logic.NUM_TRUE)),e._formulaInfo={},e._nextFormulaNumByType={},e._ungeneratedFormulas={},e._numClausesAddedToMiniSat=0,e._unsat=!1,e._minisat=new $c885ef874cf44bbc$exports,e._termifier=new $f2e274ef11f87062$var$Logic.Termifier(e)},$f2e274ef11f87062$var$Logic.Solver.prototype.getVarNum=function(e,t,n){var i=" "+e;if($4fb312c1270006dd$export$2e2bcd8739ae039(this._name2num,i))return this._name2num[i];if(t)return 0;if("$"===e.charAt(0)&&!n)throw Error("Only generated variable names can start with $");var r=this._num2name.length;return this._name2num[i]=r,this._num2name.push(e),r},$f2e274ef11f87062$var$Logic.Solver.prototype.getVarName=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isInteger);var t=this._num2name;if(!(e<1)&&!(e>=t.length))return t[e];throw Error("Bad variable num: "+e)},$f2e274ef11f87062$var$Logic.Solver.prototype.toNumTerm=function(e,t){var n=this;if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isTerm),"number"==typeof e)return e;for(var i=!1;"-"===e.charAt(0);)e=e.slice(1),i=!i;var r=n.getVarNum(e,t);return r?i?-r:r:0},$f2e274ef11f87062$var$Logic.Solver.prototype.toNameTerm=function(e){var t=this;if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isTerm),"string"==typeof e){for(;"--"===e.slice(0,2);)e=e.slice(2);return e}var n=!1;return e<0&&(n=!0,e=-e),e=t.getVarName(e),n&&(e="-"+e),e},$f2e274ef11f87062$var$Logic.Solver.prototype._addClause=function(e,t,n){var i=this;$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isClause);var r=null;t&&(r=t,$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(r,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$Logic.isNumTerm)));var s=!1,a=!1,o=e.terms.length;r&&(e=e.append(r));for(var l=0;l<e.terms.length;l++){var u=e.terms[l],c=u<0?-u:u;if(c===$f2e274ef11f87062$var$Logic.NUM_FALSE)s=!0;else if(c===$f2e274ef11f87062$var$Logic.NUM_TRUE)a=!0;else if(c<1||c>=i._num2name.length)throw Error("Bad variable number: "+c);else l<o&&(n?n(u):i._useFormulaTerm(u))}this._F_used=this._F_used||s,this._T_used=this._T_used||a,this.clauses.push(e)},$f2e274ef11f87062$var$Logic.Solver.prototype._useFormulaTerm=function(e,t){var n,i=this;$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isNumTerm);var r=e<0?-e:e;if($4fb312c1270006dd$export$2e2bcd8739ae039(i._ungeneratedFormulas,r)){var s=i._ungeneratedFormulas[r],a=i._getFormulaInfo(s),o=e>0,l=null;if(t?n=t:(l=[],n=function(e,t){l.push({clauses:e,extraTerms:t})}),o&&!a.occursPositively){a.occursPositively=!0;var u=i._generateFormula(!0,s);n(u,[-r])}else if(!o&&!a.occursNegatively){a.occursNegatively=!0;var u=i._generateFormula(!1,s);n(u,[r])}if(a.occursPositively&&a.occursNegatively&&delete i._ungeneratedFormulas[r],l&&l.length)for(var c=function(e){i._useFormulaTerm(e,n)};l.length;){var h=l.pop();i._addClauses(h.clauses,h.extraTerms,c)}}},$f2e274ef11f87062$var$Logic.Solver.prototype._addClauses=function(e,t,n){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$Logic.isClause));var i=this;$b995362b61cbe134$export$2e2bcd8739ae039(e,function(e){i._addClause(e,t,n)})},$f2e274ef11f87062$var$Logic.Solver.prototype.require=function(){this._requireForbidImpl(!0,$23786b176608059b$export$2e2bcd8739ae039(arguments))},$f2e274ef11f87062$var$Logic.Solver.prototype.forbid=function(){this._requireForbidImpl(!1,$23786b176608059b$export$2e2bcd8739ae039(arguments))},$f2e274ef11f87062$var$Logic.Solver.prototype._requireForbidImpl=function(e,t){var n=this;$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),$b995362b61cbe134$export$2e2bcd8739ae039(t,function(t){if(t instanceof $f2e274ef11f87062$var$Logic.NotFormula)n._requireForbidImpl(!e,[t.operand]);else if(t instanceof $f2e274ef11f87062$var$Logic.Formula){var i=n._getFormulaInfo(t);if(null!==i.varNum){var r=e?1:-1;n._addClause(new $f2e274ef11f87062$var$Logic.Clause(r*i.varNum))}else n._addClauses(n._generateFormula(e,t));e?i.isRequired=!0:i.isForbidden=!0}else n._addClauses(n._generateFormula(e,t))})},$f2e274ef11f87062$var$Logic.Solver.prototype._generateFormula=function(e,t,n){var i=this;if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),t instanceof $f2e274ef11f87062$var$Logic.NotFormula)return i._generateFormula(!e,t.operand);if(t instanceof $f2e274ef11f87062$var$Logic.Formula){var r=i._getFormulaInfo(t);if(e&&r.isRequired||!e&&r.isForbidden)return[];if(e&&r.isForbidden||!e&&r.isRequired)return[new $f2e274ef11f87062$var$Logic.Clause];var s=t.generateClauses(e,n||i._termifier);return $f9e6c041730fdb31$export$2e2bcd8739ae039(s)?s:[s]}var a=i.toNumTerm(t),o=e?1:-1;return a===o*$f2e274ef11f87062$var$Logic.NUM_TRUE||a===-o*$f2e274ef11f87062$var$Logic.NUM_FALSE?[]:a===o*$f2e274ef11f87062$var$Logic.NUM_FALSE||a===-o*$f2e274ef11f87062$var$Logic.NUM_TRUE?[new $f2e274ef11f87062$var$Logic.Clause]:[new $f2e274ef11f87062$var$Logic.Clause(o*a)]},$f2e274ef11f87062$var$Logic.Solver.prototype._clauseData=function(){var e=$64b7e156b18644d0$export$2e2bcd8739ae039(this.clauses,"terms");return this._T_used||e.splice(1,1),this._F_used||e.splice(0,1),e},$f2e274ef11f87062$var$Logic.Solver.prototype._clauseStrings=function(){var e=this;return $c746756a67aa053b$export$2e2bcd8739ae039(e._clauseData(),function(t){return $c746756a67aa053b$export$2e2bcd8739ae039(t,function(t){var n=e.toNameTerm(t);if(/\s/.test(n)){var i="";"-"===n.charAt(0)&&(i="-",n=n.slice(1)),n=i+'"'+n+'"'}return n}).join(" v ")})},$f2e274ef11f87062$var$Logic.Solver.prototype._getFormulaInfo=function(e,t){var n=this,i=e.guid();if(!n._formulaInfo[i]){if(t)return null;n._formulaInfo[i]=new $f2e274ef11f87062$var$FormulaInfo}return n._formulaInfo[i]},$f2e274ef11f87062$var$Logic.Solver.prototype._formulaToTerm=function(e){var t=this;if($f9e6c041730fdb31$export$2e2bcd8739ae039(e))return $f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),$c746756a67aa053b$export$2e2bcd8739ae039(e,$9b82ce32b9f64f95$export$2e2bcd8739ae039(t._formulaToTerm,t));if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),e instanceof $f2e274ef11f87062$var$Logic.NotFormula)return $f2e274ef11f87062$var$Logic.not(t._formulaToTerm(e.operand));if(!(e instanceof $f2e274ef11f87062$var$Logic.Formula))return t.toNumTerm(e);var n=this._getFormulaInfo(e);if(n.isRequired)return $f2e274ef11f87062$var$Logic.NUM_TRUE;if(n.isForbidden)return $f2e274ef11f87062$var$Logic.NUM_FALSE;if(null===n.varNum){var i=e.type;this._nextFormulaNumByType[i]||(this._nextFormulaNumByType[i]=1);var r=this._nextFormulaNumByType[i]++;n.varName="$"+e.type+r,n.varNum=this.getVarNum(n.varName,!1,!0),this._ungeneratedFormulas[n.varNum]=e}return n.varNum},$f2e274ef11f87062$var$Logic.or=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);return 0===e.length?$f2e274ef11f87062$var$Logic.FALSE:1===e.length?($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e[0],$f2e274ef11f87062$var$isFormulaOrTerm),e[0]):new $f2e274ef11f87062$var$Logic.OrFormula(e)},$f2e274ef11f87062$var$Logic.OrFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.operands=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.OrFormula,"or",{generateClauses:function(e,t){if(e)return t.clause(this.operands);var n=[];return $b995362b61cbe134$export$2e2bcd8739ae039(this.operands,function(e){n.push.apply(n,t.generate(!1,e))}),n}}),$f2e274ef11f87062$var$Logic.NotFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),this.operand=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.NotFormula,"not"),$f2e274ef11f87062$var$Logic.and=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);return 0===e.length?$f2e274ef11f87062$var$Logic.TRUE:1===e.length?($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e[0],$f2e274ef11f87062$var$isFormulaOrTerm),e[0]):new $f2e274ef11f87062$var$Logic.AndFormula(e)},$f2e274ef11f87062$var$Logic.AndFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.operands=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.AndFormula,"and",{generateClauses:function(e,t){if(!e)return t.clause($c746756a67aa053b$export$2e2bcd8739ae039(this.operands,$f2e274ef11f87062$var$Logic.not));var n=[];return $b995362b61cbe134$export$2e2bcd8739ae039(this.operands,function(e){n.push.apply(n,t.generate(!0,e))}),n}});var $f2e274ef11f87062$var$group=function(e,t){for(var n=[],i=0;i<e.length;i+=t)n.push(e.slice(i,i+t));return n};$f2e274ef11f87062$var$Logic.xor=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);return 0===e.length?$f2e274ef11f87062$var$Logic.FALSE:1===e.length?($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e[0],$f2e274ef11f87062$var$isFormulaOrTerm),e[0]):new $f2e274ef11f87062$var$Logic.XorFormula(e)},$f2e274ef11f87062$var$Logic.XorFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.operands=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.XorFormula,"xor",{generateClauses:function(e,t){var n=this.operands,i=$f2e274ef11f87062$var$Logic.not;if(n.length>3)return t.generate(e,$f2e274ef11f87062$var$Logic.xor($c746756a67aa053b$export$2e2bcd8739ae039($f2e274ef11f87062$var$group(this.operands,3),function(e){return $f2e274ef11f87062$var$Logic.xor(e)})));if(e){if(0===n.length)return t.clause();if(1===n.length)return t.clause(n[0]);if(2===n.length){var r=n[0],s=n[1];return[t.clause(r,s),t.clause(i(r),i(s))]}if(3===n.length){var r=n[0],s=n[1],a=n[2];return[t.clause(r,s,a),t.clause(r,i(s),i(a)),t.clause(i(r),s,i(a)),t.clause(i(r),i(s),a)]}}else{if(0===n.length)return[];if(1===n.length)return t.clause(i(n[0]));if(2===n.length){var r=n[0],s=n[1];return[t.clause(r,i(s)),t.clause(i(r),s)]}if(3===n.length){var r=n[0],s=n[1],a=n[2];return[t.clause(i(r),i(s),i(a)),t.clause(i(r),s,a),t.clause(r,i(s),a),t.clause(r,s,i(a))]}}}}),$f2e274ef11f87062$var$Logic.atMostOne=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);return e.length<=1?$f2e274ef11f87062$var$Logic.TRUE:new $f2e274ef11f87062$var$Logic.AtMostOneFormula(e)},$f2e274ef11f87062$var$Logic.AtMostOneFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.operands=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.AtMostOneFormula,"atMostOne",{generateClauses:function(e,t){var n=this.operands,i=$f2e274ef11f87062$var$Logic.not;if(n.length<=1)return[];if(2===n.length)return t.generate(e,$f2e274ef11f87062$var$Logic.not($f2e274ef11f87062$var$Logic.and(n)));if(e&&3===n.length){for(var r=[],s=0;s<n.length;s++)for(var a=s+1;a<n.length;a++)r.push(t.clause(i(n[s]),i(n[a])));return r}if(e||3!==n.length){var o=$f2e274ef11f87062$var$group(n,3),l=$c746756a67aa053b$export$2e2bcd8739ae039(o,function(e){return $f2e274ef11f87062$var$Logic.or(e)});o[o.length-1].length<2&&o.pop();var u=$c746756a67aa053b$export$2e2bcd8739ae039(o,function(e){return $f2e274ef11f87062$var$Logic.atMostOne(e)});return t.generate(e,$f2e274ef11f87062$var$Logic.and($f2e274ef11f87062$var$Logic.atMostOne(l),u))}var c=n[0],h=n[1],f=n[2];return[t.clause(c,h),t.clause(c,f),t.clause(h,f)]}}),$f2e274ef11f87062$var$Logic.implies=function(e,t){return $f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.implies"),new $f2e274ef11f87062$var$Logic.ImpliesFormula(e,t)},$f2e274ef11f87062$var$Logic.ImpliesFormula=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.implies"),this.A=e,this.B=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.ImpliesFormula,"implies",{generateClauses:function(e,t){return t.generate(e,$f2e274ef11f87062$var$Logic.or($f2e274ef11f87062$var$Logic.not(this.A),this.B))}}),$f2e274ef11f87062$var$Logic.equiv=function(e,t){return $f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.equiv"),new $f2e274ef11f87062$var$Logic.EquivFormula(e,t)},$f2e274ef11f87062$var$Logic.EquivFormula=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.equiv"),this.A=e,this.B=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.EquivFormula,"equiv",{generateClauses:function(e,t){return t.generate(!e,$f2e274ef11f87062$var$Logic.xor(this.A,this.B))}}),$f2e274ef11f87062$var$Logic.exactlyOne=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);return 0===e.length?$f2e274ef11f87062$var$Logic.FALSE:1===e.length?($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e[0],$f2e274ef11f87062$var$isFormulaOrTerm),e[0]):new $f2e274ef11f87062$var$Logic.ExactlyOneFormula(e)},$f2e274ef11f87062$var$Logic.ExactlyOneFormula=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.operands=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.ExactlyOneFormula,"exactlyOne",{generateClauses:function(e,t){var n=this.operands;return n.length<3?t.generate(e,$f2e274ef11f87062$var$Logic.xor(n)):t.generate(e,$f2e274ef11f87062$var$Logic.and($f2e274ef11f87062$var$Logic.atMostOne(n),$f2e274ef11f87062$var$Logic.or(n)))}}),$f2e274ef11f87062$var$Logic.Bits=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),this.bits=e},$f2e274ef11f87062$var$Logic.constantBits=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isWholeNumber);for(var t=[];e;)t.push(1&e?$f2e274ef11f87062$var$Logic.TRUE:$f2e274ef11f87062$var$Logic.FALSE),e>>>=1;return new $f2e274ef11f87062$var$Logic.Bits(t)},$f2e274ef11f87062$var$Logic.variableBits=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$Logic.isWholeNumber);for(var n=[],i=0;i<t;i++)n.push(e+"$"+i);return new $f2e274ef11f87062$var$Logic.Bits(n)},$f2e274ef11f87062$var$Logic.lessThanOrEqual=function(e,t){return new $f2e274ef11f87062$var$Logic.LessThanOrEqualFormula(e,t)},$f2e274ef11f87062$var$Logic.LessThanOrEqualFormula=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Bits comparison function"),this.bits1=e,this.bits2=t};var $f2e274ef11f87062$var$genLTE=function(e,t,n,i){var r=[],s=e.bits.slice(),a=t.bits.slice();if(i&&!t.bits.length)return n.clause();for(;s.length>a.length;){var o=s.pop();r.push(n.clause($f2e274ef11f87062$var$Logic.not(o)))}for(var l=$c746756a67aa053b$export$2e2bcd8739ae039(a,function(e,t){return t<s.length?$f2e274ef11f87062$var$Logic.xor(s[t],e):e}),u=s.length-1;u>=0;u--)r.push(n.clause(l.slice(u+1),$f2e274ef11f87062$var$Logic.not(s[u]),a[u]));return i&&r.push.apply(r,n.generate(!0,$f2e274ef11f87062$var$Logic.or(l))),r};$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.LessThanOrEqualFormula,"lte",{generateClauses:function(e,t){return e?$f2e274ef11f87062$var$genLTE(this.bits1,this.bits2,t,!1):$f2e274ef11f87062$var$genLTE(this.bits2,this.bits1,t,!0)}}),$f2e274ef11f87062$var$Logic.lessThan=function(e,t){return new $f2e274ef11f87062$var$Logic.LessThanFormula(e,t)},$f2e274ef11f87062$var$Logic.LessThanFormula=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Bits comparison function"),this.bits1=e,this.bits2=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.LessThanFormula,"lt",{generateClauses:function(e,t){return e?$f2e274ef11f87062$var$genLTE(this.bits1,this.bits2,t,!0):$f2e274ef11f87062$var$genLTE(this.bits2,this.bits1,t,!1)}}),$f2e274ef11f87062$var$Logic.greaterThan=function(e,t){return $f2e274ef11f87062$var$Logic.lessThan(t,e)},$f2e274ef11f87062$var$Logic.greaterThanOrEqual=function(e,t){return $f2e274ef11f87062$var$Logic.lessThanOrEqual(t,e)},$f2e274ef11f87062$var$Logic.equalBits=function(e,t){return new $f2e274ef11f87062$var$Logic.EqualBitsFormula(e,t)},$f2e274ef11f87062$var$Logic.EqualBitsFormula=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$Logic.isBits),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.equalBits"),this.bits1=e,this.bits2=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.EqualBitsFormula,"equalBits",{generateClauses:function(e,t){for(var n=this.bits1.bits,i=this.bits2.bits,r=Math.max(n.length,i.length),s=[],a=0;a<r;a++)a>=n.length?s.push($f2e274ef11f87062$var$Logic.not(i[a])):a>=i.length?s.push($f2e274ef11f87062$var$Logic.not(n[a])):s.push($f2e274ef11f87062$var$Logic.equiv(n[a],i[a]));return t.generate(e,$f2e274ef11f87062$var$Logic.and(s))}}),$f2e274ef11f87062$var$Logic.HalfAdderSum=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.HalfAdderSum"),this.a=e,this.b=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.HalfAdderSum,"hsum",{generateClauses:function(e,t){return t.generate(e,$f2e274ef11f87062$var$Logic.xor(this.a,this.b))}}),$f2e274ef11f87062$var$Logic.HalfAdderCarry=function(e,t){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,2,"Logic.HalfAdderCarry"),this.a=e,this.b=t},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.HalfAdderCarry,"hcarry",{generateClauses:function(e,t){return t.generate(e,$f2e274ef11f87062$var$Logic.and(this.a,this.b))}}),$f2e274ef11f87062$var$Logic.FullAdderSum=function(e,t,n){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(n,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,3,"Logic.FullAdderSum"),this.a=e,this.b=t,this.c=n},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.FullAdderSum,"fsum",{generateClauses:function(e,t){return t.generate(e,$f2e274ef11f87062$var$Logic.xor(this.a,this.b,this.c))}}),$f2e274ef11f87062$var$Logic.FullAdderCarry=function(e,t,n){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(n,$f2e274ef11f87062$var$isFormulaOrTerm),$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assertNumArgs(arguments.length,3,"Logic.FullAdderCarry"),this.a=e,this.b=t,this.c=n},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.FullAdderCarry,"fcarry",{generateClauses:function(e,t){return t.generate(!e,$f2e274ef11f87062$var$Logic.atMostOne(this.a,this.b,this.c))}});var $f2e274ef11f87062$var$binaryWeightedSum=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)));for(var t=$c746756a67aa053b$export$2e2bcd8739ae039(e,$ac5f44fcda61a289$export$2e2bcd8739ae039),n=0,i=[];n<t.length;){var r=t[n];if(r.length){if(1===r.length)i.push(r[0]),n++;else if(2===r.length){var s=new $f2e274ef11f87062$var$Logic.HalfAdderSum(r[0],r[1]),a=new $f2e274ef11f87062$var$Logic.HalfAdderCarry(r[0],r[1]);r.length=0,r.push(s),$f2e274ef11f87062$var$pushToNth(t,n+1,a)}else{var o=r.pop(),l=r.pop(),u=r.pop(),s=new $f2e274ef11f87062$var$Logic.FullAdderSum(u,l,o),a=new $f2e274ef11f87062$var$Logic.FullAdderCarry(u,l,o);r.push(s),$f2e274ef11f87062$var$pushToNth(t,n+1,a)}}else i.push($f2e274ef11f87062$var$Logic.FALSE),n++}return i},$f2e274ef11f87062$var$pushToNth=function(e,t,n){for(;t>=e.length;)e.push([]);e[t].push(n)},$f2e274ef11f87062$var$checkWeightedSumArgs=function(e,t){if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTerm)),"number"==typeof t)$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$Logic.isWholeNumber);else if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(t,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$Logic.isWholeNumber)),e.length!==t.length)throw Error("Formula array and weight array must be same length; they are "+e.length+" and "+t.length)};$f2e274ef11f87062$var$Logic.weightedSum=function(e,t){if($f2e274ef11f87062$var$checkWeightedSumArgs(e,t),0===e.length)return new $f2e274ef11f87062$var$Logic.Bits([]);"number"==typeof t&&(t=$c746756a67aa053b$export$2e2bcd8739ae039(e,function(){return t}));var n=[];return $b995362b61cbe134$export$2e2bcd8739ae039(e,function(e,i){for(var r=t[i],s=0;r;)1&r&&$f2e274ef11f87062$var$pushToNth(n,s,e),r>>>=1,s++}),new $f2e274ef11f87062$var$Logic.Bits($f2e274ef11f87062$var$binaryWeightedSum(n))},$f2e274ef11f87062$var$Logic.sum=function(){var e=$23786b176608059b$export$2e2bcd8739ae039(arguments);$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$isFormulaOrTermOrBits));var t=[];return $b995362b61cbe134$export$2e2bcd8739ae039(e,function(e){e instanceof $f2e274ef11f87062$var$Logic.Bits?$b995362b61cbe134$export$2e2bcd8739ae039(e.bits,function(e,n){$f2e274ef11f87062$var$pushToNth(t,n,e)}):$f2e274ef11f87062$var$pushToNth(t,0,e)}),new $f2e274ef11f87062$var$Logic.Bits($f2e274ef11f87062$var$binaryWeightedSum(t))},$f2e274ef11f87062$var$Logic.Solver.prototype.solve=function(e){var t=this;if(void 0!==e&&!(e>=1))throw Error("_assumpVar must be a variable number");if(t._unsat)return null;for(;t._numClausesAddedToMiniSat<t.clauses.length;){var n=t._numClausesAddedToMiniSat,i=t.clauses[n].terms;$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(i,$f2e274ef11f87062$var$isArrayWhere($f2e274ef11f87062$var$Logic.isNumTerm));var r=t._minisat.addClause(i);if(t._numClausesAddedToMiniSat++,!r)return t._unsat=!0,null}$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(this._num2name.length-1,$f2e274ef11f87062$var$Logic.isWholeNumber),t._minisat.ensureVar(this._num2name.length-1);var r=e?t._minisat.solveAssuming(e):t._minisat.solve();return r?new $f2e274ef11f87062$var$Logic.Solution(t,t._minisat.getSolution()):(e||(t._unsat=!0),null)},$f2e274ef11f87062$var$Logic.Solver.prototype.solveAssuming=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm);var t=new $f2e274ef11f87062$var$Logic.Assumption(e),n=this._formulaToTerm(t);if(!("number"==typeof n&&n>0))throw Error("Assertion failure: not a positive numeric term");this._useFormulaTerm(n);var i=this.solve(n);return this._minisat.retireVar(n),i},$f2e274ef11f87062$var$Logic.Assumption=function(e){$f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTerm),this.formula=e},$f2e274ef11f87062$var$Logic._defineFormula($f2e274ef11f87062$var$Logic.Assumption,"assump",{generateClauses:function(e,t){return e?t.clause(this.formula):t.clause($f2e274ef11f87062$var$Logic.not(this.formula))}}),$f2e274ef11f87062$var$Logic.Solution=function(e,t){var n=this;n._solver=e,n._assignment=t,n._ungeneratedFormulas=$ac5f44fcda61a289$export$2e2bcd8739ae039(e._ungeneratedFormulas),n._formulaValueCache={},n._termifier=new $f2e274ef11f87062$var$Logic.Termifier(n._solver),n._termifier.term=function(e){return n.evaluate(e)?$f2e274ef11f87062$var$Logic.NUM_TRUE:$f2e274ef11f87062$var$Logic.NUM_FALSE},n._ignoreUnknownVariables=!1},$f2e274ef11f87062$var$Logic.Solution.prototype.ignoreUnknownVariables=function(){this._ignoreUnknownVariables=!0},$f2e274ef11f87062$var$Logic.Solution.prototype.getMap=function(){for(var e=this._solver,t=this._assignment,n={},i=1;i<t.length;i++){var r=e.getVarName(i);r&&"$"!==r.charAt(0)&&(n[r]=t[i])}return n},$f2e274ef11f87062$var$Logic.Solution.prototype.getTrueVars=function(){for(var e=this._solver,t=this._assignment,n=[],i=1;i<t.length;i++)if(t[i]){var r=e.getVarName(i);r&&"$"!==r.charAt(0)&&n.push(r)}return n.sort(),n},$f2e274ef11f87062$var$Logic.Solution.prototype.getFormula=function(){for(var e=this._solver,t=this._assignment,n=[],i=1;i<t.length;i++){var r=e.getVarName(i);r&&"$"!==r.charAt(0)&&n.push(t[i]?i:-i)}return $f2e274ef11f87062$var$Logic.and(n)},$f2e274ef11f87062$var$Logic.Solution.prototype.evaluate=function(e){var t=this;if($f2e274ef11f87062$var$assert&&$f2e274ef11f87062$var$assert(e,$f2e274ef11f87062$var$isFormulaOrTermOrBits),e instanceof $f2e274ef11f87062$var$Logic.Bits){var n=0;return $b995362b61cbe134$export$2e2bcd8739ae039(e.bits,function(e,i){t.evaluate(e)&&(n+=1<<i)}),n}var i=t._solver,r=t._ignoreUnknownVariables,s=t._assignment,a=e;if(a instanceof $f2e274ef11f87062$var$Logic.NotFormula)return!t.evaluate(a.operand);if(a instanceof $f2e274ef11f87062$var$Logic.Formula){var o=t._formulaValueCache[a.guid()];if("boolean"==typeof o)return o;var l,u=i._getFormulaInfo(a,!0);if(u&&u.varNum&&u.varNum<s.length&&!$4fb312c1270006dd$export$2e2bcd8739ae039(t._ungeneratedFormulas,u.varNum))l=s[u.varNum];else var l=$1ed12610b787b54c$export$2e2bcd8739ae039(i._generateFormula(!0,a,t._termifier),function(e){return $1f6dd4637b6de52e$export$2e2bcd8739ae039(e.terms,function(e){return t.evaluate(e)})});return t._formulaValueCache[a.guid()]=l,l}var c=i.toNumTerm(a,!0);if(!c){if(r)return!1;var h=String(a).replace(/^-*/,"");throw Error("No such variable: "+h)}var f=c,d=!1;if(c<0&&(f=-f,d=!0),f<1||f>=s.length){var h=f;if(f>=1&&f<i._num2name.length&&(h=i._num2name[f]),r)return!1;throw Error("Variable not part of solution: "+h)}var n=s[f];return d&&(n=!n),n},$f2e274ef11f87062$var$Logic.Solution.prototype.getWeightedSum=function(e,t){$f2e274ef11f87062$var$checkWeightedSumArgs(e,t);var n=0;if("number"==typeof t)for(var i=0;i<e.length;i++)n+=t*(this.evaluate(e[i])?1:0);else for(var i=0;i<e.length;i++)n+=t[i]*(this.evaluate(e[i])?1:0);return n};var $f2e274ef11f87062$var$getNonZeroWeightedTerms=function(e,t){if("number"==typeof t)return t?e:[];for(var n=[],i=0;i<e.length;i++)t[i]&&n.push(e[i]);return n},$f2e274ef11f87062$var$minMaxWS=function(e,t,n,i,r,s){var a=t,o=a.getWeightedSum(n,i),l=r&&r.formula||$f2e274ef11f87062$var$Logic.weightedSum(n,i),u=r&&r.progress,c=r&&r.strategy,h=null;if(s&&o>0){u&&u("trying",0);var f=null;h=$f2e274ef11f87062$var$getNonZeroWeightedTerms(n,i);var f=e.solveAssuming($f2e274ef11f87062$var$Logic.not($f2e274ef11f87062$var$Logic.or(h)));f&&(a=f,o=0)}if(s&&"bottom-up"===c)for(var d=1;d<o;d++){u&&u("trying",d);var p=$f2e274ef11f87062$var$Logic.equalBits(l,$f2e274ef11f87062$var$Logic.constantBits(d)),m=e.solveAssuming(p);if(m){a=m,o=d;break}}else if(c&&"default"!==c)throw Error("Bad strategy: "+c);else c="default";if("default"===c)for(;!s||o>0;){u&&u("improving",o);var g=(s?$f2e274ef11f87062$var$Logic.lessThan:$f2e274ef11f87062$var$Logic.greaterThan)(l,$f2e274ef11f87062$var$Logic.constantBits(o)),m=e.solveAssuming(g);if(!m)break;e.require(g),o=(a=m).getWeightedSum(n,i)}return s&&0===o?(h||(h=$f2e274ef11f87062$var$getNonZeroWeightedTerms(n,i)),e.forbid(h)):e.require($f2e274ef11f87062$var$Logic.equalBits(l,$f2e274ef11f87062$var$Logic.constantBits(o))),u&&u("finished",o),a};$f2e274ef11f87062$var$Logic.Solver.prototype.minimizeWeightedSum=function(e,t,n,i){return $f2e274ef11f87062$var$minMaxWS(this,e,t,n,i,!0)},$f2e274ef11f87062$var$Logic.Solver.prototype.maximizeWeightedSum=function(e,t,n,i){return $f2e274ef11f87062$var$minMaxWS(this,e,t,n,i,!1)},$f2e274ef11f87062$exports=$f2e274ef11f87062$var$Logic;var $kUBvx=parcelRequire("kUBvx"),$ilwiq=parcelRequire("ilwiq"),$7UxrJ=parcelRequire("7UxrJ");function $e8059aa6bf8f067d$export$39e042fd83f1b62e(e,t=100,n=!0,i=1){let r=new $2d8e6f533f833ed5$export$da9897e690d269b(t,void 0,!0,n,i,(0,$kUBvx.randstr)(12));for(r.set_rule(e),r.seed();!r.isProcessingComplete();)r.step();return r.numMovePositions()?$e8059aa6bf8f067d$export$c6fb16a973379144.UNBOUNDED:r.getCubeCoords()}const $e8059aa6bf8f067d$export$c6fb16a973379144={DETERMINISTIC:{symbol:"",short:"DET",description:"The system consistently forms the same finite-size shape."},FINITE_SHAPES:{symbol:":",short:"FIN",description:"Similar to NON_DETERMINISTIC_BOUNDED but the number of distinct shapes formed is less than sqrt(num tests)."},UNBOUNDED:{symbol:"",short:"UNB",description:"The system grows forever with no pattern."},NON_DETERNINISTIC_BOUNDED:{symbol:"?",short:"NDB",description:"The system forms finite-size shapes but not always the same one."},SOME_NONDET:{symbol:"",short:"NDT",description:"The system is nondeterministic, no further information is available"}};function $e8059aa6bf8f067d$export$3d706764a5e329af(e,t=15,n=1e3,i=!0,r=1,s=!1){let a=[],o=t;for(;o--;){let o=$e8059aa6bf8f067d$export$39e042fd83f1b62e(e,n,i,r);if("symbol"in o)return console.assert("UNB"==o.short),$e8059aa6bf8f067d$export$c6fb16a973379144.UNBOUNDED;let l=!1,u=0;for(;!l&&u<a.length;){let e=a[u];(0,$kUBvx.coordEqual)(e,o)&&(l=!0),u++}if(!l){if(a.push(o),s)return $e8059aa6bf8f067d$export$c6fb16a973379144.SOME_NONDET;if(a.length>=Math.sqrt(t))return $e8059aa6bf8f067d$export$c6fb16a973379144.NON_DETERNINISTIC_BOUNDED}}return 1==a.length?$e8059aa6bf8f067d$export$c6fb16a973379144.DETERMINISTIC:a.length<Math.sqrt(t)?$e8059aa6bf8f067d$export$c6fb16a973379144.FINITE_SHAPES:$e8059aa6bf8f067d$export$c6fb16a973379144.NON_DETERNINISTIC_BOUNDED}var $cqQJN=parcelRequire("cqQJN");class $b796f8545f443add$export$df9058283530d413 extends $2ff5c53210b96d91$export$6c9cc06fe674a4d2{rotations;nR;variables;BCO_varlen;solver;constructor(e=[],t=[],n=-1,i=-1,r=3,s=!0){super(e,r,s),this.nC=i,this.nS=n,this.rotations=$b796f8545f443add$var$enumerateRotations(this.nD),this.nR=this.rotations.size,this.variables=new Map,this.BCO_varlen=null,this.solver=new $f2e274ef11f87062$exports.Solver}init(){for(let e of(this.generate_constraints(),this.add_constraints_all_particles(),this.add_constraints_all_patches_except(0),this.add_constraints_no_self_complementarity(),this.fix_color_interaction(0,1),(0,$kUBvx.range)(2,this.num_colors()-1,2)))this.fix_color_interaction(e,e+1);for(let[e,t]of(this.torsion&&this.add_constraints_fixed_blank_orientation(),this.getEmpties()))this.fix_slot_colors(e,t,1);this.forbid_self_interact&&this.add_constraints_no_self_interact_patches(),this.has_nanoparticles()&&(this.num_nanoparticle_types()>1?this.add_constraints_nanoparticle_multitype():this.add_constraints_nanoparticle_singletype())}variable(e,...t){let n=`${e}(${t.join(",")})`;return this.solver.getVarNum(n,!1)}add_clause(...e){this.solver.require(e)}num_species(){return this.nS}num_colors(){return(this.nC+1)*2}B(e,t){return t<e&&([e,t]=[t,e]),this.variable("B",e,t)}D(e,t,n,i){return n<e&&([t,i]=[i,t],[e,n]=[n,e]),console.assert(0<=t&&t<this.nO,`o1 out of bounds 0 <= ${t} < ${this.nO}`),console.assert(0<=i&&i<this.nO,`o2 out of bounds 0 <= ${i} < ${this.nO}`),this.variable("D",e,t,n,i)}F(e,t,n){return console.assert(0<=e&&e<this.nL,`l out of bounds 0 <= ${e} < ${this.nL}`),console.assert(0<=t&&t<this.nP,`p out of bounds 0 <= ${t} < ${this.nP}`),console.assert(0<=n&&n<this.num_colors(),`c out of bounds 0 <= ${n} < ${this.num_colors()}`),this.variable("F",e,t,n)}A(e,t,n){return console.assert(0<=e&&e<this.nL,`l out of bounds 0 <= ${e} < ${this.nL}`),console.assert(0<=t&&t<this.nP,`p out of bounds 0 <= ${t} < ${this.nP}`),console.assert(0<=n&&n<this.nO,`o out of bounds 0 <= ${n} < ${this.nO}`),this.variable("A",e,t,n)}C(e,t,n){return console.assert(0<=e&&e<this.num_species(),`s out of bounds 0 <= ${e} < ${this.num_species()}`),console.assert(0<=t&&t<this.nP,`p out of bounds 0 <= ${t} < ${this.nP}`),console.assert(0<=n&&n<this.num_colors(),`c out of bounds 0 <= ${n} < ${this.num_colors()}`),this.variable("C",e,t,n)}O(e,t,n){return console.assert(0<=e&&e<this.num_species(),`s out of bounds 0 <= ${e} < ${this.num_species()}`),console.assert(0<=t&&t<this.nP,`p out of bounds 0 <= ${t} < ${this.nP}`),console.assert(0<=n&&n<this.nO,`o out of bounds 0 <= ${n} < ${this.nO}`),this.variable("O",e,t,n)}P(e,t,n){return console.assert(0<=e&&e<this.nL,`l out of bounds 0 <= ${e} < ${this.nL}`),console.assert(0<=t&&t<this.num_species(),`s out of bounds 0 <= ${t} < ${this.num_species()}`),console.assert(0<=n&&n<this.nR,`r out of bounds 0 <= ${n} < ${this.nR}`),this.variable("P",e,t,n)}N_single(e){return this.variable("N",e)}N_multi(e,t){return this.variable("N",e,t)}rotation(e,t){return console.assert(0<=e&&e<this.nP,`p out of bounds 0 <= ${e} < ${this.nP}`),console.assert(0<=t&&t<this.nR,`r out of bounds 0 <= ${t} < ${this.nR}`),console.assert(this.rotations.size==this.nR),console.assert(this.rotations.has(t)),console.assert(this.rotations.get(t).has(e)),this.rotations.get(t).get(e)}orientation(e,t,n){console.assert(0<=e&&e<this.nP,`p out of bounds 0 <= ${e} < ${this.nP}`),console.assert(0<=t&&t<this.nR,`r out of bounds 0 <= ${t} < ${this.nR}`),console.assert(0<=n&&n<this.nO,`o out of bounds 0 <= ${n} < ${this.nO}`),console.assert(this.rotations.size==this.nR),console.assert(this.rotations.has(t)),console.assert(this.rotations.get(t).has(e));let i=this.rotations.get(t).get(e),r=$b796f8545f443add$var$patchRotToVec(e,n),s=(0,$kUBvx.RULE_ORDER).findIndex(e=>e.equals(r)),a=this.rotations.get(t).get(s);return $b796f8545f443add$var$patchVecToRot(i,$kUBvx.RULE_ORDER[a])}check_settings(){for(let e of(console.assert(this.bindings.size==this.nL*this.nP/2),console.assert(new Set(this.bindings.values()).size==this.bindings.size),(0,$kUBvx.range)(this.nP)))for(let t of(0,$kUBvx.range)(this.nR))this.rotation(e,t)}exactly_one(e){if(console.assert(e.every(e=>e>0)),1==e.length)return[e];e.sort((e,t)=>e-t);let t=[e];for(let n of e)for(let i of e){if(i>=n)break;t.push([-n,-i])}return console.assert(new Set(t).size==e.length*(e.length-1)/2+1),t}generate_constraints(){for(let e of(0,$kUBvx.range)(this.num_colors()))for(let t of(0,$kUBvx.range)(this.num_colors()))this.B(e,t);for(let e of(0,$kUBvx.range)(this.num_species()))for(let t of(0,$kUBvx.range)(this.nP))for(let n of(0,$kUBvx.range)(this.num_colors()))this.C(e,t,n);if(this.torsion)for(let e of(0,$kUBvx.range)(this.num_species()))for(let t of(0,$kUBvx.range)(this.nP))for(let n of(0,$kUBvx.range)(this.nO))this.O(e,t,n);for(let e of(this.BCO_varlen=this.variables.size,(0,$kUBvx.range)(this.num_colors())))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.num_colors())].map(t=>this.B(e,t))));for(let e of(0,$kUBvx.range)(this.num_species()))for(let t of(0,$kUBvx.range)(this.nP))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.num_colors())].map(n=>this.C(e,t,n))));if(this.torsion)for(let e of(0,$kUBvx.range)(this.num_species()))for(let t of(0,$kUBvx.range)(this.nP))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.nO)].map(n=>this.O(e,t,n))));for(let e of(0,$kUBvx.range)(this.nL))for(let t of(0,$kUBvx.range)(this.nP))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.num_colors())].map(n=>this.F(e,t,n))));if(this.torsion)for(let e of(0,$kUBvx.range)(this.nL))for(let t of(0,$kUBvx.range)(this.nP))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.nO)].map(n=>this.A(e,t,n))));for(let[[e,t],[n,i]]of this.bindings)for(let r of(0,$kUBvx.range)(this.num_colors()))for(let s of(0,$kUBvx.range)(this.num_colors()))this.add_clause([-this.F(e,t,r),-this.F(n,i,s),this.B(r,s)]);if(this.torsion)for(let[[e,t],[n,i]]of this.bindings)for(let r of(0,$kUBvx.range)(this.nO))for(let s of(0,$kUBvx.range)(this.nO))this.add_clause([-this.A(e,t,r),-this.A(n,i,s),this.D(t,r,i,s)]);if(this.torsion)for(let e of(0,$kUBvx.range)(this.nP))for(let t of(0,$kUBvx.range)(this.nP)){if(t>=e)break;for(let n of(0,$kUBvx.range)(this.nO))for(let i of(0,$kUBvx.range)(this.nO)){let r=$b796f8545f443add$var$patchRotToVec(e,n),s=$b796f8545f443add$var$patchRotToVec(t,i);r.equals(s)&&t%2==0&&t+1==e?this.add_clause([this.D(e,n,t,i)]):this.add_clause([-this.D(e,n,t,i)])}}for(let e of(0,$kUBvx.range)(this.nL)){let t=[];for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.num_species()))t.push(this.P(e,i,n));this.add_clause(...this.exactly_one(t))}for(let e of(0,$kUBvx.range)(this.nL))for(let t of(0,$kUBvx.range)(this.num_species()))for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.nP))for(let r of(0,$kUBvx.range)(this.num_colors())){let s=this.rotation(i,n);this.add_clause([-this.P(e,t,n),-this.F(e,i,r),this.C(t,s,r)]),this.add_clause([-this.P(e,t,n),this.F(e,i,r),-this.C(t,s,r)])}if(this.torsion)for(let e of(0,$kUBvx.range)(this.nL))for(let t of(0,$kUBvx.range)(this.num_species()))for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.nP))for(let r of(0,$kUBvx.range)(this.nO)){let s=this.rotation(i,n),a=this.orientation(i,n,r);this.add_clause([-this.P(e,t,n),-this.A(e,i,r),this.O(t,s,a)]),this.add_clause([-this.P(e,t,n),this.A(e,i,r),-this.O(t,s,a)])}if(2==this.nD)for(let e of(0,$kUBvx.range)(this.num_species()))for(let t of(0,$kUBvx.range)(this.nP)){t>3&&this.add_clause([this.C(e,t,1)]);let n=$b796f8545f443add$var$getFlatFaceRot()[t];this.add_clause([this.O(e,t,n)])}}output_cnf(e){let t=Math.max(...this.variables.values()),n=e.length,i=`p cnf ${t} ${n}
`;for(let t of e)i+=t.join(" ")+" 0\n";return i}add_constraints_from_vnames(e){let t=[];for(let n of e)n in this.variables||console.error("Trying to add variables that have not been defined, probably incompatible problem formulation?"),t.push(this.variables[n]);this.add_clause(t)}add_constraints_all_particles(){for(let e of(0,$kUBvx.range)(this.num_species())){let t=[];for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.nL))t.push(this.P(i,e,n));this.add_clause(t)}}add_constraints_all_patches_except(e){for(let t of(0,$kUBvx.range)(this.num_colors())){if(t!=e){let e=[];for(let n of(0,$kUBvx.range)(this.num_species()))for(let i of(0,$kUBvx.range)(this.nP))e.push(this.C(n,i,t));this.add_clause(e)}for(let t of(0,$kUBvx.range)(this.nP))for(let n of(0,$kUBvx.range)(this.num_species()))this.add_clause([-this.C(n,t,e)])}}add_constraints_fixed_blank_orientation(){for(let e of(0,$kUBvx.range)(this.nP))for(let t of(0,$kUBvx.range)(this.num_species()))this.add_clause([-this.C(t,e,1),this.O(t,e,0)])}add_constraints_no_self_complementarity(e=0){for(let t of(0,$kUBvx.range)(e,this.num_colors()))this.add_clause([-this.B(t,t)])}add_constraints_nanoparticle_singletype(){for(let e of(0,$kUBvx.range)(this.nL)){let t=e in this.nanoparticles;for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.num_species()))t?this.add_clause([this.N_single(i),-this.P(e,i,n)]):this.add_clause([-this.N_single(i),-this.P(e,i,n)])}}add_constraints_nanoparticle_multitype(){for(let e of(0,$kUBvx.range)(this.num_species()))this.add_clause(...this.exactly_one([...(0,$kUBvx.range)(this.num_nanoparticle_types())].map(t=>this.N_multi(e,t))));for(let e of(0,$kUBvx.range)(this.nL)){let t=this.nanoparticles[e];for(let n of(0,$kUBvx.range)(this.nR))for(let i of(0,$kUBvx.range)(this.num_species()))this.add_clause([this.N_multi(i,t),-this.P(e,i,n)])}}add_constraints_no_self_interact_patches(){for(let e of(0,$kUBvx.range)(this.num_species()))for(let[t,n]of(0,$kUBvx.combinations)([...(0,$kUBvx.range)(this.num_colors())],2)){if(t==n)continue;let i=-this.B(t,n);for(let r of(0,$kUBvx.range)(this.nP))this.add_clause([i,-this.C(e,r,t),-this.C(e,r,n)])}}fix_position_species(e,t){this.add_clause([...(0,$kUBvx.range)(this.nR)].map(n=>this.P(e,t,n)))}fix_slot_colors(e,t,n){this.add_clause([this.F(e,t,n)])}fix_color_interaction(e,t){this.add_clause([this.B(e,t)])}run_solve(){let e,t,n=0;for(;n<this.maxAltTries;){if($b796f8545f443add$var$minSol&&$b796f8545f443add$var$minSol[0]+$b796f8545f443add$var$minSol[1]<this.num_species()+this.num_colors()/2)return"skipped";let n=this.solver.solve();if(!n)return{status:e};{let i=this.readSolution(n);if(i.sort((e,t)=>$b796f8545f443add$var$patchCount(t)-$b796f8545f443add$var$patchCount(e)),t=(0,$7UxrJ.ruleToDec)(i),e=$e8059aa6bf8f067d$export$3d706764a5e329af(i),console.assert(!1,"Gotta write bounded and deterministic code!!!!!"),"UNB"==e.short||"NDB"==e.short)console.log(`https://akodiat.github.io/polycubes/?decRule=${t}"`),this.solver.forbid(n);else{$b796f8545f443add$var$minSol=[this.num_species(),this.num_colors()];break}}}return{status:e,rule:t}}readSolution(e){let t=1,n=new Map,i=e.getTrueVars(),r=new Map;for(let e of i.filter(/B\((\d+),(\d+)\)/g.test)){let i=Number(e[1]),r=Number(e[2]);console.assert(!n.has(i)||!n.has(r)),i<2||r<2?(n.set(i,0),n.set(r,0)):(n.set(i,t),n.set(r,-t),t+=1)}for(let e of i.filter(/C\((\d+),(\d+),(\d+)\)/g.test)){let t=Number(e[1]),i=Number(e[2]),s=Number(e[3]);r.has(t)||r.set(t,new Map),r.get(t).has(i)||r.get(t).set(i,{color:null,orientation:null}),r.get(t).get(i).color=n.get(s)}let s=!1;for(let e of i.filter(/O\((\d+),(\d+),(\d+)\)/g.test)){let t=Number(e[1]),n=Number(e[2]),i=Number(e[3]);s=!0,r.get(t).get(n).orientation=i}if(!s)for(let e of(console.log("Found no orientation values"),r.values()))for(let[t,n]of e)n.orientation=$b796f8545f443add$var$getFlatFaceRot()[Number(t)];return[...r.values()].map((e,t)=>new $7UxrJ.DynamicPolycubeCubeType(t,[...e.values()].map(e=>new $cqQJN.PolycubePatch(e.color,void 0,e.orientation))))}}function $b796f8545f443add$var$getFlatFaceRot(){return[1,1,2,0,0,0]}function $b796f8545f443add$var$patchRotToVec(e,t){let n=(0,$kUBvx.FACE_ROTATIONS)[e].clone(),i=(0,$kUBvx.RULE_ORDER)[e].clone(),r=t*Math.PI/2,s=new $ilwiq.Quaternion().setFromAxisAngle(i,r);return n.clone().applyQuaternion(s).round()}function $b796f8545f443add$var$patchVecToRot(e,t){return Math.floor((2/Math.PI*(0,$kUBvx.getSignedAngle)($kUBvx.FACE_ROTATIONS[e],t,$kUBvx.RULE_ORDER[e])+4)%4)}function $b796f8545f443add$var$enumerateRotations(e=3){return new Map(2==e?[[0,new Map([[0,0],[1,1],[2,2],[3,3],[4,4],[5,5]])],[1,new Map([[0,1],[1,0],[2,3],[3,2],[4,4],[5,5]])],[2,new Map([[0,2],[1,3],[2,1],[3,0],[4,4],[5,5]])],[3,new Map([[0,3],[1,2],[2,0],[3,1],[4,4],[5,5]])]]:[[0,new Map([[0,0],[1,1],[2,2],[3,3],[4,4],[5,5]])],[1,new Map([[0,0],[1,1],[2,3],[3,2],[4,5],[5,4]])],[2,new Map([[0,0],[1,1],[2,4],[3,5],[4,3],[5,2]])],[3,new Map([[0,0],[1,1],[2,5],[3,4],[4,2],[5,3]])],[4,new Map([[0,1],[1,0],[2,2],[3,3],[4,5],[5,4]])],[5,new Map([[0,1],[1,0],[2,3],[3,2],[4,4],[5,5]])],[6,new Map([[0,1],[1,0],[2,4],[3,5],[4,2],[5,3]])],[7,new Map([[0,1],[1,0],[2,5],[3,4],[4,3],[5,2]])],[8,new Map([[0,2],[1,3],[2,0],[3,1],[4,5],[5,4]])],[9,new Map([[0,2],[1,3],[2,1],[3,0],[4,4],[5,5]])],[10,new Map([[0,2],[1,3],[2,4],[3,5],[4,0],[5,1]])],[11,new Map([[0,2],[1,3],[2,5],[3,4],[4,1],[5,0]])],[12,new Map([[0,3],[1,2],[2,0],[3,1],[4,4],[5,5]])],[13,new Map([[0,3],[1,2],[2,1],[3,0],[4,5],[5,4]])],[14,new Map([[0,3],[1,2],[2,4],[3,5],[4,1],[5,0]])],[15,new Map([[0,3],[1,2],[2,5],[3,4],[4,0],[5,1]])],[16,new Map([[0,4],[1,5],[2,0],[3,1],[4,2],[5,3]])],[17,new Map([[0,4],[1,5],[2,1],[3,0],[4,3],[5,2]])],[18,new Map([[0,4],[1,5],[2,2],[3,3],[4,1],[5,0]])],[19,new Map([[0,4],[1,5],[2,3],[3,2],[4,0],[5,1]])],[20,new Map([[0,5],[1,4],[2,0],[3,1],[4,3],[5,2]])],[21,new Map([[0,5],[1,4],[2,1],[3,0],[4,2],[5,3]])],[22,new Map([[0,5],[1,4],[2,2],[3,3],[4,0],[5,1]])],[23,new Map([[0,5],[1,4],[2,3],[3,2],[4,1],[5,0]])]])}function $b796f8545f443add$export$27ee64fae19f3541(e){let t=Object.assign(new $b796f8545f443add$export$df9058283530d413,e);return t.init(),t}function $b796f8545f443add$var$patchCount(e){return e.filter(e=>0!=e.color).length}var $cqQJN=parcelRequire("cqQJN"),$jDp01=parcelRequire("jDp01"),$ilwiq=parcelRequire("ilwiq"),$6eb64239d4f14690$exports={};$6eb64239d4f14690$exports=new URL("edit.232bfb6e.svg",import.meta.url).toString();var $e99461805e99cfdc$exports={};$e99461805e99cfdc$exports=new URL("duplicate.09931496.svg",import.meta.url).toString();var $7UxrJ=parcelRequire("7UxrJ"),$kUBvx=parcelRequire("kUBvx"),$cqQJN=parcelRequire("cqQJN");function $dee51d581a1bcde1$export$3ef46b14ba3e1099(e){if(void 0==e){let t=window.system.nameNewCubeType();e=new $7UxrJ.DynamicPolycubeCubeType(window.system.numCubeTypes(),(0,$7UxrJ.FACE_NAMES).map((e,t)=>new $cqQJN.PolycubePatch(0,t,$kUBvx.FACE_ROTATIONS[t])),t)}-1==window.system.cube_types.indexOf(e)&&window.system.addCubeType(e);let t=document.getElementById("ruleset"),n=document.createElement("fieldset");document.getElementById("autoUpdate"),$4eae0a726ab50395$exports(n).addClass("rule-display"),$4eae0a726ab50395$exports(n).append($4eae0a726ab50395$exports(`<legend name="${e.typeName}">${e.typeName}</legend>`)),n.style.borderColor=(0,$7UxrJ.cubeTypeColor)(e.type_id);for(let t=0;t<$kUBvx.RULE_ORDER.length;t++){let i=document.createElement("span"),r=document.createElement("input");if(r.type="number",r.value=String(e.patch_color(t)),0!=parseInt(r.value)&&(i.style.backgroundColor=(0,$7UxrJ.patchColor)(parseInt(r.value))),r.addEventListener("change",$dee51d581a1bcde1$var$updateCubeColor.bind(event,r,e,t)),window.system.isPolycubeSystem()&&(i.title=$7UxrJ.FACE_NAMES[t]),window.system.isPolycubeSystem()){let n=document.createElement("img");n.value=(0,$kUBvx.FACE_ROTATIONS)[t].angleTo(e.patches[t].alignDir)*(2/Math.PI),n.src=$parcel$interopDefault($4075ddc1ab0773a3$exports),n.className=`face-img rot${n.value}`,n.addEventListener("click",$dee51d581a1bcde1$var$updatePatchRot.bind(event,n,e,t)),i.appendChild(n),i.appendChild(r)}n.appendChild(i)}n.appendChild(document.createElement("br"));let i=30,r=document.createElement("img");r.src=$parcel$interopDefault($c971b71faaf36555$exports),r.classList.add("control_button"),r.height=i,r.alt="Remove",r.addEventListener("click",$dee51d581a1bcde1$var$removeCubeType.bind(event,e,n)),n.appendChild(r);let s=document.createElement("img");s.src=$parcel$interopDefault($e99461805e99cfdc$exports),s.height=i,s.alt="Duplicate",s.classList.add("control_button"),s.addEventListener("click",$dee51d581a1bcde1$var$duplicateCubeType.bind(event,e,n)),n.appendChild(s);let a=document.createElement("img");a.src=$parcel$interopDefault($6eb64239d4f14690$exports),a.height=i,a.alt="Edit",a.classList.add("control_button"),a.addEventListener("click",$dee51d581a1bcde1$var$editCubeType.bind(event,e,n)),n.appendChild(a);let o=$4eae0a726ab50395$exports(`<svg xmlns="http://www.w3.org/2000/svg"
     width="${i}" height="${i}"
     viewBox="0 0 256 256">
  <circle id="big" cx="128" cy="128" r="110" stroke="black" stroke-width="12" fill="gray"/>
</svg>`);o.addClass("control_button"),o.attr("alt","Toggle Present"),o.click(function(){let t=$4eae0a726ab50395$exports(this).children("circle"),n="gray"==t.attr("fill");window.system.toggleCubeType(window.system.cubeTypeIndex(e)),n?t.attr("fill","white"):t.attr("fill","gray"),$dee51d581a1bcde1$export$722fbec263ad908a()}),$4eae0a726ab50395$exports(n).append(o),t.appendChild(n)}function $dee51d581a1bcde1$var$updateCubeColor(e,t,n){let i;let r=parseInt(e.value);i=0!=r?(0,$7UxrJ.patchColor)(r):"White",e.parentElement.style.backgroundColor=i,t.patches[n].color=r,document.getElementById("autoUpdate").checked&&$dee51d581a1bcde1$export$722fbec263ad908a()}function $dee51d581a1bcde1$var$updatePatchRot(e,t,n){$4eae0a726ab50395$exports(e).removeClass(`rot${e.value}`),e.value=(parseInt(e.value)+1)%4,$4eae0a726ab50395$exports(e).addClass("rot"+e.value);let i=(0,$kUBvx.FACE_ROTATIONS)[n].clone();i.applyAxisAngle($kUBvx.RULE_ORDER[n],e.value*Math.PI/2),t.patches[n].alignDir=i.round(),document.getElementById("autoUpdate").checked&&$dee51d581a1bcde1$export$722fbec263ad908a()}function $dee51d581a1bcde1$var$removeCubeType(e,t){let n=window.system.numCubeTypes();t.parentNode.removeChild(t),window.system.removeCubeType(e),console.assert(n-1==window.system.numCubeTypes(),"Appear to have removed more than one cube types?"),$4eae0a726ab50395$exports("#ruleset").children().each(function(e){$4eae0a726ab50395$exports(this).css("borderColor",(0,$7UxrJ.cubeTypeColor)(e))}),document.getElementById("autoUpdate").checked&&($dee51d581a1bcde1$export$722fbec263ad908a(),$dee51d581a1bcde1$export$fbb4d68fe60c1629())}function $dee51d581a1bcde1$var$duplicateCubeType(e){let t=e.clone(window.system.numCubeTypes());window.system.addCubeType(t),$dee51d581a1bcde1$export$3ef46b14ba3e1099(t);let n=new $ilwiq.MeshLambertMaterial({color:(0,$7UxrJ.cubeTypeColor)(window.system.numCubeTypes()-1)});window.system.particleMaterials.set(t.type_id,n),document.getElementById("autoUpdate").checked&&$dee51d581a1bcde1$export$722fbec263ad908a()}function $dee51d581a1bcde1$var$editCubeType(e,t){let n;if($4eae0a726ab50395$exports("#editbox").length>0)return;let i=document.createElement("fieldset"),r=e.typeName,s=[],a=[];n="effects"in e?{patches:[],effects:[]}:[],i.id="editbox";let o=document.createElement("legend");o.innerHTML=`Editing ${e.typeName}`,i.appendChild(o);let l=document.createElement("input");l.value=e.typeName,l.addEventListener("change",e=>{r=e.target.value,o.innerHTML=`Editing ${r}`}),i.appendChild(l);let u=document.createElement("table");$4eae0a726ab50395$exports(u).append($4eae0a726ab50395$exports("<tr><td>Face</td><td>Rot.</td><td>Color</td><td>S.V</td><td>A.V</td></tr>"));for(let t=0;t<$kUBvx.RULE_ORDER.length;t++){let i=document.createElement("tr"),r=document.createElement("td");if(r.innerHTML=`${t}:${$7UxrJ.FACE_NAMES[t]}:`,i.appendChild(r),window.system.isPolycubeSystem()){let n=document.createElement("img");n.value=(0,$kUBvx.FACE_ROTATIONS)[t].angleTo(e.patches[t].alignDir)*(2/Math.PI),n.src=$parcel$interopDefault($4075ddc1ab0773a3$exports),n.className=`face-img rot${n.value}`,n.addEventListener("click",e=>{let n=(parseInt(e.target.value)+1)%4;$4eae0a726ab50395$exports(e.target).removeClass(`rot${$4eae0a726ab50395$exports(e.target).val()}`),$4eae0a726ab50395$exports(e.target).addClass(`rot${n}`),$4eae0a726ab50395$exports(e.target).val(n),s[t]=n}),i.appendChild(n)}let o=document.createElement("input"),l=document.createElement("td");if(o.style.display="table-cell",o.type="number",o.value=e.patches[t].color,0!=parseInt(o.value)&&(i.style.backgroundColor=(0,$7UxrJ.patchColor)(parseInt(o.value))),o.addEventListener("change",e=>{let n,i=parseInt(e.target.value);0!=i?(Math.abs(i) in window.system.colorMaterials||(window.system.colorMaterials[i]=new $ilwiq.MeshLambertMaterial({color:(0,$7UxrJ.patchColor)(i)})),n=(0,$7UxrJ.patchColor)(Math.abs(i)-1)):n="White",e.target.parentElement.style.backgroundColor=n,a[t]=i}),window.system.isPolycubeSystem()&&(i.title=$7UxrJ.FACE_NAMES[t]),l.appendChild(o),i.appendChild(l),"conditionals"in e){let r=document.createElement("input"),s=document.createElement("td");r.style.display="table-cell",r.type="text",r.value=e.conditionals[t],r.addEventListener("change",e=>{n[t]=e.target.value}),s.appendChild(r),i.append(s)}else{let r=$4eae0a726ab50395$exports("<td>").append($4eae0a726ab50395$exports("<input>").val(e.patches[t].state_var).attr({type:"number",step:"1"}).on("input",function(){t in n.patches||(n.patches[t]={}),n.patches[t].state_var=parseInt(this.value)})),s=$4eae0a726ab50395$exports("<td>").append($4eae0a726ab50395$exports("<input>").val(e.patches[t].activation_var).attr({type:"number",step:"1"}).on("input",function(){t in n.patches||(n.patches[t]={}),n.patches[t].activation_var=parseInt(this.value)}));i.appendChild(r.get(0)),i.appendChild(s.get(0))}u.appendChild(i)}function c(e,t){return $4eae0a726ab50395$exports("<tr>").append($4eae0a726ab50395$exports("<td>").append($4eae0a726ab50395$exports("<input>").val(e.sources.join(",")).on("input",function(){if(/^-?[0-9]+(,-?[0-9]+)*$/.test(this.value)){t in n.effects||(n.effects[t]={});let e=this.value.split(",").map(e=>parseInt(e));n.effects[t].sources=e}})),$4eae0a726ab50395$exports("<td>").append($4eae0a726ab50395$exports("<input>").val(e.target).attr({type:"number",step:"1",min:0}).on("input",function(){t in n.effects||(n.effects[t]={}),n.effects[t].target=this.value})))}if(i.appendChild(u),"effects"in e){let t=e.effects.length;$4eae0a726ab50395$exports(i).append($4eae0a726ab50395$exports("<div>").css({overflow:"hidden","overflow-y":"scroll",height:"150px"}).append($4eae0a726ab50395$exports("<table id='ct-fx-list'>").append($4eae0a726ab50395$exports("<tr><td>Source</td><td>Target</td></tr>"),...e.effects.map(c)),$4eae0a726ab50395$exports("<button>+</button>").on("click",function(){$4eae0a726ab50395$exports("#ct-fx-list").append(c({sources:[],target:0},t)),t++})))}let h=document.createElement("button");h.innerHTML="Apply",i.appendChild(h),h.addEventListener("click",o=>{$4eae0a726ab50395$exports(`legend[name=${e.name}]`).text(r),e.typeName=r;let l=!1;if(s.forEach((n,i)=>{let r=$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[n]}]`).children("img").val();if(i!=r){$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[n]}]`).children("img").removeClass(`rot${r}`);let i=(0,$kUBvx.FACE_ROTATIONS)[n].clone();i.applyAxisAngle($kUBvx.RULE_ORDER[n],s[n]*Math.PI/2),e.patches[n].alignDir=i.round(),$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[n]}]`).children("img").val(s[n]),$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[n]}]`).children("img").addClass(`rot${s[n]}`),l=!0}}),a.forEach((n,i)=>{if(e.patches[i].color!=n){e.patches[i].color=a[i],$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[i]}]`).children("input").val(a[i]);let n=0!=a[i]?(0,$7UxrJ.patchColor)(Math.abs(a[i])-1):"white";$4eae0a726ab50395$exports(t).children(`[title=${$7UxrJ.FACE_NAMES[i]}]`).css("background-color",n),l=!0}}),"conditionals"in e)for(let t in n)e.conditionals[t]=n[t].replace("/s/g","");else{let t=!1;n.patches.forEach((n,i)=>{"state_var"in n&&(e.patches[i].state_var=n.state_var,t=!0),"activation_var"in n&&(e.patches[i].activation_var=n.activation_var,t=!0)});let i=0;n.effects.forEach((n,r)=>{r in e.effects?("target"in n&&e.effects[r-i].target!=n.target&&(n.target>0?e.effects[r-i].target=n.target:(e.effects.splice(r-i,-1),i++),t=!0),"sources"in n&&e.effects[r-i].sources!=n.sources&&(e.effects[r-i].sources=n.sources,l=!0)):e.effects.push(n)}),t&&(l=!0,e.update_state_size())}l&&(window.system.refresh_piecewise_staging(),$dee51d581a1bcde1$export$722fbec263ad908a()),document.body.removeChild(i)});let f=document.createElement("button");f.innerHTML="Cancel",i.appendChild(f),f.addEventListener("click",e=>{document.body.removeChild(i)}),document.body.appendChild(i),$4eae0a726ab50395$exports(i).css("top",Math.min($4eae0a726ab50395$exports(t).offset().top,window.innerHeight-$4eae0a726ab50395$exports(i).height()-25))}fetch($parcel$interopDefault($4075ddc1ab0773a3$exports)).then(e=>e.text()).then(e=>{}).catch(e=>console.error("Error loading SVG:",e));const $dee51d581a1bcde1$export$634d990851ea73e0=[[2,2],[0,2],[1,0],[1,2],[1,3],[1,1]],$dee51d581a1bcde1$export$86e0bccb7af759bb=[1,1,0,0,1,-1];let $dee51d581a1bcde1$export$b10cc0e58a847650=800,$dee51d581a1bcde1$var$row_h=325;function $dee51d581a1bcde1$export$b55c97a8eb00c5f5(){let e=$4eae0a726ab50395$exports("#rule-display-canvas");e.empty();var t=$jDp01.SVG("#rule-display-canvas");$dee51d581a1bcde1$var$big_cum_x=0,$dee51d581a1bcde1$var$big_cum_y=0;let n=$dee51d581a1bcde1$export$b10cc0e58a847650;window.system.cube_types.forEach(e=>{$dee51d581a1bcde1$var$drawCubeType(t,e.type_id),$dee51d581a1bcde1$var$big_cum_x>$dee51d581a1bcde1$export$b10cc0e58a847650&&(n=Math.max(n,$dee51d581a1bcde1$var$big_cum_x),$dee51d581a1bcde1$var$big_cum_x=0,$dee51d581a1bcde1$var$big_cum_y+=$dee51d581a1bcde1$var$row_h)}),e.attr("width",`${n}`),e.attr("height",`${$dee51d581a1bcde1$var$big_cum_y+$dee51d581a1bcde1$var$row_h}`)}const $dee51d581a1bcde1$var$FACE_SQUARE_W=64,$dee51d581a1bcde1$var$FACE_FIG_PAD=12;function $dee51d581a1bcde1$var$drawCubeType(e,t){let n,i,r,s,a,o=window.system.cube_types[t],l=$dee51d581a1bcde1$var$big_cum_x,u=$dee51d581a1bcde1$var$big_cum_y,c=e.group(),h=e.marker(10,10,function(e){e.path("M 0 0 L 10 5 L 0 10 z").fill("black")});for(c.transform({translateX:l,translateY:u}),n=0;n<$kUBvx.RULE_ORDER.length;n++){[l,u]=$dee51d581a1bcde1$export$634d990851ea73e0[n];let e=(0,$kUBvx.selectColor)(t,57,48);if(c.rect($dee51d581a1bcde1$var$FACE_SQUARE_W,$dee51d581a1bcde1$var$FACE_SQUARE_W).move(l*$dee51d581a1bcde1$var$FACE_SQUARE_W,u*$dee51d581a1bcde1$var$FACE_SQUARE_W).fill(e),0!=o.patches[n].color){let e=(0,$7UxrJ.patchColor)(o.patches[n].color),t=(-(2/Math.PI*(0,$kUBvx.signed_axis_angle)($kUBvx.FACE_ROTATIONS[n],o.patches[n].alignDir,$kUBvx.RULE_ORDER[n]))+$dee51d581a1bcde1$export$86e0bccb7af759bb[n])*90;c.path("m 30,85 0,-45 10,0 0,-15 22,0 0,15 10,0 0, 45 z").fill(e).stroke({color:o.patches[n].color>0?"black":"white",width:3.5}).transform({scale:.5}).transform({translateX:l*$dee51d581a1bcde1$var$FACE_SQUARE_W-20,translateY:u*$dee51d581a1bcde1$var$FACE_SQUARE_W-20},!0).transform({rotate:t},!0)}}let f=3*$dee51d581a1bcde1$var$FACE_SQUARE_W+2*$dee51d581a1bcde1$var$FACE_FIG_PAD;function d(e,t,n,i,r=!1,s=1.25){let a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))*s,o=r?"red":"green";c.path(`M ${e} ${t} A ${a} ${a} 0 0 1 ${n} ${i}`).stroke(o).fill("none").marker("end",h)}function p(e){return(e+.5)*$dee51d581a1bcde1$var$FACE_SQUARE_W}function m(e,t="left"){console.assert(e>-o.state_size()-1),console.assert(e<+o.state_size()+1);let n=y+v*("left"==t?0:1);return[n+=6*("left"==t?-1:1),(e+.5)*v+_]}function g(e,t,n,i){let r,s;let a=e<y?"left":"right";[r,s]=m(n,a),i||(i=(e+r)/2);let o=(t+s)/2;c.path(`M ${e} ${t} 
						S ${i} ${t} ${i} ${o}
						S ${i} ${s} ${r} ${s}`).stroke("green").fill("none").marker("end",h)}if("effects"in o&&o.effects.length>0){let e,t;var v=$dee51d581a1bcde1$var$row_h/(2*o.state_size()+3),_=$dee51d581a1bcde1$var$row_h/2-1.5*v,y=f+=2*$dee51d581a1bcde1$var$FACE_FIG_PAD;f+=v;for(let e=-o.state_size();e<o.state_size()+1;e++)c.rect(v,v).move(y,_+e*v).stroke("black").fill("white"),c.text(`${e}`).move(y+v/2,_+(e+.5)*v).font({size:10,anchor:"middle"});for(let e=0;e<$kUBvx.RULE_ORDER.length;e++)0!=o.patches[e].color&&(0!=o.patches[e].state_var&&([i,s]=$dee51d581a1bcde1$export$634d990851ea73e0[e],g(p(i),p(s),o.patches[e].state_var)),0!=o.patches[e].activation_var&&([i,s]=m(o.patches[e].activation_var),[r,a]=$dee51d581a1bcde1$export$634d990851ea73e0[e],d(i,s,p(r),p(a),o.patches[e].activation_var<0)));f+=2*$dee51d581a1bcde1$var$FACE_FIG_PAD,o.effects.forEach((n,r)=>{let a,o,l=n.sources.map(e=>m(e,"right"));[e,t]=m(n.target,"right"),1==n.sources.length?(a=v,o=l[0][1]-v/2):(a=.75*v*l.length,o=l.reduce((e,t)=>e+t[1]/l.length,0)),c.path(`M ${f} ${o} 
							h ${.25*a}
							a ${a/2} ${a/2} 0 0 1 0 ${a}
							h ${-(.25*a)}
							z`).stroke("black").fill("white"),l.forEach((e,t)=>{[i,s]=e;let r=f-5,u=o+(t+1)*a/(l.length+1);d(i,s,r,u,n.sources[t]<0,4)}),f+=.75*a,s=o+a/2;let u=f+Math.sqrt(Math.abs(o+a/2-t));g(f,s,n.target,u),f+=22,1==n.sources.length&&(f-=10)})}c.text(o.typeName).move(96,275).font({size:20,anchor:"middle"}),$dee51d581a1bcde1$var$big_cum_x+=f}function $dee51d581a1bcde1$export$5c166ded9e40e777(e){let t=Object.entries(e.cube_types).map(([e,t],n)=>("type_id"in t||(t.type_id=n),(0,$7UxrJ.cubeTypeFromJSON)(t,t.typeName)));window.system=new $48f4b0b26fc46dd9$export$def098fac4664e42(window.scene,e.cubes.length,100,!1,!0,window.system.envbrowser),t.forEach($dee51d581a1bcde1$export$3ef46b14ba3e1099),e.cubes.forEach(e=>{let n=e.type,i=new $ilwiq.Vector3(e.position.x,e.position.y,e.position.z),r=new $ilwiq.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w),s=window.system.instantiateCube(t[n],e.name,i);s.rotate(r),s.set_state(e.state),window.system.addParticle(s)}),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}let $dee51d581a1bcde1$var$SELECTED_BTN_BG="grey",$dee51d581a1bcde1$var$UNSELECTED_BTN_BG="white";function $dee51d581a1bcde1$export$722fbec263ad908a(){window.system.regenerate(),$4eae0a726ab50395$exports("#display-rule-panel").is(":visible")&&$dee51d581a1bcde1$export$b55c97a8eb00c5f5(),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $dee51d581a1bcde1$export$229c72e5fdee233b(){$4eae0a726ab50395$exports(".stepctrlbtn").css("background-color",$dee51d581a1bcde1$var$UNSELECTED_BTN_BG),window.clearTimeout($dee51d581a1bcde1$var$stepTimeoutID),$4eae0a726ab50395$exports("#pause").css("background-color",$dee51d581a1bcde1$var$SELECTED_BTN_BG)}function $dee51d581a1bcde1$export$fbb4d68fe60c1629(e=0,t){function n(){$dee51d581a1bcde1$var$doStep(),window.system.isProcessingComplete()||($dee51d581a1bcde1$var$stepTimeoutID=window.setTimeout(n,e))}$4eae0a726ab50395$exports(".stepctrlbtn").css("background-color",$dee51d581a1bcde1$var$UNSELECTED_BTN_BG),window.clearTimeout($dee51d581a1bcde1$var$stepTimeoutID),$dee51d581a1bcde1$var$stepTimeoutID=window.setTimeout(n,e),console.log(`Setting timer ${$dee51d581a1bcde1$var$stepTimeoutID} with interval ${e}`),t&&$4eae0a726ab50395$exports(t).css("background-color",$dee51d581a1bcde1$var$SELECTED_BTN_BG)}function $dee51d581a1bcde1$var$doStep(){window.system.step(),$4eae0a726ab50395$exports("#stepcount").html(`Step: ${window.system.numSteps()}`);let e=parseInt($4eae0a726ab50395$exports("#stepto").val());(0==window.system.numMovePositions()||e<=window.system.numSteps()&&0!=e)&&$dee51d581a1bcde1$export$229c72e5fdee233b(),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}const $573019d054676ac0$var$rolloverMatColor=16711680;let $573019d054676ac0$var$rollOverMaterial=new $ilwiq.MeshLambertMaterial({color:$573019d054676ac0$var$rolloverMatColor,opacity:.5,transparent:!0}),$573019d054676ac0$var$rollOverGeo=new $ilwiq.BoxGeometry(.5,.5,.5);$573019d054676ac0$var$rollOverMesh=new $ilwiq.Mesh($573019d054676ac0$var$rollOverGeo,$573019d054676ac0$var$rollOverMaterial);const $573019d054676ac0$var$cubeGeo=new $ilwiq.BoxGeometry(.75,.75,.75),$573019d054676ac0$var$cubeMaterial=new $ilwiq.MeshLambertMaterial({color:4473924,opacity:1}),$573019d054676ac0$var$connectorGeo=new $ilwiq.BoxGeometry(.45,.45,.5),$573019d054676ac0$var$connectoryMaterial=new $ilwiq.MeshLambertMaterial({color:16646220});new $ilwiq.SphereGeometry(.35,32,16);let $573019d054676ac0$var$voxels=[],$573019d054676ac0$var$voxel_map=new Map,$573019d054676ac0$var$connectors=new Map,$573019d054676ac0$var$numNanoparticleTypes=0,$573019d054676ac0$var$npTypeCounts={},$573019d054676ac0$var$activeNPType=-1,$573019d054676ac0$var$nanoparticles={},$573019d054676ac0$var$nanoparticleObjects={},$573019d054676ac0$var$extraConnections=[],$573019d054676ac0$var$extraConnMap=new Map,$573019d054676ac0$var$connectionCounter=0;$4eae0a726ab50395$exports("#addTypeBtn").on("click",$573019d054676ac0$var$addNanoparticleType),$4eae0a726ab50395$exports("#saveCoordMatrixBtn").on("click",$573019d054676ac0$var$saveCoordMatrix),$4eae0a726ab50395$exports("#download-spec").on("click",$573019d054676ac0$var$saveSolveSpec),$4eae0a726ab50395$exports("#nanoparticle-select-none").on("click",()=>$573019d054676ac0$var$setActiveNP(-1)),$4eae0a726ab50395$exports("getFaRule").on("mouseover",e=>{e.target.href="../?decRule="+(0,$7UxrJ.ruleToDec)($573019d054676ac0$var$getFullyAdressableRule())}),$4eae0a726ab50395$exports("#solveStructure").on("click",e=>{$573019d054676ac0$var$findMinimalRule()}),$48f4b0b26fc46dd9$export$70cebd2f263e5940(),$573019d054676ac0$var$initSolver(),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99(),$4eae0a726ab50395$exports(function(){$573019d054676ac0$var$refreshCrystal()});const $573019d054676ac0$var$posToString=$kUBvx.vecToStr;function $573019d054676ac0$var$getVoxel(e){return $573019d054676ac0$var$voxel_map.has((0,$kUBvx.vecToStr)(e))?$573019d054676ac0$var$voxel_map.get((0,$kUBvx.vecToStr)(e)):null}function $573019d054676ac0$var$addVoxel(e){let t=new $ilwiq.Mesh($573019d054676ac0$var$cubeGeo,$573019d054676ac0$var$cubeMaterial.clone());return t.position.copy(e),t.name="voxel",window.scene.add(t),console.log(t.position.toArray()),$573019d054676ac0$var$voxels.push(t),$573019d054676ac0$var$voxel_map.set((0,$kUBvx.vecToStr)(e),t),t}function $573019d054676ac0$var$deleteVoxel(e){$573019d054676ac0$var$voxel_map.delete((0,$kUBvx.vecToStr)(e.position)),window.scene.remove(e),$573019d054676ac0$var$voxels.splice($573019d054676ac0$var$voxels.indexOf(e),1);let t=[];$573019d054676ac0$var$connectors.forEach((n,i)=>{i.includes($573019d054676ac0$var$posToString(e.position))&&t.push([n,i])}),console.log(`Removing ${t.length} connectors: ${t.map(e=>e[1])}`),t.forEach(e=>{let[t,n]=e;window.scene.remove(t),$573019d054676ac0$var$connectors.delete(n)}),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $573019d054676ac0$var$addNanoparticleType(){let e=$573019d054676ac0$var$numNanoparticleTypes,t=$4eae0a726ab50395$exports(`<label for='np-${e}'>Type ${e}</label>`),n=$4eae0a726ab50395$exports(`<input name='nptype' type='radio' id='nanoparticle-select-type${e}'>`),i=$4eae0a726ab50395$exports(`<img src=${$parcel$interopDefault($c971b71faaf36555$exports)} style='height:14px;' alt='Remove'>`),r=$4eae0a726ab50395$exports(`<span id="npcount${e}">Count: 0</span>`),s=$4eae0a726ab50395$exports(`<span id='nptype${e}' style="background-color: ${(0,$kUBvx.selectColor)(e)};"></span>`);s.append("<br>"),s.append(t),s.append(n),s.append(r),s.append(i),$573019d054676ac0$var$npTypeCounts[`${e}`]=0,$4eae0a726ab50395$exports("#nanoparticles").append(s),$573019d054676ac0$var$numNanoparticleTypes+=1,n.on("click",function(){$573019d054676ac0$var$setActiveNP(e)}),i.on("click",function(){$573019d054676ac0$var$rmnptype(e)})}function $573019d054676ac0$var$setActiveNP(e){$573019d054676ac0$var$activeNPType=e}function $573019d054676ac0$var$rmnptype(e){$4eae0a726ab50395$exports(`#nptype${e}`).remove()}function $573019d054676ac0$var$constructNPMaterial(e){return new $ilwiq.MeshLambertMaterial({color:(0,$kUBvx.selectColor)(e)})}function $573019d054676ac0$var$connectionToString(e,t){let[n,i]=[e,t].map(e=>$573019d054676ac0$var$posToString(e)).sort();return`[${n}, ${i}]`}function $573019d054676ac0$var$getSolveSpec(){let[e,t]=$573019d054676ac0$var$getCurrentTop(3),n=new $2ff5c53210b96d91$export$6c9cc06fe674a4d2(e);return n.torsion=$4eae0a726ab50395$exports("#torsionalPatches").prop("checked"),n.assign_nS($573019d054676ac0$var$species_range()),n.assign_nC($573019d054676ac0$var$color_range()),n.forbid_self_interact=!$4eae0a726ab50395$exports("#allowSelfInteract").prop("checked"),$573019d054676ac0$var$numNanoparticleTypes>0&&$573019d054676ac0$var$getCurrentCoords().forEach((e,t)=>{(0,$kUBvx.vecToStr)(e) in $573019d054676ac0$var$nanoparticles&&n.set_nanoparticle(t,$573019d054676ac0$var$nanoparticles[(0,$kUBvx.vecToStr)(e)])}),$573019d054676ac0$var$extraConnections.length>0&&(n.extraConnections=$573019d054676ac0$var$getExternalConnectionTop(),$573019d054676ac0$var$extraConnections.some(e=>e.breakscrystal())&&(n.crystal=!1)),n.maxAltTries=$4eae0a726ab50395$exports("#nTries").val(),n}function $573019d054676ac0$var$saveSolveSpec(){let e=$573019d054676ac0$var$getSolveSpec();function t(e,t){if("bindings"==e)return Array.from(t.entries()).map(([[e,t],[n,i]])=>[e,t,n,i]);if("nanoparticles"!=e)return t;{let e={};return[...t.entries()].forEach(([t,n])=>{e[t]=n}),e}}(0,$kUBvx.saveString)(JSON.stringify(e,t,2),"polysat.json")}function $573019d054676ac0$var$clearTopology(){for(;$573019d054676ac0$var$voxels.length>0;)$573019d054676ac0$var$deleteVoxel($573019d054676ac0$var$voxels[0]);$573019d054676ac0$var$nanoparticles={},$573019d054676ac0$var$npTypeCounts={},$573019d054676ac0$var$nanoparticleObjects={},$573019d054676ac0$var$extraConnMap.clear(),$573019d054676ac0$var$connectionCounter=0,$573019d054676ac0$var$connectors.clear(),$573019d054676ac0$var$voxels=[],$573019d054676ac0$var$voxel_map.clear(),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $573019d054676ac0$var$loadSolveSpec(e){$573019d054676ac0$var$clearTopology(),document.getElementById("torsionalPatches").checked=e.torsion;let t=new Map;t.set(0,new $ilwiq.Vector3);let n=new Set;for(;n.size<e.bindings.size;)for(let[[i,r],[s,a]]of e.bindings){let e=`${i}.${s}`;if(!n.has(e)){if(console.assert((0,$kUBvx.RULE_ORDER)[r].clone().negate().equals($kUBvx.RULE_ORDER[a]),"Odd binding"),t.has(i)&&t.has(s));else if(t.has(i))t.set(s,t.get(i).clone().add($kUBvx.RULE_ORDER[r]));else if(t.has(s))t.set(i,t.get(s).clone().sub($kUBvx.RULE_ORDER[r]));else{console.log("should only print once");continue}n.add(e)}}let i=new $ilwiq.Vector3,r=0;for(let e of t.values())i.add(e),r++;for(let e of(i.divideScalar(r).round(),t.values()))e.sub(i);if(e.num_nanoparticle_types()>0)for(let t=0;t<e.num_nanoparticle_types();t++)$573019d054676ac0$var$addNanoparticleType();for(let[n,i]of t)if(null===$573019d054676ac0$var$getVoxel(i)){let t=$573019d054676ac0$var$addVoxel(i);console.log(t.position.toArray()),"nNPTypes"in e&&(e.num_nanoparticle_types()>1?`${n}` in e.nanoparticles&&$573019d054676ac0$var$addNanoparticle(t,e.nanoparticles[`${n}`]):n in e.nanoparticles&&$573019d054676ac0$var$addNanoparticle(t,0))}for(let[[n,i],[r,s]]of e.bindings){let e=t.get(n),i=t.get(r),s=$573019d054676ac0$var$connectionToString(e,i);if(!$573019d054676ac0$var$connectors.has(s)){let t=new $ilwiq.Mesh($573019d054676ac0$var$connectorGeo,$573019d054676ac0$var$connectoryMaterial);t.position.copy(e.clone().add(i).divideScalar(2)),t.lookAt(i),window.scene.add(t),$573019d054676ac0$var$connectors.set(s,t)}}if("extraConnections"in e)for(let[t,n,i,r]of e.extraConnections)$573019d054676ac0$var$addCrystalConnection($573019d054676ac0$var$voxels[t],$kUBvx.RULE_ORDER[n]),$573019d054676ac0$var$addCrystalConnection($573019d054676ac0$var$voxels[i],$kUBvx.RULE_ORDER[r])}function $573019d054676ac0$var$handleFile(e=document.getElementById("load").files[0]){new Response(e).json().then(e=>{let t=new $2ff5c53210b96d91$export$6c9cc06fe674a4d2(e.bindings,3,e.torsion);"nanoparticles"in e&&e.nanoparticles.length>0&&[...e.nanoparticles.entries()].forEach(([e,n])=>{t.set_nanoparticle(parseInt(e),n)}),$573019d054676ac0$var$loadSolveSpec(t)},e=>{console.error("Could not read file: "+e)})}function $573019d054676ac0$var$color_range(){return[$4eae0a726ab50395$exports("#minNc").val(),$4eae0a726ab50395$exports("#maxNC").val()]}function $573019d054676ac0$var$species_range(){return[$4eae0a726ab50395$exports("#minNt").val(),$4eae0a726ab50395$exports("#maxNt").val()]}function $573019d054676ac0$var$getFullyAdressableRule(){let e=[],t=new Map,n=$573019d054676ac0$var$getCurrentCoords(),i=[0,0,0],r=[new $ilwiq.Vector3(1,0,0),new $ilwiq.Vector3(0,1,0),new $ilwiq.Vector3(0,0,1)];n.forEach(e=>{(0,$kUBvx.RULE_ORDER).forEach(t=>{let n=e.clone().add(t);if($573019d054676ac0$var$connectors.has(`[${$573019d054676ac0$var$posToString(e)}, ${$573019d054676ac0$var$posToString(n)}]`)){for(let e=0;e<3;e++)if((0,$kUBvx.vectorAbs)(t).equals(r[e])){i[e]++;break}}})});let s=Math.min(...i),a=r.find((e,t)=>i[t]===s);n.forEach((n,i)=>{let r=[];(0,$kUBvx.FACE_ROTATIONS).forEach((e,t)=>{let n=e;(0,$kUBvx.vectorAbs)($kUBvx.RULE_ORDER[t]).equals(a)||(n=a),r.push({color:0,alignDir:n})}),e.push(r),t.set($573019d054676ac0$var$posToString(n),i)});let o=1;return n.forEach((n,i)=>{(0,$kUBvx.RULE_ORDER).forEach((r,s)=>{let a=n.clone().add(r);if($573019d054676ac0$var$connectors.has(`[${(0,$kUBvx.vecToStr)(n)}, ${$573019d054676ac0$var$posToString(a)}]`)){let n=r.clone().negate(),l=(0,$kUBvx.RULE_ORDER).findIndex(e=>n.equals(e)),u=t.get($573019d054676ac0$var$posToString(a));e[i][s].color=o,e[u][l].color=-o,e[u][l].alignDir=e[i][s].alignDir,o++}})}),e.map((e,t)=>new $7UxrJ.DynamicPolycubeCubeType(t,e.map((e,t)=>new $cqQJN.PolycubePatch(e.color,t,e.alignDir))))}function $573019d054676ac0$var$getCurrentCoords(){return $573019d054676ac0$var$voxels.map(e=>e.position)}function $573019d054676ac0$var$initSolver(){window.scene.add($573019d054676ac0$var$rollOverMesh),window.raycaster=new $ilwiq.Raycaster,window.mouse=new $ilwiq.Vector2,window.canvas.addEventListener("mousemove",$573019d054676ac0$var$onDocumentMouseMove,!1),window.canvas.addEventListener("mousedown",$573019d054676ac0$var$onDocumentMouseDown,!1),document.addEventListener("keydown",e=>{"s"==e.key&&e.ctrlKey&&(e.preventDefault(),this.getCoordinateFile())}),$573019d054676ac0$var$addVoxel(new $ilwiq.Vector3(0,0,0)),$573019d054676ac0$var$CamPos3D=new $ilwiq.Vector3(5,8,13)}function $573019d054676ac0$var$onDocumentMouseMove(e){e.preventDefault(),window.mouse.set(e.clientX/window.innerWidth*2-1,-(e.clientY/window.innerHeight*2)+1),window.raycaster.setFromCamera(window.mouse,window.camera);let t=window.raycaster.intersectObjects($573019d054676ac0$var$voxels);if(t.length>0){$573019d054676ac0$var$rollOverMesh.visible=!0;let n=t[0];$573019d054676ac0$var$rollOverMesh.position.copy(n.object.position),e.shiftKey?$573019d054676ac0$var$rollOverMesh.scale.setScalar(2):($573019d054676ac0$var$rollOverMesh.scale.setScalar(1),$573019d054676ac0$var$rollOverMesh.position.add(n.face.normal.clone().divideScalar(2))),e.ctrlKey?$573019d054676ac0$var$rollOverMaterial.color=new $ilwiq.Color((0,$kUBvx.selectColor)($573019d054676ac0$var$connectionCounter+1)):$573019d054676ac0$var$rollOverMaterial.color=new $ilwiq.Color($573019d054676ac0$var$rolloverMatColor)}else $573019d054676ac0$var$rollOverMesh.visible=!1;$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $573019d054676ac0$var$addInternalConnection(e,t){console.assert(e.distanceTo(t)-1<1e-5);let n=$573019d054676ac0$var$connectionToString(e,t);if(!$573019d054676ac0$var$connectors.has(n)){let i=new $ilwiq.Mesh($573019d054676ac0$var$connectorGeo,$573019d054676ac0$var$connectoryMaterial);i.position.copy(e.clone().add(t).divideScalar(2)),i.lookAt(t),window.scene.add(i),$573019d054676ac0$var$connectors.set(n,i)}}function $573019d054676ac0$var$onDocumentMouseDown(e){if(0==e.button){e.preventDefault(),window.mouse.set(e.clientX/window.innerWidth*2-1,-(e.clientY/window.innerHeight*2)+1),window.raycaster.setFromCamera(window.mouse,window.camera);let t=window.raycaster.intersectObjects($573019d054676ac0$var$voxels);if(t.length>0){let n=t[0];if(e.shiftKey)$573019d054676ac0$var$voxels.length>1&&$573019d054676ac0$var$deleteVoxel(n.object);else if(e.altKey){if($573019d054676ac0$var$activeNPType>-1){if((0,$kUBvx.vecToStr)(n.object.position) in $573019d054676ac0$var$nanoparticles){$573019d054676ac0$var$nanoparticles[(0,$kUBvx.vecToStr)(n.object.position)]=$573019d054676ac0$var$activeNPType,$573019d054676ac0$var$nanoparticleObjects[(0,$kUBvx.vecToStr)(n.object.position)].material=$573019d054676ac0$var$constructNPMaterial($573019d054676ac0$var$activeNPType);let e=$573019d054676ac0$var$nanoparticles[(0,$kUBvx.vecToStr)(n.object.position)];$573019d054676ac0$var$npTypeCounts[`${e}`]--,$4eae0a726ab50395$exports(`#npcount${e}`).text("Count:"+$573019d054676ac0$var$npTypeCounts[`${e}`]),$573019d054676ac0$var$npTypeCounts[`${$573019d054676ac0$var$activeNPType}`]++,$4eae0a726ab50395$exports(`#npcount${$573019d054676ac0$var$activeNPType}`).text("Count:"+$573019d054676ac0$var$npTypeCounts[`${$573019d054676ac0$var$activeNPType}`])}else $573019d054676ac0$var$addNanoparticle(n.object,$573019d054676ac0$var$activeNPType)}else if((0,$kUBvx.vecToStr)(n.object.position) in $573019d054676ac0$var$nanoparticles){let e=$573019d054676ac0$var$nanoparticles[(0,$kUBvx.vecToStr)(n.object.position)];delete $573019d054676ac0$var$nanoparticles[$kUBvx.vecToStr(n.object.position)],window.scene.remove($573019d054676ac0$var$nanoparticleObjects[(0,$kUBvx.vecToStr)(n.object.position)]),delete $573019d054676ac0$var$nanoparticleObjects[$kUBvx.vecToStr(n.object.position)],n.object.material.transparent=!1,n.object.material.opacity=1,$573019d054676ac0$var$npTypeCounts[`${e}`]--,$4eae0a726ab50395$exports(`#npcount${e}`).text("Count:"+$573019d054676ac0$var$npTypeCounts[`${e}`])}}else if(e.ctrlKey)$573019d054676ac0$var$addCrystalConnection(n.object,n.face.normal);else{let e=$573019d054676ac0$var$addVoxel(n.object.position.clone().add(n.face.normal)).position.clone(),t=n.object.position.clone();console.assert(!e.equals(t)),$573019d054676ac0$var$addInternalConnection(e,t)}$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}}}function $573019d054676ac0$var$addNanoparticle(e,t){let n=new $ilwiq.SphereGeometry(.49,32,16),i=new $ilwiq.Mesh(n,$573019d054676ac0$var$constructNPMaterial(t));i.position.copy(e.position),$573019d054676ac0$var$nanoparticleObjects[(0,$kUBvx.vecToStr)(e.position)]=i,$573019d054676ac0$var$nanoparticles[(0,$kUBvx.vecToStr)(e.position)]=t,e.material.transparent=!0,e.material.opacity=.1,window.scene.add(i),$573019d054676ac0$var$npTypeCounts[`${t}`]++,$4eae0a726ab50395$exports(`#npcount${t}`).text("Count:"+$573019d054676ac0$var$npTypeCounts[`${t}`])}$4eae0a726ab50395$exports("#upload-spec-btn").on("click",function(){$4eae0a726ab50395$exports("#upload-spec").trigger("click")}),$4eae0a726ab50395$exports("#upload-spec").on("change",function(e){new FileReader().onload=function(e){"string"==typeof this.result?$dee51d581a1bcde1$export$5c166ded9e40e777(JSON.parse(this.result)):console.log("Bad system file I guess")},$573019d054676ac0$var$handleFile(e.target.files[0])});class $573019d054676ac0$var$ExtraConnection{c1;d1;c2;d2;m1;m2;idx;constructor(e,t,n=null,i=null){this.c1=e,this.d1=t.clone().normalize(),this.c2=n,this.d2=null!=i?i.clone.normalize():null,this.idx=$573019d054676ac0$var$extraConnections.length}toString(){let[[e,t],[n,i]]=[[this.c1,this.d1],[this.c2,this.d2]].sort((e,t)=>e[0].length()-t[0].length());return`${(0,$kUBvx.vecToStr)(e)}:${$7UxrJ.FACE_NAMES[(0,$kUBvx.RULE_ORDER).indexOf(t)]}<->${(0,$kUBvx.vecToStr)(n)}:${$7UxrJ.FACE_NAMES[(0,$kUBvx.RULE_ORDER).indexOf(i)]}`}full(){return null!=this.c2}getMaterial(){return new $ilwiq.MeshLambertMaterial({color:(0,$kUBvx.selectColor)($573019d054676ac0$var$connectionCounter+1)})}breakscrystal(){return null!=this.d2&&!this.d1.clone().multiplyScalar(-1).equals(this.d2)}}function $573019d054676ac0$var$addCrystalConnection(e,t){let n=new $ilwiq.Mesh($573019d054676ac0$var$connectorGeo);if(n.lookAt(t),n.position.copy(e.position.clone().add(t.clone().divideScalar(2))),$573019d054676ac0$var$extraConnections.length>0&&!$573019d054676ac0$var$extraConnections[$573019d054676ac0$var$extraConnections.length-1].full()){let i=$573019d054676ac0$var$extraConnections[$573019d054676ac0$var$extraConnections.length-1];if(i.c1.equals(e.position)&&i.d1.equals(t.clone().normalize()))return;i.c2=e.position.clone(),i.d2=t.clone().normalize(),i.m2=n}else $573019d054676ac0$var$extraConnections.push(new $573019d054676ac0$var$ExtraConnection(e.position.clone(),t)),$573019d054676ac0$var$extraConnections[$573019d054676ac0$var$extraConnections.length-1].m1=n;let i=$573019d054676ac0$var$extraConnections[$573019d054676ac0$var$extraConnections.length-1];if(n.material=i.getMaterial(),window.scene.add(n),i.full()){let e=$4eae0a726ab50395$exports(`<img src=${$parcel$interopDefault($c971b71faaf36555$exports)} style='height:14px;' alt='Remove'>`);e.on("click",function(){$573019d054676ac0$var$rmConn(i.idx)});let t=$4eae0a726ab50395$exports(`<span id="connection${i.idx}">${i.toString()}&Tab;</span>`);t.append(e),i.breakscrystal()&&t.append($4eae0a726ab50395$exports(`<img src=${$parcel$interopDefault($8095ba9ff5d67952$exports)} alt="Warning!" style='height:14px;'>`)),t.append($4eae0a726ab50395$exports("<br>")),$4eae0a726ab50395$exports("#connections").append(t),$573019d054676ac0$var$extraConnMap.set([(0,$kUBvx.vecToStr)(i.c1),(0,$kUBvx.RULE_ORDER).indexOf(i.d1)],i),$573019d054676ac0$var$extraConnMap.set([(0,$kUBvx.vecToStr)(i.c2),(0,$kUBvx.RULE_ORDER).indexOf(i.d2)],i),$573019d054676ac0$var$connectionCounter++}$573019d054676ac0$var$refreshCrystal(),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}function $573019d054676ac0$var$rmConn(e){let t=$573019d054676ac0$var$extraConnections[e];$573019d054676ac0$var$extraConnections.splice(e,1),$4eae0a726ab50395$exports(`#connection${e}`).remove(),window.scene.remove(t.m1),window.scene.remove(t.m2),$573019d054676ac0$var$extraConnMap.delete([(0,$kUBvx.vecToStr)(t.c1),(0,$kUBvx.RULE_ORDER).indexOf(t.d1)]),$573019d054676ac0$var$extraConnMap.delete([(0,$kUBvx.vecToStr)(t.c2),(0,$kUBvx.RULE_ORDER).indexOf(t.d2)]),$48f4b0b26fc46dd9$export$b3890eb0ae9dca99(),$573019d054676ac0$var$refreshCrystal()}function $573019d054676ac0$var$refreshCrystal(){let e=$573019d054676ac0$var$extraConnections.filter(e=>e.breakscrystal());0==e.length?$4eae0a726ab50395$exports("#willcrystal").text("No bad connections! May or may not form crystal (no promises)."):$4eae0a726ab50395$exports("#willcrystal").text("Will not form crystal - bad connections "+e.map(e=>e.toString()).join(",")+".")}function $573019d054676ac0$var$smartEnumerate(e,t,n=1,i=1){let r=[];for(let s of(0,$kUBvx.range)(n,e+1))for(let e of(0,$kUBvx.range)(i,t+1))r.push([s,e]);return r.sort((e,t)=>e[0]+e[1]-(t[0]+t[1]))}function $573019d054676ac0$var$getCurrentTop(e=3){console.assert(3==e);let t=$kUBvx.RULE_ORDER,n=[],i=[],r=[],s=[...$573019d054676ac0$var$connectors.keys()],a=$573019d054676ac0$var$getCurrentCoords();return a.forEach((e,o)=>{t.forEach((t,l)=>{let u=e.clone().add(t);if(s.includes($573019d054676ac0$var$connectionToString(e,u))){let e=a.findIndex(e=>e.equals(u));if(e<0)throw`${u} not in coordinates (${a})`;r.includes([o,e].sort().toString())||(n.push([o,l,e,l+(l%2==0?1:-1)]),r.push([o,e].sort().toString()))}else i.push([o,l])})}),[n,i]}function $573019d054676ac0$var$getExternalConnectionTop(e=3){let t=$573019d054676ac0$var$getCurrentCoords();return $573019d054676ac0$var$extraConnections.map(e=>[t.findIndex(t=>e.c1.equals(t)),(0,$kUBvx.RULE_ORDER).indexOf(e.d1),t.findIndex(t=>e.c2.equals(t)),(0,$kUBvx.RULE_ORDER).indexOf(e.d2)])}function $573019d054676ac0$var$saveCoordMatrix(){var e=[],t=[],n=[];$573019d054676ac0$var$getCurrentCoords().forEach(i=>{e.push(i.x),t.push(i.y),n.push(i.z)});let i="";i+=e.join(" ")+"\n"+t.join(" ")+"\n"+n.join(" "),(0,$kUBvx.saveString)(i,"coords_matrix.txt")}function $573019d054676ac0$var$countParticlesAndBindings(e){let t=e.map(e=>e[0]),n=e.map(e=>e[2]);return[Math.max(...t.concat(n))+1,e.length]}var $e373d4d4162d217a$exports={},$56b621a6dd25b2cb$exports={};$56b621a6dd25b2cb$exports=function(e,t,n){if(t===self.location.origin)return e;var i=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))};let $e373d4d4162d217a$var$url=new URL("simplifyWorker.ddf5a527.js",import.meta.url);function $573019d054676ac0$var$findMinimalRule(e=3,t=!0){document.getElementById("status").innerHTML="";let n=document.getElementById("maxNt").valueAsNumber,i=document.getElementById("maxNc").valueAsNumber,r=document.getElementById("minNt").valueAsNumber,s=document.getElementById("minNc").valueAsNumber,a=$573019d054676ac0$var$getFullyAdressableRule(),[o,l]=$573019d054676ac0$var$getCurrentTop(e),[u,c]=$573019d054676ac0$var$countParticlesAndBindings(o);$4eae0a726ab50395$exports("#explicitNcNs").prop("checked")&&console.warn("User-defined nC and nS not supported yet!"),$573019d054676ac0$var$updateStatus({status:"",rule:(0,$7UxrJ.ruleToDec)(a)},u,c);let h=new Worker($e373d4d4162d217a$exports);h.onmessage=function(e){let t=e.data,n=(0,$7UxrJ.parseDecRule)(t),i=(0,$kUBvx.getNt)(n),r=(0,$kUBvx.getNc)(n);$573019d054676ac0$var$updateStatus({status:"",rule:t},i,r),$573019d054676ac0$var$globalBest=Math.min($573019d054676ac0$var$globalBest,i+r)},h.postMessage((0,$7UxrJ.ruleToDec)(a)),n=n<0?u:Math.min(u,n),i=i<0?c:Math.min(c,i),$573019d054676ac0$var$workers=[];let f=document.getElementById("stopButton");f.onclick=()=>{$573019d054676ac0$var$workers.forEach(e=>{e.terminate(),$573019d054676ac0$var$updateStatus({status:""},e.nCubeTypes,e.nColors)}),f.style.visibility="hidden"},$573019d054676ac0$var$queue=$573019d054676ac0$var$smartEnumerate(n,i,r,s);let d=parseInt($4eae0a726ab50395$exports("#concurrency").val());if($573019d054676ac0$var$globalBest=1/0,$573019d054676ac0$var$root_spec=$573019d054676ac0$var$getSolveSpec(),window.Worker)for(;$573019d054676ac0$var$workers.length<d;)if($573019d054676ac0$var$queue.length>0)$573019d054676ac0$var$startNewWorker();else break}$e373d4d4162d217a$exports=$56b621a6dd25b2cb$exports($e373d4d4162d217a$var$url.toString(),$e373d4d4162d217a$var$url.origin,!0);class $573019d054676ac0$var$SATWorker extends Worker{nCubeTypes;nColors}var $85439cd79c59885d$exports={};function $573019d054676ac0$var$startNewWorker(){let[e,t]=$573019d054676ac0$var$queue.shift(),n=$573019d054676ac0$var$root_spec.cpy();n.assign_nC(t),n.assign_nS(e),$573019d054676ac0$var$updateStatus({status:"..."},e,t),console.log("Starting worker for "+e+" and "+t);let i=new $573019d054676ac0$var$SATWorker(new URL($85439cd79c59885d$exports),{type:"module"});i.nCubeTypes=e,i.nColors=t,$573019d054676ac0$var$workers.push(i),i.onmessage=function(n){let r=n.data;$573019d054676ac0$var$updateStatus(r,e,t),""==r.status&&document.getElementById("stopAtFirstSol").checked&&($573019d054676ac0$var$globalBest=Math.min($573019d054676ac0$var$globalBest,e+t),$573019d054676ac0$var$workers.forEach(n=>{n.nCubeTypes+n.nColors>$573019d054676ac0$var$globalBest&&($573019d054676ac0$var$updateStatus({status:""},n.nCubeTypes,n.nColors),n.terminate(),console.log(`Skipping ${t} colors and ${e} cube types`))}),$573019d054676ac0$var$filterInPlace($573019d054676ac0$var$workers,e=>e.nCubeTypes+e.nColors<=$573019d054676ac0$var$globalBest),$573019d054676ac0$var$filterInPlace($573019d054676ac0$var$queue,e=>e[0]+e[1]<=$573019d054676ac0$var$globalBest)),$573019d054676ac0$var$queue.length>0&&$573019d054676ac0$var$startNewWorker(),i.terminate(),$573019d054676ac0$var$filterInPlace($573019d054676ac0$var$workers,e=>e!=i),console.log(`${t} colors and ${e} cube types completed. ${$573019d054676ac0$var$queue.length} in queue`)};let r=JSON.parse(JSON.stringify(n));i.postMessage($b796f8545f443add$export$27ee64fae19f3541(r))}function $573019d054676ac0$var$filterInPlace(e,t){let n=0,i=0;for(;n<e.length;){let r=e[n];t(r,n,e)&&(e[i++]=r),n++}return e.length=i,e}function $573019d054676ac0$var$updateStatus(e,t,n){let i={"":`Satisfiable for ${t} cube types and ${n} colors`,"":`Satisfiable for ${t} cube types and ${n} colors, but will also assemble into unbounded shapes`,"?":`Satisfiable for ${t} cube types and ${n} colors, but will also assemble into other shapes`,"":`Not satisfiable for ${t} cube types and ${n} colors`,"...":"Working on it...","":"Skipped"},r={"":"rgba(126, 217, 118, 0.6)","":"rgba(39, 61, 128, 0.6)","?":"rgba(39, 61, 128, 0.6)","":"rgba(208, 47, 47, 0.6)","...":"rgba(50, 50, 50, 0.4)","":"rgba(50, 50, 50, 0.4)"},s=document.getElementById("status");for(;s.rows.length<t+1;)s.insertRow();for(;s.rows[0].cells.length<n+1;){let e=document.createElement("th");s.rows[0].appendChild(e),1!=s.rows[0].cells.length&&(e.innerHTML="N<sub>c</sub>="+(s.rows[0].cells.length-1))}let a=s.rows[t];if(0==a.cells.length){let e=document.createElement("th");a.appendChild(e),e.innerHTML="N<sub>t</sub>="+t}for(;a.cells.length<n+1;)a.insertCell();let o=a.cells[n];e.rule?o.innerHTML=`<a href="../?assemblyMode=stochastic&decRule=${e.rule}" target="_blank">${e.status}</a>`:"..."==e.status?o.innerHTML='<div class="busy">...</div>':o.innerHTML=e.status,o.title=i[e.status],o.style.background=r[e.status]}function $573019d054676ac0$var$generateCrystalLattice(e,t,n){for(let i of(console.assert(void 0!=e),console.assert(e>1,"Unit cell width must be greater than 1"),console.assert(void 0!=t),console.assert(t>1,"Unit cell height must be greater than 1"),console.assert(void 0!=n),console.assert(n>1,"Unit cell depth must be greater than 1"),$573019d054676ac0$var$clearTopology(),(0,$kUBvx.range)(e)))for(let e of(0,$kUBvx.range)(t))for(let t of(0,$kUBvx.range)(n))$573019d054676ac0$var$addVoxel(new $ilwiq.Vector3(i,e,t));for(let i of(0,$kUBvx.range)(e))for(let e of(0,$kUBvx.range)(t))for(let t of(0,$kUBvx.range)(n))for(let n of $kUBvx.RULE_ORDER)$573019d054676ac0$var$getVoxel(new(0,$ilwiq.Vector3)(i,e,t).add(n))&&$573019d054676ac0$var$addInternalConnection(new $ilwiq.Vector3(i,e,t),new(0,$ilwiq.Vector3)(i,e,t).add(n));for(let i of(0,$kUBvx.range)(e))for(let e of(0,$kUBvx.range)(t))for(let[t,r]of[[0,$kUBvx.RULE_ORDER[4]],[n-1,$kUBvx.RULE_ORDER[5]]])$573019d054676ac0$var$addCrystalConnection($573019d054676ac0$var$getVoxel(new $ilwiq.Vector3(i,e,t)),r);for(let i of(0,$kUBvx.range)(e))for(let e of(0,$kUBvx.range)(n))for(let[n,r]of[[0,$kUBvx.RULE_ORDER[2]],[t-1,$kUBvx.RULE_ORDER[3]]])$573019d054676ac0$var$addCrystalConnection($573019d054676ac0$var$getVoxel(new $ilwiq.Vector3(i,n,e)),r);for(let i of(0,$kUBvx.range)(t))for(let t of(0,$kUBvx.range)(n))for(let[n,r]of[[0,$kUBvx.RULE_ORDER[0]],[e-1,$kUBvx.RULE_ORDER[1]]])$573019d054676ac0$var$addCrystalConnection($573019d054676ac0$var$getVoxel(new $ilwiq.Vector3(n,i,t)),r);$48f4b0b26fc46dd9$export$b3890eb0ae9dca99()}$85439cd79c59885d$exports=new URL("solveWorker.92c9e745.js",import.meta.url).toString(),$4eae0a726ab50395$exports("#generate-crystal").on("click",function(){$573019d054676ac0$var$generateCrystalLattice(Number($4eae0a726ab50395$exports("#crystalX").val()),Number($4eae0a726ab50395$exports("#crystalY").val()),Number($4eae0a726ab50395$exports("#crystalZ").val()))});
//# sourceMappingURL=solve.8c5e3eeb.js.map
